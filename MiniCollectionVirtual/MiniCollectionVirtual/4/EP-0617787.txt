<DOC>
<DOCNO>EP-0617787</DOCNO> 
<TEXT>
<INVENTION-TITLE>
VEHICLE COMPASS WITH ELECTRONIC SENSOR
</INVENTION-TITLE>
<CLASSIFICATIONS>B60K3500	B60K3500	B60R108	G01R33025	G01R33025	G01C1700	B60R112	G01C1732	B60R108	G01C1738	B60R112	G01C1728	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>B60K	B60K	B60R	G01R	G01R	G01C	B60R	G01C	B60R	G01C	B60R	G01C	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>B60K35	B60K35	B60R1	G01R33	G01R33	G01C17	B60R1	G01C17	B60R1	G01C17	B60R1	G01C17	</CLASSIFICATIONS-FOURTH>
<APPLICANTS>
<APPLICANT-NAME>
DONNELLY CORP
</APPLICANT-NAME>
<APPLICANT-NAME>
DONNELLY CORPORATION
</APPLICANT-NAME>
</APPLICANTS>
<INVENTORS>
<INVENTOR-NAME>
SCHIERBEEK KENNETH L
</INVENTOR-NAME>
<INVENTOR-NAME>
SCHOFIELD KENNETH
</INVENTOR-NAME>
<INVENTOR-NAME>
SCHIERBEEK, KENNETH, L.
</INVENTOR-NAME>
<INVENTOR-NAME>
SCHOFIELD, KENNETH
</INVENTOR-NAME>
</INVENTORS>
<DESCRIPTION>
This invention relates to magnetic compasses
for vehicles. More particularly, it relates to
compasses of the type which utilize an electronic
magnetic field sensor.Magnetic compasses are commonly used in
vehicles, including land vehicles, boats and
aircraft, as an aid in direction finding and
navigation. There is an increasing demand for
magnetic compasses especially for use in passenger
cars. In this field of use, there is an increasing
requirement for a compass of low cost which exhibits
a relatively high degree of accuracy with great
reliability and which is of small size and weight.Magnetic compasses for vehicles may be
classified according to the type of the magnetic
field sensor. One type is a magnetic rotor sensor
which utilizes a magnetized element rotatably
mounted to align itself with the ambient magnetic
field. Examples of this type of vehicle compass are
disclosed in Schierbeek et al U.S. -A- 4,862,594
and in co-pending
application Serial No. 07/597,854 by Schierbeek et al
now US-A-5 131 154, said patents are assigned to the same
assignee as this application. Another type is a flux gate sensor which
utilizes a saturable magnetic core with excitation
and sense windings for sensing the direction and
field strength of an ambient magnetic field.
Examples of vehicle compasses with flux gate sensors
are represented by Baker et al U.S. -A- 3,683,668
Bower et al U.S. -A-4,733,179
Hormel U.S. -A-4,720,992
and Van Lente et
al U.S. -A-4,953,305There is a need, especially in vehicle
compasses for passenger cars, for an improved
magnetic field sensor to achieve the goals of
accuracy, reliability, small size and weight and low
cost. However, one of the problems in meeting these
goals is that of providing deviation compensation
for the compass, which is required to provide a high
degree of accuracy, without a large cost penalty.
It is known that a magnetic compass installed in a
vehicle must be calibrated in the vehicle to account
for the disturbing effect of the vehicle magnetic
field. It is known that vehicles produce a magnetic
field due to the presence of ferromagnetic
materials, electric current carrying wires and the
like and this magnetic field interferes with the
earth field at locations within and adjacent the
body of the vehicle. The magnetic field sensor of
a compass responds to the localized magnetic field
in which it is immersed for the purpose of direction
finding with reference to the earth magnetic field.
The magnetic field vector produced by the vehicle, 
herein referred to as the
</DESCRIPTION>
<CLAIMS>
An electronic compass for use in a vehicle, said
compass comprising:


sensing means (32) for detecting an external magnetic
field and developing electronic signals representative of the

strength and direction of said external magnetic field, said
external magnetic field being the resultant of the earth

magnetic field and a deviating magnetic field of the vehicle,
and a digital electronic circuit (36, 46) for producing
corrected electronic signals which are representative of the

strength and direction of the earth magnetic field combined with
a deviating magnetic field of reduced strength, said compass

being characterized by:
said digital electronic circuit (36, 46) being coupled
with said sensing means and responsive to said electronic

signals for producing offset signals in response to said
deviating magnetic field,
said sensing means (32) including magnetoresistive
means (14) for sensing said external magnetic field,
and electromagnetic offset field generating means (18,
18') receiving said offset signals from said digital electronic

circuit and coupled with said sensing means for nullifying at
least a portion of said deviating magnetic field whereby said

sensing means produces said corrected electronic signals.
An electronic compass as defined in Claim 1 wherein:

said digital electronic circuit includes computing means
(38) for determining the strength and direction of the vehicle

deviating magnetic field and nullifying means (44) for
producing said offset signals and thereby nullifying said

deviating magnetic field in said sensing means,
said nullifying means being coupled with said computing
means for controlled energization thereby in accordance with

the strength and direction of said deviating magnetic field
whereby said sensing means develops deviation compensated

signals corresponding to the earth field.
An electronic compass as defined in Claim 2 wherein:

said digital electronic circuit (36, 46) includes
measurement means (42) for measuring said electronic signals

and determining the difference between the measured value and
a value corresponding to the earth magnetic field,
said electronic circuit including means (266, 272) for
energizing said electromagnetic means (18, 18') in accordance

with said difference.
An electronic compass as defined in
Claim 2 wherein:


said electronic circuit and said
nullifying means are operative while said vehicle is

driven at different headings relative to the earth
magnetic field for developing said deviation

compensation signal corresponding to the earth
field.
An electronic compass as defined in
Claim 1 wherein said sensing means (32) comprises a

first sensor (10) and a second sensor (10'),

each of said first and second sensors
comprising at least one magnetoresistive field

sensing element (14,14') having a magnetic field
sensitive axis and connected in an electrical

network, said network having an output (V
0
) which
provides an output signal representative of a

component of said external magnetic field along said
sensitive axis, said first and second sensors being

oriented with their sensitive axes in a
predetermined angular relation with each other.
An electronic compass as defined in Claim 5,

said digital electronic circuit includes
nullifying means (44) for modifying said electronic signals

in accordance with the value of said deviating magnetic field
for producing said corrected electronic signals.
An electronic compass as defined in
Claim 5 wherein:


each of said sensors has an offset field
generating means (18,18') for applying an offset

magnetic field in a direction aligned with the
sensitive axis,
said first and second sensors being
oriented with their sensitive axes in a

predetermined angular relation which each other,
and said offset field generating means
of said first sensor being coupled with said offset

field generating means of said second sensor for
energization from a common source (266,272) of

energization.
An electronic compass as defined in
Claim 7 including:


a multiplexer (34) having a first input
(1) coupled with the output of said first sensor and

a second input (0) coupled with the output of said
second sensor,
an analog-to-digital converter (42)
having an input coupled with the output of said

multiplexer, 
said digital electronic circuit having
an input (T10) coupled with the output of said

analog-to-digital converter for processing said
electrical signals produced by said first and second

sensors to obtain direction information of said
vehicle.
An electronic compass as defined in
claim 8 including:


a digital-to-analog converter (44)
having an input coupled with an output of said

digital electronic circuit and having an output
coupled with said electromagnetic means (18,18') of

both the first and second sensors.
An electronic compass as defined in
Claim 8 wherein:


said first and second inputs (1,0) of
said multiplexer are coupled by first and second

capacitors (232,212), respectively, to the outputs
of said first and second sensors (10, 10'),

respectively,
whereby the DC component of each of said
output signals is suppressed.
An electronic compass as defined in
Claim 7 wherein said electromagnetic means (18,18')

are coupled to each other in a series circuit. 
An electronic compass as defined in
Claim 5 including:


a multiplexer (34) having a first input
(1) coupled with the output of said first sensor

(10') and having a second input (0) coupled with the
output of said second sensor (10),
a circuit having a DC reference voltage
output (V
REF
),
an analog-to-digital converter (42)
having an input coupled with the output of said

multiplexer, and including means (258) for
determining the magnitude of the output signal of

said first sensor and the output signal of said
second sensor relative to said reference voltage,
said digital electronic circuit being
coupled with the output of said analog-to-digital

converter for obtaining direction information of
said vehicle.
An electronic compass as defined in
Claim 12 wherein said analog-to-digital converter

includes:

a comparator (256) having one input
coupled with the output of said multiplexer and the

other input connected with a ramp voltage generator
(258).
The electronic compass as defined in
Claim 12 wherein said analog-to-digital converter

includes:

a ramp generator (258) having one input
coupled with a ramp control pulse output (D3) of

said digital electronic circuit,
and a clamping circuit (262) coupled
with said ramp generator for clamping the output

thereof at a predetermined voltage level, said ramp
generator output being coupled with said other input

of said comparator.
An electronic compass as defined in
Claim 5 including electric conductor means (16,16')

for applying a bias magnetic field to said sensing
elements (14,14'),


said electromagnetic means (18,18')
being an electromagnetic offset field generating

means for applying an offset magnetic field in a
direction aligned with the sensitive axis of said

sensing means,
a multiplexer (34) having a first input
(1) coupled with the output of said first sensor

(10') and a second input (0) coupled with the output
of said second sensor (10),
an analog-to-digital converter (42)
having an input coupled with the output of said

multiplexer for measuring the output signals of each
of said sensors, said analog-to-digital converter 

having a full scale measurement substantially equal
to the value of said output signals corresponding to

the maximum earth field to be sensed by said
sensors,
said digital electronic circuit (46)
being coupled with the output of said analog-to-digital

converter for processing said electrical
signals produced by said first and second sensors to

obtain direction information of said vehicle,
said electronic circuit being operative
to incrementally change the value 
of current in said
offset field generating means when the output signal

of said first sensor differs from said full scale
measurement and when the output signal of said

second sensor differs from said full scale
measurement.
An electronic compass as defined in
Claim 15 wherein:


said digital electronic circuit (36,46)
is operative to adjust the current in said offset

field generating means continuously during vehicle
operation.
An electronic compass as defined in
Claim 15 wherein:


said digital electronic circuit (36,46)
includes means (282) for applying an alternate

polarity periodic bias current to said electrical 
conductor means (16,16') for switching said sensing

means between a set and a reset state.
An electronic compass as defined in
Claim 17 wherein said electronic circuit means

includes:

means (52,42) for measuring said output
signal of said X-axis sensor during both the set

state and the reset state thereof and for measuring
said output signal of said Y-axis sensor during the

set state and the reset state thereof.
An electronic compass as defined by
Claim 15 wherein:


said first and second inputs (1,0) of
said multiplexer (34) are coupled by first (232) and

second (212)capacitors, respectively, to said first
and second sensors, respectively,
whereby the DC component of each of said
output signals is suppressed.
An electronic compass as defined in
Claim 5 including:


means (282) for applying an alternate-polarity
bias magnetic field to each of said sensing

elements whereby the output signal of each sensor
has an AC and a DC component,
said output of said sensors being
coupled with said digital electronic circuit by a 

capacitor (232,212) whereby the DC component of each
of said output signals is suppressed.
An electronic compass as defined in
Claim 20 including:


a circuit having a DC reference voltage
output (V
REF
),
a multiplexer (34) having an output and
having first, second and third inputs (1,0,2)

coupled respectively with the output of said first
sensor, the output of said second sensor and said

reference voltage output,
means for adding said DC reference
voltage to each of said output signals after said DC

component is suppressed to obtain modified output
signals corresponding to each of said first and

second sensors,
means (D1,D2) for operating said
multiplexer for alternately applying said modified

signals and said reference voltage alternately to
the input of said analog-to-digital converter

whereby the magnitude of each of said AC output
signals is determined relative to said reference

voltage.
</CLAIMS>
</TEXT>
</DOC>
