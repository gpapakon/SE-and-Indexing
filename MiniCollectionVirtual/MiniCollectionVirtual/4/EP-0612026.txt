<DOC>
<DOCNO>EP-0612026</DOCNO> 
<TEXT>
<INVENTION-TITLE>
Image processing.
</INVENTION-TITLE>
<CLASSIFICATIONS>G06T1510	G06T1540	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>G06T	G06T	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>G06T15	G06T15	</CLASSIFICATIONS-FOURTH>
<ABSTRACT>
The generation of rendering order lists, trees or 
directed graphs is performed as a pre-process for an 

interactive three-dimensional graphic system. Notional 
viewing axes are selected and a rendering order list, 

tree or directed graph is produced for each of these 
axes. 
A favourite polygon is selected as being possibly 
suitable for placing on a list, tree or graph. The 

suitability of said favourite polygon is checked by 
comparing the extents in the direction of a notional 

viewing axis of a point on said favourite polygon with 
a point on a candidate polygon. 


</ABSTRACT>
<APPLICANTS>
<APPLICANT-NAME>
CANON KK
</APPLICANT-NAME>
<APPLICANT-NAME>
CANON KK
</APPLICANT-NAME>
</APPLICANTS>
<INVENTORS>
<INVENTOR-NAME>
OTTO GERHARDT PAUL
</INVENTOR-NAME>
<INVENTOR-NAME>
GERHARDT PAUL C O CANON RESEAR
</INVENTOR-NAME>
</INVENTORS>
<DESCRIPTION>
The present invention relates to a method and 
apparatus for image processing. In particular, the 
present invention relates to a method and apparatus for 
processing data representing the position of surface 
primitives such as polygons in three-dimensional space, 
for example to produce an ordered list for rendering 
views of said primitives in two-dimensional space. In an interactive three-dimensional graphics system, 
such as a system of the type disclosed in the Applicant's 
copending European Patent Publication No. EP-A-0531157 
(not published at the first claimed priority date), data 
representing polygons is manipulated in three-dimensional 
space interactively, in response to input commands from 
an operator. Two-dimensional images are presented to an 
operator at a rate sufficient to maintain a closed 
feedback loop between the operator and the virtual three-dimensional 
environment. A two-dimensional image is generated by rendering the 
three-dimensional image data onto a two-dimensional 
plane. For each view, "hidden surface removal" can be 
performed by ensuring that primitives which occlude other 
primitives are rendered into the two-dimensional plane 
either instead of the primitives which they occlude or 
at least after said occluded polygons. Often the  
 
occlusions are partial, therefore it is preferable to 
render occluded polygons prior to rendering the occluding 
polygons. In addition, totally invisible primitives may 
be culled and do not require further consideration during 
the rendering process. Thus, it can be appreciated that 
a very important aspect of the rendering process involves 
ensuring that the primitives are rendered in the correct 
order. However, determining the correct order for 
rendering, repeatedly for each iteration, would account 
for a considerable proportion of the available processing 
time. A system for producing rendering order lists is 
disclosed in the aforesaid copending European Patent 
Publication, in which said lists are produced as a pre-process, 
using a topological sort, prior to interactive 
operation. If necessary, a plurality of view 
orientations are selected and a rendering order list is 
produced for each of these views. During interactive 
operation, one of these rendering order lists is selected 
by comparing the actual view orientation with the pre-processed 
orientations, to determine which is the closest 
fit. Thus, the computational overhead required during 
interactive operation is reduced significantly. The invention provides a
</DESCRIPTION>
<CLAIMS>
A method of processing data defining surface 
primitives in three-dimensional space, to produce a 

rendering order list, tree or directed graph, in which 
a favourite primitive is selected for placing on a 

rendering order list, tree or graph, the method 
including: 

   defining a notional viewing axis representative of 
a set of viewing directions to be associated with the 

list, tree or graph; and 
   checking the suitability of said favourite primitive 

for placing on a list, tree or graph by comparing the 
extents in the direction of the notional viewing axis of 

a point on said favourite primitive with a point on a 
candidate primitive. 
A method according to Claim 1, wherein said 
extents are measured along the direction of the notional 

viewing axis away from the viewer. 
A method according to Claim 2, wherein the 
furthest extent of the candidate primitive is compared 

with the nearest extent of the current favourite 
primitive. 
A method according to claim 3 wherein each 
 

favourite is checked against a plurality of candidate 
primitives, being primitives not yet placed on the 

rendering order list, tree or directed graph. 
A method according to Claim 4, wherein the 
current favourite primitive is placed on the rendering 

order list if the nearest extent of said favourite 
primitive is further away from the viewer than the 

furthest extent of all candidate primitives. 
A method according to claim 3, 4 or 5, wherein 
a favourite primitive which does not satisfy the 

condition that its nearest extent is further from the 
viewer than the furthest extent of all candidate 

primitives is subjected to further tests with reference 
to a set of viewing directions associated with said 

notional viewing axis and is added to the rendering order 
list or not depending on the result of said further 

tests. 
A method according to any preceding claim, 
wherein favourite primitives are selected for 

consideration in an order based on their extents in the 
direction of the notional viewing axis. 
A method according to claim 7 wherein a 
favourite primitive which tests indicate cannot be placed 

 
on the rendering order list is noted and is re-selected 

as a favourite primitive when at least one other 
primitive has been added to the rendering order list. 
Apparatus for processing data defining surface 
primitives in three dimensions to produce rendering order 

lists, trees or directed graphs, in which a favourite 
primitive is selected for placing on a rendering order 

list, tree or graph, the apparatus including: 
   means for defining a notional viewing axis 

represetnative of a set of viewing directions to be 
associated with the list, tree or directed graph; and 

   means for checking the suitability of said favourite 
primitive for placing on a list, tree or graph by 

comparing the extents in the direction of said notional 
viewing axis of a point on said favourite primitive with 

a point on a candidate primitive. 
Apparatus according to Claim 9, wherein said 
extents are measured along the direction of the notional 

viewing axis away from the viewer. 
Apparatus according to Claim 10, wherein the 
furthest extent of the candidate primitive is compared 

with the nearest extent of the current favourite 
primitive. 
An apparatus according to claim 11 wherein each 
favourite is checked against a plurality of candidate 

primitives, being primitives not yet placed on the 
rendering order list, tree or directed graph. 
Apparatus according to Claim 10, wherein the 
current favourite primitive is placed on the rendering 

order list if the nearest extent of said current 
favourite primitive is further away from the viewer than 

the furthest extent of all candidate primitives. 
An apparatus according to claim 13 wherein a 
favourite primitive which does not satisfy the condition 

that its nearest extent is further from the viewer than 
the furthest extent of all candidate primitives is 

subjected to further tests with reference to the set of 
viewing directions associated with said notional viewing 

axis and is added to the rendering order list or not 
depending on the result of said further tests. 
An apparatus according to any of claims 9 to 
14 wherein favourite primitives are selected for 

consideration in an order based on their extents in the 
direction of the notional viewing axis. 
An apparatus according to claim 15 wherein a 
 

favourite primitive which tests indicate cannot be placed 
on the rendering order list is noted and is re-selected 

as a favourite primitive when at least one other 
favourite primitive has been added to the rendering order 

list. 
A method of operating an interactive graphics 
system in which surface primitives defined in three 

dimensions are rendered to produce a two-dimensional 
image, the method comprising rendering said image by 

identifying a viewing direction and selecting a rendering 
order list, tree or directed graph associated with said 

viewing direction, wherein said rendering order list, 
tree or graph is prcduced by: defining a notional viewing 

axis representative of a set of viewing directions to be 
associated with the list, tree or graph; selecting a 

favourite polygon for placing on a rendering order list, 
tree or graph; and checking the suitability of said 

favourite primitive for placing on said list, tree or 
graph by comparing the extents in the direction of said 

notional viewing axis of a point on said favourite 
primitive with a point on a candidate primitive. 
A method according to claim 17 wherein a 
plurality of notional viewing axes are defined, and a 

rendering order list, tree or graph is produced for each 
notional viewing axis prior to rendering the image. 
A method according to claim 18 wherein a 
sequence of images is rendered selecting for each image 

a notional viewing axis from among the plurality of 
notional viewing axes and rendering the image in 

accordance with the associated rendering order list, tree 
or graph. 
An interactive graphics apparatus comprising 
means for storing definitions of surface primitives in 

three dimensions and means for rendering two-dimensional 
images of said primitives by identifying a viewing 

direction and selecting a rendering order list, tree or 
directed graph associated with said viewing direction, 

and further comprising means for producing said rendering 
order list, tree or graph by: defining a notional viewing 

axis representative of a set of viewing directions to be 
associated with the list, tree or graph; selecting a 

favourite primitive for placing on a rendering order 
list, tree or graph; and checking the suitability of said 

favourite primitive for placing on said list, tree or 
graph by comparing the extents in the direction of said 

notional viewing axis of a point on said favourite 
primitive with a point on a candidate primitive. 
An apparatus according to claim 20 further 
comprising means for defining a plurality of notional 

viewing axes, and wherein a rendering order list, tree 
 

or directed graph is produced for each defined notional 
viewing axis, prior to definition of the viewing 

direction for rendering the image. 
A data signal or storage medium conveying 
instructions for programmable processing apparatus such 

that, when loaded into said apparatus, said apparatus is 
programmed to produce rendering order lists, trees or 

directed graphs for surface primitives defined in three 
dimensions by: defining a notional viewing axis 

representative of a set of viewing directions to be 
associated with the list, tree or graph; selecting a 

favourite primitive for placing on a rendering order 
list, tree or graph; and checking the suitability of said 

favourite primitive by comparing the extents in the 
direction of a notional viewing axis of a point on said 

favourite primitive with a point on a candidate 

primitive. 
A signal or storage medium conveying a two-dimensional 
image representing objects defined in three 

dimensions, wherein said image has been rendered by 
identifying a viewing direction and selecting a rendering 

order list, tree or directed graph associated with said 
viewing direction, and wherein said rendering order list, 

tree or graph has been produced by: defining a notional 
viewing axis representative of a set of viewing 

 
directions to be associated with the list, tree or graph; 

selecting a favourite primitive for placing on a 
rendering order list, tree or graph; and checking the 

suitability of said favourite primitive for placing on 
said list, tree or graph by comparing the extents in the 

direction of said notional viewing axis of a point on 
said favourite primitve with a point on a candidate 

primitive. 
A signal or storage medium according to claim 
23 wherein said image has been rendered by selecting a 

rendering order list, tree or directed graph associated 
with said viewing direction from among a plurality of 

rendering order lists, trees or directed graphs produced 
prior to definition of the viewing direction for 

rendering the image, and wherein a succession of images 
are rendered for a succession of viewing directions, 

selecting each time from the prior-generated set of 
rendering order lists, trees or directed graphs. 
</CLAIMS>
</TEXT>
</DOC>
