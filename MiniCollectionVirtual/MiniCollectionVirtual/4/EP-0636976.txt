<DOC>
<DOCNO>EP-0636976</DOCNO> 
<TEXT>
<INVENTION-TITLE>
Microcontroller provided with hardware for supporting debugging as based on boundary scan standard-type extensions
</INVENTION-TITLE>
<CLASSIFICATIONS>G06F1578	G06F1136	G06F1134	G01R3128	G06F1128	G01R313185	G06F1576	G06F1136	G06F1134	G01R31317	G06F1128	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>G06F	G06F	G06F	G01R	G06F	G01R	G06F	G06F	G06F	G01R	G06F	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>G06F15	G06F11	G06F11	G01R31	G06F11	G01R31	G06F15	G06F11	G06F11	G01R31	G06F11	</CLASSIFICATIONS-FOURTH>
<ABSTRACT>
A microprocessor comprises a processor element, a memory interface 
element, an IO interface element, a debug support element and an internal bus 

interconnecting all above elements. For easy debugging, it also comprises attached to 
the internal bus a registered boundary scan standard (JTAG) interface that accesses one 

or more scan chains inside the microprocessor, and is arranged for controlling DMA-type 
exchanges via the internal bus with other elements connected to this bus. 


</ABSTRACT>
<APPLICANTS>
<APPLICANT-NAME>
KONINKL PHILIPS ELECTRONICS NV
</APPLICANT-NAME>
<APPLICANT-NAME>
KONINKLIJKE PHILIPS ELECTRONICS N.V.
</APPLICANT-NAME>
</APPLICANTS>
<INVENTORS>
<INVENTOR-NAME>
BAKKER JACOBUS M
</INVENTOR-NAME>
<INVENTOR-NAME>
KLAPPROTH PETER
</INVENTOR-NAME>
<INVENTOR-NAME>
VAN LOO GERARDUS
</INVENTOR-NAME>
<INVENTOR-NAME>
ZANDVELD FREDERIK
</INVENTOR-NAME>
<INVENTOR-NAME>
BAKKER, JACOBUS M.
</INVENTOR-NAME>
<INVENTOR-NAME>
KLAPPROTH, PETER
</INVENTOR-NAME>
<INVENTOR-NAME>
VAN LOO, GERARDUS C.
</INVENTOR-NAME>
<INVENTOR-NAME>
ZANDVELD, FREDERIK
</INVENTOR-NAME>
</INVENTORS>
<DESCRIPTION>
The invention relates to a microprocessor comprising a processor element,
a memory interface element, an IO interface element, a debug support element and an
internal bus interconnecting all above elements. Such microprocessors have been in
general use for executing computer programs in an environment of calculating, controlling,
signal processing and other. A program must be checked for errors or other
malfunctioning during a debugging operation. Often, this is done by successively
recording all addresses transferred via the microprocessor bus. This recording can be
done, either by monitoring the internal bus directly, or by temporarily logging such
addresses for subsequent outputting and checking. Often, such procedures either take
much time in a step-by-step operation, or alternatively, require extensive external accessibility
through a large amount of additional microprocessor pins. Both approaches are
expensive. Moreover, it is difficult on an organizational level to execute the monitoring
in real time in view of the enormous amount of data produced.In consequence, amongst other things it is an object of the present
invention to diminish the above costly requirements and improve the functionality
through the usage of the so-called boundary scan standard facilities that currently are
being introduced into a large fraction of complex integrated circuits. Now, according to
one of its aspects, the invention is characterized in that by comprising attached to said
internal bus a registered boundary scan standard JTAG interface element that accesses
one or more scan chains inside said microprocessor, and furthermore said JTAG interface element is arranged for
controlling DMA-type exchanges via said internal bus with other elements connected to
said internal bus. Boundary scan standard or JTAG Standard has been described extensively
in IEEE Standard 1149.1, and in particular in GB Patent Application 2,195,185
and corresponding US Application Serial No. 07/90489 to the present assignee.
Originally, the Standard was conceived to facilitate board level testing, but it offers 
many advantages on the level of a single integrated circuit as well, and in consequence
will hereinafter be called JTAG standard for brevity. According to the Standard the
minimum test interface has one serial data input pin, one serial data output pin, a test
clock pin, and a test control pin. An additional reset pin is optional. According to the
Standard, under external synchronization, first a control pattern is loaded into a

</DESCRIPTION>
<CLAIMS>
A microprocessor (20) comprising a processor element (60), a memory interface
element (62), an IO interface element, a debug support element (56) and an internal bus (48)

interconnecting all above elements, characterized by comprising attached to said internal
bus a registered boundary scan standard JTAG interface element (46) that accesses one or

more scan chains inside said microprocessor, and furthermore said JTAG interface element is arranged for
controlling DMA-type exchanges via said internal bus with other elements connected to

said internal bus.
A microprocessor as claimed in Claim 1, wherein said JTAG interface
element (46) allows bidirectional downloading informations with respect to an external

station (32).
A microprocessor as claimed in Claims 1 or 2, wherein said debug
support element (56) is externally to said internal bus (48) directly connected to said processor

element (60).
A microprocessor as claimed in Claims 1, 2 or 3, wherein the JTAG
interface element (46) directly accesses one or more breakpoint registers.
A microprocessor as claimed in any of Claims 1 to 4, wherein the
debug support element (56) directly accesses a trace buffer external (40) to the microprocessor (20).
A microprocessor as claimed in any of Claims I to 5, wherein said debug
support element (56) contains an internal buffer memory (58) for accommodating a restricted set

of contents of non-sequential addresses as generated by the processing element and
allowing at least one of the following storage modes for a limited time operation of said

microprocessor: storing of all non-sequential addresses, and/or storing of all call, jump,
and trap addresses, or any appropriate selection or part of these.
A microprocessor as claimed in Claim 6, wherein said debug support
element (56) interfaces externally to the microprocessor via a serial clocked data path (64) to an

external event trace buffer memory (40) for thereto outputting event signalization for storage.
A microprocessor as claimed in Claim 7, wherein a special instruction 
(WR ASR31) is arranged for controlling loading of said external event trace buffer

memory.
A microprocessor as claimed in Claims 7 or 8, wherein the external trace
buffer memory (40) is arranged for together with recording any word therein also recording

an actual time stamp indication.
A microprocessor as claimed in Claims 7, 8 or 9, wherein the external
trace buffer memory (40) is arranged for via a standard further interface outputting data (36) to a

standard workstation or personal computer (32).
</CLAIMS>
</TEXT>
</DOC>
