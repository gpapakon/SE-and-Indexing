<DOC>
<DOCNO>EP-0650106</DOCNO> 
<TEXT>
<INVENTION-TITLE>
Method and apparatus for synchronising clocks being connected to a network system
</INVENTION-TITLE>
<CLASSIFICATIONS>G04G700	H04J306	G04G700	H04J306	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>G04G	H04J	G04G	H04J	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>G04G7	H04J3	G04G7	H04J3	</CLASSIFICATIONS-FOURTH>
<ABSTRACT>
Many devices (in particular white goods or brown goods) in a household may 
contain a clock. Some systems allow to connect all these devices and the related 

clocks to a common bus or network. The commands for controlling the clocks are 
in general limited to reading or writing a given time or to broadcasting the time of 

a given clock to one dedicated device or to the entire system or to a part of the 
system. In such known systems it is not specified in which manner a clock should 

react if it receives the time broadcast by another clock. It is possible to initialise all 
clocks to a given time but due to tolerances in the different clocks, so achieved 

synchronisation will not be maintained. Regular broadcasting by a special device 
'master clock' has the disadvantage of introducing one device with different capabilities. 

In case there are several master clocks, conflicts may occur and the advantages 
of a high precision clock will fade away if a lower precision master clock 

overrides it.
 

One solution is, that only the clock with the highest precision broadcasts its time 
to the system, but whenever it fails the next lower precision clock takes over the 

broadcasting automatically. The broadcast periods are defined as factorial periods 
of a preselected time period.

 
Another possibility is, that all devices will broadcast the time with an equal period 

but with a different phase and only if no broadcast was received in the preceding 
time period. 


</ABSTRACT>
<APPLICANTS>
<APPLICANT-NAME>
THOMSON MULTIMEDIA SA
</APPLICANT-NAME>
<APPLICANT-NAME>
THOMSON MULTIMEDIA
</APPLICANT-NAME>
</APPLICANTS>
<INVENTORS>
<INVENTOR-NAME>
BUERKLIN HELMUT
</INVENTOR-NAME>
<INVENTOR-NAME>
BUERKLIN, HELMUT
</INVENTOR-NAME>
</INVENTORS>
<DESCRIPTION>
The present invention relates to a method and to an apparatus
for synchronising clocks being connected to a network
system.Many devices (in particular white goods or brown goods) in a
household may contain a clock. Some systems allow to connect
all these devices and the related clocks to a common bus or
network. The commands for controlling the clocks are in
general limited to reading or writing a given time or to
broadcasting the time of a given clock to one dedicated
device or to the entire system or to a part of the system.
An example home bus system is described in Esprit Home
Systems Specification 1.1, ESPRIT project 6782.
In such known systems it is not specified in which manner a
clock should react if it receives the time broadcast by
another clock. So, it is possible to initialise all clocks
to a given time (e.g. by a user action, which creates a
'write time' broadcast to the entire system), but due to
tolerances in the different clocks, so achieved
synchronisation will not be maintained. Regular broadcasting
by a special device 'master clock' has the disadvantage of
introducing one device with different capabilities. In case
there are several master clocks, conflicts may occur and the
advantages of a high precision clock will fade away if a
lower precision master clock overrides it.From EP-A-0 548 381 a method for synchronising clocks in
hierarchically subdivided computer networks is known.
There is one high precision clock provided in a computer
which is positioned at the highest hierarchical level. This
clock is the master clock of the system and synchronises all
clocks at the next lower hierarchical level by sending 
timestamps. The clocks at the second lower hierarchical
level are synchronised by timestamps which are broadcast by
a sub-master clock of the next higher level. Therefore, not
all clocks in the system are synchronised by identical time
stamp messages.In GB-A-2 022 881 a programmed digital secondary clock is
disclosed, which is arranged to function as a master clock,
a sub-master clock or a slave clock. It is revealed, that
the programmed digital secondary clock will be used in a
system where identical units are connected in daisy chain to
provide a continuously updated real time count at remote
locations such as in an airport, hospital, school, etc..
Each unit sends its updated real time count in serial data
format to the next unit of the daisy chain. Each unit acting
as a slave clock checks whether there is a malfunction at
the previous master clock and starts operating as a
</DESCRIPTION>
<CLAIMS>
Method for synchronising clocks (CLK) being connected to
a network system, characterised by the steps of:


choosing said clocks to belong to different precision
classes;
broadcasting the time of every clock (TXMIT) within said
network system after expiry of a pre-selected time

period, whereby a higher of said precision classes is
associated with a shorter time period and time period

counting means are related to each of said clocks,
whereby within these steps every clock which receives

said broadcast (RXCE) updates its time and the related
time period counting means are reset.
Method according to claim 1, 
characterised in
 that every clock
(CLK) receiving a time broadcast of any precision class does

not broadcast its time within a further time period which is
higher than said pre-selected time period.
Method for synchronising clocks (CLK) being connected to
a network system, characterised by the steps of:


choosing said clocks to belong to different precision
classes;
broadcasting the time of every clock (TXMIT) within said
network system having a pre-selected phase, which is

related to said precision class in such a way that the
broadcast time related to a higher of said precision

classes is earlier, and having a pre-selected broadcast
time period, which is independent of said precision

class;
broadcasting the time of a specific clock only, when the
clock has received no related time from a clock

belonging to a higher precision class;
whereby within these steps every clock which receives said
broadcast (RXVE) updates its time.
Method according to claim 3, 
characterised in
 that every clock
(CLK) receiving a time broadcast of the same or higher precision

class does not broadcast its time within a further time
period which is higher than said pre-selected time period. 
Method according to any of claims 1 to 4, 
characterised in

that said further time period is a random or pseudo-random
value, depending on some internal state of a device to which

the clock (CLK) belongs and depending not only on the present
time, whereby these values are changed periodically or after

each time broadcast.
Method according to any of claims 1 to 5, 
characterised in

that said time is broadcast (TXMIT) only to a part of the
clocks belonging to said network system.
Method according to any of claims 1 to 6, 
characterised in

that said pre-selected time period is a factorial period of a
minute.
Method according to any of claims 1 to 7, 
characterised in

that in case tuners related to said clocks (CLK) receive the
time of different time zones, one of said zone times is selected

for broadcasting within said network system.
Method according to any of claims 1 to 8, 
characterised in

that when evaluating the internal time of a clock (CLK) and
the time broadcast within said network system the delay of

time distribution within said network system is compensated
using appropriate delay means (D1, D2).
Method according to any of claims 1 to 9, 
characterised in

that digital filter means (FI) compare the internal time of a
clock (CLK) and the time (RXVE) broadcast within said network

system and allow (CSW2) updating only when a difference exceeding
a pre-selected threshold over a pre-selected observation

period is detected. 
Apparatus for synchronising clocks being connected to a
network system, according to the method of any of claims

1,2 and 5 to 10 and including:

a clock (CLK) which belongs to one precision class out of a
plurality of different precision classes;
bus interface means (BUI) which are capable to broadcast
(TXMIT) the time of said clock within said network

system after expiry of a pre-selected time period, which
is related to said one precision classe in such a way

that a higher of said precision classes is associated
with a shorter time period, whereby time period counting

means are related to said clock;
interrupt means (DBL, CSW1) which are capable to interrupt
time transmission from said clock to said bus interface

means during a certain time period after each reception
of time information (RXVE) by said bus interface means,

whereby the time of said clock is broadcast only, when
the bus interface means have received no related time

from a clock belonging to a higher precision class and
whereby the time of said clock is updated when receiving

said broadcast time information (RXVE) and said time
period counting means are reset.
Apparatus for synchronising clocks being connected to a
network system, according to the method of any of claims

3 to 10 and including:

a clock (CLK) which belongs to one precision class out of a
plurality of different precision classes;
bus interface means (BUI) which are capable to broadcast
(TXMIT) the time of said clock within said network

system having a pre-selected phase, which is related to
said one precision class in such a way that the

broadcast time related to a higher of said precision
classes is earlier, and having a pre-selected broadcast

time period, which is independent of said precision
class;
interrupt means (DBL, CSW1) which are capable to interrupt
time transmission from said clock to said bus interface

means during a certain time period after each reception
of time information (RXVE) by said bus interface means,

whereby the time of said clock is broadcast only, when
the bus interface means have received no related time

from a clock belonging to a higher precision class and
whereby the time of said clock is updated when receiving

said broadcast time information (RXVE).
Apparatus according to claim 11 or 12, 
characterised in
 that
digital filter means (FI) compare the internal time of said

clock (CLK) and the time (RXVE) broadcast within said network
system and allow updating of the clock time only when a difference

exceeding a pre-selected threshold over a pre-selected
observation period is detected.
</CLAIMS>
</TEXT>
</DOC>
