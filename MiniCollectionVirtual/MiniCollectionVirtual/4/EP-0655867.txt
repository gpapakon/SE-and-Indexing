<DOC>
<DOCNO>EP-0655867</DOCNO> 
<TEXT>
<INVENTION-TITLE>
Device for encoding a video signal.
</INVENTION-TITLE>
<CLASSIFICATIONS>G06T900	G06T900	G11B2010	G11B2010	H03M730	H03M730	H04N726	H04N726	H04N730	H04N730	H04N750	H04N750	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>G06T	G06T	G11B	G11B	H03M	H03M	H04N	H04N	H04N	H04N	H04N	H04N	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>G06T9	G06T9	G11B20	G11B20	H03M7	H03M7	H04N7	H04N7	H04N7	H04N7	H04N7	H04N7	</CLASSIFICATIONS-FOURTH>
<ABSTRACT>
A device for encoding a video signal comprises a picture transformer 
(22), a quantizer (23) and a variable-length encoder (24), as well as distribution means 

(6) for distributing a global target value (T) for the number of bits per picture or group 
of pictures in local target values (T
n
) for separate macroblocks of each picture. The 
device is provided with proportionally integrating control means (7). These means 

control the quantization step size (Q₁) in such a way that the buffer contents (b) of an 
output buffer (4) are in conformity with the target value. Since the PI control circuit 

does not introduce any residual errors, the desired number of bits per picture or group 
of pictures is achieved within narrow limits. The output signal is eminently suitable for 

recording and subsequent editing. 

</ABSTRACT>
<APPLICANTS>
<APPLICANT-NAME>
PHILIPS ELECTRONICS NV
</APPLICANT-NAME>
<APPLICANT-NAME>
PHILIPS ELECTRONICS N.V.
</APPLICANT-NAME>
</APPLICANTS>
<INVENTORS>
<INVENTOR-NAME>
KEESMAN GERRIT JOHAN
</INVENTOR-NAME>
<INVENTOR-NAME>
KLEIN GUNNEWIEK REINIER BERNAR
</INVENTOR-NAME>
<INVENTOR-NAME>
SHAH IMRAN ALI
</INVENTOR-NAME>
<INVENTOR-NAME>
KEESMAN, GERRIT JOHAN
</INVENTOR-NAME>
<INVENTOR-NAME>
KLEIN GUNNEWIEK, REINIER BERNARDUS MARIA
</INVENTOR-NAME>
<INVENTOR-NAME>
SHAH, IMRAN ALI
</INVENTOR-NAME>
</INVENTORS>
<DESCRIPTION>
The invention relates to a device for encoding a video signal, comprising: 
means for dividing each picture into a plurality of sub-pictures, an encoder comprising a 
picture transformer for transforming each sub-picture into coefficients, and a quantizer 
for quantizing the coefficients with an applied step size. The device also comprises 
distribution means for distributing a target value for the number of bits for encoding an 
applied picture in a plurality of local target values for the separate sub-pictures, and 
control means for controlling the step size in conformity with the local target values. A device of the type described in the opening paragraph is known from 
"Hardware Implementation of the Framestore and Datarate Control for a Digital HDTV-VCR", 
a discourse held at the HDTV Symposium, in Japan, November 1992. However, 
the publication does not describe in which way the step size is controlled in order to 
achieve a fixed number of bits per picture. The known device relates to intraframe encoding of video signals. 
Intraframe encoding is understood to mean that each picture is encoded individually, 
independently of other pictures. Devices referred to as MPEG are known, with which 
one picture from a group of pictures (GOP) are intraframe-encoded. Such a picture is 
referred to as I picture. Other pictures are subjected to predictive motion-compensated 
(interframe) encoding. In forward prediction the term P pictures is sometimes used, 
while in bidirectional prediction the term B pictures is sometimes used. Such an MPEG 
device is described, inter alia in "Coding of moving pictures and associated audio for 
digital storage media up to about 1.5 Mbit/s", ISO/IEC IS 11172. In MPEG encoding 
the number of bits per picture is very much dependent on the type of encoding to which 
it is subjected. A frequently occurring division of a GOP is, for example the series 
"IBBPBBPBBPBB". Known MPEG encoders produce a bit stream in which the number 
of bits per GOP fluctuates considerably. With a view to later editing and display at  
 
different speeds, an MPEG bit stream is therefore unsuitable for recording. It is an object of the invention to provide control means with which a 
fixed number of bits per picture or group of pictures is obtained within narrow limits. To this end, the device according to the invention comprises means for 
forming a control signal to be applied to the control means, which control signal is 
representative of the difference between successively accumulated local target
</DESCRIPTION>
<CLAIMS>
A device for encoding a video signal, comprising: 
   means (1) for dividing each picture into a plurality of sub-pictures; 

   an encoder (2) comprising a picture transformer (22) for transforming each sub-picture 
into coefficients, and a quantizer (23) for quantizing the coefficients with an 

applied step size (Q₁); 
   control means (7) for controlling the step size in conformity with a target value 

(T) for the number of bits for encoding the applied picture; 
   distribution means (6) for distributing the target value (T) for the picture in a 

plurality of local target values (Tn) for each sub-picture; 
characterized in that the device comprises means (71-73) for forming a control signal to 

be applied to the control means, which control signal is representative of the difference 
between successively accumulated local target values and the number of bits produced 

by the encoder (2), the control means (7) being constituted by a proportionally 
integrating control circuit (74-77). 
A device as claimed in Claim 1, characterized in that the control circuit 

comprises: 
   a proportional control branch (74) having a first control factor (Kp) for 

determining a first fraction of the step size (Q₁) in response to the control signal; 
   an integrating control branch (75 , 76) having a second control factor (Ki) for 

determining a second fraction of the step size in response to the control signal; 
   summing means (77) for summing said fractions so as to obtain the step size. 
A device as claimed in Claim 2, characterized in that the control factor 
(Kp, Ki) is controlled in proportion to the quotient of the average step size with which a 

plurality of sub-pictures is quantized and the number of bits produced by the encoder 
(2) for said plurality of sub-pictures. 
A device as claimed in Claim 1, characterized in that the device 
comprises an additional encoder (8) for encoding the applied picture in response to a 

 
fixed step size (Q₂), and computing means (9) for computing the target value (T) from 

the picture thus encoded. 
A device as claimed in Claim 4, characterized in that the distribution 
means (96) are adapted to distribute the target value (T) in proportion to the number of 

bits generated for the sub-pictures by the additional encoder (8). 
A device as claimed in Claim 4, in which a series of quantization-dependent 
and a series of quantization-independent bits are formed for each sub-picture, 

characterized in that the distribution means (961-963) are adapted to distribute the target 
value (T) among the sub-pictures in proportion to the number of quantization-dependent 

bits generated for said sub-pictures by the additional encoder (8). 
</CLAIMS>
</TEXT>
</DOC>
