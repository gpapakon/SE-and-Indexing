<DOC>
<DOCNO>EP-0629067</DOCNO> 
<TEXT>
<INVENTION-TITLE>
4B6B Coding
</INVENTION-TITLE>
<CLASSIFICATIONS>H03M714	G06F1110	H03M720	H03M1300	H03M714	H04L2549	G06F1110	H03M1351	H04L2549	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>H03M	G06F	H03M	H03M	H03M	H04L	G06F	H03M	H04L	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>H03M7	G06F11	H03M7	H03M13	H03M7	H04L25	G06F11	H03M13	H04L25	</CLASSIFICATIONS-FOURTH>
<ABSTRACT>
A particular encoding scheme for encoding four bit values into 
six-bit symbols selects from the table below the six-bit 

symbol corresponding to a particular four bit value: 

</ABSTRACT>
<APPLICANTS>
<APPLICANT-NAME>
SGS THOMSON MICROELECTRONICS
</APPLICANT-NAME>
<APPLICANT-NAME>
STMICROELECTRONICS LIMITED
</APPLICANT-NAME>
</APPLICANTS>
<INVENTORS>
<INVENTOR-NAME>
WALKER CHRISTOPHER PAUL HULME
</INVENTOR-NAME>
<INVENTOR-NAME>
WALKER, CHRISTOPHER PAUL HULME
</INVENTOR-NAME>
</INVENTORS>
<DESCRIPTION>
The present invention relates to an encoding scheme for
encoding data for transmission of messages made up of short
packets.The present invention relates particularly but not exclusively
to the transmission of messages over optical fibres or a.c.
coupled copper cable links.This application is particularly concerned with the
transmission of messages between computers, each computer
having a link interface which receives messages from its
associated computer and encodes these for transmission to a
link interface associated with a remote computer. One known
format for provision of the messages by the computer is a
so-called data/strobe format (DS format) where two wires are
provided, one for data and one for strobe signals. This
message format is described in our European Patent EP 0 458 648.
Each message comprises a plurality of packets.
Each packet comprises a header or address portion, a data
portion (usually but not always) and a terminator as an end of
packet indicator. Where the packet is the last packet in a
message, the end of packet indicator is replaced by an end of
message indicator as the terminator. The data portion can be
made up of data tokens, each comprising a flag bit, a parity
bit and eight bits representing data to be transmitted (herein
data bits). A terminator token comprises a flag bit, a parity
bit and two control bits identifying the type of control
token. In each case the flag bit identifies whether the token
is a data token or a terminator token.The present invention utilises a balanced d.c. coding system
wherein each group of four data bits sent by the computer to
its associated link interface is converted into a six-bit
symbol having three ones and three zeros. Each byte of data
in DS format is thus encoded into two six-bit symbols. Symbols for encoding data bits are selected from a set of
sixteen balanced symbols reserved for the purposes of
representing data. Of the remaining four symbols out of the
twenty possible combinations of balanced six-bit symbols, at
least one symbol is reserved for control purposes. An
encoding system of this type is known from IBM Technical
Disclosure Bulletin, Vol. 22, No. 8b, January 1980, pages 3547
to 3550. GB 2041702 describes a digital data transmission
system in which successive non-overlapping groups of four
binary bits are translated into corresponding six-bit binary
groups in which all the six-bit groups have a digital sum of 3
giving zero d.c. control. EP 0143268 describes a transmission
link containing elements used to couple or
</DESCRIPTION>
<CLAIMS>
A method of encoding pairs of four-bit values (41)
into pairs of six-bit symbols (52,53), the method comprising

selecting from the table below the six-bit symbol
corresponding to each four-bit value of the pair, and encoding

a single parity bit in the third (y) and sixth (z) bits of
both of the pairs of six-bit symbols:


Binary Value
3 of 6 code symbol
lsb msb
lsb
msb
P q r s
t u
-y-
v w
-z-
0 0 0 0
0 1
1
0 1
0
1 0 0 0
1 0
1
0 0
1
0 1 0 0
0 1
1
0 0
1
1 1 0 0
1 1
0
0 0
1
0 0 1 0
0 0
1
1 0
1
1 0 1 0
1 0
1
1 0
0
0 1 1 0
0 1
1
1 0
0
1 1 1 0
1 1
0
1 0
0
0 0 0 1
0 0
1
0 1
1
1 0 0 1
1 0
0
0 1
1
0 1 0 1
0 1
0
0 1
1
1 1 0 1
1 1
0
0 1
0
0 0 1 1
0 0
1
1 1
0
1 0 1 1
1 0
0
1 1
0
0 1 1 1
0 1
0
1 1
0
1 1 1 1
1 0
0
1 0
1
A method according to claim 1, wherein the symbols 010101
and 101010 are used for control purposes.
Data transmission circuitry comprising:

input circuitry (29) for receiving messages including
four bit values;
encoding circuitry (21) for encoding each four-bit value
(41) as a six-bit symbol (52,53) having three ones and three

zeroes, each symbol being selected out of a set of sixteen
data symbols;
 
   
characterised in that
 the message includes data tokens
represented by two four-bit values (41), wherein the input

circuitry comprises a buffer (20) arranged to receive
successive pairs of said four-bit values in parallel, 
in that

the sixteen data symbols are selected according to the
following table:


Binary Value
3 of 6 code symbol
Lsb msb
lsb
msb
P q r s
t u
-y-
v w
-z-
0 0 0 0
0 1
1
0 1
0
1 0 0 0
1 0
1
0 0
1
0 1 0 0
0 1
1
0 0
1
1 1 0 0
1 1
0
0 0
1
0 0 1 0
0 0
1
1 0
1
1 0 1 0
1 0
1
1 0
0
0 1 1 0
0 1
1
1 0
0
1 1 1 0
1 1
0
1 0
0
0 0 0 1
0 0 0
1
0 1
1
1 0 0 1
1 0
0
0 1
1
0 1 0 1
0 1
0
0 1
1
1 1 0 1
1 1
0
0 1
0
0 0 1 1
0 0
1
1 1
0
1 0 1 1
1 0
0
1 1
0
0 1 1 1
0 1
0
1 1
0
1 1 1 1
1 0
0
1 0
1

   
in that
 the encoding circuitry (21) is arranged to provide for each
incoming token (41) two six-bit symbols (52,53) and to output

the bits of these symbols in parallel, the third (y) and sixth
(z) bits of the two six-bit symbols together representing a

single parity bit; and

   by output circuitry means for transmitting the encoded
symbols (52,53) comprising a parallel to serial converter (22)

for transmitting the bits of the six-bit symbols serially.
Data transmission circuitry, as claimed in claim 3,
wherein said input circuitry (29) is arranged to generate a parity bit

signal (37) for supply to said buffer (20). 
Data transmission circuitry as claimed in claim 3,
wherein said input circuitry (29) is arranged to generate a flag bit (38)

for supply to said buffer (20).
Data transmission circuitry as claimed in claim 3,
wherein the output circuitry is an opto-to-electrical

transceiver (16) for transmitting said six-bit symbols.
An interface comprising data transmission circuitry
including input circuitry (29) for receiving a first signal

that includes messages including data tokens represented by
four-bit values, encoding circuitry (21) for encoding each

four-bit value as a six-bit symbol having three ones and three
zeros, each symbol being selected out of a set of sixteen data

symbols according to the following table, and output circuitry
(22) coupled to the encoding circuitry and for transmitting

(12) the encoded symbols; and

   data receiving circuitry comprising a serial-to-parallel
converter (23) arranged to receive from said output circuitry

a second signal (14) that includes a bit stream representing a
sequence of the encoded symbols and to provide two six-bit

symbols in parallel (59,60) to a decoding means (24) that is
coupled to the serial-to-parallel converter and that is

operable for each of the sixteen six-bit data symbols defined
in the following table to generate the defined four-bit value:


Binary Value
3 of 6 code symbol
Lsb msb
lsb
msb
P q r s
t u
-y-
v w
-z-
0 0 0 0
0 1
1
0 1
0
1 0 0 0
1 0
1
0 0
1
0 1 0 0
0 1
1
0 0
1
1 1 0 0
1 1
0
0 0
1
0 0 1 0
0 0
1
1 0
1
1 0 1 0
1 0
1
1 0
0
0 1 1 0
0 1
1
1 0
0
1 1 1 0
1 1
0
1 0
0
0 0 0 1
0 0
1
0 1
1 
1 0 0 1
1 0
0
0 1
1
0 1 0 1
0 1
0
0 1
1
1 1 0 1
1 1
0
0 1
0
0 0 1 1
0 0
1
1 1
0
1 0 1 1
1 0
0
1 1
0
0 1 1 1
0 1
0
1 1
0
1 1 1 1
1 0
0
1 0
1

   the decoding means including circuitry (302) arranged to
receive the third (y) and sixth (z) bits of both of the two

six-bit symbols to generate therefrom a single parity bit (210).
An interface according to claim 7 comprising flow control
means provided to control the flow of symbols between the

transmitting circuitry of the interface and receiving
circuitry of a second such interface connected thereto.
Data receiving circuitry comprising:

decoding means (24) having two input paths (59,60), each
having a width of six bits;
a serial-to-parallel converter (176) coupled to said
decoding means and arranged to receive a signal (14) tha
t
includes a bit stream representing a sequence of data symbols

and to provide two six-bit symbols in parallel (59,60) to said
decoding means, said decoding means being operable for each of

the sixteen six-bit data symbols defined in the following
table to generate the defined four-bit value:


Binary Value
3 of 6 code symbol
Lsb msb
lsb
msb
P q r s
t u
-y-
v w
-z-
0 0 0 0
0 1
1
0 1
0
1 0 0 0
1 0
1
0 0
1
0 1 0 0
0 1
1
0 0
1
1 1 0 0
1 1
0
0 0
1
0 0 1 0
0 0
1
1 0
1
1 0 1 0
1 0
1
1 0
0
0 1 1 0
0 1
1
1 0
0
1 1 1 0
1 1
0
1 0
0
0 0 0 1
0 0
1
0 1
1
1 0 0 1
1 0
0
0 1
1
0 1 0 1
0 1
0
0 1
1
1 1 0 1
1 1
0
0 1
0
0 0 1 1
0 0
1
1 1
0
1 0 1 1
1 0
0
1 1
0
0 1 1 1
0 1
0
1 1
0
1 1 1 1
1 0
0
1 0
1
the decoding means including circuitry (302) arranged to
receive the third (y) and sixth (z) bits of both of the two

six-bit symbols and to generate therefrom a single parity bit
(210).
Data receiving circuitry according to claim 9 comprising
control symbol detection circuitry (194) for distinguishing in

said sequence of data symbols, symbols representing data
values and symbols representing control values, and a parity

check circuit (195) connected to receive said parity bit (210)
and to check for transmission errors in said received data

symbols.
Data receiving circuitry according to claim 9 comprising
first (230) and second latches (231) arranged in said input

paths (59,60) for latching respective six-bit symbols.
Data receiving circuitry according to claim 9 comprising
a clock circuit (23) for controlling timing operations of the

data receiving circuitry and which can be regenerated by the
incoming bit stream (14).
Data receiving circuitry according to claim 9 wherein the
circuitry to generate a parity bit (210) comprises an

exclusive OR gate (302).
A method of decoding a bit stream representing data
symbols comprising:


receiving two six-bit data symbols in parallel (59,60); 
generating, for each six-bit data symbol in the following
table, the defined four-bit value:


Binary Value
3 of 6 code symbol
Lsb msb
lsb
msb
P q r s
t u
-y-
v w
-z-
0 0 0 0
0 1
1
0 1
0
1 0 0 0
1 0
1
0 0
1
0 1 0 0
0 1
1
0 0
1
1 1 0 0
1 1
0
0 0
1
0 0 1 0
0 0
1
1 0
1
1 0 1 0
1 0
1
1 0
0
0 1 1 0
0 1
1
1 0
0
1 1 1 0
1 1
0
1 0
0
0 0 0 1
0 0
1
0 1
1
1 0 0 1
1 0
0
0 1
1
0 1 0 1
0 1
0
0 1
1
1 1 0 1
1 1
0
0 1
0
0 0 1 1
0 0
1
1 1
0
1 0 1 1
1 0
0
1 1
0
0 1 1 1
0 1
0
1 1
0
1 1 1 1
1 0
0
1 0
1
generating from the received third (y) and sixth (z) bits
from both of the two six-bit symbols, a single parity bit

(210).
</CLAIMS>
</TEXT>
</DOC>
