<DOC>
<DOCNO>EP-0652516</DOCNO> 
<TEXT>
<INVENTION-TITLE>
Integrated microprocessor.
</INVENTION-TITLE>
<CLASSIFICATIONS>G01R3128	G01R313185	G06F1128	G06F1128	G06F1136	G06F1136	G06F1576	G06F1578	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>G01R	G01R	G06F	G06F	G06F	G06F	G06F	G06F	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>G01R31	G01R31	G06F11	G06F11	G06F11	G06F11	G06F15	G06F15	</CLASSIFICATIONS-FOURTH>
<ABSTRACT>
An integrated processor is provided wherein the 
layouts from a standalone microprocessor and one or more 

functional units are situated on a common semiconductor die 
and are linked by a common local bus. A testing circuit, 

also situated on the die and coupled to the common bus, is 
responsive to test command signals originating external to 

the integrated processor. When the testing circuit receives 
these externally originated command signals from a host 

computer, it generates local bus cycles which exercise the 
standalone microprocessor or the functional unit and/or 

devices attached thereto. In one embodiment, the integrated 
processor is incorporated on the motherboard of a target 

computer which is linked by a JTAG or other testing protocol 
bus to a host computer. The host computer generates the 

test command signals which are sent to and received by the 
testing circuit in the integrated processor. A debug memory 

space is reserved in the main system memory of the target 
computer for storage of debug software which is downloaded 

from the host computer. The debug software thus stored is 
executed when the processor on the target computer enters a 

debug mode. 

</ABSTRACT>
<APPLICANTS>
<APPLICANT-NAME>
ADVANCED MICRO DEVICES INC
</APPLICANT-NAME>
<APPLICANT-NAME>
ADVANCED MICRO DEVICES INC.
</APPLICANT-NAME>
</APPLICANTS>
<INVENTORS>
<INVENTOR-NAME>
GEPHARDT DOUGLAS D
</INVENTOR-NAME>
<INVENTOR-NAME>
MAGNUSSON HANS L
</INVENTOR-NAME>
<INVENTOR-NAME>
MUDGETT DAN S
</INVENTOR-NAME>
<INVENTOR-NAME>
GEPHARDT, DOUGLAS D.
</INVENTOR-NAME>
<INVENTOR-NAME>
MAGNUSSON, HANS L.
</INVENTOR-NAME>
<INVENTOR-NAME>
MUDGETT, DAN S.
</INVENTOR-NAME>
</INVENTORS>
<DESCRIPTION>
This invention relates in general to microprocessors 
and, more particularly, to a type of 
microprocessor referred to as an "integrated 
microprocessor". An "integrated microprocessor" is a 
microprocessor in which an otherwise standalone 
microprocessor layout is integrated with other functional 
units on a common semiconductor die. Over the years, microprocessors have become 
increasingly complex as they have progressed from early 8 
bit implementations through later 16 bit, 32 bit and 64 bit 
implementations. At the same time that the data bandwidth 
of microprocessors has increased, the amount of 
functionality provided on a single semiconductor die has 
also substantially increased. For example, whereas the 
standalone Intel 386 microprocessor includes mainly a CPU 
and a memory management unit (MMU), in comparison the  
 
standalone Intel 486 microprocessor includes a CPU, a 
floating point unit (FPU), a cache and memory management 
unit (MMU) all located together on the same semiconductor 
die. It is desirable to integrate the microprocessor even 
further by including such functional units as the interrupt 
controller, direct memory access (DMA) circuitry and memory 
controller all on the same semiconductor die together with 
the standalone microprocessor design layout. 
Microprocessors with such a very high degree of functional 
integration will be referred to as "integrated processors" 
or "integrated microprocessors". In other words, 
"integrated processors" are those processors which include a 
standalone microprocessor layout and one or more functional 
units all on the same semiconductor die. Integrated processors present increased challenges to 
the microprocessor designer in terms of functional 
testability. In the case of older microprocessors, 
functional units such as DMA, the interrupt controller, the 
FPU, and others were located on a separately packaged chip 
or discrete circuitry separate from the microprocessor. In 
those cases, the functional unit was readily accessible for 
testing. However, when these functional units are 
integrated on a common semiconductor die in an "integrated 
processor", they are much less accessible to those involved 
in device and system testing. It will be assumed that the integrated processor is 
intended for use as part of a larger functional structure 
such as a personal computer, workstation or other computing 
device. For convenience, the board on which the integrated 
processor is located will be called the motherboard, as is  
 
common
</DESCRIPTION>
<CLAIMS>
1. An integrated microprocessor comprising: 
   a semiconductor die; 

   a central processing unit situated on said die; 
   a local bus situated on said die and coupled to said 

central processing unit; 
   at least one functional unit situated on said die 

and coupled to said local bus; and 
   a testing circuit, situated on said die and coupled 

to said local bus, for initiating a local bus cycle for 
testing purposes in response to a test command originating 

external to said microprocessor. 
2. The integrated microprocessor of claim 1 wherein 
said testing circuit further includes decoding means for 

decoding a type of bus cycle set forth in said command. 
3. The integrated microprocessor of claim 2 wherein 
said testing circuit further includes a bus cycle state 

machine for generating the type of bus cycle indicated by 
said command. 
4. An integrated microprocessor comprising: 
   a semiconductor die; 

   a central processing unit situated on said die; 
   a local bus situated on said die and coupled to said 

central processing unit; 
   at least one functional unit situated on said die 

and coupled to said local bus; 
   a memory, coupled to said local bus, said memory 

including a debug memory space for storing debug software, 
and 

   testing means, situated on said die and coupled to 
said local bus, said testing means being operative in a bus 

cycle mode for initiating local bus cycles to test said 
microprocessor and functional units coupled thereto in 

response to test commands originating external to said 
microprocessor, said testing means being operative in a 

debug mode for executing said debug software which is stored 
in said debug memory space. 
5. The integrated microprocessor of claim 4 wherein 
said testing means further includes decoding means for 

decoding a type of bus cycle set forth in said command. 
6. The integrated microprocessor of claim 4 wherein 
said testing means includes debug mode command detecting 

means for detecting when said microprocessor receives a test 
command including a debug mode request. 
7. The integrated microprocessor of claim 4 further 
comprising: 

   at least one debug register situated in said central 
processing unit, 

   said microprocessor including address matching means 
for determining when a match occurs between an address 

stored in said debug register and an address of an 
instruction which is currently being executed, said 

microprocessor entering said debug mode when said match 
occurs. 
8. The integrated microprocessor of claim 4 further 
comprising: 

   debug instruction sensing means, situated in said 
central processing unit, for detecting when a currently 

executed instruction is a debug instruction such that said 
microprocessor enters said debug mode when said debug 

instruction is detected. 
9. A computer development system comprising: 
   a target computer including an integrated 

microprocessor having 
      a semiconductor die; 

      a central processing unit situated on said die; 
      a local bus situated on said die and 

coupled to said central processing 
unit; 

      at least one functional unit situated on said 
die and coupled to said local bus, 

      a peripheral device coupled to said 
local bus; 

      a memory coupled to said central processing 
unit and including a debug memory space 

for storing debug software; 
      testing means, situated on said die,and coupled 

to said local bus, said testing means 
being operative in a bus cycle mode for 

generating local bus cycles in response 
to test commands originating external to 

said microprocessor, said testing means 
being operative in a debug mode for 

executing said debug software which is 
stored in said debug memory space, and 

   a host computer, coupled to said target computer, 
for providing said testing means with test commands and for 

retrieving the results of said test commands from said 
target computer. 
10. The integrated microprocessor of claim 9 wherein 
said testing means further includes decoding means for 

decoding a type of bus cycle set forth in said command. 
11. The integrated microprocessor of claim 9 wherein 
said testing means includes debug mode command detecting 

means for detecting when said microprocessor receives a test 
command from said host computer including a debug mode 

request. 
12 The integrated microprocessor of claim 9 further 
comprising: 

   at least one debug register situated in said central 
processing unit, 

   said microprocessor including address matching means 
for determining when 
a match occurs between an address 
stored in said debug register and an address of an 

instruction which is currently being executed, said 
microprocessor entering said debug mode when said match 

occurs. 
13. The integrated microprocessor of claim 9 further 
comprising: 

   debug instruction sensing means, situated in said 
central processing unit, for detecting when a currently 

executed instruction is a debug instruction such that said 
microprocessor enters said debug mode when said debug 

instruction is detected. 
14. The integrated microprocessor of claim 9 further 
comprising a test bus coupling said host computer to said 

testing means of said target computer. 
15. The integrated microprocessor of claim 14 wherein 
said test bus comprises a JTAG bus. 
16. A method of testing an integrated processor, said 
processor including a die on which a CPU and at least one 

functional unit are situated and coupled together by a local 
bus, said method comprising the steps of: 

   providing said processor with a testing circuit 
coupled to said local bus and situated on said die; 

   sending a test command to said testing circuit from 
a host computer external to said integrated processor; 

   receiving said test command by said testing circuit 
thus resulting in a received test command, and 

   generating a local bus cycle, by said testing 
circuit, in response to said received test command to 

provide testing of said processor and devices coupled 
thereto. 
17. The method of claim 16 further comprising the step 
of: 

   decoding the received test command to determine the 
particular type of local bus cycle specified by said 

received test command. 
18. The method of claim 16 wherein said functional unit 
is a memory controller having a memory coupled thereto 

wherein 
   said sending step includes sending a memory write 

request command to said testing circuit, and 
   said generating a local bus cycle step includes 

generating a memory write bus cycle to test said memory. 
19. The method of claim 16 wherein said functional unit 
is a memory controller having a memory coupled thereto 

wherein 
   said sending step includes sending a memory read 

request command to said testing circuit, and 
   said generating a local bus cycle step includes 

generating a memory read bus cycle to test said memory. 
20. The method of claim 16 wherein said functional unit 
is a bus interface unit having an I/O device coupled thereto 

wherein 
   said sending step includes sending an I/O write 

request command to said testing circuit, and 
   said generating a local bus cycle step includes 

generating an I/O write bus cycle to test said I/O device. 
21. The method of claim 16 wherein said functional unit 
is a bus interface unit having an I/O device coupled thereto 

wherein 
   said sending step includes sending an I/O read 

request command to said testing circuit, and 
   said generating a local bus cycle step includes 

generating an I/O read bus cycle to test said I/O device. 
22. A method of testing an integrated processor, said 
processor including a die on which a CPU and at least one 

functional unit are situated and coupled together by a local 
bus, said method comprising the steps of: 

   storing debug software in a debug memory space in a 
memory coupled to said processor 

   providing said processor with a testing circuit 
coupled to said local bus and situated on said die; 

   sending a test command to said testing circuit from 
a host computer external to said integrated processor; 

   receiving said test command by said testing circuit 
thus resulting in a received test command, and 

   generating a local bus cycle, by said testing 
circuit, in response to said received test commands to 

provide testing of said processor and devices coupled 
thereto. 
23. The method of claim 22 further comprising the step 
of: 

   executing said debug software which is stored in 
said debug memory space thus causing said processor to 

operate in a debug mode. 
24. The method of claim 23 including the step of 
detecting when said microprocessor receives a test command 

from said host computer including a debug mode request, thus 
causing said processor to enter said debug mode. 
25. The method of claim 23 wherein said processor 
includes at least one debug register, said method further 

comprising the step of determining when a match occurs 
between an address stored in said debug register and an 

address of an instruction which is currently being executed, 
said microprocessor entering said debug mode when said match 

occurs. 
26. The method of claim 23 including the step of 
detecting when a currently executed instruction is a debug 

instruction such that said microprocessor enters said debug 
mode when said debug instruction is detected. 
</CLAIMS>
</TEXT>
</DOC>
