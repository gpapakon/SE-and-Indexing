<DOC>
<DOCNO>EP-0613237</DOCNO> 
<TEXT>
<INVENTION-TITLE>
Bidirectional chopper transconductance amplifier
</INVENTION-TITLE>
<CLASSIFICATIONS>H02P812	H02P700	H02P812	H02P729	H02P700	H02P718	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>H02P	H02P	H02P	H02P	H02P	H02P	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>H02P8	H02P7	H02P8	H02P7	H02P7	H02P7	</CLASSIFICATIONS-FOURTH>
<ABSTRACT>
A bidirectional chopper transconductance amplifier for driving a 
motor 

winding (W) provides a duty cycle signal as an input to an H bridge 
circuit (18) that provides 

a voltage output across the motor winding. The amplifier also provides 
a direction 

input that determines the polarity of the voltage output across the 
motor winding. An 

RS flip-flop (12) is set by the pulses of a cyclical chopper sync 
input signal and is reset 

as a function of the current in the motor winding and a command current 
input to 

produce the duty cycle signal. A first pair of flip-flops (14,20), 
one clocked by the trailing 

edges of the chopper sync input signal pulses and the other clocked by 
the trailing 

edges of the chopper sync input signal pulses delayed by a specified 
time, detects 

whether the RS flip-flop is reset prior to pulse trailing edge of the 
current cycle and 

prior to the specified time of the prior cycle. A second pair of 
flip-flops (24,26), clocked by 

the trailing edges of the delayed chopper sync input signal pulses, 
together with an 

XOR gate detect whether the direction input was reversed between the 
prior and 

current cycles. Logic circuitry combines the outputs of the first pair 
of flip-flops with 

the output of the XOR gate and the status of the RS flip-flop to 
generate a toggle 

function to reverse the direction input. 

</ABSTRACT>
<APPLICANTS>
<APPLICANT-NAME>
TEKTRONIX INC
</APPLICANT-NAME>
<APPLICANT-NAME>
TEKTRONIX, INC.
</APPLICANT-NAME>
</APPLICANTS>
<INVENTORS>
<INVENTOR-NAME>
KNIERIM DAVID L
</INVENTOR-NAME>
<INVENTOR-NAME>
KNIERIM, DAVID L.
</INVENTOR-NAME>
</INVENTORS>
<DESCRIPTION>
The present invention relates to transconductance amplifiers, and 
more particularly to a bidirectional chopper transconductance amplifier 
that works in four quadrants to provide drive signals for stepper and DC 
servo motors. Stepper and DC servo motor drivers typically use a 
transconductance amplifier. A command voltage is input to the amplifier 
proportional to a desired motor winding current. The transconductance 
amplifier controls the voltage across the motor winding so that the 
current in the winding approximates the desired value. It is known from EP-A-501398 to provide a linear 
transconductance amplifier for controlling the current supplied to 
windings of a motor in which the actual winding current is compared 
with a desired current to produce an error signal. Motor windings are 
then driven by power stages in which the current supplied is regulated in 
accordance with the error signal. Since direct linear drive of the motor voltage uses excessive 
power, most transconductance amplifiers use a chopping technique. For 
example if ten volts is needed across the motor winding, it is switched 
between zero volts and the supply voltage, such as forty volts, with the 
appropriate duty cycle, such as 25%, to give an average voltage of ten 
volts. If minus ten volts is needed, then the opposite end of the motor 
winding is connected to the supply voltage with the same duty cycle. A 
set of four power switches, typically transistors or FETs, is used to 
connect either end of the motor winding to either the supply voltage or 
ground. This set of power switches is called an H bridge. As with a 
linear version, the motor winding current is monitored and the output 
voltage (duty cycle) is adjusted to cause the current to approximate the 
desired value.  
 A transconductance amplifier is said to work in four quadrants if 
the voltage across the motor winding may be either polarity independent 
of the motor winding current. This is useful where the command current 
is positive but decreasing rapidly. The voltage may need to be negative 
in order to decrease the current rapidly enough through the inductance 
of the motor winding. Efficient four quadrant operation is difficult to 
achieve, especially with standard H bridge integrated circuits that do not 
allow sensing the motor winding current when the output voltage is 
zero, the recirculate state. One method is implemented in the PHASER 
III Color Printer manufactured by Tektronix, Inc., Wilsonville, Oregon, 
United States of America. In that
</DESCRIPTION>
<CLAIMS>
A bidirectional chopper transconductance amplifier for controlling 
a voltage (V) applied across a motor winding (W), the transconductance 

amplifier comprising control signal generating means (12) for generating 
a control signal having a duty cycle determined by a command current 

input and a sensed current through the motor winding when the voltage 
is applied across the motor winding in response to the control signal, 

and means (14, 16, 20) for automatically determining from the duty 
cycle and the command current input a direction input that determines 

the polarity of the voltage applied across the motor winding, the control 
signal being set by pulses of a chopper sync input signal (A) and reset 

by means (R1, 40, 42, 38) for comparing the sensed current with the 
command current input to generate a reset signal for the control signal 

generating means, wherein the means for automatically determining the 
direction input comprises means (14, 16, 20) for detecting a time when 

the reset signal is generated within each cycle of the chopper sync input 
signal and means (22, 24, 26, 28, 30, 32, 34) for toggling the direction 

input for a next cycle of the chopper sync input signal to reverse the 
polarity of the voltage output as a function of the detected time if (a) the 

reset signal is generated before a predetermined first time (T
1
) within the 
current cycle and also was generated before a predetermined second 

time (T
2
) within the prior cycle, the second time being later in each cycle 
than the first time, or (b) the reset signal is generated before the second 

time of the current cycle and the direction input was toggled to reverse 
the voltage polarity between the prior and current cycles. 
A transconductance amplifier as claimed in Claim 1 wherein the 
control signal generating means comprises an input flip-flop (12) that is 

set by the pulses of the chopper sync input signal, the output of the 
input flip-flop (12) providing the control signal.  

 
A transconductance amplifier as claimed in Claim 2 wherein the 
detecting means comprises a first flip-flop (14) that is clocked by the 

trailing edge of the pulses from the chopper sync input signal, the input 
being coupled to a negative output of the input flip-flop (12) and the 

output providing a true signal when the input flip-flop (12) is reset prior 
to the end of the pulse for the current cycle, means (16) for delaying the 

chopper sync input signal by a specified time, and a second flip-flop (20) 
that is clocked by the trailing edge of the pulses from the delayed 

chopper sync input signal, the input being coupled to the negative 
output of the input flip-flop (12) and the output providing a true signal 

when the input flip-fop (12) is reset prior to the specified time. 
A transconductance amplifier as claimed in Claim 2 or Claim 3 
wherein the toggling means comprises a first AND gate (22) having as 

inputs the outputs from the first and second flip-flops to provide a true 
output when the input flip-flop is reset in the current cycle prior to the 

end of the pulse of the chopper sync input signal and was reset in the 
prior cycle prior to the end of the specified time, means (24, 26, 30) for 

determining a state that indicates whether the direction input was 
toggled between the prior and current cycles of the chopper sync input 

signal, and means (34, 28, 32) for generating as a function of the 
determined state and the true output from the first AND gate (22) a 

toggle function for reversing the direction input. 
A transconductance amplifier as claimed in Claim 4 wherein the 
state determining means comprises a first directional flip-flop (24) 

clocked by the delayed chopper sync input signal having as an input the 
toggle function and providing the direction input as an output, a second 

directional flip-flop (26) clocked by the delayed chopper sync input 
signal having as an input the direction input from the prior cycle and  

 
providing an output, and a first XOR gate (30) having as inputs the 

outputs of the first and second directional flip-flops to provide a true 
output when the outputs of the first and second directional flip-flops are 

of opposing states. 
A transconductance amplifier as claimed in Claim 5 wherein the 
generating means comprises an OR gate (34) having as inputs the 

outputs of the first AND date (22) and first XOR gate (30) to provide a 
true output when either input is true, a second AND gate (28) having as 

inputs the output of the OR gate (34) and the negative output of the 
input flip-flop to provide a true output when the input flip-flop is reset 

and the OR gate provides the true output, and a second XOR gate (32) 
having as inputs the output of the second AND gate (28) and the 

direction input to provide the toggle function as the input to the first 
directional flip-flop. 
A transconductance amplifier as claimed in any preceding claim 
wherein the comparing means comprises means (R1) for generating a 

voltage drop from the sensed current, a first comparator (40) coupled to 
compare the sensed current and the command current input when the 

respective currents are opposite in polarity to provide a reset output, a 
second comparator (42) coupled to compare the sensed current and the 

command current input when the respective currents are the same in 
polarity to provide a reset output, and means (38) for selecting the reset 

output from one of the comparators as a function of the direction input 
as the reset signal for the input flip-flop (12). 
</CLAIMS>
</TEXT>
</DOC>
