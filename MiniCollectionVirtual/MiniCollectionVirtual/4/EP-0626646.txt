<DOC>
<DOCNO>EP-0626646</DOCNO> 
<TEXT>
<INVENTION-TITLE>
File management method for interchangeable storage media
</INVENTION-TITLE>
<CLASSIFICATIONS>G11B2012	G11B11105	G06F1200	G11B7007	G11B2732	G06F1200	G11B724	G11B2700	G11B2730	G11B730	G06F306	G11B700	G11B2700	G11B700	G11B2730	G06F306	G11B7007	G11B2732	G11B724	G11B1100	G11B2012	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>G11B	G11B	G06F	G11B	G11B	G06F	G11B	G11B	G11B	G11B	G06F	G11B	G11B	G11B	G11B	G06F	G11B	G11B	G11B	G11B	G11B	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>G11B20	G11B11	G06F12	G11B7	G11B27	G06F12	G11B7	G11B27	G11B27	G11B7	G06F3	G11B7	G11B27	G11B7	G11B27	G06F3	G11B7	G11B27	G11B7	G11B11	G11B20	</CLASSIFICATIONS-FOURTH>
<ABSTRACT>
A method of managing files of an interchangeable 
storage medium having a RAM area defining an independent 

RAM section and a ROM area defining an independent ROM 
section, each section having a file management area for 

storing file management data and a file area for storing 
files. The method includes reading file management 

information out of a file management area of the ROM 
section in response to a request for establishing a 

section in which the RAM area and the ROM area are 
mixed, converting the file management information of the 

ROM section to file management information of the mixed 
RAM-ROM section, writing the file management information 

of the mixed RAM-ROM section in a file management area 
of the mixed section, and managing ROM files and RAM 

files as files of the mixed section. 
 
</ABSTRACT>
<APPLICANTS>
<APPLICANT-NAME>
FUJITSU LTD
</APPLICANT-NAME>
<APPLICANT-NAME>
FUJITSU LIMITED
</APPLICANT-NAME>
</APPLICANTS>
<INVENTORS>
<INVENTOR-NAME>
NAKASHIMA KAZUO
</INVENTOR-NAME>
<INVENTOR-NAME>
UTSUMI KENICHI
</INVENTOR-NAME>
<INVENTOR-NAME>
NAKASHIMA, KAZUO
</INVENTOR-NAME>
<INVENTOR-NAME>
UTSUMI, KENICHI
</INVENTOR-NAME>
</INVENTORS>
<DESCRIPTION>
This invention relates to a method of managing
files in an interchangeable storage medium. More
particularly, the invention relates to a file management
method for an interchangeable storage medium having a
RAM area and a ROM area, in which these areas serve as
mutually independent RAM and ROM sections, respectively,
and each section has a file management area for storing
file management data and a file area for storing files.In an optical disk, laser light is narrowed down to
a very small beam spot having a diameter of about 1 µm
to perform recording and playback of information
signals. This is advantageous in that recording density
is high and memory cost low on a per-bit basis.
Moreover, high-speed access is possible and
recording/playback can be carried out in a contactless
manner. Such optical disks have been put into practical
use as high-density large-capacity memories.Optical disks can be classified broadly into
optical disks (ROM disks) on which information is stored
in advance and only reproduction is possible, optical
disks (RAM disks) that allow information to be both
recorded and reproduced, and partial-ROM disks in which
a single optical disk has both of the above-mentioned
features. As shown in Fig. 12A, a ROM disk is such that
information is recorded as pits 2 in a transparent
plastic layer 1, a metal film (e.g., aluminum) 3 is
formed on the pit surface as by vapor deposition, and a
protective layer 4 is provided on the metal film 3. In
a ROM disk of this kind, the signal layer (the pits and
metal film) is irradiated with a laser beam LB via an
objective lens OL, as illustrated in Fig. 12B. When
this done, almost all of the light returns intact from
locations devoid of pits, whereas the light is refracted
by pits at locations where the pits are present. Only
some of the returned light actually returns to the
objective lens OL since part of the light falls outside
the visual field of the objective lens. Accordingly,
the information can be read by using a photodiode to
detect the returning light. Thus, with a ROM disk,
information is recorded in the form of pits. This is
advantageous in that the information is less likely to
be damaged in comparison with magnetic recording, and a
large quantity of information can readily be produced on
a large number of disks by stamping. Such an optical
disk is effective as a storage medium for electronic
publishing. A shortcoming, however, is that it is not
possible for the user to write information such as text
on the ROM disk himself.A RAM disk (a
</DESCRIPTION>
<CLAIMS>
A method of managing files of an interchangeable storage
medium having a RAM area and a ROM area 
characterized in that

said method comprises the steps of:

inputting a request for converting an optical storage
medium (11) having a RAM area (llb) originally serving as a

RAM section and a ROM area (11a) originally serving as a ROM
section into a storage medium (11') having a mixed RAM-ROM

section in which the RAM area and ROM area are mixed, each
original section having a file management area (11a-1, 11b-1)

for storing file management information and a file area (11a-2,
11b-2) for storing files,
reading the file management information out of the file
management area (11a-1) of the ROM section (11a) in response

to said request,
converting the file management information of the
original ROM section (11a) to a mixed RAM-ROM section file

management information by making cluster numbers contained in
the file management information of the original ROM section

(11a) into cluster numbers of the mixed RAM-ROM section;
storing the mixed RAM-ROM section file management
information in a mixed RAM-ROM section file management area

(11c);
storing file management information of the RAM section in
the mixed RAM-ROM section file mamanagement area (11c-1) as

the mixed RAM-ROM section file management information; and
managing ROM files and RAM files as files of the mixed
RAM-ROM section based upon the mixed RAM-ROM section file

management information.
The method according to claim 1, wherein said
interchangeable storage medium is a partial-ROM photomagnetic

disk, and said file management information has directory
information indicating correlation between file names and

first cluster numbers of files, as well as a space-allocation
management table that designates a storage location of a file

by linkage of cluster numbers;

   the file management information of the ROM section being
converted to the file management information of the mixed

section by making cluster numbers of the directory information
and space-allocation management table, both of which are

contained in the file management information of said ROM
section, into cluster numbers of the mixed section. 
The method according to claim 1, 
characterized in that

said converting step includes:

determining a starting position A of the file area (11a-2)
of the ROM section in the form of a logical block number,
determining a difference D between the storage capacity
of the mixed section and the storage capacity of the ROM

section in the form of a logical block count,
determining a position, which is offset from the file
starting position A of the ROM section by said difference D,

which is expressed by the logical block count, as a file
starting position B of the mixed section (11c-2);
dividing the logical block count D between the file
starting position A of the ROM section and the file starting

position B of the mixed section by the number of blocks per
cluster to determine an offset cluster count C between these

two positions; and
adding the offset cluster count C to cluster numbers of
directory information and a space-allocation management file,

both of which are contained in the file management information
of the ROM section, thereby to convert the file management

information of the ROM section to file management information
of the mixed section.
The method according to claim 3, further comprising
the following steps in a case where said logical block count D

is found to be indivisible when it is divided by the number of
blocks per cluster:


correcting the allowable difference D to D' in such a
manner that said logical block count will be rendered

divisible by the number of blocks per cluster; and
adopting a position, which is offset from the file
starting position A of said ROM section by the corrected

allowable difference D', as a file starting position B of the
mixed section.
The method according to claim 1, 
characterized in that

an optical storage medium having RAM areas originally serving
as RAM sections and a ROM area originally serving as a ROM

section is converted into a storage medium having a single
mixed RAM-ROM section in which the entire RAM areas and the

ROM area are mixed by

   converting file management information of the ROM section
into mixed RAM-ROM section file management information of a

single mixed RAM-ROM section by making cluster numbers
contained in the file management information of the original

ROM section into cluster numbers of the single mixed RAM-ROM
section, and

   storing the mixed RAM-ROM section file management
information in a single mixed RAM-ROM section file management

area. 
The method according to claim 5, wherein said file
management information has directory information indicating

correlation between file names and first cluster numbers of
files, as well as a space-allocation management table that

designates a storage location of a file by linkage of cluster
numbers;

   the file management information of the ROM section being
converted to the file management information of the single

mixed RAM-ROM section by making cluster numbers of the
directory information and space-allocation management table,

both of which are contained in the file management information
of said ROM section, cluster numbers of the single section.
The method according to claim 6, wherein said step of
converting the file management inform
ation includes the steps
of:


determining a starting position of the file area of the
ROM section and a starting position of the file area of the

single section in the form of respective logical block
numbers;
dividing a difference between these logical block numbers
by a number of blocks per cluster to thereby determine an

offset cluster count between the two starting positions; and
converting the file management information of the ROM
section to file management information of the single section

by adding the offset cluster count to cluster numbers of the
directory information and space allocation management table,

both of which are contained in the file management information
of said ROM section.
The method according to claim 7, wherein said step of
converting the file management information further includes an

adjusting step, in a case where said difference is found to be
indivisible when it is divided by the number of blocks per

cluster, of adjusting the logical block number of the file 
starting position of the ROM section by increasing or

decreasing the logical block count of the RAM area in such a
manner that the difference will be rendered divisible.
The method according to claim 8, wherein said RAM area
has user blocks for storing data and spare blocks any of which

is used as a substitute in a case where a user block has
become defective, and in a case where said difference is found

to be indivisible when it is divided by the number of blocks
per cluster, the number of user blocks (the logical block

count) is increased or decreased so as to render said
difference divisible, and the number of spare blocks is

decreased or increased in such a manner that the total block
count of the RAM area is rendered constant.
The method according to claim 8, wherein said RAM
area has user blocks for storing data, spare blocks any of

which is used as a substitute in a case where a user block has
become defective, and other blocks not used, and in a case

where said difference is found to be indivisible when it is
divided by the number of blocks per cluster, the number of

user blocks (the logical block count) is increased or
decreased so as to render said difference divisible, and the

number of other blocks is decreased or increased in such a
manner that the total block count of the RAM area is rendered

constant.
The method according to claim 5, wherein said
interchangeable storage medium is a partial-ROM photomagnetic

disk.
</CLAIMS>
</TEXT>
</DOC>
