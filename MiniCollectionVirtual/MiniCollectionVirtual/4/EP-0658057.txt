<DOC>
<DOCNO>EP-0658057</DOCNO> 
<TEXT>
<INVENTION-TITLE>
Moving image coder.
</INVENTION-TITLE>
<CLASSIFICATIONS>G06T900	G06T900	H04N592	H04N592	H04N726	H04N726	H04N732	H04N732	H04N736	H04N736	H04N746	H04N746	H04N750	H04N750	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>G06T	G06T	H04N	H04N	H04N	H04N	H04N	H04N	H04N	H04N	H04N	H04N	H04N	H04N	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>G06T9	G06T9	H04N5	H04N5	H04N7	H04N7	H04N7	H04N7	H04N7	H04N7	H04N7	H04N7	H04N7	H04N7	</CLASSIFICATIONS-FOURTH>
<ABSTRACT>
A moving image coder has a forward predicting 
motion vector/prediction error amount detecting 

section (101) for detecting an optimum motion 
vector from a past frame, making a predicted image 

and calculating a prediction error amount from the 
present frame. The coder also has a backward-predicting 

motion vector/prediction error amount 
detecting section (102) for detecting an optimum 

motion vector from a future frame, making a 
predicted image and calculating a prediction error 

amount from the present frame. The coder further 
has a comparator/mode selecting section (104) for 

inputting the prediction error amounts from the 
forward predicting motion vector/prediction error 

amount detecting section (101) and the backward-predicting 
motion vector/prediction error amount 

detecting section (102), making a comparative 
calculation of the input prediction error amounts, 

and selecting one of a forward prediction mode, a 
backward-prediction mode and a bidirectional 

prediction mode. 

</ABSTRACT>
<APPLICANTS>
<APPLICANT-NAME>
SHARP KK
</APPLICANT-NAME>
<APPLICANT-NAME>
SHARP KABUSHIKI KAISHA
</APPLICANT-NAME>
</APPLICANTS>
<INVENTORS>
<INVENTOR-NAME>
AONO TOMOKO
</INVENTOR-NAME>
<INVENTOR-NAME>
FUJIWARA YOICHI
</INVENTOR-NAME>
<INVENTOR-NAME>
KATATA HIROYUKI
</INVENTOR-NAME>
<INVENTOR-NAME>
KUSAO HIROSHI
</INVENTOR-NAME>
<INVENTOR-NAME>
MIYAKE TOSHIYUKI
</INVENTOR-NAME>
<INVENTOR-NAME>
AONO, TOMOKO
</INVENTOR-NAME>
<INVENTOR-NAME>
FUJIWARA, YOICHI
</INVENTOR-NAME>
<INVENTOR-NAME>
KATATA, HIROYUKI
</INVENTOR-NAME>
<INVENTOR-NAME>
KUSAO, HIROSHI
</INVENTOR-NAME>
<INVENTOR-NAME>
MIYAKE, TOSHIYUKI
</INVENTOR-NAME>
</INVENTORS>
<DESCRIPTION>
The present invention relates to a digital 
image processor. More particularly, the present 
invention relates to a moving image coder for 
coding image data with high efficiency. In a general coding method, a digital moving 
image is divided into small blocks and a 
prediction mode is selected every image block. 
After an orthogonal transform of the moving image 
is performed with respect to a prediction error, 
the moving image is adaptively quantized. For 
example, this coding method is proposed in a 
coding system between MPEG2 frames by Hiroshi 
Watanabe in ITEJ Technical Report Vol. 16, No. 61, 
p37-42 ICS ' 92-73 (Oct. 1992). As shown in Fig. 11, a moving image can be 
considered as a series of frames continuous in a 
time direction. Since these frames are continuous 
in the time direction, an arbitrary frame has a 
high correlation with respect to a frame adjacent 
to this arbitrary frame. Image data can be  
 
effectively compressed by using prediction coding 
between the frames. Here, an I-frame is a intra 
frame for coding the moving image by using only 
information of the present frame. A P-frame is a frame predicted in a forward 
direction. The I-frame or the P-frame is used as 
a past frame. In this case, the forward 
prediction shows a frame prediction mode for 
making a prediction from the past frame. A B-frame 
is a frame capable of selecting one 
prediction from three kinds of predictions 
composed of the forward prediction, a backward 
prediction and a bidirectional prediction. Here, 
the backward prediction shows a frame prediction 
mode for making a prediction from a future frame. 
The bidirectional prediction shows a frame 
prediction mode using interpolation from both the 
past and future. The I-frame or the P-frame is used as the 
past or future frame. In a method for selecting 
the I or P frame, the I or P frame is selected 
such that the I or P frame has a minimum error 
amount among an error amount of the forward 
prediction, an error amount of the backward 
prediction and an error amount of the 
bidirectional prediction. In this case, the  
 
prediction error is set to an error in prediction 
with respect to an interpolated image made by an 
average of two frames of the past and future 
frames or made by interpolation. Fig. 9 is a block diagram showing one 
constructional example of a general coder. In 
Fig. 9, a frame memory 901 stores an input image. 
The frame memory 901 can store a plurality of 
frames to calculate a motion vector. An 
orthogonal transform section 902
</DESCRIPTION>
<CLAIMS>
A moving image coder in which each of frames 
in a moving image sequence is divided into frame 

blocks and a data amount of the moving image is 
compressed by selecting one of a forward 

prediction mode, a backward-prediction mode and a 
bidirectional prediction mode by using a motion 

vector every frame block, characterized in that 
said moving image coder comprises: 

   a forward predicting motion vector/prediction 
error amount detecting section (101) for detecting 

an optimum motion vector from a past frame, making 
a predicted image and calculating a prediction 

error amount from the present frame; 
   a backward-predicting motion 

vector/prediction error amount detecting section 
(102) for detecting an optimum motion vector from 

a future frame, making a predicted image and 
calculating a prediction error amount from the 

present frame; and 
   a comparator/mode selecti
ng section (104) for 
inputting the prediction error amounts from said 

forward predicting motion vector/prediction error 
amount detecting section (101) and said backward-predicting 

motion vector/prediction error amount 
 

detecting section (102), making a comparative 
calculation of the input prediction error amounts, 

and selecting one of said forward prediction mode, 
said backward-prediction mode and said 

bidirectional prediction mode. 
A moving image coder as claimed in claim 1, 
wherein the prediction error amounts from the 

forward predicting motion vector/prediction error 
amount detecting section (101) and the backward-predicting 

motion vector/prediction error amount 
detecting section (102) are compared with each 

other in the comparator/mode selecting section 
(104) by a differential value between these 

prediction error amounts. 
A moving image coder as claimed in claim 1, 
wherein the prediction error amounts from the 

forward predicting motion vector/prediction error 
amount detecting section (101) and the backward-predicting 

motion vector/prediction error amount 
detecting section (102) are compared with each 

other in the comparator/mode selecting section 
(104) by a ratio of these prediction error 

amounts. 
A moving image coder as claimed in claim 1, 
wherein the prediction error amounts from the 

forward predicting motion vector/prediction error 
amount detecting section (101) and the backward-predicting 

motion vector/prediction error amount 
detecting section (102) are compared with each 

other in the comparator/mode selecting section 
(104) by combining a differential value between 

these prediction error amounts with a ratio of 
these prediction error amounts. 
A moving image coder as claimed in any one of 
claims 1 to 4, wherein the moving image coder 

further comprises: 
   an odd/even field separating section (501) 

for separating odd and even fields from each 
other; 

   a forward field predicting motion 
vector/prediction error amount detecting section 

(505) for detecting a forward field predicting 
motion vector and a prediction error amount every 

each of the separated odd and even fields; 
   a backward field predicting motion 

vector/prediction error amount detecting section 
(504) for detecting a backward field predicting 

motion vector and a prediction error amount; and
 

   a comparator/mode selecting section (506). 
A moving image coder as claimed in any one of 
claims 1 to 4, wherein the moving image coder is 

arranged in a frame/field adaptive predicted 
moving image coder having six kinds of prediction 

modes obtained by combining three prediction modes 
composed of said forward prediction mode, said 

backward-prediction mode and said bidirectional 
prediction mode with two prediction modes composed 

of a frame prediction mode and a field prediction 
mode; 

   the frame/field adaptive predicted moving 
image coder comprises: 

   said forward frame predicting motion 
vector/prediction error amount detecting section 

(502) ; 
   said backward frame predicting motion 

vector/prediction error amount detecting section 
(503) ; 

   said odd/even field separating section (501) ; 
said forward field predicting motion 

vector/prediction error amount detecting section 
(505) ; 

   said backward field predicting motion 
vector/prediction error amount detecting section 

 
(504) ; and 

   said comparator/mode selecting section (506), 
and 

   this comparator/mode selecting section (506) 
determines selection of any one of the forward 

prediction mode, the backward-prediction mode and 
the bidirectional prediction mode after the frame 

prediction mode or the field prediction mode is 
determined in use. 
A moving image coder as claimed in claim 6, 
wherein each of the frame prediction mode and the 

field prediction mode in the comparator/mode 
selecting section (506) is selectively set to a 

frame/field mode in a prediction system for 
providing a minimum prediction error amount among 

a forward frame prediction error amount, a forward 
field prediction error amount, a backward frame 

prediction error amount and a backward field 
prediction error amount; 

   the forward field prediction error amount is 
set to a sum of a forward directional odd field 

prediction error amount and a forward directional 
even field prediction error amount with respect to 

the same block as an object block of said forward 
frame prediction; and

 
   the backward field prediction error amount is 

set to a sum of a backward directional odd field 
prediction error amount and a backward directional 

even field prediction error amount with respect to 
the same block as an object block of said backward 

frame prediction. 
A moving image coder as claimed in claim 6, 
wherein a sum of said forward frame prediction 

error amount and said backward frame prediction 
error amount is compared with a sum of said 

forward directional odd field prediction error 
amount, said forward directional even field 

prediction error amount, said backward directional 
odd field prediction error amount and said 

backward directional even field prediction error 
amount; and 

   each of the frame prediction mode and the 
field prediction mode in the comparator/mode 

selecting section (506) is selectively set to a 
frame/field mode in a prediction system for 

providing a smaller prediction error amount among 
said two sums. 
A moving image coder as claimed in any one of 
claims 1 to 4, wherein the moving image coder is 

 
arranged in a frame/field adaptive predicted 

moving image coder having six kinds of prediction 
modes obtained by combining three prediction modes 

composed of said forward prediction mode, said 
backward-prediction mode and said bidirectional 

prediction mode with two prediction modes composed 
of a frame prediction mode and a field prediction 

mode; 
   the frame/field adaptive predicted moving 

image coder comprises: 
   said forward frame predicting motion 

vector/prediction error amount detecting section 
(502) ; 

   said backward frame predicting motion 
vector/prediction error amount detecting section 

(503) ; 
   said odd/even field separating section (501) ; 

   said forward field predicting motion 
vector/prediction error amount detecting section 

(505) ; 
   said backward field predicting motion 

vector/prediction error amount detecting section 
(504) ; and 

   said comparator/mode selecting section (506), 
and 

   a sum of said forward frame prediction error 
 

amount, said forward directional odd field 
prediction error amount and said forward 

directional even field prediction error amount, 
and a sum of said backward frame prediction error 

amount, said backward directional odd field 
prediction error amount and said backward 

directional even field prediction error amount are 
input to said comparator/mode selecting section 

(506) ; and 
   selection of the frame prediction mode or the 

field prediction mode is determined by selecting a 
smaller one of said frame prediction error amount 

and the field prediction error amount as a sum of 
said odd field prediction error amount and said 

even field prediction error amount after one of 
the forward prediction mode, the backward-prediction 

mode and the bidirectional prediction 
mode is determined in use. 
</CLAIMS>
</TEXT>
</DOC>
