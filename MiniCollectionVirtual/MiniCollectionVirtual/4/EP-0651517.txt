<DOC>
<DOCNO>EP-0651517</DOCNO> 
<TEXT>
<INVENTION-TITLE>
Clock signal generation circuit having detective circuit detecting loss of reference clock
</INVENTION-TITLE>
<CLASSIFICATIONS>H03L708	H03L714	H03L7089	H03L708	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>H03L	H03L	H03L	H03L	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>H03L7	H03L7	H03L7	H03L7	</CLASSIFICATIONS-FOURTH>
<ABSTRACT>
A clock signal generation circuit is disclosed which 
receives a reference clock and detects, in response thereto, 

the loss of the reference clock. A phase comparator 13, 
detects the phase difference between the reference clock 

signal and an stabilized clock from a PLL synthesizer, 
a signal DOWNB state of the phase comparator 13 is fixed 

to "0" level at the time of loss of the reference clock 
signal where the reference clock can be fixed to "0" or "1" 

level. The signal DOWNB is monitored using a reference 
clock loss detection circuit 12. If the signal DOWNB 

stays at the "0" level for a prescribed length of time, 
the reference clock loss detection circuit 12 judges that 

the reference clock is lost and brings an XTALFAIL signal 
to the active state. 


</ABSTRACT>
<APPLICANTS>
<APPLICANT-NAME>
NIPPON ELECTRIC CO
</APPLICANT-NAME>
<APPLICANT-NAME>
NEC CORPORATION
</APPLICANT-NAME>
</APPLICANTS>
<INVENTORS>
<INVENTOR-NAME>
HIIRAGIZAWA YASUNORI
</INVENTOR-NAME>
<INVENTOR-NAME>
HIIRAGIZAWA, YASUNORI
</INVENTOR-NAME>
</INVENTORS>
<DESCRIPTION>
The present invention relates to a clock signal
generation circuit, and more particularly to a clock
signal generation circuit used as a clock generator
which receives a reference clock signal and generates a
prescribed clock in response to the reference clock signal,
and is equipped with a detective circuit to detect the
loss of the reference clock.The clock signal plays the basic role in the
operational sequence in, for example, a microcomputer
system. As a clock source for generating the clock signal,
is used to be made of a clock signal with certain duty
cycle given by a crystal oscillator.Recently, accompanying the increase in the clock
rate of the clock signal, the clock signal is being made
of a phase locked loop (referred to as "PLL" hereinafter)
frequency synthesizer circuit which enables to obtain a
stabilized high frequency clock using a relatively low
frequency reference clock as an input. The PLL circuit
is typically composed of a phase (and/or frequency) 
comparator (referred to as "PFC" hereinafter), a filter,
a voltage controlled oscillator (referred to as "VCO"
hereinafter) and a frequency divider circuit.In this oscillator, a output clock signal with
multiplied frequency is obtained based on the frequency
of a reference clock signal generated by a reference
oscillator, such as a crystal oscillator. However, the
problem of these oscillators is the loss of the clock
signal that is used as the reference of these oscillators.
The reference clock signal generated by the crystal
oscillator can be lost due to mechanical or some other
reasons, which significantly affects the reliability of
the system using the reference clock signal. It is for
this reason that a technique of detecting the loss of
the reference clock is disclosed in Japanese Laid-Open
Patent Application No. Hei 2-112008
and in corresponding EP 0 355 466 A2.
The contents of
the application will be described briefly as a prior art
in what follows.A block diagram of a conventional clock generator
is shown in FIG. 8. This clock generator includes an
oscillator circuit (referred to as "X-OSC" hereinafter)
11, a clock signal detect and limp mode control circuit
(referred to as "limp control circuit" hereinafter) 81
to generate a stable clock signal without the loss of an
external reference clock signal, a phase comparator 82,
a filter 83, a voltage control circuit (referred to as 
"VCC" hereinafter) 84, a VCO 16 and a frequency divider
17.A crystal 10 is coupled between an EXTAL pin and
an XTAL pin connected to the X-OSC 11. The
</DESCRIPTION>
<CLAIMS>
A semiconductor device comprising:

a phase locked loop circuit (11, 13, 14, 15, 16, 17) for
generating a controlled clock signal in response to a reference

clock signal and having a phase comparator (13), said phase
comparator (13) including a first node for receiving said

reference clock signal (XTALCLK), a second node for receiving said
controlled clock signal (MCCLK), and a third node, said phase comparator

(13) outputting a first active level to said third node when said
controlled clock signal (MCCLK) has a different phase from said reference

clock signal (XTALCLK), and outputting a first inactive level to said third
node when said controlled clock signal (MCCLK) has a same phase as said

reference clock signal (XTALCLK), and
a lock detection circuit (29) connected to said third node
for outputting a first control signal to a fourth node in

response to a level of said third node, said first control signal
being set to a second active level when said third node level is

at said first active level and being set to a second inactive
level when said third node level is at said first inactive level,

characterized by
a reference clock loss detection circuit (12) connected to
said third node and said fourth node for outputting a second

control signal to a fifth node, said second control signal being
set to a third active level for indicating a loss of said

reference clock signal (XTALCLK) when said first control signal remains at
said second active level for a predetermined time period.
The semiconductor device as claimed in claim 1, wherein 

said reference clock loss detection circuit (12) includes
a shift register (601), said shift register connected to said

third node and fourth node and generating said second control
signal by shifting said active level of said first control signal

in response to said controlled clock signal (MCCLK).
The semiconductor device as claimed in claim 1, wherein said first
control clock signal and said second control signal are supplied

to a date processing unit (1).
</CLAIMS>
</TEXT>
</DOC>
