<DOC>
<DOCNO>EP-0654757</DOCNO> 
<TEXT>
<INVENTION-TITLE>
A printing apparatus and a control method therefor
</INVENTION-TITLE>
<CLASSIFICATIONS>B41J2946	B41J2938	G06K1500	G07G101	B41J2938	G07G106	B41J2946	G06F312	G06K1500	G06F312	B41J530	B41J530	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>B41J	B41J	G06K	G07G	B41J	G07G	B41J	G06F	G06K	G06F	B41J	B41J	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>B41J29	B41J29	G06K15	G07G1	B41J29	G07G1	B41J29	G06F3	G06K15	G06F3	B41J5	B41J5	</CLASSIFICATIONS-FOURTH>
<ABSTRACT>
A printing apparatus has an operating state detection and transmission means for detecting at 
least one operating state of the printing apparatus and transmitting status information 

representing said at least one operating state to a host computer (61) to which the printing 
apparatus is connected. The operating state detection and transmission means comprises state 

detection means (47, 54, 68, 71, 72) for detecting said operating state; state change detection 
means (74, 76) for detecting a change in the output of the state detection means; and status 

transmission means (77) for transmitting said status information corresponding to the output of 
the state detection means. The status information is automatically transmitted in response to 

each change in the output of the state detection means. Such status information may be 
enabled or disabled, for instance by a corresponding control command from the host computer. 

Since the status information is automatically sent if and only if a detected operating state of 
the printing apparatus has changed, a high reliability is achieved with the smallest possible 

amount of status information to be sent and processed by the host computer. 

</ABSTRACT>
<APPLICANTS>
<APPLICANT-NAME>
SEIKO EPSON CORP
</APPLICANT-NAME>
<APPLICANT-NAME>
SEIKO EPSON CORPORATION
</APPLICANT-NAME>
</APPLICANTS>
<INVENTORS>
<INVENTOR-NAME>
HYONAGA TAKUYA
</INVENTOR-NAME>
<INVENTOR-NAME>
KOAKUTSU NAOHIKO
</INVENTOR-NAME>
<INVENTOR-NAME>
TERADAIRA MITSUAKI
</INVENTOR-NAME>
<INVENTOR-NAME>
HYONAGA, TAKUYA
</INVENTOR-NAME>
<INVENTOR-NAME>
KOAKUTSU, NAOHIKO
</INVENTOR-NAME>
<INVENTOR-NAME>
TERADAIRA, MITSUAKI
</INVENTOR-NAME>
</INVENTORS>
<DESCRIPTION>
The present invention relates to a printing apparatus, and, more particularly, it relates to a
printing apparatus suitable for systems, such as point-of-sale (POS) terminals and electronic
cash registers (ECR), used in processing monetary transactions.Conventional printing apparatuses include a status request command within the control
command set, and send printing apparatus operating status information to a host computer in
response the each status request command received from the host computer. The host
computer sends the status request command as required to obtain the current status of the
printing apparatus.However, when the status of the printing apparatus changes between execution of one status
request command and the execution of the next following status request command, the host
computer is not immediately informed about such change, and so a time delay occurs
corresponding to the time interval between the moment the status changes and the execution
of the next following status request command. To reduce this time delay, the host computer
frequently sends the status request command to the printing apparatus at a very short interval.
This frequent sending of the status request command greatly increases the overhead on the
host computer.Thus, since a large volume of status data is sent from the printing apparatus irrespective of
whether there is a change in the printing apparatus status, the efficiency of status data
interpretation in the host computer is significantly reduced because status data having the
same content is received and interpreted more than once consecutively. Finally, frequent
execution of the status request command by the printing apparatus also reduces the
throughput of the printing operation.A printing apparatus according to the prior art portion of claim 1 is disclosed in US-A-5,124,809
and GB-A-2 225 468. In this prior art, a host system is connected to an image
forming device and optional units are in turn connected to the image forming unit. The image
forming device comprises a controller and a print engine. Operating states are sent from the
print engine and optional units to the controller while the controller sends control commands to
the print engine and the optional units. This prior art does not disclose any means that would
allow the host system to know which operating state changed, if any.The object of the present invention is to provide a printing apparatus, and a method of
controlling it, that allow the host device to be informed if an operating state
</DESCRIPTION>
<CLAIMS>
A printing apparatus which is adapted to be connected to a host device (61) and
has an operating state detection and transmission means for detecting at least one operating

state of the printing apparatus and transmitting status information representing said at least
one operating state to the host device, wherein


said operating state detection and transmission means comprises:
state detection means (47, 54, 68, 71, 72) for detecting said operating state;
state change detection means (74, 76) for detecting a change in the output of the
state detection means; and
status transmission means (77) responsive to said state change detection means (74,
76) for transmitting said status information upon each change in the output of the state

detection means, and
the printing apparatus further comprises:
command receiving means (62-64) for receiving, interpreting and executing a control
command sent from the host device (61) and enabling/disabling means (66, 73, 75) responsive

to said command receiving means for bringing said operating state detection and transmission
means into either a first condition enabling said status information transmission or a second

condition disabling said status information transmission,
characterized in that
 said status transmission means (77) is adapted to transmit said
status information in response to said enabling/disabling means (66, 73, 75) bringing said

operating state detection and transmission means into said first condition.
The apparatus according to claim 1 wherein the state change detection means
comprises:


status storing means (76) for storing the status information transmitted to the host
device; and
state comparing means (74) for comparing previously stored status information with
the state currently detected by the state detection means.
The apparatus according to claim 1 or 2, wherein:

a plurality of state detection means (47, 54, 68, 71, 72) corresponding to the number
of operating states to be detected is provided, and
the state change detection means (74, 76) is adapted to detect a change in the
output of each of these state detection means;
wherein said status information is transmitted in response to each change in the
output of any one of the state detection means.
The apparatus according to claim 3, wherein said enabling/disabling means (62-64,
66, 73, 75) comprises selection means (75) for selecting one or more of said state detection

means (47, 54, 68, 71, 72), wherein said status information is transmitted only in response to
a change in the output of a selected state detection means. 
The apparatus according to claim 4 wherein said status information includes status
data representing at least the operating state or operating states detected by the selected one

or more state detection means.
The apparatus according to claim 4 or 5 wherein:

said plurality of state detection means (47, 54, 68, 71, 72) are grouped into one or
more groups of state detection means; and
said status information includes at least status data representing the operating states
detected by the state detection means which are part of a group that includes a selected state

detection means.
A printing apparatus according to claim 6 wherein:

one group of state detection means includes at least state detection means (68) for
detecting abnormal printing apparatus states, state detection means (47) for detecting

presence or absence of print media, and detection means (72) for detecting whether the
printing apparatus is or is not ready to receive data from the host device.
A control method in a printing apparatus for transmitting operating status
information to a host device, said control method comprising the steps:


(a) detecting an operating state of the printing apparatus;
(b) detecting a change in said operating state;
(c) transmitting, in response to a change detected in step (b), operating status

information including status data representing the operating state detected in step (a);
(d) repeating steps (a) to (c);
(e) receiving and interpreting a control command from the host device; and
(f) enabling or disabling status information transmission to the host device in
accordance with the control command, wherein at least step (c) is performed only when status

information transmission is enabled,
characterized by
 the step of
(g) transmitting said operating status information in response to a control command
enabling said status information transmission.
The method according to claim 8 wherein step (b) comprises:

(b1) storing the last status information transmitted to the host device; and
(b2) comparing the stored status information with the state detected in step (a).
The method according to claim 8 or 9 wherein:

step (a) comprises detecting a plurality of operating states of the printing apparatus;
step (b) comprises detecting a change in each of the operating states detected in step
(a); and
step (c) comprises transmitting said operating status information in response to a any
change detected in step (b).
The method according to claim 10 wherein

step (f) comprises enabling status information transmission by selecting one or more of
said operating states; and
step (c) comprises transmitting said operating status information in response to a any
change in a selected one of the operating states detected in step (a).
The method according to claim 10 or 11 wherein step (a) comprises grouping said
plurality of operating states into one or more groups, and wherein said status information

includes at least status data representing those of the operating states detected in step (a)
which are part of a group that includes a selected operating state.
</CLAIMS>
</TEXT>
</DOC>
