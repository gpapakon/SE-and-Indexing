<DOC>
<DOCNO>EP-0628917</DOCNO> 
<TEXT>
<INVENTION-TITLE>
Multiprocessor system
</INVENTION-TITLE>
<CLASSIFICATIONS>G06F1580	G06F1516	G06F1517	G06F1576	G06F15163	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>G06F	G06F	G06F	G06F	G06F	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>G06F15	G06F15	G06F15	G06F15	G06F15	</CLASSIFICATIONS-FOURTH>
<ABSTRACT>
A multilevel multiprocessor system (1) comprising 
a number of processing units (3), each comprising a 

number of multiprocessor modules (5) connected to a 
first direct-access line (10) to form a first 

hierarchical level (region); the processing units (3) 
comprising subsets of multiprocessor modules (5) 

connected to respective second direct-access lines (14) 
to form a second hierarchical level (family); and each 

multiprocessor module (5) comprising a number of 
processing modules (PE) connected to a direct-access 

(group) line (34) connected to the first (10) and second 
(14) lines. 


</ABSTRACT>
<APPLICANTS>
<APPLICANT-NAME>
ELSAG SPA
</APPLICANT-NAME>
<APPLICANT-NAME>
ELSAG SPA
</APPLICANT-NAME>
</APPLICANTS>
<INVENTORS>
<INVENTOR-NAME>
CONTERNO BRUNO
</INVENTOR-NAME>
<INVENTOR-NAME>
GISMONDI MAURO
</INVENTOR-NAME>
<INVENTOR-NAME>
LUPERINI VILDO
</INVENTOR-NAME>
<INVENTOR-NAME>
PESCE FERNANDO
</INVENTOR-NAME>
<INVENTOR-NAME>
CONTERNO, BRUNO
</INVENTOR-NAME>
<INVENTOR-NAME>
GISMONDI, MAURO
</INVENTOR-NAME>
<INVENTOR-NAME>
LUPERINI, VILDO
</INVENTOR-NAME>
<INVENTOR-NAME>
PESCE, FERNANDO
</INVENTOR-NAME>
</INVENTORS>
<DESCRIPTION>
The present invention relates to a multiprocessor
system.Multiprocessor systems are known comprising a
number of elementary processing units (modules)
connected to one another by data exchange lines (BUSES)
according to a multilevel architecture. Article with title
"Bus hierarchy facilitates parallel processing in 32-bit
multicomputer" of COMPUTER TECHNOLOGY REWIEW, vol. VI, no.3,
1986 Los Angeles describes a system where different groups of
autonomous computers communicate with redundant common buses via
respective common access card. Each group also uses a respective
local bus.European Patent EP-226.096 filed by ELETTRONICA
SAN-GIORGIO ELSAG S.p.A., for example, describes a
multiprocessor system comprising a first number of
elementary processing modules connected to a first
common direct-access line to form a first (family)
level; and at least one module in the first number of
modules is connected to a second common direct-access
line to form a second (region) level.The second lines are also connected to one another
by third data exchange lines to form a third (region
network) level.Internally, each module comprises a processor
connected to a fourth data exchange line defining a
fourth (private) level and communicating with a fifth 
data exchange line defining a fifth (local) level.It is an object of the present invention to
provide a perfected system of the aforementioned type.According to the present invention, there is
provided a multilevel multiprocessor system,
characterized in that it comprises:
at least one processing unit comprising a number
of multiprocessor modules PN connected to a
direct-access line to form a region level;said number of multiprocessor modules PN also
being subdivided into at least two subgroups, each
comprising respective numbers of multiprocessor modules
PN connected to a respective direct-access line to form
a family level;each multiprocessor module comprising a number
of active processing modules PE connected to a common
direct-access line to form a group level; andsaid group line also communicating with said
region line and said family line.A preferred embodiment of the present invention
will be described with reference to the accompanying
drawings, in which:
Figure 1 shows a block diagram of a multiprocessor
system in accordance with the present invention;Figure 2 shows a block diagram of a first module
in the Figure 1 system;Figure 3 shows a block diagram of a second module
in the Figure 1 system; Figure 4 shows a block diagram of a third module
in the Figure 1
</DESCRIPTION>
<CLAIMS>
A multilevel multiprocessor system
comprising:


at least one processing unit (3) comprising a
number of multiprocessor modules PN (5) each connected to a

direct-access line (10) to form a region level;
said number of multiprocessor modules PN (5)
also being subdivided into at least two subgroups, each

comprising respective numbers of multiprocessor modules
PN (5) each connected to a respective direct-access line (14)

to form a family level;
each multiprocessor module (5) comprising a
number of active processing modules PE (31) each connected to

a common direct-access line (34) to form a group level;
and
said group line (34) also being interfaced (37, 39) with
said region line (10) and said family line (14).
A system as claimed in Claim 1, characterized
in that it comprises a number of processing units (3)

connected to one another by data receiving and
transmitting means (24) to form a region network.
A system as claimed in Claim 1 or 2,
characterized in that each said processing module PE

(31) comprises at least one processor (47) and private
memory means (53) associated with said processor (47),

said processor (47) and said private memory means (53)
being connected to a private communication line (49) 

defining a private level;

said processing module PE (31) also comprising a
local communication line (66) separable/connectable

from/to said private line (49) and communicating with
said group line (34).
A system as claimed in Claim 3, characterized
in that it comprises coprocessors (51) associated with

said processors (47) and communicating with said private
line (49);


said coprocessors (51) assisting processing by
said processors (47).
A system as claimed in Claim 4, characterized
in that it comprises UPC (coprocessor paging unit) means

(58) connected to said private line (49) and cooperating

with said coprocessors (51);

said UPC means (58) translating the linear
addresses emitted by said coprocessors (51) into

physical addresses to permit access by the coprocessors
(51) to the memory of said system (1).
A system as claimed in Claim 3, 4 or 5,
characterized in that each said processing module PE

(31) comprises first RAM type private memory means (53)
communicating with said private line (49); and


second EPROM type memory means (55) communicating
with said private line (49) and supporting an operating

system and/or startup and diagnostic programs.
A system as claimed in one of the foregoing
Claims from 4 to 6, wherein each multiprocessor module 

PN (5) is formed on a main board (CSM) supporting a
number of electronic components; characterized in that

said main board (CSM) presents at least one socket (Z)
for receiving the pins (P) of an integrated circuit

forming said processor (47);

said integrated circuit forming said processor
(47) and an integrated circuit forming said coprocessor

(51) being supported on an additional (ADD-ON) board
separate from said main board (CSM).
A system as claimed in one of the foregoing
Claims from 3 to 7, characterized in that each said

processing module PE (31) comprises first decoding means
DMU (59) for receiving the connection requests emitted

by said processor (47) and/or said coprocessor (51) for
access to said private line (49), to said local line

(66) and to said group line (34);

said first decoding means (59) cooperating with
local arbitrating means (61) for controlling connection

between said private line (49), said local line (66) and
said group line (34) according to a request from said

first decoding means (59).
A system as claimed in Claim 8, characterized
in that it comprises:


first interface means (64) interposed between said
private line (49) and said local line (66); and
second interface means (72) interposed between
said local line (66) and said group line (34);
said local arbitrating means (61), on the basis of 
the command generated by said first decoding means DMU

(59), supplying said first (64) and second (72)
interface means with respective signals (F,G) for

connecting said private line (49) and said local line
(66) via said first interface means (64), and connecting

said local line (66) and said group line (34) via said
second interface means (72).
A system as claimed in Claim 9, characterized
in that it comprises:


third interface means (37) interposed between said
group line (34) and said region line (10); and
fourth interface means (39) interposed between
said group line (34) and said family line (14);
said processing module PE (31) also comprising
group arbitrating means (76) cooperating with said local

arbitrating means (61) and controlling said third (37)
and fourth (39) interface means.
A system as claimed in one of the foregoing
Claims from 2 to 10, characterized in that each said

processing module PE (31) comprises RAM local memory
means (67) connected to said local line (66) and

accessible by said processor (47).
A system as claimed in Claim 11, characterized
in that it comprises addressing means ADG (70) connected

to said local line (66) and cooperating with said local
memory means (67), for generating the addresses for said

local memory (67).
A system as claimed in any one of the 
foregoing Claims, characterized in that each said

multiprocessor module PN (5) presents direct memory
access DMA controller means (41) communicating with said

group line (34);

said DMA controller means (41) selecting addresses
of memory locations as of which to transfer/receive a

data block.
A system as claimed in Claim 13, characterized
in that it comprises second decoding means DMU (79)

cooperating with said DMA controller means (41), and
which decode the signals emitted by said controller

means (41), for generating the access requests to the
various hierarchical levels of the system;


said second decoding means (79) containing
information relative to the mapping structure of the

entire memory space of said system (1).
A system as claimed in Claim 14 dependent on
Claims 10 and 12, characterized in that said second

decoding means (79) cooperate with DMA arbitrating means
(81) communicating with said group arbitrating means

(76), for controlling access to and from said addressing
means ADG (70) for programming said addressing means

(70).
A system as claimed in Claim 15, characterized
in that said second decoding means (79) supply said DMA

arbitrating means (81) with a number of signals:

a PGM-ADG-LOC signal for requesting access by
said DMA controller means (41) to said addressing means 

ADG (70) via group level, for programming said
addressing means ADG (70) to select the memory location

as of which to transfer/receive a data block;
an ACC-GROUP signal for requesting access to the
group level;
an ACC-FAM signal for requesting access to the
family level; and
an ACC-REG signal for requesting access to the
region level.
A system as claimed in one of the foregoing
Claims from 8 to 16 dependent on Claim 11, characterized

in that said local arbitrating means (61) receive from
said first decoding means (59):


an ACC-RAM signal for requesting access to said
local memory;
an ACC-REG signal for requesting access to the
region level;
an ACC-FAM signal for requesting access to the
family level;
an ACC-GROUP signal for requesting access to the
group level; and
an ACC-DMA signal for requesting access to the
registers of said DMA controller means (41).
A system as claimed in any one of the
foregoing Claims, characterized in that it comprises at

least one memory module MEMT (16) connected between said
family line (14) and said region line (10); said memory

module MEMT (16) being directly accessible to and from 
said family line (14) and said region line (10).
A system as claimed in Claim 16, characterized
in that said memory module MEMT (16) comprises:


a data exchange line (200) communicating with the
region line (10) and the family line (14) via respective

region and family interfaces (203, 204);
a RAM memory (210) addressable in rows and
columns;
first temporary data accumulating means FIFO IN
(215) interposed between said data exchange line (200)

and a data input of said RAM memory (210); and
second temporary data accumulating means FIFO OUT
(220) interposed between said data exchange line (200)

and a data output of said RAM memory (210).
A system as claimed in Claim 18 or 19,
characterized in that said memory module (16) comprises:


address generating means (230) connected to OFFSET

RAM means (237); and
memory controlling means (235) interposed between
said address generating means (230) and said RAM memory

(210);
said memory (210) defining a data accumulating
structure comprising at least one rectangular table (T)

divisible into N number of rows R1, R2, R3...Rn, each
composed of K elementary storage modules;
said address generating means (230) obtaining
access to said table (T) in columns by sequentially

adding to the address of the first addressed storage 
module (C1) an integer K (transposition offset)

generated by said OFFSET RAM means (237) and equal to
the number K of elementary modules per row.
A system as claimed in Claim 20, characterized
in that said memory module (16) defines a data

accumulation structure composed of a number of tables
(T, T1,,,Tn) with rows of different lengths;


each said table (T, T1...Tn) being associated with
a respective processing module PE (31);
said address generating means (230) obtaining
access by columns to said tables (T, T1...Tn) using

different integers (K, K1...Kn) (transposition offsets)
generated by said OFFSET RAM means (237).
A system as claimed in one of the foregoing
Claims from 19 to 21, characterized in that said memory

module MEMT (16) comprises:

cycle control means (240) for controlling said RAM
memory (210), said first temporary data accumulating

means (215) and said second temporary data accumulating
means (220); and
group arbitrating means (245) communicating with
said cycle control means (240) and said region and

family interfaces (203, 204);
said group arbitrating means (245) arbitrating
access requests from the region line (10) and family

line (14); and, at the end of the arbitration phase,
enabling said cycle control means (240) to perform the

read/write cycles in said MEMT module (16).
A system as claimed in Claim 22 dependent on
Claim 20, characterized in that said cycle control means

(240) generate respectively:

a WE signal for write-enabling the memory (210);
an EFO signal for writing the output data from the
memory (210) in said second temporary accumulating means

FIFO OUT (220);
an EFI signal for enabling reading of the data in
said first temporary accumulating means FIFO IN (215)

and supply of said data to the memory (210);
an EDC signal for enabling said address generating
means (230); and
an EDA signal for enabling said memory controlling
means (235).
A system as claimed in any one of the
foregoing Claims from 18 to 23, characterized in that

said memory (210) is connected to an EDC block (250)
which, for the write data, generates an error-detecting

code, in particular a Hamming code, for
detecting/correcting at least one data error.
A system as claimed in any one of the
foregoing Claims from 18 to 24, characterized in that

said RAM memory (210) is connected to a CHECK MEMORY
block (265) for generating the error-detecting codes for

detecting and correcting errors in the input and output
data of the memory (210).
A system as claimed in any one of the
foregoing Claims from 2 to 25, characterized in that it 

comprises at least one data exchange module (20)
connected between said family line (14) and said region

line (10); said data exchange module (20) being directly
accessible to and from said family line (14), said

region line (10) and said data receiving and
transmitting means (24).
A system as claimed in Claim 26, characterized
in that said data exchange module (20) comprises:


at least one processor (47) communicating with a
common communication line (49) defining a private level;
a second common communication line (66)
communicating with said private line (49) via first

interface means (64) and defining a local level;
local memory means (67) communicating with said
local line (66);
a third common communication line (34)
communicating with said local line (66) via second

interface means (72) and defining a group level;
said group line (34) communicating with said
family line (14) and said region line (10);
a fourth common communication line (100) for data
exchange, communicating with said private line (49) and

with said group line (34) via respective third and
fourth interface means (101, 104); and
buffer memory means (120) communicating with said
data exchange line (100) and said data receiving and

transmitting means (24);
said buffer memory means (120) temporarily storing 
data exchanged to and from said data exchange module

(20).
A system as claimed in Claim 27, characterized
in that said data exchange module (20) comprises:


addressing means (130) communicating with said
group line (34) and said buffer memory means (120);
said addressing means (130) generating addresses
for said buffer memory means (120).
A system as claimed in Claim 28, characterized
in that said data exchange module (20) comprises:


I/O arbitrating means (110) communicating at the
input with third decoding means (59) connected to said

private line (49);
said I/O arbitrating means (110) communicating at
least with said third and fourth interfaces (101, 104)

and with a fifth interface (150) cooperating with said
data transmitting means (24);
said I/O arbitrating means (110) arbitrating
access requests to said data exchange module (20) from

said private level, from said group level and from said
data transmitting means (24).
A system as claimed in any one of the
foregoing Claims from 27 to 29, characterized in that

each said data exchange module (20) comprises:

direct memory access DMA controller means (41)
communicating with said group line (34);
fourth decoding means DMU cooperating with said
DMA controller means (41) and which decode the addresses 

emitted by said DMA controller means (41), for
generating access requests to the various system levels;
said fourth decoding means DMU (79) processing a
number of signals including at least:


a PGM-ADG-LOC signal for requesting access by
said DMA controller means (41) to an address generating

block (70) connected to said local memory (67), for
programming said local memory (67) and selecting the

memory location as of which to transfer/receive a data
block;
an ACC-GROUP signal for requesting access to
said group level (49);
a PGM-ADG-BUF signal for requesting access to
said means (130) addressing said buffer memory means

(120);
an ACC-FAM signal for requesting access to the
family level; and
an ACC-REG signal for requesting access to the
region level.
A system as claimed in any one of the
foregoing Claims from 4 to 30, characterized in that it

comprises startup means (31) for performing, upon supply
of said system (1), a system startup phase for

determining the size of the memory assignable to each

region level, family level, group level and local level.
A system as claimed in Claim 31, characterized
in that said startup means comprise:


first means (300) for determining the amount of 
storage in each family; which amount of storage is

represented, for any given n-th family, by two limit
addresses LBFn (Limit-Bottom-Family-n) and LTFn

(Limit-Top-Family-n);
second means (310) wherein the two limit addresses
LBFn, LTFn defined by said first means (300) are

programmed in decoders (39) of family n, so that any
address emitted by a processor (47) (or coprocessor 51)

in the n-th family and falling within said two limits
LBFn, LTFn requests access to the n-th family bus;
third means (320) which, within the two family
limits LTFn, LBFn defined by said first means (300),

identify a number of address spaces, each relative to a
group in the n-th family, each contiguous to another

space, and each represented for the m-th group by two
limit addresses LBGm (Limit-Bottom-Group-m) and LTGm

(Limit-Top-Group-m);
fourth means (340) wherein the two limit addresses
LBGm, LTGm identifying the m-th group are programmed in

decoders (96) of group m, so that any address emitted by
any processor (47) or coprocessor (51) in group m and

falling within limits LBGm, LTGm requests access to the
m-th group bus;
fifth means (350) which, within the two group
limits LBGm, LTGm defined by said third means (320),

identify, for the multiprocessor modules PN (5) only, a
number of address spaces, each relative to a local bus

in group m, each contiguous to another space, and each 
represented, for the p-th local bus, by two limit

addresses LBLp (Limit-Bottom-local-p) and LTLp
(Limit-Top-Local-p);
sixth means (360) wherein the two limit addresses
LBLp, LTLp identifying the local bus p are programmed in

decoders (58) of the module PE, so that each address
emitted by a processor (47) in the p-th module PE and

falling within limits LBLp, LTLp requests access to the
p-th local bus;
seventh means (370) for defining the overall
address space of a region, which space consists of the

combined address spaces of the families, and is defined
by two limit addresses LBR (Limit-Bottom-Region) and LTR

(Limit-Top-Region).
A system as claimed in any one of the
foregoing Claims, characterized in that each

multiprocessor module PN (5) preferentially employs said
family line (14) for data exchange with another

multiprocessor module PN (5) in the same family.
</CLAIMS>
</TEXT>
</DOC>
