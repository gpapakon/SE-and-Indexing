<DOC>
<DOCNO>EP-0646257</DOCNO> 
<TEXT>
<INVENTION-TITLE>
SYSTEM AND METHOD FOR IMPROVING MODEL PRODUCT PROPERTY ESTIMATES.
</INVENTION-TITLE>
<CLASSIFICATIONS>G05B1304	G05B1304	G05B19418	G05B19418	G06Q5000	G06Q5000	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>G05B	G05B	G05B	G05B	G06Q	G06Q	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>G05B13	G05B13	G05B19	G05B19	G06Q50	G06Q50	</CLASSIFICATIONS-FOURTH>
<ABSTRACT>
The present invention is a system (100) and method for improving stream composition and/or product property estimates from process models (110), which better reflect the true conditions of the process (104). One or more process simulation models (110) are run on a computer in parallel with the actual process (104) to provide estimates of stream composition and/or product properties to be used to control the process (104). Adjustments are made to the models (110) to maintain them in alignment with continuously measured key process variables that are closely related to stream composition and/or product properties where such a relationship exists. This greatly improves the ability of the models (110) to track the actual process (104). Additional adjustments are made to both the models (110) and to the model estimates based on differences between measured and calculated stream composition/product properties. Artificial measurements of stream composition and/or product properties can be synthesized by combining model composition estimates and flows at two or more locations in the process (104) with an analytical measurement to produce an artificial analytical value at a second location in the process (104).
</ABSTRACT>
<APPLICANTS>
<APPLICANT-NAME>
E.I. DU PONT DE NEMOURS 
&
 COMPANY INCORPORATED
</APPLICANT-NAME>
</APPLICANTS>
<INVENTORS>
<INVENTOR-NAME>
CARDNER, DAVID, V.
</INVENTOR-NAME>
</INVENTORS>
<DESCRIPTION>
SYSTEM AND METHOD FOR IMPROVING MODEL PRODUCTPROPERTY ESTIMATESCROSS REFERENCE TO CO-PENDING PATENT APPUCATIONSThe present application is related to the following concurrently filed patent application, assigned to the Assignee of the present application:U.S. Patent Application (Attorney Docket 1100.1210000) by David V. Cardner, entitled "SYSTEM AND METHOD FOR IMPROVED FLOW DATA RECONCILIATION", which is hereby incorporated by reference in its entirety.BACKGROUND OF THE INVENTION1. Field of the Invention The present invention relates a system and method for producing product property estimates for closed-loop control processes and, more particularly, to a system and method for estimating process stream compositions and/or product properties from process models, and for improving those estimates, and the application of the improved estimates to control of the process.2. Discussion of Related ArtChemical, petrochemical, and polymer products are usually manufactured through a series of operations. Each of these operations is performed by equipment especially designed to achieve specified exit stream compositions and/or product properties. The entire sequence of operations result in the production of one or more product streams which 

 ust meet prescribed stream composition and/or product property specifications. Even byproduct or waste streams must meet specifications that generally limit the amount of useful product purged.Industry has been very successful in automating the equipment regulatory control function. Control of pressure, temperature, level and flow produces stable and predictable operation of most process operations and can be most effectively applied through use of a modern distributed control system.However, control of stream composition and/or product properties (stream quality measures) is still largely a manual operation that is performed by the operator after his evaluation of analyzer or laboratory results. Attempts to automate stream composition and/or product property control using laboratory or processors analyzers have been largely unsuccessful due to reliability and accuracy limitations, or because of cost factors.Conventional techniques have taught that these problems may be overcome to a large extent by utilizing computer models of the process to compute stream quality values, and then using the computed values for closed loop control. Computer models are relatively inexpensive, highly reliable, and can be run frequently, so that time delays are of little consequence. When
</DESCRIPTION>
<CLAIMS>
What is claimed is:
1. A computer-based method for processing model generated stream composition and/or product property estimates, comprising the steps of:
(1) measuring, in a process comprising one or more units and two or more streams, pressure, temperature, and flow of said streams to produce raw process variable signals;
(2) predicting, using process models, predicted process variable signals and predicted stream composition and/or product property signals for one or more of said streams; and
(3) comparing said raw process variable signals with said predicted process variable signals to determine errors.
2. The computer-based method of claim 1, further comprising a step of using said errors to adjust alignment factors in said model to reduce future estimates of said errors.
3. The computer-based method of claim 1, wherein said errors are determined by comparing said raw process variable signals with said predicted process variable signals to determine arithmetic errors.
4. The computer-based method of claim 3, wherein said errors are determined by comparing said raw process variable signals with said predicted process variable signals to determine relative errors based on said arithmetic errors divided by the range of said raw process variable signals.
5. The computer-based method of claim 3, wherein said errors are determined by comparing said raw process variable signals with said 


predicted process variable signals to determine relative errors based on said arithmetic errors divided by the measured or calculated values.
6. The computer-based method claim 1, wherein said errors are determined by comparing said raw process variable signals with said predicted process variable signals to determine relative errors based on the logarithm of the ratio of said raw process variable signals to said predicted process variable signals.
7. The computer-based method of claim 1, further comprising the steps of: using said errors as input to a controller, and using said controller to adjust alignment factors in said model to reduce future estimates of said errors.
8. The computer-based method of claim 1, further comprising the steps of: comparing said errors with its moving average error to determine a variance; comparing said variance with the moving average variance to determine a deviation; using said deviation and a normal frequency distribution to determine a weighing factor for said errors; using said weighing factor, said error, and said moving average error to determine a new moving average error, using said new moving average error as input to a controller, and using said controller to adjust alignment factors in the said model to reduce future estimates of said errors. 


 9. The computer-based method of claim 8, further comprising the steps of: determining the number of consecutive times said deviation exceeds a threshold with the same sign for said errors to determine a count; using an artificial deviation and the normal frequency distribution to determine a weighting factor for said errors; using said weighting factor, said error, and said moving average error to determine a new moving average error; using said new moving average error as input to a controller; using said controller to adjust alignment factors in said model to reduce future estimates of the error.
10. The computer-based method of claim 9, wherein said artificial deviation is obtained by dividing said deviation by said count
11. The computer-based method of claim 9, wherein said artificial deviation is obtained by multiplying said deviation by an amplification factor.
12. The computer-based method of claim 9, wherein said artificial deviation is obtained by multiplying said deviation by said amplification factor and dividing by said count
13. The computer-based method of claim 8, further comprises the step of using said variance, said average variance, and a fixed weighting factor to determine a new moving average variance.
14. The computer-based method of claim 13, wherein said fixed weighting factor is adjusted by dividing by said deviation when said deviation exceeds a threshold. 


 15. The computer-based method of claim 1, further comprising the steps:
(4) operating said process to produce a product
(5) using said predicted stream composition and/or product property values to directly or indirectly change the state of the final control element of said process in accordance with an operating objective.
16. The computer-based method of claim 1, further comprising the steps: (4) operating said process to create said process variable signals;
(5) changing the state of a final control element of said process in accordance with said predicted stream composition and/or product property signal; and wherein said step (2) of predicting further predicts said predicted stream composition and/or product property signal.
17. A computer-based system for processing model generated stream composition and/or product property estimates, comprising:
(a) two or more sensors for producing raw pressure and temperature signals from two or more streams in a process comprising one or more units and two or more streams;
(b) one or more computer-based process models connected to receive reconciled flows and limit checked pressure, temperature, and level signals, feed composition signals, and model alignment factors, and producing said predicted pressure and temperature signals;
(c) a process variable comparison module connected to use said raw pressure and temperature signals and predicted pressure and temperature signals to determine the error between said raw signals and said predicted signals; 


 (d) a statistical filter module connected to take the said error and determine said new moving average error from the statistical history of said error; and
(e) an alignment module connected to take the said new moving average error and produce said model alignment factors for adjusting said process models.
18. The computer-based system of claim 17, further comprising: a controller, for changing the state of a final control element of said process, connected directly or indirectly to use said predicted stream composition and/or product property signals as inputs, and connected to change said state in accordance with an operating objective.
19. The computer-based system of claim 17, wherein said dynamic simulation produces a predicted stream composition and/or product property signal; and further comprising: a stream composition and/or product property controllers, connected to directly or indirectly use said predicted stream composition and/or product property signal as input, for producing a controller output signal in accordance with said input and a control objective; and an actuator for changing the state of the process, connected to change said state in accordance with said controller output signal.
20. A computer-based method for processing model generated stream composition and/or product property estimates, comprising the steps of:
(1) measuring, in a process comprising one or more units and two or more streams, stream compositions and/or product properties of said streams to produce raw stream composition and/or product property signals; 


 (2) predicting, using process models, predicted stream composition and/or product property signals for one or more of said streams; and
(3) comparing said raw stream composition and/or product property signals with said predicted stream composition and/or product property signals to determine the error.
21. The computer-based method of claim 20, further comprising the steps of: comparing said error with its moving average error to determine the variance; comparing said variation with the moving average variance to determine the deviation; using said deviation and the normal frequency distribution to determine a weighing factor for said error, using said weighing factor, said error, and said moving average error to determine a new moving average error, using said new moving average error as input to a controller, using said controller to adjust calibration factors in the said model to reduce future estimates of said error.
22. The computer-based method of claim 21, further comprising the steps of: determining the number of consecutive times said deviation exceeds a threshold with the same sign for said errors to determine a count; using an artificial deviation and the normal frequency distribution to determine a weighting factor for said errors; using said weighting factor, said error, and said moving average error to determine a new moving average error, using said new moving average error as input to a controller, 


 using said controller to adjust alignment factors in said model to reduce future estimates of the error.
23. The computer-based method of claim 22, wherein said artificial deviation is obtained by dividing said deviation by said count
24. The computer-based method of claim 22, wherein said artificial deviation is obtained by multiplying said deviation by an amplification factor.
25. The computer-based method of claim 22, wherein said artificial deviation is obtained by multiplying said deviation by said amplification .factor and dividing by said count
26. The computer-based method of claim 21, further comprises the step of using said variance, said average variance, and a fixed weighting factor to determine a new moving average variance.
27. The computer-based method of claim 26, wherein said fixed weighting factor is adjusted by dividing by said deviation when said deviation exceeds a threshold.
28. The computer-based method of claim 20, wherein said error is determined by comparing said raw stream composition and/or product property signals with said predicted stream composition and/or product property signals to determine an arithmetic error.
29. The computer-based method of claim 20, wherein said error is determined by comparing said raw stream composition and/or product property signals with said predicted stream composition and/or product 


property signals to determine a relative error based on the arithmetic difference divided by the range of said raw stream composition and/or product property signals.
30. The computer-based method of claim 20, wherein said error is determined by comparing said raw stream composition and/or product property signals with said predicted stream composition and/or product property signals to determine a relative error based on the arithmetic difference divided by the measured or calculated composition and/or product property signals.
31. The computer-based method of claim 20, wherein said difference is determined by comparing said raw stream composition and/or product property signals with said predicted stream composition and/or product property signals to determine a relative error based on the logarithm of the ratio of said raw stream composition and/or product property signals to said predicted stream composition and/or product property signals.
32. The computer-based method of claim 20, further comprising the steps:
(4) operating said process to produce a product; and
(5) using said predicted stream composition and/or product property values to directly or indirectly change the state of the final control element of said process in accordance with an operating objective.
33. The computer-based method for processing model generated stream composition and/or product estimates of claim 20, further comprising the steps: (4) operating said process to create said process variable signals; 


 (5) changing the state of a final control element of said process in accordance with said predicted stream composition and/or product property signal; and wherein said step (2) of predicting further predicts said predicted stream composition and/or product property signal.
34. A computer-based system for processing model generated stream composition and/or product property estimates, comprising: two or more sensors for producing raw stream composition and/or product property signals from two or more streams in a process comprising one or more units and two or more streams; one or more computer-based process models connected to receive reconciled flows and pressure, temperature, and level signals, said raw stream composition and/or product property signals, and model calibration factors, and producing predicted stream composition and/or product property signals; a product property transform module connected to use said reconciled flows, said raw stream composition and/or product property signals, and said predicted stream composition and/or product property signals to produce artificial stream composition and/or product property signals for streams lacking raw stream composition and/or product property signals; a product property comparison module connected to use said raw stream composition and/or product property signals, artificial stream composition and/or product property signals, and predicted stream composition and/or product property signals to determine the error between said raw signals and said predicted signals; a statistical filter module connected to take the said error and determine said new moving average error from the statistical history of said error, 


 a calibration module connected to take the said new moving average error and produce said model calibration factors for adjusting said process models; and a product property corrector module connected to take the said new moving average error and the said predicted stream composition and/or product property signals and apply said new moving average error to said predicted stream composition and/or product property signals to produce a corrected stream composition and/or product property signal.
35. The computer-based system of claim 14, further comprising a controller, for changing the state of a final control element of said process, connected directly or indirectly to use said predicted stream composition and/or product property signals as inputs, and connected to change said state in accordance with an operating objective.
36. The computer-based system of claim 34, wherein said dynamic simulation produces a predicted stream composition and/or product property signal; and wherein said system further comprises: a stream composition and/or product property controllers, connected to directly or indirectly use said predicted stream composition and/or product property signal as input, for producing a controller output signal in accordance with said input and a control objective; and an actuator for changing the state of the process, connected to change said state in accordance with said controller output signal. 


</CLAIMS>
</TEXT>
</DOC>
