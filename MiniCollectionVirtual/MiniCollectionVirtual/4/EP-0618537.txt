<DOC>
<DOCNO>EP-0618537</DOCNO> 
<TEXT>
<INVENTION-TITLE>
System and method for interleaving status information with data transfers in a communications adapter
</INVENTION-TITLE>
<CLASSIFICATIONS>G06F1332	G06F1300	H04L2906	G06F1320	H04L2908	G06F1300	H04L2906	H04L2908	G06F1328	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>G06F	G06F	H04L	G06F	H04L	G06F	H04L	H04L	G06F	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>G06F13	G06F13	H04L29	G06F13	H04L29	G06F13	H04L29	H04L29	G06F13	</CLASSIFICATIONS-FOURTH>
<ABSTRACT>
A system and method for controlling a communications 
adapter interface such that supplemental data can be interleaved 

with data being transferred. The interleaving 
is performed in a manner such that the supplemental data 

is transparent to the data mover portion of the communications 
adapter. The supplemental data can be transferred 

in either read or write cycles that are interleaved at the 
beginning, in the middle, or at the end of data bursts or 

block data transfers. As a result of the interleaving, 
the slave interface bus is more fully utilized because 

arbitration and bus ownership changes do not create unused 
cycles. The
 interleaving is accomplished by temporarily 
halting an existing transfer of data and transferring the 

requested supplemental data while the data transfer is 
halted. After the supplemental data is transferred, the 

transfer of the balance of the data block is then allowed 
to continue. In other words, the present invention 

"steals" a cycle from the data transferror and uses this 
cycle to transfer supplemental data. 


</ABSTRACT>
<APPLICANTS>
<APPLICANT-NAME>
IBM
</APPLICANT-NAME>
<APPLICANT-NAME>
INTERNATIONAL BUSINESS MACHINES
</APPLICANT-NAME>
</APPLICANTS>
<INVENTORS>
<INVENTOR-NAME>
ALLEN JAMES JOHNSON JR
</INVENTOR-NAME>
<INVENTOR-NAME>
COOPER RONALD JULIUS
</INVENTOR-NAME>
<INVENTOR-NAME>
COX DOUGLAS HAROLD
</INVENTOR-NAME>
<INVENTOR-NAME>
MCNEIL WILLIAM LLOYD
</INVENTOR-NAME>
<INVENTOR-NAME>
RIVERA-SANCHEZ HERBERT
</INVENTOR-NAME>
<INVENTOR-NAME>
TOMLINSON TERRI LEE
</INVENTOR-NAME>
<INVENTOR-NAME>
ALLEN, JAMES JOHNSON, JR.
</INVENTOR-NAME>
<INVENTOR-NAME>
COOPER, RONALD JULIUS
</INVENTOR-NAME>
<INVENTOR-NAME>
COX, DOUGLAS HAROLD
</INVENTOR-NAME>
<INVENTOR-NAME>
MCNEIL, WILLIAM LLOYD
</INVENTOR-NAME>
<INVENTOR-NAME>
RIVERA-SANCHEZ, HERBERT
</INVENTOR-NAME>
<INVENTOR-NAME>
TOMLINSON, TERRI LEE
</INVENTOR-NAME>
</INVENTORS>
<DESCRIPTION>
This invention relates to communications adapters, and
more specifically to a system and method for interleaving
control, status, diagnostic information and/or other data
with data being transferred by a communications adapter.With the advent of low-cost computing capacity, computers
and processor-based systems have found their way into
numerous environments and applications. Computers and
processor-based systems can be found in contemporary offices,
plants, homes and other facilities. As the popularity
of computer systems increases and new utility is
found for their application, market forces tend to result
in an increase in computing power at a given cost point.
This is a result of new innovations to meet market demands
for more processing power, and economies of scale associated
with high-volume production.To meet market demands for faster computing, system designers
have enhanced almost every aspect of processor-based
systems. One area of enhancement is in processor
communications. For example, the Sisley High-Performance
Parallel Bus (HPPB) structure was developed to provide
high speed communications among processor devices. The
HPPB bus allows high-speed parallel transfer of data among
CPUs (central processing units), memories, disk drives,
external interfaces and other I/O, and the like.An additional development associated with the widespread
use of processor-based systems was the evolution of communications
techniques whereby distinct processors in multiple
locations can communicate with one another. One such 
technique involves the use of Local Area Networks (LANs)
to allow processors to share data with each other. To
accomplish this sharing of data, computers send data to
one another across the LAN. The data is packaged for
transmission into packets. Interfacing a processor to the
LAN is accomplished using a device called a LAN controller.Typical LAN controllers can be characterized as having a
transfer rate that is quite slow as compared to the HPPB
bus. This can generally be attributed to the large amount
of overhead associated with typical LAN controllers. Because
of this rate differential, interfacing an HPPB bus-based
system to a LAN can have an adverse impact on the
performance of the HPPB system. When a LAN controller
transfers data to or from the HPPB bus, its inefficiencies
result in a communications exchange that "ties up" the
HPPB bus for a period of time that is longer than desired.
This prohibits the HPPB bus from allowing other data
transfers during this time. Because the HPPB
</DESCRIPTION>
<CLAIMS>
A system for interleaving second data with first data already being transferred between a
first device and a second device, the data transfer taking place over a communications

channel, wherein the first and second devices may operate at different speeds, said
system characterized in that it comprises


first means for transferring the first data between the first and second devices;
second means for receiving said second data from one of the first and second devices,
wherein said received second data is to be transferred to the other one of the first and

second devices; and
third means, coupled to said first and second means, for interleaving the received second
data with the first data already being transferred;
said third means being characterized in that it comprises
means for inhibiting said first means from transferring the first data for at least one
transfer cycle; and
means for transferring said second data between the first and second devices during said
at least one transfer cycle that said first means is inhibited from transferring the first

data.
The system of claim 1 characterized in that it comprises:

a first bus, connected to said first means, wherein the first data is transferred via said
first bus between the communications channel and the first device; and
a second bus, connected to said second means, wherein the second data is transferred
via said second bus between the communications channel and the first device.
The system of claim 2, wherein said third means is characterized in that it comprises:

means, coupled to said first means, for inhibiting said first means from updating at least 
one of address counters and byte counters for at least one transfer cycle;
means, coupled to said first bus, for disconnecting said first bus from the
communications channel during said at least one transfer cycle that said first means is

inhibited; and
means, coupled to said second bus, for connecting said second bus to the
communications channel during said at least one transfer cycle that said first means is

inhibited;

wherein said first means transfers the second data during said at least one transfer cycle
that said first means is inhibited.
The system of claim 3, characterized in that it comprises:

fourth means for determining whether said first means is currently transferring the first
data between the first and second devices and
fifth means for transferring the second data between the first and second devices if said
first means is not currently transferring the first data between the first and second

devices.
The system of claim 2 or 3 or 4, characterized in that it comprises:

fourth means, coupled to said first and second bus, for interfacing between said first and
second bus and the first device, wherein said fourth means can function as at least one of

a slave and a master interface.
The system of claim 1 , characterized in that it comprises means, coupled to said first
means, for controlling the transfer of the first data between the first device and the

second device.
The system of claim 6 or 1, wherein said fourth means is characterized in that it
comprises: 


buffer means for temporarily storing the first data being transferred;
means for controlling storage and retrieval of the first data in said buffer means and for
controlling the transfer of the first data between said buffer means said first means and

the first device and
bus means, coupled to said buffer means and to said processor means, for providing
connectivity between said buffer means, said processor means, the first device and said

first means.
The system according to claim 2 or 3 or 4 used as a communications adapter
characterized in that:


said first means is a data mover coupled to said first bus; and
said third means is a command executor coupled to said data mover and said second
bus, wherein said command executor is configured to control the transfer of the second
data between the first and the second device.
The communications adapter of claim 8, characterized in that:

the second means is a first interface configured to interface the communications adapter
to the first device;
it comprises a second interface, coupled to said data mover, configured to interface the
communications adapter to the second device;
the second bus is a command executor bus, coupled between said first interface and said
command executor, configured to transfer supplemental data between said command

executor and said first interface.
A method of interleaving second data with first data being transferred between a first
device and a second device over a communications channel by a data mover, wherein

the first and second devices may operate at different speeds, and wherein data is
transferred in units, each unit transferred during one transfer cycle, characterized in that 

it comprises the following steps:

(a) receiving the second data to be transferred between the first device and the second
device; and
(b) interleaving the second data with the first data being transferred, wherein said
interleaving comprises the steps of inhibiting data mover counters from updating for at

least one transfer cycle

transferring the second data between the first and second devices while said data mover
counters are inhibited, and

resuming the transfer of the first data between the first and second device during one or
more transfer cycles after said at least one transfer cycle that said data mover counters

are inhibited.
The method of claim 10, characterized in that it comprises the steps of:

(c) determining whether the data mover is currently transferring data between the first
and second devices;
(d) completing a current transfer cycle before per forming said step (b) if the first data is
currently being transferred over the communications channel by the data mover; and
(e) transferring the second data between the first and second devices without
interleaving if the data mover is not currently transferring the first data between the first

and second devices.
The method of claim 10 or 11, characterized in that it comprises the steps of:

(f) disconnecting a first bus from the communications channel during said at least one
transfer cycle that said data mover counters are inhibited, wherein said first bus is used

in the transfer of the first data between said first and second devices; and
(g) connecting a second bus to the communications channel during said at least one
transfer cycle that said data mover counters are inhibited, wherein said second bus is 

used in the transfer of the second data between the first and second devices.
The method of claim 10 or 11 or 12 characterized in that it comprises the step of rate
buffering the first data to compensate for a difference in data transfer rates between the

first and second devices.
</CLAIMS>
</TEXT>
</DOC>
