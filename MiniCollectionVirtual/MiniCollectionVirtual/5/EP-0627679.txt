<DOC>
<DOCNO>EP-0627679</DOCNO> 
<TEXT>
<INVENTION-TITLE>
Data flow control apparatus and memory apparatus.
</INVENTION-TITLE>
<CLASSIFICATIONS>G06F100	G06F100	G06F2100	G06F2100	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>G06F	G06F	G06F	G06F	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>G06F1	G06F1	G06F21	G06F21	</CLASSIFICATIONS-FOURTH>
<ABSTRACT>
There are provided a data flow control apparatus for 
outputting data through a switchover and a memory apparatus 

in which such a data flow control apparatus is incorporated. 
A replacement data is defined for an array of addresses which 

would not appear sequentially as in a branch instruction and 
the like. The replacement data is only outputted when the 

address data are inputted in the order of the array. Thus, it 
is possible to prevent an illegal copy of softwares. 


</ABSTRACT>
<APPLICANTS>
<APPLICANT-NAME>
KAWASAKI STEEL CO
</APPLICANT-NAME>
<APPLICANT-NAME>
KAWASAKI STEEL CORPORATION
</APPLICANT-NAME>
</APPLICANTS>
<INVENTORS>
<INVENTOR-NAME>
SHIBATA YOSHIAKI C O TOKYO MAI
</INVENTOR-NAME>
<INVENTOR-NAME>
YONEDA MASATO C O TOKYO MAIN O
</INVENTOR-NAME>
<INVENTOR-NAME>
SHIBATA, YOSHIAKI, C/O TOKYO MAIN OFFICE OF
</INVENTOR-NAME>
<INVENTOR-NAME>
YONEDA, MASATO, C/O TOKYO MAIN OFFICE OF
</INVENTOR-NAME>
</INVENTORS>
<DESCRIPTION>
The present invention relates to a data flow control 
apparatus for outputting data through a switchover and a 
memory apparatus in which such a data flow control apparatus 
is incorporated, and more particularly to a data flow control 
apparatus used as means for preventing an illegal copy of 
softwares in a control system or a game system such as a 
computer game, and the like, which are controlled by a CPU 
(Central Processing U nit) and a software, and a memory 
apparatus in which such a control apparatus is built. For example, as shown in Fig. 33, the conventional 
control system comprises a CRT 2, a CPU 3, a ROM 4, a 
terminal 5 and an SRAM 6 which all are coupled to a data 
bus 1. According to such a control system, in general, a 
software is stored in the ROM 4, and is selectively processed 
in accordance with an instruction for starting the software 
from the terminal 5. A processing result is displayed on the  
 
CRT 2. When it is required during the processing to 
temporarily store the data, the SRAM 6 is utilized. 
Alternately, it also happens that a part of the software is 
down loaded from the ROM 4 on the SRAM 6 and be subjected to 
the processing by the CPU 3. The software stored in the ROM 4 is arranged, as 
shown in Fig. 34, in such a manner that various data "D" are 
each stored in the associated address "A" indicating the 
storage address of the data. Thus, the software is executed 
in the CPU 3 by the use of data D outputted in compliance 
with the address A issued from the CPU 3. In the above described control system or a game 
system adopting such a control system, a portion of the ROM 4 
shown in Fig. 33 is detachably arranged on a cassette basis. 
Thus, when a cassette 9 is interchanged, there is performed a 
control according to a storage content of the ROM 4 which the 
cassette 9 is equipped with, or a person may enjoy the game 
according to the storage content. A cassette type arrangement of the portion of the ROM 
4 for accommodating the software permits the content of the 
ROM 4 or data D to be outputted to a data line 8 by means of 
simply applying the address A via an address line 7. Thus, such a simple structure allows an illegal copy 
of the software through reading all data D by means of  
 
sequentially applying all addresses A. This causes such a 
serious problem that a profit of a proper rightful person 
concerning with the software, which would be developed 
through investing a lot of money and labor and taking up a 
lot of time, is damaged. In view of the
</DESCRIPTION>
<CLAIMS>
A data flow control apparatus comprising: 
   a first input terminal for sequentially receiving a 

first input data; 
   a second input terminal for sequentially receiving a 

second input data; 
   an output terminal through which output data are 

sequentially outputted; 
   memory means for storing one or more replacement 

data which are defined for associated one or more arrays, 
respectively, each including a plurality of said first input 

data; and 
   data switching means for outputting through said 

output terminal, as said output data, mutually different data 
which are selected from among a data group in accordance with 

whether or not a plurality of said first input data, which 
include an up-to-date first input data entered through said 

first input terminal and go back from the up-to-date first 
input data to their inputted order, correspond to any one of 

said arrays, where said data group consists of a first output 
data wherein at least a part of bits or the whole bits of 

said second input data entered from said second input 
terminal are replaced by said replacement data defined 

 
corresponding to said array, a second output data having the 

same logic as said second input data entered through said 
second input terminal, a third output data produced through a 

logical operation based on said first output data, and a 
fourth output data produced through a logical operation based 

on both said first output data and said second output data. 
An apparatus according to claim 1, wherein said 
memory means has one or more memory areas for storing said 

replacement data, and said data switching means comprises: 
   data reference means for storing one or more 

reference retrieval data as an object of retrieval as to 
whether or not it matches retrieval data including a 

plurality of said first input data entered sequentially 
through said first input terminal, and for outputting, when 

said retrieval data matches any of said reference retrieval 
data, an access signal to read the replacement data from said 

memory area in which the replacement data associated with the 
reference retrieval data detected in match is stored; and 

   data output means for outputting through said output 
terminal, as said output data, mutually different data 

which are selected from among a data group in accordance with 
whether or not said access signal is present, where said data 

group consists of a first output data wherein at least a part 
of bits or the whole bits of said second input data entered 

 
from said second input terminal are replaced by said 

replacement data read from said memory means, a second 
output data including said second input data entered through 

said second input terminal, a third output data produced 
through a logical operation based on said first output data, 

and a fourth output data produced through a logical operation 
based on both said first output data and said second output 

data. 
An apparatus according to claim 2, wherein said 
reference means stores said reference retrieval data defined 

by a combination of an enhancement transistor and a depletion 
transistor. 
An apparatus according to claim 2, wherein said 
memory means stores said replacement data defined by a 

combination of an enhancement transistor and a depletion 
transistor. 
An apparatus according to claim 1, wherein said 
data switching means outputs through said output terminal, as 

said output data, mutually different data which are selected 
from among a data group in accordance with whether or not a 

plurality of said first input data, which include an 
up-to-date first input data entered through said first input 

terminal and go back from the up-to-date first input data to 
their inputted order, contain any one of said arrays when it 

 
is permitted to insertion of said first input data, which 

does not constitute said array, among said first input data 
which constitute said array, where said data group consists 

of a first output data wherein at least a part of bits or the 
whole bits of said second input data entered from said second 

input terminal are replaced by said replacement data defined 
corresponding to said array, a second output data having the 

same logic as said second input data entered through said 
second input termin
al, a third output data produced through a 
logical operation based on said first output data, and a 

fourth output data produced through a logical operation based 
on both said first output data and said second output data. 
An apparatus according to claim 5, wherein said 
memory means has one or more memory areas adapted for storing 

said replacement data, feedback data used for a retrieval of 
said arrays, and output control data indicating whether or 

not it is a final stage of the array, and said data switching 
means comprises: 

   a register for storing feedback data read from said 
memory means; 

   data reference means for storing one or more 
reference retrieval data as an object of retrieval as to 

whether or not it matches retrieval data consisting of 
a pair of said first input data entered through said first 

 
input terminal and the feedback data stored in said register, 

and for outputting, when said retrieval data matches any of 
said reference retrieval data, an access signal to read the 

replacement data from said memory area in which the 
replacement data associated with thereference retrieval data 

detected in match is stored; and 
   data output means for outputting through said output 

terminal, as said output data, mutually different data 
which are selected from among a data group in accordance with 

said output control data among data read from said memory 
means, where said data group consists of a first output data 

wherein at least a part of bits or the whole bits of said 
second input data entered from said second input terminal are 

replaced by said replacement data read from said memory 
means, a second output data including said second input data 

entered through said second input terminal, a third output 
data produced through a logical operation based on said first 

output data, and a fourth output data produced through a 
logical operation based on both said first output data and 

said second output data. 
An apparatus according to claim 6, wherein said 
reference means stores said reference retrieval data defined 

by a combination of an enhancement transistor and a depletion 
transistor. 
An apparatus according to claim 6, wherein said 
memory means stores said replacement data defined by a 

combination of an enhancement transistor and a depletion 
transistor. 
An apparatus according to claim 1, wherein said 
data switching means outputs through said output terminal, as 

said output data, mutually different data which are selected 
from among a data group in accordance with whether or not a 

plurality of said first input data, which include an 
up-to-date first input data entered through said first input 

terminal and go back from the up-to-date first input data to 
their inputted order, contain any one of said arrays when it 

is permitted to insertion of said first input data, which 
does not constitute said array, within a predetermined 

number of pieces, among said first input data which 
constitute said array, where said data group consists of a 

first output data wherein at least a part of bits or the 
whole bits of said second input data entered from said second 

input terminal are replaced by said replacement data defined 
corresponding to said array, a second output data having the 

same logic as said second input data entered through said 
second input terminal, a third output data produced through 

a logical operation based on said first output data, and a 
fourth output data produced through a logical operation based 

 
on both said first output data and said second output data. 
An apparatus according to claim 9, wherein said 
memory means has one or more memory areas adapted for storing 

said replacement data, feedback data used for a retrieval of 
said arrays, distance data representative of said 

predetermined number of pieces and output control data 
indicating whether or not it is a final stage of the array, 

and said data switching means comprises: 
   a register for storing circulating data read from 

said memory means; 
   a counter for storing said distance data read out 

from said memory means and for terminating the retrieval 
operation for said array in case where said first input data, 

which do not constitute said array, are inputted through 
said first input terminal exceeding said predetermined number 

of pieces determined by said distance data, up to the 
subsequent said first input data constituting said array is 

inputted through said first input terminal after storage of 
said distance data; 

   data reference means for storing one or more 
reference retrieval data as an object of retrieval as to 

whether or not it matches retrieval data consisting of 
a pair of said first input data entered through said first 

input terminal and the feedback data stored in said register, 
 

and for outputting, when said retrieval data matches any of 
said reference retrieval data, an access signal to read the 

replacement data from said memory area in which the 
replacement data associated with thereference retrieval data 

detected in match is stored; and 
   data output means for outputting through said output 

terminal, as said output data, mutually different data 
which are selected from among a data group in accordance with 

said output control data among data read from said memory 
means, where said data group consists of a first output data 

wherein at least a part of bits or the whole bits of said 
second input data entered from said second input terminal are 

replaced by said replacement data read from said memory 
means, a second output data including said second input data 

entered through said second input terminal, a third output 
data produced through a logical operation based on said first 

output data, and a fourth output data produced through a 
logical operation based on both said first output data and 

said second output data. 
An apparatus according to claim 10, wherein said 
reference means stores said reference retrieval data defined 

by a combination of an enhancement transistor and a depletion 
transistor. 
An apparatus according to claim 10, wherein said 
 

memory means stores said replacement data defined by a 
combination of an enhancement transistor and a depletion 

transistor. 
An apparatus according to claim 1, wherein said 
first input terminal is for inputting as said first input 

data address data to be inputted to a memory apparatus for 
storing various data, and said second input terminal is for 

inputting as said second input data data outputted from said 
memory apparatus. 
An apparatus according to claim 1, wherein said 
memory means stores said replacement data corresponding to a 

first array including a plurality of said first input data, 
and said replacement data corresponding to a second array 

consisting of one or more said first input data disposed 
subsequent to a plurality of said first input data 

constituting said first array and said plurality of first 
input data. 
An apparatus according to claim 1, wherein said 
memory means stores a plurality of said replacement data 

corresponding to a plurality of said arrays each including 
the same said first input data at the final stage thereof. 
An apparatus according to claim 1, wherein said 
first input data is address data representative of an address 

on a memory in which an instruction to be executed in a CPU 
 

is stored, and said array consists of a plurality of address 
data representative of a plurality of addresses each 

including an address in which an instruction to be executed 
on or before a branch instruction is stored, and
 an address 
in which an instruction to be executed after the branch 

instruction is stored, the instruction stored in the later 
address being involved in an instruction of a branched side 

to the address apart from an address in which the branch 
instruction is stored in accordance with the branch 

instruction. 
An apparatus according to claim 1, wherein said 
first input data is address data representative of an address 

on a memory in which an instruction to be executed in a CPU 
is stored, and said array consists of a plurality of address 

data representative of a plurality of addresses each 
including an address in which an instruction to be executed 

on or before a subroutine call instruction is stored, and an 
address in which an instruction to be executed after the 

subroutine call instruction is stored. 
An apparatus according to claim 1, wherein said 
first input data is address data representative of an address 

on a memory in which an instruction to be executed in a CPU 
is stored, and said array consists of a plurality of address 

data representative of a plurality of addresses each 
 

including an address in which an instruction to be executed 
on or before a return instruction is stored, and an address 

in which an instruction to be executed after the return 
instruction is stored. 
An apparatus according to claim 1, wherein said 
first input data is address data representative of an address 

on a memory in which an instruction to be executed in a CPU 
is stored, and said array consists of a plurality of address 

data representative of a plurality of addresses each 
including an address in which a call instruction is stored, 

and an address in which an instruction to be executed after 
the call instruction is stored, said call instruction 

instructing, when a predetermined event occurs, a call of a 
predetermined routine associated event. 
An apparatus according to claim 1, wherein said 
first input data is address data representative of an address 

on a memory in which an instruction to be executed in a CPU 
and data to be accessed by the CPU are stored, and said array 

consists of a plurality of address data representative of a 
plurality of addresses each including an address in which an 

instruction to be executed on or before a data access 
instruction to access data on a memory is stored, and an 

address in which the data accessed by the data access 
instruction is stored. 
A data flow control apparatus comprising: 
   a first input terminal for sequentially receiving a 

first input data; 
   a second input terminal for sequentially receiving a 

second input data; 
   an output terminal through which output data are 

sequentially outputted; 
   memory means for storing one or more replacement data 

which are defined for associated one or more arrays, 
respectively, each including a plurality of said first input 

data, and feedback data defined corresponding to said first 
input data included in at least one of said arrays; 

   a register for storing feedback data read from said 
memory means; 

   a selector for receiving the second input data 
inputted through said second input terminal and the 

replacement data read from said memory means to output 
through said output terminal, as said output data, said 

second input data, or data wherein at least a part of bits or 
the whole bits of said second input data entered from said 

second input terminal are replaced by said replacement data, 
in accordance with a predetermined control signal; 

   match detection means for storing reference retrieval 
data, each consisting of a pair of said first input data 

 
included in any one of said arrays and said feedback data 

defined corresponding to said first input data disposed 
immediately before the associated said input first data, in 

associated reference retrieval data memory area corresponding 
to the respective first input data included in any one of 

said arrays, comparing said reference retrieval data with 
retrieval data consisting of a pair of said first input data 

entered through said first input terminal and said feedback 
data read from said memory means and stored in said 

register, and outputting a match signal on a signal line 
associated with said reference retrieval data memory area in 

which said reference retrieval data matching said retrieval 
data is stored, and 

   control means for providing such a control that upon 
receipt of said match signal appearing on said signal line, 

said feedback data, which is defined corresponding to said 
first input data constituting said reference retrieval data 

stored in said reference retrieval data memory area 
associated with said signal line appearing said match signal, 

is read from said memory means and stored in said register, 
and in accordance with whether or not said first input data 

constituting said retrieval data is said first input data 
disposed at a final stage of any one of said arrays, said 

replacement data defined for the associated array is read 
 

from said memory means so that data wherein at least a part 
of bits or the whole bits of said second input data entered 

from said second input terminal are replaced by said 
replacement data is outputted through said selector, or said 

second data entered from said second input means is outputted 
through said selector. 
A data flow control apparatus comprising: 
   a first input terminal for sequentially receiving a 

first input data; 
   a second input terminal for sequentially receiving a 

second input data; 
   an output terminal through which output data are 

sequentially outputted; 
   memory means for storing one or more replacement data 

which are defined for associated one or more arrays, 
respectively, each including a plurality of said first input 

data, feedback data defined corresponding to said first input 
data included in at least one of said arrays, and distance 

data defined for said first input data as an index indicating 
that when said first input data is inputted through said 

first input terminal, and thereafter first input data, which 
is disposed immediately after the preceding said first data 

constituting said array including the entered preceding said 
first data, is inputted, how many pieces of other said first 

 
input data not constituting said array is acceptable to be 

inputted through said first input terminal, 
   a register for storing feedback data read from said 

memory means; 
   a counter for storing said distance data read out 

from said memory means and for terminating the retrieval 
operation for said array when the number of pieces of said 

other first input data not constituting said array exceeds the 
number of pieces determined by said distance data between 

adjacent two first input data constituting said array of 
interest through comparing the number of pieces of said 

other first input data entered through said first input 
terminal after storage of the distance data with said 

distance data; 
   a selector for receiving the second input data 

inputted through said second input terminal and the 
replacement data read from said memory means to output through 

said output terminal, as said output data, said second input 
data, or data wherein at least a part of bits or the whole 

bits of said second input data entered from said second input 
terminal are replaced by said replacement data, in accordance 

with a predetermined control signal; 
   match detection means for storing reference retrieval 

data, each including of a pair of said first input data 
 

included in any one of said arrays and said feedback data 
defined corresponding to said first input data disposed 

immediately before the associated said input first data, in 
associated reference retrieval data memory are
a corresponding 
to the respective first input data included in any one of 

said arrays, comparing said reference retrieval data with 
retrieval data consisting of a pair of said first input data 

entered through said first input terminal and said 
feedback data read from said memory means and stored in said 

register, and outputting a match signal on a signal line 
associated with said reference retrieval data memory area in 

which said reference retrieval data matching with said 
retrieval data is stored, and 

   control means for providing such a control that upon 
receipt of said match signal appearing on said signal line, 

said feedback data, which is defined corresponding to said 
first input data constituting said reference retrieval data 

stored in said reference retrieval data memory area 
associated with said signal line appearing said match signal, 

is read from said memory means and stored in said register 
and said counter, and in accordance with whether or not said 

first input data constituting said retrieval data is said 
first input data disposed at a final stage of any one of said 

arrays, said replacement data defined for the associated 
 

array is read from said memory means so that data wherein at 
least a part of bits or the whole bits of said second input 

data entered from said second input terminal are replaced by 
said replacement data is outputted through said selector, or 

said second data entered from said second input means is 
outputted through said selector. 
A memory apparatus comprising: 
   an input terminal for sequentially receiving an input 

data; 
   an output terminal through which output data are 

sequentially outputted; 
   a first memory means for storing a plurality of 

storage data each defined for an associated input data; 
   a second memory means for storing one or more 

replacement data which are defined for associated one or 
more arrays, respectively, each including of a plurality of 

said input data; and 
   read control means for outputting through said 

output terminal, as said output data, mutually different data 
which are selected from among a data group in accordance with 

whether or not a plurality of input data, which include an 
up-to-date input data entered through said input terminal and 

go back from the up-to-date input data to their inputted 
order, correspond to any one of said arrays, where said data 

 
group consists of a first output data wherein at least a part 

of bits or the whole bits of said storage data defined 
corresponding to the up-to-date input data are replaced by 

said replacement data defined corresponding to said array, a 
second output data having the same logic as said second input 

data entered through said second input terminal, a third 
output data produced through a logical operation based on 

said first output data, and a fourth output data produced 
through a logical operation based on both said first output 

data and said second output data. 
An apparatus according to claim 23, wherein said 
read control means outputs through said output terminal, as 

said output data, mutually different data which are selected 
from among a data group in accordance with whether or not a 

plurality of said input data, which include an up-to-date 
input data entered through said input terminal and go back 

from the up-to-date input data to their inputted order, 
contain any one of said arrays when it is permitted to 

insertion of said input data, which does not constitute said 
array, among said input data which constitute said array, 

where said data group consists of a first output data wherein 
at least a part of bits or the whole bits of said storage 

data defined corresponding to the up-to-date input data are 
replaced by said replacement data defined corresponding to 

 
said array, a second output data having the same logic as 

said second input data entered through said second input 
terminal, a third output data produced through a logical 

operation based on said first output data, and a fourth 
output data produced through a logical operation based on 

both said first output data and said second output data. 
An apparatus according to claim 23, wherein said 
read control means outputs through said output terminal, as 

said output data, mutually different data which are selected 
from among a data group in accordance with whether or not a 

plurality of said input data, which include an up-to-date 
input data entered through said input terminal and go back 

from the up-to-date input data to their inputted order, 
contain any one of said arrays when it is permitted to 

insertion of said input data, which does not constitute said 
array, within a predetermined number of pieces, between said 

input data to said data which constitute said array, where 
said data group consists of a first output data wherein at 

least a part of bits or the whole bits of said storage data 
defined corresponding to the up-to-date input data are 

replaced by said replacement data defined corresponding to 
said array, a second output data having the same logic as 

said second input data entered through said second input 
terminal, a third output data produced through a logical 

 
operation based on said first output data, and a fourth 

output data produced through a logical operation based on 
both said first output data and said second output data. 
An apparatus according to claim 23, wherein said 
input data is address data. 
An apparatus according to claim 23, wherein said 
output data outputted from said output terminal includes data 

representative of instructions to be executed in a CPU, and 
said mutually different data outputted from said output 

terminal are each the same instruction code and 
representative of instructions of mutually different operands. 
An apparatus according to claim 27, wherein said 
mutually different data are to represent instructions to 

instruct that mutually different values are set to the same 
register. 
An apparatus according to claim 27, wherein said 
mutually different data are instructions to instruct that a 

predetermined value is stored in mutually different memory 
addresses. 
An apparatus according to claim 27, wherein said 
mutually different data are branch instructions to mutually 

different addresses. 
An apparatus according to claim 23, wherein said 
output data outputted from said output terminal includes 

 
data representative of instructions to be executed in a CPU, 

and at least one of said mutually different data outputted 
from said output terminal are to represent a return 

instruction. 
An apparatus according to claim 23, wherein said 
output data outputted from said output terminal includes data 

representative of instructions to be executed in a CPU, and 
said mutually different data outputted from said output 

terminal are to represent mutually different instructions. 
An apparatus according to claim 23, wherein said 
output data outputted from said output terminal includes data 

representative of instructions to be executed in a CPU, said 
data being referred to with a predetermined instruction, and 

said mutually different data outputted from said output 
terminal are mutually different values of data which are 

referred to with said predetermined instruction. 
</CLAIMS>
</TEXT>
</DOC>
