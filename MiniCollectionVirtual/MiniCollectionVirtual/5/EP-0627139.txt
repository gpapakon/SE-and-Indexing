<DOC>
<DOCNO>EP-0627139</DOCNO> 
<TEXT>
<INVENTION-TITLE>
FEEDBACK LEVEL ESTIMATOR BETWEEN LOUDSPEAKER AND MICROPHONE
</INVENTION-TITLE>
<CLASSIFICATIONS>H04B323	H04M908	H04J100	H04M908	H04J100	H04B323	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>H04B	H04M	H04J	H04M	H04J	H04B	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>H04B3	H04M9	H04J1	H04M9	H04J1	H04B3	</CLASSIFICATIONS-FOURTH>
<ABSTRACT>
An improved echo cancelling device (18) for reducing the effects of acoustic feedback between a loudspeaker and microphone in a communication system. The device includes an adjustable filter (50) for receiving a loudspeaker signal and generating in response thereto an echo estimation signal. The device subtracts (54) the echo estimation signal from the microphone signal to produce an echo corrected microphone signal. During periods of time when the microphone signal is substantially derived from acoustic feedback between the loudspeaker and the microphone, the device adjusts (58) transfer characteristics of the filter (52) to reduce the echo corrected microphone signal. The improvement includes estimating from the adjusted transfer characteristics an energy transfer ratio representative of the ratio of the energy of the microphone signal to the energy of the loudspeaker signal. The device compares the microphone signal to the energy transfer ratio multiplied by the loudspeaker signal to identify periods of the time when the microphone signal is substantially derived from acoustic feedback between the loudspeaker and the microphone.
</ABSTRACT>
<APPLICANTS>
<APPLICANT-NAME>
PICTURETEL CORP
</APPLICANT-NAME>
<APPLICANT-NAME>
PICTURETEL CORPORATION
</APPLICANT-NAME>
</APPLICANTS>
<INVENTORS>
<INVENTOR-NAME>
CHU PETER L
</INVENTOR-NAME>
<INVENTOR-NAME>
CHU, PETER, L.
</INVENTOR-NAME>
</INVENTORS>
<DESCRIPTION>
The invention relates generally to reducing
unwanted audio or acoustic feedback in a communication
system, and particularly to an adaptive acoustic echo
cancellation device for suppressing acoustic feedback
between the loudspeaker and microphone of a telephone
unit in a teleconferencing system. The telephone unit
of a typical audio conferencing system includes a
loudspeaker for broadcasting an incoming telephone
signal into an entire room. Similarly, the telephone's
microphone is typically designed to pick up the voice of
any person within the room and transmit the voice to a
remote telephone at the far end of the communication
system.Unlike conventional hand held telephone sets,
conference telephone units are prone to acoustic
feedback between the loudspeaker unit and microphone.
For example, a voice signal which is broadcast into the
room by the loudspeaker unit may be picked up by the
microphone and transmitted back over the telephone
lines. As a result, persons at the far end of the communication
system hear an echo of their voice. The echo
lags the person's voice by the round trip delay time for
the voice signal. Typically, the echo is more
noticeable as the lag between the person's voice and the 
echo increases. Accordingly, it is particularly
annoying in video conferencing systems which transmit
both video and audio information over the same telephone
lines. The additional time required to transmit video
data increases the round trip delay of the audio signal,
thereby extending the lag between a person's voice and
the echo.Many conference telephones avoid echo by allowing
only half duplex communication (that is, by allowing
communication over the phone line to occur in only one
direction at a time) thereby preventing feedback. For
example, when the loudspeaker unit is broadcasting a
voice, the telephone disables the microphone to prevent
the loudspeaker signal from being fed back by the
microphone.While a half duplex system avoids echo, it often
cuts off a person's voice in mid-sentence. For example,
when both parties speak simultaneously, the telephone
unit allows communication in only one direction, thereby
clipping the voice of one party.Some loudspeaker telephones employ echo
cancellation in an attempt to allow full-duplex
communication without echo. Conventional echo
cancellation devices attempt to remove from the
microphone signal the component believed to represent
the acoustic feedback. More specifically, these devices
prepare an electric signal which simulates the acoustic
feedback
</DESCRIPTION>
<CLAIMS>
An echo cancelling device for reducing the
effects of acoustic feedback between a loudspeaker (32) and

microphone (10) in a communication system comprising:

an adjustable filter (50) for receiving a
loudspeaker signal and generating in response thereto an

echo estimation signal,
means (54) for subtracting said echo estimation
signal from the microphone signal to produce an echo

corrected microphone signal, and
means (58) for adjusting transfer characteristics
of said filter, during periods of time when the

microphone signal is substantially derived from acoustic
feedback between the loudspeaker and the microphone, to

reduce said echo corrected microphone signal,

characterised by:

means (60) for estimating an energy transfer ratio
representative of the ratio of the energy of the

microphone signal to the energy of the loudspeaker
signal, and
means (18) for comparing the microphone signal to
the energy transfer ratio multiplied by the loudspeaker

signal to identify said periods of time when the
microphone signal is substantially derived from acoustic

feedback between the loudspeaker and the microphone.
The echo cancelling device of claim 1 wherein
said means (60) for estimating the energy transfer ratio

comprises:

means (60) for computing the average energy of said echo
estimation signal,
means (60) for computing the average energy of said
loudspeaker signal, and 
means (60) for computing the ratio of said average
energies.
The echo cancelling device of claim 1 wherein
said adjustable filter (50) comprises a digital filter having

a plurality of adjustable taps wherein the value of said
taps define said transfer characteristics of said

adjustable filter, and wherein said means for estimating
said energy transfer ratio comprises:


means for computing the square of the tap
value of each of a plurality of said taps, and
means for summing the squared tap values.
The echo cancelling device of claim 1 wherein
said adjustable filter (50) comprises a digital filter (52) having

a plurality of taps wherein the value of said taps
define said transfer characteristics of said adjustable

filter, and wherein said means (60) for estimating said
energy transfer ratio comprises:


means for filtering a plurality of said tap
values with a bandpass filter to produce a plurality of

filtered tap values,
means for computing the square of each said
filtered tap value, and
means for summing the squared filtered tap
values.
The echo cancelling device of claim 1 wherein
said adjustable filter (60) comprises a digital filter having

at least L taps wherein the value of the taps, h(1),
define said transfer characteristics of said adjustable

filter, and wherein said means (60) for estimating said
energy transfer ratio comprises: 


means (120) for computing the energy transfer ratio,
G
n
, from said plurality of said taps according to the
equation:


An echo cancelling device for reducing the
effects of acoustic feedback between a loudspeaker (32) and

microphone (10) in a communication system comprising:

an adjustable filter (50) for receiving a
loudspeaker signal and generating in response thereto an

echo estimation signal,
means (54) for subtracting said echo estimation
signal from the microphone signal to produce an echo

corrected microphone signal,
means (58) for adjusting transfer characteristics
of said filter, during periods of time when the

microphone signal is substantially derived from acoustic
feedback between the loudspeaker and the microphone, to

reduce said echo corrected microphone signal, and
a clipper (20) for attenuating said echo corrected
microphone signal during selected periods of time,

characterised by:

means (20) for calculating a reverberation estimate
representative of reverberation of the loudspeaker

signal,
means (20) for comparing the echo corrected
microphone signal to the reverberation estimate, and
means (20) for enabling said signal clipper to
attenuate during periods of time when said echo 

corrected microphone signal is less than said
reverberation estimate.
The echo cancelling device of claim 6 wherein
said adjustable filter (50) comprises a digital filter (52) having

a plurality of adjustable taps wherein the values of
said taps define said transfer characteristics of said

adjustable filter, and wherein said means (20) for
calculating said reverberation estimate comprises:


means (128) for computing the square of the tap
value of each of a plurality of said taps, excluding at

least a first said tap, and
means for summing the squared tap values.
The echo cancelling device of claim 6 wherein
said adjustable filter (50) comprises a digital filter (52) having

a plurality of taps wherein the values of said taps
define said transfer characteristics of said adjustable

filter, and wherein said means (20) for calculating said
reverberation estimate comprises:


means for filtering a plurality of said tap
values with a bandpass filter to produce a plurality of

filtered tap values,
means (128) for computing the square of each of a
plurality of said filtered tap va
lues, excluding at
least a first said filtered tap value, and
means for summing the squared filtered tap
values.
The echo cancelling device of claim 6 wherein
said adjustable filter (50) comprises a digital filter (52) having

at least L taps wherein the value of the taps, h
n
(i),
define said transfer characteristics of said adjustable

filter, and wherein said means (20) for calculating said
reverberation estimate comprises: 


means for estimating the propagation time Tp
for said loudspeaker signal to propagate to said

microphone,
means (128) for computing the reverberation
estimate, RE
n
(i), from said plurality of said taps
according to the equation:



where P is a number approximately equal to or
greater than Tp.
A method for reducing the effects of
acoustic feedback between a loudspeaker (32) and microphone (10)

in a communication system comprising the steps of:

applying a loudspeaker signal to an adjustable
filter (50) to generate an echo estimation signal,
subtracting said echo estimation signal from a
microphone signal to produce an echo corrected

microphone signal, and
adjusting transfer characteristics of said filter (50),
during periods of time when the microphone signal is

substantially derived from acoustic feedback between the
loudspeaker (32) and the microphone (10), to reduce said echo

corrected microphone signal the method being

characterised by the steps of:

estimating (120) an energy transfer ratio
representative of the ratio of the energy of the

microphone signal to the energy of the loudspeaker
signal, and 
comparing the microphone signal to the energy
transfer ratio multiplied by said loudspeaker signal to

identify said periods of time when the microphone signal
is substantially derived from acoustic feedback between

the loudspeaker (32) and the microphone (10).
The method of claim 10 wherein said step for
estimating the energy transfer ratio comprises the steps

of:

computing the average energy of said echo
estimation signal,
computing the average energy of said loudspeaker
signal, and
computing the ratio of said average energies.
Method of claim 10 wherein said adjustable
filter (50) comprises a digital filter (52) having a plurality of

adjustable taps wherein the value of said taps define
said transfer characteristics of said adjustable filter,

and wherein said step of estimating (120) said energy transfer
ratio comprises the steps of:


computing the square of the tap value of each
of a plurality of said taps, and
summing the squared tap values.
The method of claim 10 wherein said adjustable
filter (50) comprises a digital filter (52) having a plurality of

taps wherein the value of said taps define said transfer
characteristics of said adjustable filter, and wherein

said step of estimating (120) said energy transfer ratio
comprises the steps of:


filtering a plurality of said tap values with
a bandpass filter to produce a plurality of filtered tap

values,
computing the square of each said filtered tap
value, and
summing the squared filtered tap values.
The method of claim 10 wherein said adjustable
filter (50) comprises a digital filter having at least L taps

wherein the value of the taps, h
n
(1), define said
transfer characteristics of said adjustable filter, and

wherein said step of estimating said energy transfer
ratio comprises the step of:


computing (120) the energy transfer ratio, G
n
, from
said plurality of said taps according to the equation:


A method for reducing the effects of
acoustic feedback between a loudspeaker (32) and microphone (10)

in a communication system, comprising the steps of:

applying a loudspeaker signal to an input of
an adjustable filter (50) to generate an echo estimation

signal,
subtracting said echo estimation signal from
the microphone signal to produce an echo corrected

microphone signal,
adjusting transfer characteristics of said
filter (50), during periods of time when the microphone

signal is substantially derived from acoustic feedback
between the loudspeaker (32) and the microphone (10), to reduce

said echo corrected microphone signal, and
attenuating said echo corrected microphone
signal during selected periods of time,

the method being characterised by the steps of: 

calculating (128) from said adjusted transfer
characteristics a reverberation estimate representative

of room's reverberation of said loudspeaker signal,
comparing (130) the echo corrected microphone signal
to the reverberation estimate, and
identifying, based on said comparisons said
periods of time when said echo corrected microphone

signal is less than said reverberation estimate.
The method of claim 15 wherein said adjustable
filter (50) comprises a digital filter (52) having a plurality of

adjustable taps wherein the value of said taps define
said transfer characteristics of said adjustable filter,

and wherein said step for calculating (128) said reverberation
estimate comprises the steps of:


computing the square of the tap value of each
of a plurality of said taps, excluding at least a first

said tap, and
summing the squared tap values.
The method of claim 15 wherein said adjustable
filter (50) comprises a digital filter (52) having a plurality of

taps wherein the value of said taps define said transfer
characteristics of said adjustable filter, and wherein

said step for calculating (128) said reverberation estimate
comprises the step of:


filtering a plurality of said tap values with
a bandpass filter to produce a plurality of filtered tap

values,
computing the square of each of a plurality of
said filtered tap values, excluding at least a first

said filtered tap value, and
summing the squared filtered tap values.
The method of claim 17 wherein said adjustable
filter (50) comprises a digital filter (52) having at least L taps

wherein the value of the taps, h
n
(1), define said
transfer characteristics of said adjustable filter, and

wherein said step for calculating said room
reverberation estimate comprises the step of:


estimating the propagation time Tp to said
loudspeaker signal to propagate to said microphone, and
computing (128) the room reverberation estimate,
RE
n
(i), from said plurality of said taps according to
the equation:



where p is a number approximately equal to or

greater than Tp.
</CLAIMS>
</TEXT>
</DOC>
