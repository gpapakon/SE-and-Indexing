<DOC>
<DOCNO>EP-0613299</DOCNO> 
<TEXT>
<INVENTION-TITLE>
Dual bus dual bank architecture for motion compensation
</INVENTION-TITLE>
<CLASSIFICATIONS>G06T900	H04N750	G06T900	H04N750	H04N736	H04N726	G06T720	H04N736	H04N726	G06T720	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>G06T	H04N	G06T	H04N	H04N	H04N	G06T	H04N	H04N	G06T	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>G06T9	H04N7	G06T9	H04N7	H04N7	H04N7	G06T7	H04N7	H04N7	G06T7	</CLASSIFICATIONS-FOURTH>
<ABSTRACT>
A memory architecture for use in a video coder comprises 
two sets of memories and two buses. The memory architecture is 

sued to increase the efficiency of use of a Motion Estimation 
Unit (MEU) in the video coder. 


</ABSTRACT>
<APPLICANTS>
<APPLICANT-NAME>
IND TECH RES INST
</APPLICANT-NAME>
<APPLICANT-NAME>
INDUSTRIAL TECHNOLOGY RESEARCH INSTITUTE
</APPLICANT-NAME>
</APPLICANTS>
<INVENTORS>
<INVENTOR-NAME>
LEE FOO-MING
</INVENTOR-NAME>
<INVENTOR-NAME>
LIN VINCENT M S
</INVENTOR-NAME>
<INVENTOR-NAME>
LEE, FOO-MING
</INVENTOR-NAME>
<INVENTOR-NAME>
LIN, VINCENT M.S.
</INVENTOR-NAME>
</INVENTORS>
<DESCRIPTION>
The present invention relates to a coder for coding a video
image. More particularly, the present invention is related to
an architecture which utilizes two sets of memories and two
buses to increase the efficiency of use of a Motion Estimation
Unit contained within the coder and to smooth the data flow in a
pipelined operation of the coder.A video coder is illustrated in FIG 1. The video coder 10
operates in accordance with CCITT recommendation H.261 (See
"Draft Revision of Recommendation H.261 Video Codec for Audio
Visual Services at px64 Kbits/sec", Signal Processing: Image
Communication 2 (1990) 221-239, Elsevier).The video coder contains an input frame memory 12 for
storing a current frame of video to be coded. The current frame
of video is coded on a block-by-block basis. Some frames are
coded in accordance with an intra-mode. In the intra-coding
mode, no information from a previous frame is utilized and the
coding relies entirely on information contained within the
current frame. In the intra-mode, the current frame is divided
into NxN pixel blocks, where N=16 for example. Each block of
pixels is transmitted from the memory 12, via the multiplexer
14, to the Discrete Cosine Transform (DCT) circuit 16. In the 
DCT circuit 16, the Discrete Cosine Transform is applied to the
block of pixels. The transformed pixels are then thresholded
and quantized in the quantizer circuit 18. The quantized,
transformed pixels are then coded using the variable length
coder (VLC) 20. The variable length coded pixels are then
transmitted via the multiplexer 22 to the buffer 24. The coded
pixels are then transmitted from the buffer 24 via a channel 26
to a particular destination, where the pixels are decoded.
Depending on the contents of the buffer 24, as well as depending
on the transformed pixel values, the quantization controller 27
may vary the threshold and quantization stepsize utilized by the
quantizer circuit 18. Information as to the threshold and
quantization stepsize used to code a particular block is
transmitted to the destination via line 23, the multiplexer 22,
the buffer 24, and the channel 26.The output of the quantizer circuit 18 is connected to the
inverse quantizer circuit 28 and Inverse Discrete Cosine
Transform (IDCT) circuit 29. These two circuits serve to
reconstruct a block of pixels coded according to the intra-mode.
The reconstructed block of pixels is stored in a previous frame
memory system 30. Thus, on a block-by-block basis, the entire
current frame, in reconstructed form, is stored in the
</DESCRIPTION>
<CLAIMS>
A video coder (10) comprising an input frame memory (12)
storing a current video frame to be coded, a coding circuit for

coding the current frame stored in the current frame memory
utilizing motion estimation, a previous frame memory (30 A/B)

for storing a previous frame coded by said coding circuit, and a
memory architecture (100) comprising


a first memory (Memory A) including a first current block memory
and a first search window memory for selectively storing a

current block of pixels of a current video frame to be coded and
a search window of pixels of a previous video frame,

respectively,
a second memory (Memory B) including a second current block
memory and a second search window memory for selectively storing

a current block of pixels of a current video frame to be coded
and a search window of pixels of a previous video frame,

respectively,
characterized
 in that a first bus (B1) is provided
for selectively connecting said first current block memory and

said second current block memory to said input frame memory (12)
of said video coder, a motion estimation unit (31) of said video

coder, and an inter/intra mode decision unit (33) of said video
coder, the first bus (B1) enabling said coding circuit in an i
th

cycle of a sequence of cycles to access an i
th
 current block of
pixels from one of said first and second current block memories

for motion estimation and compensation, for transmitting an (i-1)
th

current block of pixels from the other of said current block
memories to said coding circuit for coding, and for

transmitting an (i+1)
th
 current block of pixels from said input
frame memory (12) to said other of said current block memories,

and that a second bus (B2) is provided for selectively
connecting said first search window memory and said second 

search window memory to a previous frame memory (30 A/B) of said
video coder (10) and said decision circuit of said video coder,

the second bus (B2) enabling said coding circuit in the i
th
 cycle
to access search window pixels from the one of said search

window memories corresponding to said one current block memory
for motion estimation and compensation of said i
th
 current block,
for transmitting a best match or zero displacement block of

pixels from the other one of said search window memories to said
coding circuit for the coding of said (i-1)
th
 current block, and
for transmitting a search window of pixels corresponding to said

(i+1)
th
 current block from said previous frame memory (30 A/B) to
said other one of said search window memories.
The video coder (10) of claim 1 wherein said coding circuit
comprises an inter/intra mode decision circuit (33), a discrete

cosine transform circuit (16), a quantizer circuit (18) and a
variable lenght coder (20) for coding said (i-1)
th
 current block.
The video coder (10) of claim 2 wherein said coding circuit
includes a motion estimation unit (31) and a motion compensation

decision unit (32) for estimating and compensating for motion in
said i
th
 current block.
A method of operating a video coder according to any of
claims 1 to 3 comprising the steps of:


in an i
th
 cycle of a sequence of cycles, performing
motion estimation on an i
th
 current block of pixels of a current
frame of video by accessing for use by a motion estimation unit

of said video coding circuit said i
th
 current block of pixels
stored in one of said first and second current block memories

and a search window of pixels stored in the corresponding one of
said search window memories,
in a first part of said i
th
 cycle, transmitting an (i-1)
th
 
current block of pixels from the other of said current block

memories to said video coding circuit and transmitting from the
other one of said search window memories a best match or zero

displacement block pixels to said video coding circuit for
coding said (i-1)
th
 current block of pixels, and
in a second part of the i
th
 cycle, transmitting an
(i+1)
th
 current block of pixels from an input frame memory of the
video coding circuit to said other one of said current block

memories, and transmitting from a previous frame memory of said
video coding circuit a search window corresponding to the (i+1)
th

current block to said other one of said search window memories.
The method of claim 4 wherein said step of coding the
(i-1)
th
 current block comprises using said (i-1)
th
 block and the best
match or zero displacement block from the previous frame to make an

inter/intra mode determination for the (i-1)
th
 block.
The method of claim 4 or claim 5 wherein in one cycle of said
memory architecture said first current block memory and said

first search window memory are connected to said motion estimation
unit, in a first part of said one cycle said second current block

memory and said second search window memory are connected to said
decision circuit, and in a second part of said one cycle said second

current block memory is connected to said input frame memory and said
second search window memory is connected to said previous frame

memory. 
The method of claim 6 wherein in a second cycle following said
first cycle, said second current block memory and said second search

window memory are connected to said motion estimation unit, in a
first part of said second cycle said first current block memory and

first search window memory are connected to said decision circuit,
and in a s
econd part of said second cycle said first current block
memory is connected to said input frame memory and said first search

window memory is connected to said previous frame memory.
</CLAIMS>
</TEXT>
</DOC>
