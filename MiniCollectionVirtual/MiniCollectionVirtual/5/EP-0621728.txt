<DOC>
<DOCNO>EP-0621728</DOCNO> 
<TEXT>
<INVENTION-TITLE>
Image transformation apparatus and method
</INVENTION-TITLE>
<CLASSIFICATIONS>G06T300	H04N5262	H04N5262	G06T300	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>G06T	H04N	H04N	G06T	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>G06T3	H04N5	H04N5	G06T3	</CLASSIFICATIONS-FOURTH>
<ABSTRACT>
In an image transformation apparatus, the image 
formed by an input video signal is stored into a 

memory, and the input video signal is read based on a 
read-address data of a predetermined read-address 

generating means, to execute a predetermined image 
transformation with respect to an image. The 

transformed image is formed by using a function in 
which a distance from the center of the transformed 

image is changeable corresponding to an angle from the 
center of that, so as to obtain the lens effect 

transforming the image into images having various 
curvilinearly shapes. 


</ABSTRACT>
<APPLICANTS>
<APPLICANT-NAME>
SONY CORP
</APPLICANT-NAME>
<APPLICANT-NAME>
SONY CORPORATION
</APPLICANT-NAME>
</APPLICANTS>
<INVENTORS>
<INVENTOR-NAME>
MORIWAKE KATSUAKIRA
</INVENTOR-NAME>
<INVENTOR-NAME>
SHIRAISHI TOSHIHIRO
</INVENTOR-NAME>
<INVENTOR-NAME>
MORIWAKE, KATSUAKIRA
</INVENTOR-NAME>
<INVENTOR-NAME>
SHIRAISHI, TOSHIHIRO
</INVENTOR-NAME>
</INVENTORS>
<DESCRIPTION>
This invention relates to an image transformation
apparatus and method, and more particularly, to video special
effect processing for rendering a special effect, for
example, to a video signal.Heretofore, an image transformation apparatus has been
disclosed, for example, in U.S. Patent No. 5,070,465.In this type of image transformation apparatus, an
input signal is sequentially written to a predetermined
region of a frame memory on the basis of write-address
data output from a write-address generating
circuit, and data in the frame memory is read based on
read-address data input from a read-address
generating circuit, so that the video signal is
subjected to various special effects to display the
modified image.In such image transformation apparatus of the
read-address control system, it has been difficult to 
provide a special effect for forming a curvilinearly modified picture
image eg. consisting of a star or heart.EP-A-0437074 discloses image transformation apparatus in which
input video data is stored in a memory. Rectangular address
coordinates are converted to polar coordinates and the polar
coordinates are transformed according to the desired special effect.
The transformed polar coordinates may then be converted back to
rectangular coordinates for accessing the memory. The transformation
can produce an effect whereby the input image appears to be wrapped
around a sphere, or appears circularly ruffed or modulated into flower,
heart or other shapes. The input rectangular coordinates may be offset
according to the desired location of the centre of the effect in the
image. Various aspects of the invention are set out in the accompanying claims.Embodiments of the invention provide an image transformation
apparatus in which, a lens effect for transforming an image into a
curvilinearly modified picture image such as of a star or heart can be
obtained.In the compute means 24 and 25, the transformation computation
with respect to the input read-address may be obtained by the following
equation:
Here, "r" is representative of a curvature radius of the
transforming image, and "G()" is representative of the shape of the
transforming image.Further, in the compute means 24 and 25 the 
transformation computation may be rendered with respect to
the input read-address by the following equation:
G'() = M() = RPRS
Here, "Rp" is representative of a radius of pattern of
the transforming image, and "RS" is representative of a
radius of a circumcircle with respect to the
transforming image.Further, in the compute
</DESCRIPTION>
<CLAIMS>
Apparatus for transforming input video data representing an
input video image, the apparatus comprising:


memory means (11) for storing said input video data;
means (13, 23) for converting a sequential rectangular coordinate
address, representing a location in a transformed image, to a polar

coordinate address having a radius coordinate and an angular
coordinate;
transforming means (13, 24, 25, 33, 38) for transforming said polar
coordinate address to a transformed polar coordinate address, having a

transformed radius coordinate and a transformed angular coordinate, in
accordance with first and second pattern functions (G', M) corresponding

to first and second patterns which establish the pattern of said
transformed image, and a curvature function (F) which is a function of

the radius coordinate of the polar coordinate address, a virtual
lens (D) having a predetermined radius of curvature (D
s
) producing said
transformed image as if the input video image is viewed through said

virtual lens having said predetermined radius of curvature, at least
one of said first and second pattern functions (G', M) being dependent

upon said angular coordinate of said polar coordinate address and a
rotation angle (P
s
) which establishes a rotational view of the
respective pattern, said transforming means including dividing means for dividing said radius

coordinate by said first pattern function to produce a dividing result,
curvature transforming means for transforming said dividing result by said curvature function, which has

a primary differential coefficient that constantly increases up to a
predetermined level after which said primary differential coefficient

remains constant, and multiplying means for multiplying the result of the transformatton by said
curvature function by said first pattern function;
means (13, 26, 27, 34, 35) for converting said transformed polar
coordinate address to a transformed rectangular coordinate address; and
means (13) for retrieving from said memory means (11) said input
video data corresponding to said transformed rectangular coordinate

address of said input video image and providing said retrieved input
video data as data for said rectangular coordinate address of said 

transformed image.
Apparatus as claimed in claim 1, wherein one of said
pattern function corresponds to a ratio of the radius (R
p
) of said
pattern of said transformed image at said polar coordinate address to

the radius (R
s
) of a predetermined reference circle.
Apparatus as claimed in claim 1 or claim 2, wherein said
first pattern is a circle having a first radius (R
1
) and said second
pattern is a circle having a second radius (R
2
) different from said
first radius such that the pattern of said transformed image is an oval

pattern having an aspect ratio (A
s
) equal to the ratio of said first
radius to said second radius.
Apparatus as claimed in any preceding claim, wherein the
curvature function used by said transforming means (13, 24, 25, 33) to

transform said polar coordinate address comprises first and second
curvature functions which are functions of the radius coordinate of the

polar coordinate address and a virtual lens (D) having a respective one
of two different predetermined radii of curvature (D
S1
, D
S2
) to produce
said transformed image as if the input video image is viewed through

said virtual lens having said respective one of said two different
radii of curvature.
Apparatus as claimed in claim 4, wherein the two radii of
curvature (D
S1
, D
S2
) of the virtual lens are concentric with one another.
Apparatus for transforming input video data representing an
input video image, the apparatus comprising;


memory means (11) for storing said input video data;
means (28, 29, 31) for offsetting a sequential rectangular
coordinate address, representing a location in a transformed image

having a plurality of regions, by a centre coordinate (X
c,
, Y
c
) of the
region of said transformed image in which said rectangular coordinate

address is located; 
means (13, 23) for converting said rectangular coordinate address
to a polar coordinate address;
transforming means (13, 24, 25, 33, 38) for transforming said polar
coordinate address to a transformed polar coordinate address in

accordance with a pattern function (G) and a curvature function (F)
which establish the pattern and curvature, respectively, of said region

of said transformed image in which said rectangular coordinate address
is located as if the input video image is viewed through a plurality of

lenses (D), said transforming means including dividing means for dividing a radius coordinate of
said polar coordinate address by said pattern function to produce a

dividing result, curvature transforming means for transforming said dividing result by said curvature
function, which has a primary differential coefficient that constantly

increases up to a predetermined level after which said primary
differential coefficient remains constant, and multiplying means for multiplying the result

of the transformation by said curvature function by said pattern function;
means (26, 27, 34 to 37) for converting said transformed polar
coordinate address to a transformed rectangular coordinate address; and
means (13) for retrieving from said memory means (11) said input
video data corresponding to said transformed rectangular coordinate

address of said input video image and providing said retrieved input
video data as data for said rectangular coordinate address of said

transformed image.
Apparatus as claimed in claim 6, including means (36, 37)
for back-offsetting said transformed rectangular coordinate address by

said centre coordinate (X
c
, Y
c
) of said region of said transformed image
in which said transformed rectangular coordinate address is located.
A method of transforming input video data representing an
input video image, comprising the steps of:


storing said input video data in a memory (11);
supplying (SP2) a sequential rectangular coordinate address
representing a location in a transformed image;
converting (SP4) said rectangular coordinate address to a polar
coordinate address having a radius coordinate and an angular

coordinate; 
transforming (SP5) said polar coordinate address to a transformed
polar coordinate address, having a transformed radius coordinate and a

transformed angular coordinate, in accordance with first and second
pattern functions (G', M) corresponding to first and second patterns

which establish the pattern of said transformed image, and a curvature
function (F) which is a function of the radius coordinate of the polar

coordinate address, a virtual lens (D) having a predetermined radius
of curvature (D
s
) producing said transformed image as if the input video
image is viewed through said virtual lens having said predetermined

radius of curvature, at least one of said first and second pattern
functions (G', M) being dependent upon a rotation angle (P
s
) which
establishes a rotational view of the respective pattern, said

transforming including dividing said radius coordinate by said first
pattern function to produce a dividing result, transforming said

dividing result by said curvature function, which has a primary
differential coefficient that constantly increases up to a

predetermined level after which said primary differential coefficient
remains constant, and multiplying the result of the transformation by said

curvature function by said first pattern function;;
converting (SP6) said transformed polar coordinate address to a
transformed rectangular coordinate address; and
retrieving from said memory (11) said input video data
corresponding to said transformed rectangular coordinate address of

said input video image and providing said retrieved input video data as
data for said rectangular coordinate address of said transformed image.
A method as claimed in claim 8, wherein said first pattern
is a circle having a first radius (R
1
) and said second pattern is a
circle having a second radius (R
2
) different from said first radius such
that the pattern of said transformed image is an oval pattern having an

aspect ratio (A
S
) equal to a ratio of said first radius to said second
radius.
A method as claimed in claim 8 or claim 9, wherein the
curvature function (F) used in the transforming step comprises first

and second curvature functions which are functions of the radius 
coordinate of the polar coordinate address and a virtual lens (D)

having a respective one of two different predetermined radii of
curvature (D
S1
, D
S2
) producing said transformed image as if the input
video image is viewed through said virtual lens having said respective

one of said two different radii of curvature.
A method as claimed in claim 10, wherein the two radii of
curvature (D
S1
, D
S2
) of the virtual lens (D) are concentric with one
another.
A method of transforming input video data representing an
input video image, comprising the steps of:


storing said input video data in a memory (11);
supplying (SP2) a sequential rectangular coordinate address
representing a location in a transformed image having a plurality of

regions;
offsetting (SP3) said rectangular coordinate address by a centre
coordinate (X
c
, Y
c
) of the region of said transformed image in which

said rectangular coordinate address is located;
converting (SP4) said rectangular coordinate address to a polar
coordinate address;
transforming (SP5) said polar coordinate address to a transformed
polar coordinate address in accordance with a pattern function (G) and

a curvature function (F) which establish the pattern and curvature,
respectively, of said region of said transformed image in which said

rectangular coordinate address is located as if the input video image
is viewed through a plurality of lenses (D), said transforming

including dividing a radius coordinate of said polar coordinate address
by said pattern function to produce a dividing result, transforming

said dividing result by said curvature function, which has a primary
differential coefficient that constantly increases up to a predetermined

level after which said primary differential coefficient remains
constant, and multiplying the result of the transformation by said

curvature function by said pattern function;
converting (SP6) said transformed polar coordinate address to a
transformed rectangular coordinate address; and 
retrieving from said memory (11) said input video data
corresponding to said transformed rectangular coordinate address of

said input video image and providing said retrieved input video data as
data for said rectangular coordinate address of said transformed image.
</CLAIMS>
</TEXT>
</DOC>
