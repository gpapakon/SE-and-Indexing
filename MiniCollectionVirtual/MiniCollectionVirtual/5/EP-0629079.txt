<DOC>
<DOCNO>EP-0629079</DOCNO> 
<TEXT>
<INVENTION-TITLE>
Halftone images using printed symbols modelling
</INVENTION-TITLE>
<CLASSIFICATIONS>B41J252	G06T500	H04N1405	G06T500	B41J252	H04N1405	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>B41J	G06T	H04N	G06T	B41J	H04N	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>B41J2	G06T5	H04N1	G06T5	B41J2	H04N1	</CLASSIFICATIONS-FOURTH>
<ABSTRACT>
A method of generating a halftone image (104) on a printer (105) from 
a grey scale image (102) using a dither matrix (110). The halftone image 

(104) is represented by symbols printed by the printer (105). The matrix 
(110) generates many patterns (130,140,160). Each pattern has many 

elements in which a symbol is printed or not. The grey scale values of 
the elements in each pattern depend on a model (175,180) of the symbols. 

The model may be a circle (175) or a probability profile (180). The 
model (175,180) is incorporated into the patterns (130,140,160) as each 

pattern is generated. Summing the patterns produces the dither matrix. 

</ABSTRACT>
<APPLICANTS>
<APPLICANT-NAME>
HEWLETT PACKARD CO
</APPLICANT-NAME>
<APPLICANT-NAME>
HEWLETT-PACKARD COMPANY
</APPLICANT-NAME>
</APPLICANTS>
<INVENTORS>
<INVENTOR-NAME>
LIN QIAN
</INVENTOR-NAME>
<INVENTOR-NAME>
LIN, QIAN
</INVENTOR-NAME>
</INVENTORS>
<DESCRIPTION>
The present invention relates generally to halftone
images and more particularly to methods of generating halftone
images by a dither matrix.A printer can be designed to print a picture as a
halftone or a grey scale image. For an halftone image, each
pixel of the image either has a symbol printed or not printed.
For a grey scale image, each symbol on a pixel is further
refined to have one of many grey levels.A halftone image is usually easier and cheaper to
generate than a grey scale image. Many relatively low cost
printers are specifically designed to print halftone images.
To use such a printer to print a grey scale image, the image
must be transformed to a half tone image. One objective of
the printing industry is to develop appropriate transformation
techniques so that the halftone image becomes visually
indistinguishable from the grey scale image.One prior art method transforms a grey scale image to a
halftone image by means of a dither matrix. The grey scale
image has many pixels, each pixel having a value. The dither
matrix occupies a physical space and has numerous elements,
each element also having a value. This matrix is mapped over
the grey scale image. For an image that is larger than the
space occupied by the dither matrix, the matrix replicates
itself to cover the entire image. Each element in the matrix
is compared to its corresponding grey scale image pixel. If
the grey scale image pixel has a larger value, a symbol will
not be printed in a corresponding position of the halftone
image. In order to generate a visually pleasing halftone image
using the above method, the dither matrix must be carefully
designed. The elements in the matrix should not be generated
by a random number generator, because a fully random pattern
would create a noisy image corrupting the content of the grey
scale image.One prior art method of designing the matrix is known as
the void-and-cluster method. A general discussion of the
void-cluster method can be found in "The Void-and-Cluster
Method for Dither Array Generation," written by Robert
Ulichney, published in the SPIE/IS&T Symposium on Electronic
Imaging Science and Technology, San Jose, CA, February, 1993.Figure 1A shows one grey level of a halftone image
pattern generated by the prior art void-and-cluster method.
The Figure was printed by a 600 dots-per-inch printer. To
enhance the image, each symbol is magnified nine times, with
the image duplicated 4 times, once along the horizontal
direction, and then along the vertical direction. The pattern
has
</DESCRIPTION>
<CLAIMS>
A method of generating a halftone image (104) from a grey scale image
(102) by means of a dither matrix (110),


the halftone image (104) being represented by symbols printed by a printer
(105),
the halftone image (104), the grey scale image (102) and the dither matrix
(110) each occupying an area, the three areas being substantially equal to each

other,
the halftone image (104) and the grey scale image (102) each having a
plurality of pixels, each pixel having a value, and
the dither matrix (110) having a plurality of elements that are generated
by a plurality of patterns (130, 140, 160), each pattern also having a plurality of

elements, each element in each pattern occupying a position in the dither matrix
area (112), each element having a value,
the method comprising the steps of comparing the value of each pixel of
the grey scale image (102) with the value of an element in the dither matrix (110)

and, based on the result of the comparison, determining the value of a
corresponding pixel of the halftone image (104), and
the value of each element in each pattern (140) of the dither matrix (110)
being dependent on a model (175, 180) of the symbols printed by the printer

(105) as each pattern is generated to form the dither matrix (110),

   characterised in that the dither matrix (110) is constructed by the steps
(200) of:


generating (202) an intermediate pattern (300) having a plurality of
elements, each element having either a maximum or a minimum value, the values

of the elements being dependent on the model (175, 180) of the symbols, those
elements having the maximum value being distributed substantially uniformly

within the pattern (300); and
generating a plurality of other patterns, each pattern having a different
number of elements of the maximum value than the intermediate pattern, and 

summing the intermediate pattern (300) and the plurality of other patterns to get
the dither matrix.
A method of generating a halftone image (104) as recited in claim 1,
wherein the model of the symbols printed by the printer (105) as a circle (175).
A method of generating a halftone image (104) as recited in claim 1,
wherein the model of the symbols printed by the printer (105) is a probability

profile (180).
A method of generating a halftone image (104) as recited in claim 1,
wherein the model of the symbols printed by the printer (105) is a digitized

representation of the printed symbol (450).
A methods of generating a halftone image as recited in any of claims 1 to
4, wherein the step of "generating a plurality 
of other patterns further comprises
the steps of:


generating (204) a pattern of the dither matrix (110) with fewer elements
having the maximum value than the intermediate pattern (300); and
generating (206) a pattern of the dither matrix (110) with fewer elements
having the minimum value than the intermediate pattern (300).
A method of generating a halftone image as recited in any of claims 1 to
5, wherein the step (202) of "generating an intermediate pattern" further

comprises:

using (425) a random pattern as the starting values for the intermediate
pattern (300), the random pattern having elements of randomly distributed

maximum and minimum values;
copying (426) the intermediate pattern (300) into a dummy pattern;
modifying (427) the values of the elements in the dummy pattern by the 
model (175, 180) of the symbols;
filtering (428) the dummy pattern by the filter;
identifying (430) from the filtered output the position having the element
with the largest value as the maximum position, and the position having the

element with the smallest value as the minimum position.
exchanging (432) elements in the maximum and minimum position of the
intermediate pattern (300); and
repeating (434) from the step (426) of "copying the intermediate pattern"
until the intermediate pattern (300) has reached an equilibrium state.
A method of generating a halftone image (104) as recited in claim 6,
wherein the intermediate pattern (300) has reached the equilibrium state when the

difference between the largest and the smallest value in the filtered output
remains substantially constant with additional filtering.
A method of generating a halftone image (104) as recited in claim 5,
wherein the step (204) of "generating a pattern of the dither matrix with fewer

elements having the maximum values" further comprises:

copying (502) the intermediate pattern (300) into a dummy pattern;
modifying (504) the values of the elements in the dummy pattern by the
model (175, 180) of the symbols;
generating (506) a start sum from the values of the elements in the dummy
pattern;
filtering the dummy pattern by the filter;
identifying from the filtered output the position having the element with
the largest value as the maximum position;
replacing the value of the element in the maximum position of the
intermediate pattern (300) with the minimum value;
copying the intermediate pattern (300) into the dummy pattern;
modifying (510) the values of the elements in the dummy pattern by the 
model (175, 180) of the symbols;
generating (512) an end sum from the values of the elements in the
dummy pattern;
repeating (514) from the "filtering" step until the difference between the
start sum and end sum is less than or equal to a quantization number to generate

one pattern of the dither matrix (110);
setting (515) the start sum equal to the end sum; and
repeating (516) from the "filtering" step until the end sum is less than or
equal to the quantization number.
A method of generating a halftone image (104) as recited in claim 5,
wherein the step (206) of "generating a pattern of the dither matrix with fewer

elements having the minimum values" further comprises:

copying (552) the intermediate pattern (300) into a dummy pattern;
modifying (554) the values of the elements in the dummy pattern by the
model (175, 180) of the symbols;
generating (556) a start sum from the values of the elements in the dummy
pattern;
filtering the dummy pattern by the filter;
identifying from the filtered output the position having the element with
the smallest value as the minimum position;
replacing the value of the element in the minimum position of the
intermediate pattern (300) with the maximum value;
copying the intermediate pattern into the dummy pattern;
modifying (560) the values of the elements in the dummy pattern by the model
(175, 180) of the symbols;
generating (562) an end sum from the values of the elements in the
dummy pattern;
repeating (564) from the "filtering" step until the difference between the
start sum and end sum is less than or equal to a quantization number to generate 

one pattern of the dither matrix (110);
setting (565) the start sum as the end sum; and
repeating (566) from the "filtering" step until the end sum is more than or
equal to ((the total number of patterns of the dither matrix . 1) * the quantization

number).
</CLAIMS>
</TEXT>
</DOC>
