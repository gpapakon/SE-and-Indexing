<DOC>
<DOCNO>EP-0626648</DOCNO> 
<TEXT>
<INVENTION-TITLE>
Methods and apparatus for generating phantom control values for a b-spline curve
</INVENTION-TITLE>
<CLASSIFICATIONS>G06T1180	G06F1717	G06T1120	G06F1750	G06T1180	G06F1750	G06T1120	G06F1717	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>G06T	G06F	G06T	G06F	G06T	G06F	G06T	G06F	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>G06T11	G06F17	G06T11	G06F17	G06T11	G06F17	G06T11	G06F17	</CLASSIFICATIONS-FOURTH>
<ABSTRACT>
In an image synthesis system, a definer/editor 
(102) stores (1112) object definitions in the form of 

control points for spline curves. The system can 
generate "phantom control points" (A₀ to A
N+1
) to 
define a spline object, such that the curve 

interpolates a desired set of points (P₁ to P
N
) 
received from a user, for example via a mouse or 

graphics tablet. While the number N of received 
points, is variable, and may be large, the system 

operates quickly to generate coefficients (X
ij
) which 
can be used to derive the phantom control points (A), 

without the need for matrix inversion, and without 
storing a large number of pre-inverted matrices. This 

permits intuitive interaction with the user for the 
definition of spline objects. For large numbers N 

where interactivity may even so become difficult to 
achieve, the system is able to generate approximate 

phantom points, each derived from a relatively small 
sub-set of the received points. 


</ABSTRACT>
<APPLICANTS>
<APPLICANT-NAME>
CANON KK
</APPLICANT-NAME>
<APPLICANT-NAME>
CANON KABUSHIKI KAISHA
</APPLICANT-NAME>
</APPLICANTS>
<INVENTORS>
<INVENTOR-NAME>
MCINALLY THOMAS CALLAN
</INVENTOR-NAME>
<INVENTOR-NAME>
MCINALLY, THOMAS CALLAN
</INVENTOR-NAME>
</INVENTORS>
<DESCRIPTION>
The present invention relates to signal processing methods and
apparatus for
deriving a set of control values for a B-spline parametric
curve, from a large set of received values, such that
the curve approximately interpolates the received
values.The applications of the invention are many and varied,
but particular examples include computer graphics
systems, computer aided design systems, robotics and
numerical control. The received values may be simple
one-dimensional values, but in the above applications,
two and three-dimensional values representing points
on an image, or points in three-dimensional space, are
of particular interest. Accordingly, the invention
also relates to image synthesis systems and to a process
of making a picture or motion picture recording. In these applications, it is frequently desirable to
generate values which interpolate a set of received
values in a smooth and continuous manner. A
popular technique for this purpose is to employ a
parametric definition of the interpolating curve, such
that the curve is defined by a set of blending
equations and a set of control values (control points
in a multi-dimensional space). By varying a single
parameter, any point on the curve can be generated.
Parametric cubic curves in particular have desirable
aesthetic and physical properties, and include for
example Bezier curves and cubic spline curves. The
so-called B-spline curves are useful in that they
allow control of the curve by any number of control
values, while requiring only modest computational
effort to generate an interpolated value.In "Interactive Computer Graphics; Functional,
Procedural and Device-Level Methods" by Peter Burger
and Duncan Gillies, published by Addison Wesley
Publishing Company, ISBN0-201-17439-1, cubic B-splines
and other parametric curves are described. The
reference indicates that a disadvantage of the cubic
B-spline curves is the fact that the generated curve 
does not in fact interpolate the control values, so that
to generate a curve which interpolates a set of received
(user-specified) points in space requires the generation
of a set of "phantom" control values which cause the curve
to interpolate the desired values. A set of simultaneous
equations can be derived, which defines each phantom
control value in terms of the set of received control
values.Unfortunately, for a set of N received values, to obtain
the equations for the N phantom values requires the
solution of N simultaneous equations, or in equivalent
terms, the inversion of a matrix of N by N
</DESCRIPTION>
<CLAIMS>
A signal processing apparatus (100) for processing
input signals defining a set of N received control values

(P
i
) to generate signals defining a set of phantom
control values (A
i
), from which one or more interpolated
values lying on a curve (Q) which interpolates

approximately the received control values may be
generated by using the phantom control values (A
i
) in a
B-spline parametric equation, characterised by means for

processing the input signals to combine respective
subsets of N' (fewer than N) consecutive ones of the received control

values (P
i
) in a weighted sum in accordance with a set of
N' coefficients (1500; RS'), such that the set of N'

coefficients is used repeatedly and combined with a
respective different subset of the received control

values (P
i
) to generate each of at least a middle subset
of the desired phantom control values (A
i
).
An apparatus as claimed in claim 1, wherein said
parametric equation is a cubic B-spline parametric

equation.
An apparatus as claimed in claim 1 or claim 2,
wherein said curve (Q) is a closed curve such that the

received control values (P
i
) form a closed sequence, and 
wherein there is provided means for generating each

respective phantom control value (A
i
) by using repeatedly
a single set of coefficients to combine a different

respective subset of N' received control values (P
i
).
An apparatus as claimed in claim 1 or claim 2,
wherein the curve (Q) is an open-ended curve, wherein

there is provided means to store plural sets of
coefficients to define rows of a two-dimensional matrix,

and wherein there is provided means to generate a first
subset of the phantom control values (A
i
) by combining a
first subset of the received control values (P
i
) in
accordance with respective rows of a first subset of the

rows of the coefficient matrix, to generate a last subset
of the phantom control values (A
i
) by combining
respective rows of a last subset of the rows of the

coefficient matrix with a last subset of the received
control values (P
i
), and to generate a middle subset of
the phantom control values (A
i
) by combining a middle row
of the coefficient matrix with respective subsets of the

received control values (P
i
).
An apparatus as claimed in claim 4, wherein the
apparatus includes means for assuming default end

conditions for the curve (Q), such that coefficients in
a first and a last column of the matrix need not be 

stored.
Apparatus according to any preceding claim, wherein
said means for generating the phantom control values (A
i
)
further comprises:


a) means for determining whether the number N of
values in the set of received control values (P
i
) is
below a predetermined number; and
b) means operable when it is determined that said
number N of received control values is below said

predetermined number to combine the entire set of
received values in accordance with a set of coefficients

generated for each phantom value (A
i
) respectively, said
sets of coefficients being dependent on the number N.
Apparatus according to claim 6, further comprising:

means for generating directly said set of
coefficients generated for each phantom value (A
i
), in
accordance with predetermined rules, in dependence upon

the number N of received control values (P
i
).
Apparatus according to claim 6 or claim 7 when used
in image generation in an image display system, wherein

said predetermined number is set on the basis of the
resolution of the display (50). 
Apparatus according to claim 8, wherein said
predetermined number is a number selected from the range

5 to 20.
Apparatus according to claim 8 or claim 9, wherein
said predetermined number is 11.
An apparatus as claimed in any preceding claim,
wherein there is provided means for generating the set

of coefficients for a given value of N' by storing terms
of at least one numerical sequence (CS; RS) and selecting

these terms in accordance with predetermined rules.
An apparatus as claimed in claim 11, wherein the at
least one numerical sequence is defined by a recurrence

relation.
An apparatus as claimed in claim 12, wherein the
numerical sequence is further determined by one or more

starting values (CS
1
, CS
2
; RS
1
, RS
2
) selected in
accordance with a desired type of curve (Q).
An apparatus as claimed in claim 13, wherein said
one or more starting values depend on whether a closed

or open curve (Q) is desired and/or whether the number
N' of coefficients is odd or even. 
An apparatus as claimed in claim 12, 13 or 14,
wherein said recurrence relation defines a term of the

sequence to be four times the preceding term, minus the
term before the preceding term.
An apparatus as claimed in any of claims 11 to 15,
wherein there is provided means to negate certain terms

of the sequence in an alternating fashion, prior to
generating the coefficients.
An apparatus as claimed in any of claims 13 to 16,
wherein there is provided means to define a further

numerical sequence (DS), and means to select a divisor
(d) from the terms of the further sequence, in accordance

with the number N' of coefficients, and to apply the
divisor (d) to the selected members of the first

mentioned sequence (CS; RS) for the generation of the
coefficients.
An image synthesis system comprising processing
means and image output means for the generation of images

representing objects in a two- or three-dimensional
object space, wherein said processing means includes an

apparatus as claimed in any of claims 1 to 17, means for
using the signals defining the phantom control values to

generate the interpolated values, and means for using the
generated interpolated values to define the shape of an 

object or the trajectory of an object or the trajectory
of a viewpoint in space.
An image synthesis system as claimed in claim 18,
further comprising input means whereby a user can define

a set of points in a two- or three-dimensional space as
the received control values.
A signal processing method for processing input
signals defining a set of N received control values (P
i
)
to generate signals defining a set of phantom control

values (A
i
), from which one or more interpolated values
lying on a curve (Q) which interpolates approximately the

received control values may be generated by using the
phantom control values (A
i
) in a B-spline parametric
equation, characterised by processing the input signals

to combine respective subsets of N' (fewer than N) consecutive ones of the
received control values (P
i
) in a weighted sum in
accordance with a set of N' coefficients (1500; RS'),

such that the set of N' coefficients is used repeatedly
and combined with a respective different subset of the

received control values (P
i
) to generate each of at least
a middle subset of the desired phantom control values

(A
i
).
A method as claimed in claim 20, wherein said 
parametric equation is a cubic B-spline parametric

equation.
A method as claimed in claim 20 or claim 21, wherein
the curve (Q) is a closed curve such that the received

control values (P
i
) form a closed sequence, and wherein
a single set of coefficients is used repeatedly to

combine a different respective subset of N' received
control values (P
i
) in order to generate each respective
phantom control value (A
i
).
A method as claimed in claim 20 or claim 21, wherein
the curve (Q) is an open-ended curve, wherein plural sets

of coefficients are stored to define rows of a two-dimensional
matrix, and wherein a first subset of the

phantom control values (A
i
) is generated by combining a
first subset of the received control values (P
i
) in
accordance with respective rows of a first subset of the

rows of the coefficient matrix, a last subset of the
phantom control values (A
i
) is generated by combining
respective rows of a last subset of the rows of the

coefficient matrix with a last subset of the received
control values (P
i
), and a middle subset of the phantom
control values (A
i
) is generated by combining a middle
row of the coefficient matrix with respective subsets of

the received control values (P
i
). 
A method as claimed in claim 23, wherein default end
conditions are assumed for the curve (Q), such that

coefficients in a first and a last column of the matrix
need not be stored.
A method according to any of claims 20 to 24,
wherein the step of generating the phantom control values

(A
i
) further comprises the steps:

a) determining whether the number N of values in
the set of received control values (P
i
) is below a
predetermined number; and
b) when it is determined that said number N of
received control values is below said predetermined

number, combining the entire set of received values in
accordance with a set of coefficients generated for each

phantom value (A
i
) respectively, said sets of
coefficients being dependent on the number N.
A method according to claim 25, further comprising
the step:


generating directly said set of coefficients
generated for each phantom value (A
i
), in accordance with
predetermined rules, in response to the number N of

received control values (P
i
).
A method according to claim 25 or claim 26, wherein 
said predetermined number is set on the basis of the

resolution of a display device (50).
A method according to claim 27, wherein said
predetermined number is a number selected from the range

5 to 20.
A method according to claim 27 or 28, wherein said
predetermined number is 11.
A method as claimed in any of claims 20 to 29,
wherein, for a given value of N', the set of coefficients

is generated by storing terms of at least one numerical
sequence (CS; RS) and selecting these terms in accordance

with predetermined rules.
A method as claimed in claim 30, wherein the at
least one numerical sequence is defined by a recurrence

relation.
A method as claimed in claim 31, wherein the
numerical sequence is further determined by
 one or more
starting values (CS
1
, CS
2
; RS
1
, RS
2
) selected in
accordance with a desired type of curve (Q).
A method as claimed in claim 32, wherein said one
or more starting values depend on whether a closed or 

open curve (Q) is desired and/or whether the number N'
of coefficients values is odd or even.
A method as claimed in claim 31, 32 or 33, wherein
said recurrence relation defines a term of the sequence

to be four times the preceding term, minus the term
before the preceding term.
A method as claimed in any of claims 30 to 35,
wherein certain terms of the sequence are negated in an

alternating fashion, prior to generating the
coefficients.
A method as claimed in any of claims 32 to 35,
wherein a further numerical sequence (DS) is defined, and

wherein a divisor (d) is selected from the terms of the
further sequence, in accordance with the number N' of

coefficients, and applied to the selected terms of the
first mentioned sequence (CS; RS) for the generation of

the coefficients.
A method of generating images representing objects
in a two- or three-dimensional object space, the method

comprising generating signals defining phantom control
values (A
i
) by a method as claimed in any of claims 20 to
36, using the generated signals defining the phantom

control values to generate the interpolated values, using 
the generated interpolated values to define the shape of

an object represented in the image, or the trajectory of
an object or the trajectory of a viewpoint in space, and

generating an image using the defined shape or
trajectory.
A method as claimed in claim 37, further comprising
an input step wherein a user defines a set of points in

a two- or three-dimensional space for use as the received
control values.
A process of producing a picture or motion picture
recording, comprising:


generating signals defining phantom control values
(A
i
) by a method as claimed in any of claims 20 to 36;
using the generated signals defining the phantom
control values to generate said interpolated values;
using the generated interpolated values to define
the shape of an object or to define the trajectory of an

object or the trajectory of a viewpoint; and
generating a picture of motion picture recording
using the defined shape or trajectory.
A process of producing an image data signal,
comprising:


generating signals defining phantom control values
(A
i
) by a method as claimed in any of claims 20 to 36; 
using the generated signals defining the phantom
control values to generate said interpolated values;
using the generated interpolated values to define
the shape of an object or to define the trajectory of an

object or the trajectory of a viewpoint; and
generating an image data signal using the defined
shape or trajectory.
A computer program product comprising instructions
for causing, when loaded into a programmable processing

apparatus, the apparatus to become operable to perform
a method as claimed in at least one of claims 20 to 36.
A computer program product according to claim 41,
when embodied as a storage device storing the

instructions
A computer program product according to claim 41
when embodied as a signal conveying the instructions.
</CLAIMS>
</TEXT>
</DOC>
