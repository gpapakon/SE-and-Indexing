<DOC>
<DOCNO>EP-0613088</DOCNO> 
<TEXT>
<INVENTION-TITLE>
Method of memory interleaving and memory systems interleaved thereby.
</INVENTION-TITLE>
<CLASSIFICATIONS>G06F1206	G06F1206	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>G06F	G06F	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>G06F12	G06F12	</CLASSIFICATIONS-FOURTH>
<ABSTRACT>
A memory system for a digital computer has first and 
second memory modules having differing numbers of 

independently-accessible banks and unlike capacities. The 
digital computer also has an addressing arrangement that 

employs horizontal stacking for interleaving together the 
banks of both the first and second memory modules, such that 

the first memory module is interleaved to a first level and 
the second memory module to a second, different level. The 

invention also embraces a method of interleaving the memory 
system employing horizontal stacking. In usual applications, 

horizontal stacking permits the memory system to be 
interleaved to a higher level than that achieved by 

conventional vertical stacking schemes. 

</ABSTRACT>
<APPLICANTS>
<APPLICANT-NAME>
DIGITAL EQUIPMENT CORP
</APPLICANT-NAME>
<APPLICANT-NAME>
DIGITAL EQUIPMENT CORPORATION
</APPLICANT-NAME>
</APPLICANTS>
<INVENTORS>
<INVENTOR-NAME>
COLLINS HANSEL A
</INVENTOR-NAME>
<INVENTOR-NAME>
HARTWELL DAVID W
</INVENTOR-NAME>
<INVENTOR-NAME>
MAYO DAVID T
</INVENTOR-NAME>
<INVENTOR-NAME>
COLLINS, HANSEL A.
</INVENTOR-NAME>
<INVENTOR-NAME>
HARTWELL, DAVID W.
</INVENTOR-NAME>
<INVENTOR-NAME>
MAYO, DAVID T.
</INVENTOR-NAME>
</INVENTORS>
<DESCRIPTION>
This invention relates to digital computers, and more 
particularly to interleaving of memory systems in digital 
computers. Conventionally, "interleaving" is the process of 
assigning logical addresses to a plurality of memory units 
making up a memory system such that sequential logical 
addresses correspond to physical addresses of memory 
locations in different units. A memory location is the 
smallest independently accessible portion of the memory 
system, and can store, e.g., an eight-bit byte of data. Interleaving is usually expressed in terms of the number 
of units interleaved together. For example, a system  
 
described as having four-way or four-level interleaving 
(i.e., as having an interleaving factor of four) can be 
thought of as being divided into four units whose addresses 
are interleaved together. The four units may be assigned 
addresses as follows: the locations of the first unit may be 
assigned addresses 0, 4, 8, 12, etc., the locations of the 
second unit may be assigned addresses 1, 5, 9, 13, and so 
forth. Preferably, each of a plurality of the memory units are 
accessible independently of the other memory units. 
Accordingly, for accessing data located at a series of 
sequential addresses, interleaving permits the memory system 
to operate in an "overlapping" fashion, i.e., fetching data 
from different ones of the independently-accessible memory 
units at approximately the same time. This permits the 
interleaved memory system to provide the data faster than a 
non-interleaved memory system. Generally speaking, the greater the number of level of 
interleaving, the faster the data can be provided. Thus, 
four-way interleaving can provide data roughly twice as fast 
as two-way interleaving. Accordingly, it is generally 
desirable to maximize the number of levels of memory 
interleaving.  The time required for data to be supplied from a memory 
system is generally referred to as "latency". Maximizing the 
number of levels of memory interleaving can reduce overall 
latency, i.e., memory access time. Viewed another way, 
maximizing the number of levels of memory interleaving, or 
reducing latency, results in increased data throughput in the 
system. Moreover, by providing a maximum number of levels of 
interleaving of independently accessible memory units, memory 
"conflicts" can be minimized as well. Conflicts arise when 
the same memory unit is being accessed in separate, 
overlapping memory operations (e.g., read and/or write 
operations). Generally, the overlapping
</DESCRIPTION>
<CLAIMS>
A memory apparatus comprising: 

A) a first memory module having a first number of 
independently-accessible banks; 
B) a second memory module having a second number of 
independently-accessible banks, said second number being 

different from said first number; and 
C) addressing means coupled with said first and second 
memory modules for interleaving together said banks of both 

said first and second memory modules, and for interleaving 
said first memory module to a first level of interleaving and 

said second memory module to a second level of interleaving 
that is different from said first level of interleaving. 
The memory system in accordance with claim 1, 
further comprising translation means coupled with said first 

and second memory modules for translating a plurality of 
logical addresses into a plurality of physical addresses of 

said memory banks of said first and second memory modules. 
The memory system in accordance with claim 1, 
wherein said first number is two. 

 
wherein said first number is two. 
A method of configuring a memory system of a digital 
computer system, said method comprising the steps of: 


A) providing a plurality of memory modules, each of 
said modules being of a pre-determined size, each of said 

modules including at least one bank, and at least one of said 
modules including a plurality of independently-accessible 

memory banks, each said memory bank being of a pre-determined 
size and including a plurality of memory locations; 
B) assigning logical addresses to said memory locations 
of each of said banks, said assigning step including the 

steps of 

i) identifying a plurality of said modules forming a 
first interleave set, said first interleave set includin g 

a number of positions; 
ii) determining the size, "LBS", of the largest bank of 
said first interleave set; 
iii) calculating the interleave factor, "N", for said 
first inter leave set by dividing the total of the sizes of 

said modules in said first interleave set by said LBS; 
iv) equating the number of positions in the interleave 
set with the interleave factor "N"; 
v) identifying a plurality of elements for filling ea 

ch of said positions, each said element comprising one or 
more of said banks that have a total size equal to said LBS; 

 
and 
vi) assigning logical addresses to said banks of said 
first interleave set such that said assigned logical add 

resses are interleaved among said modules of said first 
interleave set responsive to the positions of said banks of 

said first interleave set within said interleave set, whereby 
said assigned addresses have a great number of levels of 

interleaving; 
C) storing an indication of said assigned addresses as 
logical addresses for use in accessing said memory locations 

of said modules; and 
D) translating data included in a plurality of data 
transfers that specify a plurality of logical addresses into 

data specifying a plurality of physical addresses of memory 
locations in said banks; whereby, due to said great number of 

levels of interleaving, data latency is reduced relative to 
vertical stacking. 
The method in accordance with claim 4, further 
including the step of repeating steps B-D for each of a 

plurality of interleave sets until all said bank locations 
have been assigned addresses. 
The method in accordance with claim 4, wherein said 
step B includes the steps of: 
A) determining the total size "CT" of said modules of 
said memory system; 
B) determining the size "S" of the module of said 
memory system having the largest size; 
C) determining a value D equal to CT divided by S; 
D) rounding down D to the nearest integer that is a 
power of two, thereby producing a value "IF;" 
E) multiplying IF by S to yield a value CS; and 
F) identifying the largest modules of said memory 
system that have a total size equal to the value CS. 
The method in accordance with claim 4, wherein said 
step (B) (i) includes the steps of: 


a) initializing a first and second variable; 
b) setting the first variable to identify the largest 
module of the interleave set that has not been assigned to a 

position; 
c) assigning the first bank of the module identified by 
the first variable to the next unfilled position, which is 

identified by the second variable, while stacking modules as 
necessary to meet the LBS; 
d) determining the interleave factor "Module IF" for 
the remaining banks, if any, of the module identified by the 

first variable, where the Module IF equals the System IF 
divided by the number of banks in the module, and the System 

IF is equal to "N"; 
e) assigning the next bank of the module identified by 
the first variable to a position identified by the formula 

"Module IF plus the second variable"; 
f) repeating step (e) for any remaining banks of the 
module identified by the first variable; and 
g) repeating the steps (b) to (f) until all said banks 
of said modules have been assigned to one of said number of 

positions. 
The method in accordance with claim 4, wherein a 
plurality of said modules comprise multi-bank modules each 

including a plurality of banks; each of said multi-bank 
modules has an associated module number indicative of the 

sizes of said banks within said module relative to the sizes 
of the banks of others of said modules; each of said banks 

within each said multi-bank module has an associated bank 
number different from the bank number of each other bank 

within said multi-bank number; a plurality of said positions 
comprise multi-element positions each including a plurality 

of said elements, and step (B) further comprises the step of 
assigning addresses to said memory locations of said elements 

filling each said multi-element position by allocating said 
logical addresses assigned to the multi-element position to 

said elements thereof so that 

A) in the case of said multi-element position being 
filled by a plurality of said banks of a single multi-bank 

 
module, consecutive ones of said logical addresses are 

assigned to different ones of the banks thereof in the order 
specified by the bank number associated therewith, and 
B) in the case of said multi-element position being 
filled by a plurality of said modules, consecutive ones of 

said logical addresses are assigned to different ones of said 
modules thereof in the order specified by said module numbers 

associated therewith. 
</CLAIMS>
</TEXT>
</DOC>
