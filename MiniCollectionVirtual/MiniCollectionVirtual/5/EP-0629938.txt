<DOC>
<DOCNO>EP-0629938</DOCNO> 
<TEXT>
<INVENTION-TITLE>
Compensation for low gain bipolar transistors in voltage and current reference circuits
</INVENTION-TITLE>
<CLASSIFICATIONS>H03F3343	H03F3343	G05F330	G05F308	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>H03F	H03F	G05F	G05F	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>H03F3	H03F3	G05F3	G05F3	</CLASSIFICATIONS-FOURTH>
<APPLICANTS>
<APPLICANT-NAME>
TEXAS INSTRUMENTS INC
</APPLICANT-NAME>
<APPLICANT-NAME>
TEXAS INSTRUMENTS INCORPORATED
</APPLICANT-NAME>
</APPLICANTS>
<INVENTORS>
<INVENTOR-NAME>
MARSHALL ANDREW
</INVENTOR-NAME>
<INVENTOR-NAME>
SCHMIDT THOMAS A
</INVENTOR-NAME>
<INVENTOR-NAME>
TEGGATZ ROSS E
</INVENTOR-NAME>
<INVENTOR-NAME>
MARSHALL, ANDREW
</INVENTOR-NAME>
<INVENTOR-NAME>
SCHMIDT, THOMAS A.
</INVENTOR-NAME>
<INVENTOR-NAME>
TEGGATZ, ROSS E.
</INVENTOR-NAME>
</INVENTORS>
<DESCRIPTION>
This invention relates to electronic circuits and more particularly
relates to voltage and current reference circuits.Voltage and current reference circuits find many applications in
electronic circuit applications. The bandgap reference circuit is a common
circuit solution for supplying a voltage or current reference. FIG.1 is a prior
art bandgap circuit 10 and operates as described in "New Developments in IC
Voltage Regulators", Widlar, Robert J., IEEE Journal of Solid State Circuits,
Vol. sc-6, No.1, February 1971 . M1 and M2 act as a standard MOS current
mirror providing current to Q1 and Q2 which are configured as a bipolar
current mirror. Q1 and Q2 are sized differently; therefore, although they
conduct the same current, they have different current densities. Therefore,
there will be a difference in their Vbe voltages and the difference will be
reflected in the current through R1. Vout is a voltage reference that is a
function of the current through R2 and the base-emitter voltage Vbe of Q3.
Since the current through R2 is mirrored from M2 it is seen that the current
through M3 is a function of Vbe between Q1 and Q2 and R1. Therefore, Vout
is a function of the Vbe between Q1 and Q2, the ratio in resistor values R1
and R2, and Vbe of Q3 as seen below: 
Vout = I(M3)*R2 + Vbe(Q3)
and,

where

Substituting Vbe/R1 for I(M3) you get

If the ratios of R1 and R2 are set appropriately Vout will have zero
temperature coefficient. This ratio is determined by taking the equation for
Vout that incorporates all temperature dependencies, differentiating with
respect to temperature, and setting the equation equal to zero. This is well
known by those skilled in the art of bandgap reference circuits. The above
explanation of prior art circuit 10 assumes that the gain (or hFE) of Q1 and
Q2 are sufficiently high such that Ic(Q2) is approximately Ie(Q2). However, in
many cases, this is not a valid assumption. In integrated circuits, hFE
vary by an order of magnitude for a given process. Additionally, hFE is a
strong function of temperature and may increase by 4X from -55C to 125C.
Taking into account low hFE, the following equations represent circuit 10:
Vout = I(M3)*R2 + Vbe(Q3)
and,
I(M3) = I(M2) = Ic(Q2)
and,
Ic(Q2) = Ie(Q2) - Ib(Q2) 
therefore,

and,

Therefore, it can be seen that an error term exists and further, this error
term is a function of temperature since Ib(Q2) will vary as hFE varies over
temperature. This error term deteriorates the performance of circuit 10 as a
voltage reference.FIG.2 is a prior art
</DESCRIPTION>
<CLAIMS>
A method of providing a stable output reference
signal, comprising the steps of:


generating a difference between the base-emitter
voltages of first and second bipolar transistors (Q
1
,Q
2
,Q
4
,
Q
5
),
translating said difference in base-emitter voltages
into a preliminary reference current proportional to the

difference in base-emitter voltages,

   
characterised in that
 the method further comprises:

measuring the gain (h
fe
) of the first and second bipolar
transistors,
generating a supplemental current in response to the
gain measure
d, and
adding the supplemental current to the preliminary
reference current to form a stable reference current stable

to variations in the gains of the first and second bipolar
transistors.
A method according to claim 1, in which the said
stable reference current is provided as said stable output

reference signal (I
out
).
A method according to claim 1, comprising

translating said stable reference current into a stable
voltage reference and providing the stable voltage reference

as said stable output reference signal (V
out
).
A method according to any preceding claim, wherein
the generating of the difference in base-emitter voltages

comprises: 

conducting a first current through the first bipolar
transistor (Q
1
,Q
4
), the first transistor exhibiting a first
current density, and
conducting a second current through the second bipolar
transistor (Q
2,
Q
5
), the second bipolar transistor exhibiting a
second current density,

   wherein the first current is approximately equal in
magnitude to the second current and the first current density

is larger than the second current density.
A method according to any preceding claim, wherein
the step of translating the difference in base-emitter

voltages comprises the step of placing said difference in
voltages across a resistance (R
1
,R
3
).
A method according to any preceding claim, wherein
the measuring of the gain comprises measuring the sum of the

base currents of the said first and second bipolar
transistors, and the generating of the supplemental current

comprises generating that current at a level proportional to
the sum of the base currents.
A method according to claim 6, wherein the
measuring of the sum of the base currents comprises sourcing

the sum of the two base currents through a transistor
(M
4
,M
12
).
A method according to claim 6 or claim 7, wherein
the generating the supplemental current comprises the step of

mirroring the sum of base currents of the first and second
bipolar transistors to a transistor (M
6
,M
11
) that is sized
appropriately to provide said proportional supplemental

current. 
A bandgap reference circuit comprising

a current generation circuit, comprising first and
second bipolar transistors (Q
1
, Q
2
, Q
4
, Q
5
), arranged to generate
the difference between the base-emitter voltages of the first

and second bipolar transistors and to translate said
difference in base-emitter voltages into a preliminary

reference current proportional to the difference in base-emitter
voltages,

   
characterised in that
 the bandgap reference circuit
further comprises


means (M
5
,M
10
) for measuring the gain (h
fe
) of the first
and second bipolar transistors,
means (M
6
,M
11
) for generating a supplemental current in
response to the gain measured, and
means for adding the supplemental current to the
preliminary reference current to form a stable reference

current stable to variations in the gains of the first and
second bipolar transistors.
A bandgap reference circuit according to claim 9,
comprising a terminal for outputting the said stable

reference current (I
out
).
A bandgap reference circuit according to claim 9,
comprising


a voltage generation circuit (R
2
,Q
3
) for translating said
stable reference current into a stable voltage reference, and
a terminal for outputting the stable voltage reference
(V
out
).
A bandgap reference circuit according to claim 11,
wherein the voltage generation circuit comprises: 


a first MOS transistor (M
3
) having a first terminal
connected to a voltage supply, and a control terminal

connected to the current generation circuit; and
a first resistance (R
2
,Q
3
) having a first terminal
connected to the second terminal of the first MOS transistor

and a second terminal connected to circuit ground;
the circuit being operable to mirror current from the
current generation circuit using the first MOS transistor as

a current mirror and to translate the current from the
current generation circuit to a voltage by conducting the

current through the first resistance, whereby the first
terminal of the first resistance forms the output of the

bandgap voltage reference circuit.
A bandgap reference circuit according to claim 12,
wherein the first resistance comprises:


a resistor (R
2
) having a first terminal forming the
first terminal of the first resistance; and
a diode (Q
3
) having an anode connected to the second
terminal of the resistor, and a cathode forming the second

terminal of the first resistance.
The circuit of claim 13, wherein the diode
comprises a bipolar transistor (Q
3
) having a collector
terminal connected to the base terminal and forming the anode

of the diode and an emitter terminal forming a cathode of the
diode.
A bandgap reference circuit according to any one of
claims 9 to 14, comprising


a current mirror (M
1
,M
2
,M
7
,M
8
) for supplying two equal
currents to be conducted respectively by the first and second

bipolar transistors (Q
1
,Q
2
,Q
3
,Q
4
), the first and second
bipolar transistors being so arranged that the current 

density through the first is larger than that through the
second.
A bandgap reference circuit according to claim 15,
wherein the current mirror comprises:


a second MOS transistor (M
1
,M
7
) having a first terminal
connected to a voltage supply, a second terminal connected to

the collector terminal of the first bipolar transistor
(Q
1
,Q
4
), and a control terminal connected to the second
terminal of the second MOS transistor; and
a third MOS transistor (M
2
,M
8
) having a first terminal
connected to the voltage supply, a second terminal connected

to the collector terminal of the second bipolar transistor,
and a control terminal connected to the control terminal of

the second MOS transistor (Q
2
, Q
5
).
A bandgap reference circuit according to any one of
claims 9 to 16, comprising a resistance (R
1
,R
5
) connected to
translate said difference in base-emitter voltages into the

preliminary reference current.
A bandgap reference circuit according to claim 17,
wherein the resistance has its first terminal connected to

the emitter terminal of the second bipolar transistor (Q
2
,Q
5
)
and its second terminal of which is connected to circuit

ground.
A bandgap reference circuit according to any one of
claims 9 to 18, wherein the means for measuring the gain

comprises means for measuring the sum of the base currents of
the said first and second bipolar transistors, and the means

for generating a supplemental current comprises means for
generating that current at a level proportional to the sum of

the base currents. 
A bandgap reference circuit according to claim 19,

wherein the means for measuring the sum of the base currents
comprises a transistor (M
5
,M
10
) connected to source the
summation of the two base currents.
A bandgap reference circuit according to claim 19 or
claim 20, wherein means for generating the supplemental

current comprises a current mirror (M
5
, M
6
, M
10
, M
11
) connected to
mirror the summation of base currents of the first and second

bipolar transistors to a transistor (M
6
,M
11
)that is sized
appropriately to provide said proportional supplemental

current.
The circuit of claim 21, wherein the current mirror
connected to mirror the sum of the base current comprises:


a fourth MOS transistor (M
5
,M
10
) having a first terminal
connected to a voltage supply, and a control terminal

connected to the second terminal, the second terminal being
connected to provide the sum of the base currents; and
a fifth MOS transistor (M
6
,M
11
) having a first terminal
connected to the voltage supply, a control terminal connected

to the control terminal of the fourth MOS transistor, and a
second terminal for providing the supplemental current.
A bandgap reference circuit according to any one of
claims 9 to 22, comprising


a beta-helper transistor (M
4
,M
12
) having a first terminal
connected to the means for generating the supplemental

current, a second terminal connected to the base terminal of
the first bipolar transistor, and a control terminal

connected to the collector terminal of the first bipolar
transistor, whereby the beta-helper transistor provides base

drive to the first and second bipolar transistors 
(Q
1
,Q
2
,Q
3
,Q
4
) without substantially decreasing the current
through the first bipolar transistor.
A bandgap reference circuit according to any one of
claims 9 to 23, wherein the second bipolar transistor is of a

different size to the first bipolar transistor and the
difference in the base-emitter voltages of the first and

second bipolar transistors is due to the difference in size
of said transistors.
</CLAIMS>
</TEXT>
</DOC>
