<DOC>
<DOCNO>EP-0934638</DOCNO> 
<TEXT>
<INVENTION-TITLE>
METHOD AND APPARATUS FOR SUPERFRAME BIT ALLOCATION IN A DISCRETE MULTITONE (DMT) SYSTEM
</INVENTION-TITLE>
<CLASSIFICATIONS>H04J300	H04J300	H04J1100	H04J1100	H04L502	H04L502	H04L2502	H04L2502	H04L2726	H04L2726	H04M300	H04M300	H04Q342	H04Q342	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>H04J	H04J	H04J	H04J	H04L	H04L	H04L	H04L	H04L	H04L	H04M	H04M	H04Q	H04Q	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>H04J3	H04J3	H04J11	H04J11	H04L5	H04L5	H04L25	H04L25	H04L27	H04L27	H04M3	H04M3	H04Q3	H04Q3	</CLASSIFICATIONS-FOURTH>
<ABSTRACT>
A method and apparatus for supporting multiple bit allocations in a multicarrier modulation system are disclosed. Hence, symbols being transmitted or received can make use of different bit allocations. By supporting the multiple bit allocations, the multicarrier modulation system is able to support bit allocation on a superframe basis. Also disclosed are techniques for selection and alignment of superframe formats to improve system performance. In the case of data transmission systems involving different transmission schemes, different bit allocations can be used to reduce undesired crosstalk interference.
</ABSTRACT>
<APPLICANTS>
<APPLICANT-NAME>
AMATI COMMUNICATIONS CORP
</APPLICANT-NAME>
<APPLICANT-NAME>
AMATI COMMUNICATIONS CORPORATION
</APPLICANT-NAME>
</APPLICANTS>
<INVENTORS>
<INVENTOR-NAME>
BINGHAM JOHN
</INVENTOR-NAME>
<INVENTOR-NAME>
CHOW JACKY S
</INVENTOR-NAME>
<INVENTOR-NAME>
BINGHAM, JOHN, A., C.
</INVENTOR-NAME>
<INVENTOR-NAME>
CHOW, JACKY, S.
</INVENTOR-NAME>
</INVENTORS>
<DESCRIPTION>
 METHOD AND APPARATUS FOR SUPERFRAME BIT ALLOCATIONBACKGROUND OF THE INVENTION1. Field of the Invention The present invention relates data communications and, more particularly, to data communications using multicarrier modulation.2. Description of the Related ArtBi-directional digital data transmission systems are presently being developed for highspeed data communication. One standard for high-speed data communications over twisted- pair phone lines that has developed is known as Asymmetric Digital Subscriber Lines (ADSL). Another standard for high-speed data communications over twisted-pair phone lines that is presently proposed is known as Very High Speed Digital Subscriber Lines (VDSL).The Alliance For Telecommunications Information Solutions (ATIS), which is a group accredited by the ANSI (American National Standard Institute) Standard Group, has finalized a discrete multi tone based approach for the transmission of digital data over ADSL. The standard is intended primarily for transmitting video data and fast Internet access over ordinary telephone lines, although it may be used in a variety of other applications as well. The North American Standard is referred to as the ANSI T 1.413 ADSL Standard (hereinafter ADSL standard). Transmission rates under the ADSL standard are intended to facilitate the transmission of information at rates of up to 8 million bits per second (Mbits/s) over twistedpair phone lines. The standardized system defines the use of a discrete multi tone (DMT) system that uses 256 "tones" or "sub-channels" that are each 4.3125 kHz wide in the forward (downstream) direction. In the context of a phone system, the downstream direction is defined as transmissions from the central office (typically owned by the telephone company) to a remote location that may be an end-user (i.e., a residence or business user). In other systems, the number of tones used may be widely varied. However when modulation is performed efficiently using an inverse fast Fourier transform (IFFT), typical values for the number of available sub-channels (tones) are integer powers of two, as for example, 128, 256, 512, 1024 or 2048 sub-channels. The ADSL standard also defines the use of a reverse signal at a data rate in the range of16 to 800 Kbit/s. The reverse signal corresponds to transmission in an upstream direction, as for example, from the remote location to the central office. Thus, the term ADSL comes from the fact that the data transmission rate is substantially higher in the downstream direction than
</DESCRIPTION>
<CLAIMS>
 CLAIMS
1 . A transmitter for a data transmission system using multicarrier modulation, said transmitter comprising: a superframe bit allocation table, said superframe bit allocation table stores superframe bit allocation information including separate bit allocation information for a plurality of frames of a superframe; a data symbol encoder, said data symbol encoder receives digital data to be transmitted and encodes bits associated with the digital data to frequency tones of a frame based on the superframe bit allocation information associated with the frame stored in said superframe bit allocation table; a multicarrier modulation unit, said multicarrier modulation unit modulates the encoded bits on the frequency tones of a frame to produce modulated signals; and a digital-to-analog converter, said digital-to-analog converter converts the modulated signals to analog signals.
2. A transmitter as recited in claim 1 , wherein the superframe includes a plurality of frames, with one or more of the frames being capable of carrying data in a first direction and zero or more of the frames being capable of carrying data in a second direction.
3. A transmitter as recited in claim 2, wherein said data symbol encoder encodes the bits of the digital data to those of the frames of the superframe that are assigned to carrying data in the first direction and not to those of the frames of the superframe that are assigned to carrying data in the second direction.
4. A transmitter as recited in claim 1, wherein said superframe bit allocation table includes a separate bit allocation table for each of the frames of the superframe that are assigned to carry data in the first direction.
5. A transmitter as recited in claim 1 , wherein said modulation unit modulates the encoded bits on the frequency tones of a symbol using Discrete Multi Tone (DMT) modulation.
6. A transmitter as recited in claim 1 , wherein said data symbol encoder is able to allocate bits differently in the various frames of a superframe by using different portions of the superframe bit allocation information stored in said superframe bit allocation table.
7. A transmitter as recited in claim 6, wherein said transmitter further comprises: a buffer, said buffer stores the digital data to be transmitted; and 


 a controller operatively connected to said superframe bit allocation table, said controller operates to control retrieval of the different portions of the superframe bit allocation information stored in said superframe bit allocation table.
8. A transmitter as recited in claim 1 , wherein said superframe bit allocation table includes a plurality of bit allocation tables, each of the bit allocation tables corresponds to a different one or more of the frames of the superframe.
9. A transmitter as recited in claim 1 , wherein said superframe bit allocation table includes: a first bit allocation table for a first set of the frames of the superframe; and a second bit allocation table for a second set of the frames of the superframe.
10. A transmitter as recited in claim 9, wherein bit allocations in the first bit allocation table are greater than those in the second bit allocation table to reduce impact of crosstalk interference from other transmission schemes.
1 1. A transmitter as recited in claim 10, wherein said transmitter transmits data through a binder of transmission wires, and wherein the other transmission scheme also transmits and receives data through the binder.
12. An apparatus for recovering data transmitted by a transmitter, said apparatus comprising: an analog-to-digital converter, said analog-to-digital converter receives transmitted analog signals and produces digital signals therefrom, the transmitted analog signals being time domain signals representing data transmitted; a demodulator, said demodulator receives the digital signals and demodulates the digital signals to produce digital frequency domain data; a superframe bit allocation table, said superframe bit allocation table stores superframe bit allocation information including separate bit allocation information for a plurality of frames of a superframe; and a data symbol decoder, said data symbol decoder operates to decode bits associated with the digital frequency domain data from frequency tones of a frame based on the superframe bit allocation information associated with the frame stored in said superframe bit allocation table. 

13. An apparatus as recited in claim 12, wherein the superframe includes a plurality of frames, with one or more of the frames being capable of carrying data in a first direction and zero or more of the frames being capable of carrying data in a second direction.
14. An apparatus as recited in claim 13, wherein said data symbol decoder operates to recover the bits of the digital data from those of the frames of the superframe that are assigned to carrying data in the first direction.
15. An apparatus as recited in claim 12, wherein said superframe bit allocation table includes a separate bit allocation table for each of the frames of the superframe that are assigned to carry data in the first direction.
16. An apparatus as recited in claim 12, wherein said superframe bit allocation table includes: a first bit allocation table for a first set of the frames of the superframe; and a second bit allocation table for a second set of the frames of the superframe.
17. An apparatus as recited in claim 16, wherein bit allocations in the second bit allocation table are greater than those in the first bit allocation table to reduce impact of crosstalk from other transmission schemes.
18. An apparatus as recited in claim 17, wherein said apparatus receives data through a binder of transmission wires, and wherein the other transmission scheme also transmits and receives data through the binder.
19. An apparatus as recited in claim 12, wherein said demodulator operates to demodulate the digital signals using Discrete Multi Tone (DMT) demodulation.
20. An apparatus as recited in claim 12, wherein said data symbol decoder is able to recover a different number of bits from the various frames of a superframe by using different portions of the superframe bit allocation information stored in said superframe bit allocation table.
21. An apparatus as recited in claim 20, wherein said apparatus further comprises: a buffer, said buffer stores the decoded data; and a controller operatively connected to said superframe bit allocation table, said controller operates to control retrieval of the different portions of the superframe bit allocation information stored in said superframe bit allocation table. 

22. A method for allocating bits to symbols of a superframe for transmission of data in a data transmission system using multicarrier modulation, said method comprising the operations of:
(a) receiving a service request for data transmission;
(b) determining a number of bits required to support the service request;
(c) obtaining performance indicia for a plurality of the symbols in a superframe; and
(d) allocating the determined number of bits to a plurality of symbols in the superframe based on the performance indicia.
23. A method as recited in claim 22, wherein the performance indicia provides an indication of how many bits the symbols are able to support.
24. A method as recited in claim 22, wherein the performance indicia is signal-to-noise ratio information.
25. A method as recited in claim 22, wherein the bits allocated to the plurality of symbols in the superframe are stored in a superframe bit allocation table.
26. A method as recited in claim 25, wherein the bit allocations to the plurality of symbols in the superframe are different.
27. A method as recited in claim 25, wherein the bit allocations to the plurality of symbols in the superframe are different, and wherein said receiving (a) includes the operations of:
(al) identifying at least one acceptable performance margin for the service request: and
(a2) identifying at least one requested number of bits required to support the service request.
28. A method as recited in claim 26, wherein said determining (b) comprises the operations of:
(bl) determining a number of bits that each tone of each symbol can support based on the acceptable performance margin and the performance indicia; and (b2) aggregating the number of bits for each tone of each symbol determined by said determining (bl) to produce an aggregate superframe total.
29. A method as recited in claim 28, wherein said determining (b) further comprises the operations of: 


 (b3) truncating the aggregate superframe total to obtain the determined number of bits, the determined number of bits then being in accordance with the service request.
30. A method as recited in claim 28, wherein said determining (b) further comprises the operations of:
(b3) determining whether the aggregate superframe total matches the requested number of bits.
31. A method as recited in claim 30, wherein said determining (b) further comprises the operations of:
(b4) when said determining (b3) determines that the aggregate superframe total does not matches the requested number of bits, then falling back to a next acceptable data rate, the next acceptable data rate being one of the requested number of bits provided by the service request, and (b5) repeating operations (bl) - (b4) if said determining (b3) determines that the aggregate superframe total matches the next acceptable data rate.
32. A method as recited in claim 30, wherein said determining (b) further comprises the operations of: (b4) when said determining (b3) determines that the aggregate superframe total does not matches the requested number of bits, then adjusting the performance margin to allow for a lower margin, and
(b5) repeating operations (bl) - (b4) if said determining (b3) determines that the aggregate superframe total matches the requested number of bits.
33. A method as recited in claim 30, wherein said determining (b) further comprises the operations of:
(b4) when said determining (b3) determines that the aggregate superframe total does not matches the requested number of bits, then adjusting the performance margin to allow for a lower margin;
(b5) determining whether the adjusted performance margin is still acceptable based on the at least one acceptable performance margins;
(b6) when said determining (b3) determines that the aggregate superframe total does not matches the requested number of bits and said determining (b5) determines that the adjusted performance margin is not acceptable, then falling back to a next acceptable data rate, the next acceptable data rate being one of the requested number of bits provided by the service request, and
(b7) repeating operations (bl) - (b6) if said determining (b3) determines that the aggregate superframe total matches the requested number of bits. 

34. A method for determining an alignment for a superframe used to transmit data in a data transmission system using multicarrier modulation, said method comprising the operations of:
(a) receiving a service request for data transmission; (b) selecting a superframe format based on the service request;
(c) selecting a proposed alignment of the selected superframe format;
(d) allocating bits to frequency tones of the selected superframe format;
(e) determining a performance measure for the selected superframe format with the allocation of bits; (f) repeating operations (c) - (e) for at least one other proposed alignment;
(g) choosing the one of the proposed alignments for the superframe format in accordance with the determined performance measures.
35. A method as recited in claim 34, wherein said method further comprises:
(h) obtaining, prior to said allocating (d), performance indicia for frequency tones of each frame in the superframe, and wherein said allocating (d) allocated the bits to the frequency tones of the selected superframe format based on the performance indicia.
36. A method as recited in claim 34, wherein the performance indicia is signal-to-noise ratio information.
37. A method as recited in claim 34, wherein said choosing (g) chooses the best of the proposed alignments.
38. A method as recited in claim 34, wherein said selecting (c) of the proposed alignment considers shifts in alignment by complete frames with respect to other superframe formats.
39. A method as recited in claim 34, wherein said selecting (c) of the proposed alignment selects an offset alignment of the selected superframe format with respect to other superframe formats.
40. A method as recited in claim 34, wherein said selecting (c) of the proposed alignment considers shifts in alignment by a fraction of a frame with respect to other superframe formats.
41. A method for allocating bits to symbols of a superframe for transmission of data in a data transmission system using multicarrier modulation, said method comprising the operations of: 


 (a) receiving a service request for data transmission;
(b) selecting a superframe format based on the service request;
(c) determining an alignment of the selected superframe format;
(d) allocating bits to frequency tones of the selected superframe format having the alignment;
(e) determining a performance measure for the selected superframe format with the allocation of bits;
(f) repeating operations (b) - (e) for at least one other superframe format;
(g) choosing the superframe format in accordance with the determined performance measures.
42. A method as recited in claim 41, wherein the alignment determined by said determining (c) is a best alignment for the selected superframe format.
43. A method as recited in claim 41 , wherein the chosen superframe format is the one of the superframe formats offering the best performance.
44. A method as recited in claim 41 , wherein said method further comprises: (h) determining, prior to said allocating (d), a number of bits required to support the service request, and wherein said allocating (d) operates to allocate the determined number of bits to a plurality of the frequency tones of the selected superframe format.
45. A method as recited in claim 44, wherein said method further comprises:
(i) obtaining, prior to said allocating (d), a performance indicia for at least a plurality of the frequency tones in the selected superframe format, and wherein said allocating (d) operates to allocate the determined number of bits to a plurality of the frequency tones of the selected superframe format based on the performance indicia.
46. A method as recited in claim 41 , wherein said determining (c) of the alignment comprises: (c 1 ) selecting a proposed alignment of the selected superframe format;
(c2) allocating bits to frequency tones of the selected superframe format; (c3) determining a performance measure for the selected superframe format with the allocation of bits;
(c4) repeating operations (cl) - (c3) for at least one other proposed alignment; and 


 (c5) choosing the one of the proposed alignments for the superframe format in accordance with the determined performance measures.
47. A transceiver for a data transmission system having mixed data transmission schemes, said data transmission system comprising: a transmitter for transmitting data using multicarrier modulation in accordance with a first data transmission scheme having a superframe structure, the superframe structure having a plurality of frames; a receiver for recovering data transmitted by a transmitter using multicarrier modulation in accordance with the first data transmission scheme having the superframe structure; a first transmission bit allocation table that stores bit allocations for transmission of data for a first set of the frames of the superframe structure; a second transmission bit allocation table that stores bit allocations for transmission of data for a second set of the frames of the superframe structure; a first reception bit allocation table that stores bit allocations for reception of data for the first set of the frames of the superframe structure; and a second reception bit allocation table that stores bit allocations for reception of data for the second of the frames of the superframe structure.
48. A transceiver as recited in claim 47, wherein said first transmission bit allocation table and said second transmission bit allocation table are stored in a superframe bit allocation table.
49. A transceiver as recited in claim 47, wherein said first transmission bit allocation table, said second transmission bit allocation table, said first reception bit allocation table and said second reception bit allocation table are stored in a superframe bit allocation table.
50. A transceiver as recited in claim 47, wherein the first data transmission scheme is ADSL.
51. A transceiver as recited in claim 47, wherein the mixed data transmission schemes have overlapping upstream and downstream data transmissions that cause crosstalk interference, and wherein the bit allocations stored in said first transmission bit allocation table, said second transmission bit allocation table, said first reception bit allocation table and said second reception bit allocation table are determined so as to reduce the impact of the crosstalk interference. 

52. A transceiver as recited in claim 51, wherein the bit allocations stored in said first transmission bit allocation table are relatively greater that those stored in said second transmission bit allocation table.
53. A transceiver as recited in claim 52, wherein the bit allocations stored in said first reception bit allocation table are relatively smaller that those stored in said second reception bit allocation table.
54. A transceiver as recited in claim 53, wherein the mixed transmission schemes include the first data transmission scheme and a second data transmission scheme, and both the first and second data transmission schemes share a binder.
55. A transceiver as recited in claim 54, wherein the first data transmission scheme is ADSL, and the second data transmission scheme is ISDN. 

</CLAIMS>
</TEXT>
</DOC>
