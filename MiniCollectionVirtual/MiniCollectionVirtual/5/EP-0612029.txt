<DOC>
<DOCNO>EP-0612029</DOCNO> 
<TEXT>
<INVENTION-TITLE>
Image processing.
</INVENTION-TITLE>
<CLASSIFICATIONS>G06T760	G06T760	G06T1510	G06T1540	G06T1740	G06T1740	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>G06T	G06T	G06T	G06T	G06T	G06T	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>G06T7	G06T7	G06T15	G06T15	G06T17	G06T17	</CLASSIFICATIONS-FOURTH>
<ABSTRACT>
Polygons defined in three-dimensional space are 
processed so as to determine a rendering order. Cycles 

are detected and broken by splitting a polygon into a 
plurality of smaller polygons. 
The procedure may be effected as a pre-process, for 
producing rendering order lists, trees or directed 

graphs. 

</ABSTRACT>
<APPLICANTS>
<APPLICANT-NAME>
CANON KK
</APPLICANT-NAME>
<APPLICANT-NAME>
CANON KK
</APPLICANT-NAME>
</APPLICANTS>
<INVENTORS>
<INVENTOR-NAME>
OTTO GERHARDT PAUL
</INVENTOR-NAME>
<INVENTOR-NAME>
OTTO GERHARDT PAUL C O CAN RES
</INVENTOR-NAME>
</INVENTORS>
<DESCRIPTION>
The present invention relates to a method and 
apparatus for image processing. In particular, the 
present invention relates to a method and apparatus for 
processing data representing the position of surface 
primitives such as polygons in three-dimensional space, 
for example to produce an ordered list for rendering 
views of said primitives in two-dimensional space. In an interactive three-dimensional graphics system, 
such as a system of the type disclosed in the Applicant's 
copending European Patent Publication No. EP-A-0531157 
(not published at the first claimed priority date), data 
representing polygons is manipulated in three-dimensional 
space interactively, in response to input commands from 
an operator. Two-dimensional images are presented to an 
operator at a rate sufficient to maintain a closed 
feedback loop between the operator and the virtual three-dimensional 
environment. A two-dimensional image is generated by rendering the 
three-dimensional image data onto a two-dimensional 
plane. For each view, "hidden surface removal" can be 
performed by ensuring that primitives which occlude other 
primitives are rendered into the two-dimensional plane 
either instead of the primitives which they occlude or 
at least after said occluded polygons. Often the  
 
occlusions are partial, therefore it is preferable to 
render occluded polygons prior to rendering the occluding 
polygons. In addition, totally invisible primitives may 
be culled and do not require further consideration during 
the rendering process. Thus, it can be appreciated that 
a very important aspect of the rendering process involves 
ensuring that the primitives are rendered in the correct 
order. However, determining the correct order for 
rendering, repeatedly for each iteration, would account 
for a considerable proportion of the available processing 
time. A system for producing rendering order lists is 
disclosed in the aforesaid copending European Patent 
Publication, in which said lists are produced as a pre-process, 
using a topological sort, prior to interactive 
operation. If necessary, a plurality of view 
orientations are selected and a rendering order list is 
produced for each of these views. During interactive 
operation, one of these rendering order lists is selected 
by comparing the actual view orientation with the pre-processed 
orientations, to determine which is the closest 
fit. Thus, the computational overhead required during 
interactive operation is reduced significantly. The invention provides a
</DESCRIPTION>
<CLAIMS>
A method of processing data defining surface 
primitives in three-dimensional space, so as to determine 

an order for rendering said primitives which is suitable 
for a set of values of at least one viewing parameter, 

the method including: detecting the presence of a cycle; 
and breaking said cycle by splitting a primitive in said 

cycle into a plurality of smaller primitives. 
A method according to Claim 1, wherein said 
order is determined so as to produce a rendering order 

list, tree or directed graph. 
A method according to Claim 1 or Claim 2, 
wherein a cycle is broken by splitting a primitive into 

two primitives. 
A method according to any preceding claim, 
wherein cycles having exactly two primitives therein are 

identified and said cycles are broken by splitting 
whichever primitive of the two is judged to minimise the 

probability of further cycles being created thereafter. 
A method according to Claim 4, wherein a 
primitive is selected for splitting by making reference 

to the extents of each primitive with respect to the 
 

plane of the other primitive. 
A method according to any of Claims 1 to 5, 
wherein a cycle having three or more primitives is broken 

by identifying a plane along which primitives may be 
split. 
A method according to Claim 6, wherein said at 
least one viewing parameter is a viewing direction and 

wherein a plane is selected as a plane which does not 
include any of the set of viewing direction values 

associated with the particular list, tree or graph. 
A method according to Claim 7, wherein a plane 
is selected as a plane of one of the primitives in the 

cycle. 
A method according to Claim 7, wherein a plane 
is selected from among a set of previously calculated 

planes. 
A method according to any of claims 6 to 9 
wherein an orientation of a splitting plane is selected 

and the plane's position adjusted so as to split a 
minimum number of primitives in the cycle. 
A method according to Claim 6, wherein a 
 

primitive is split along the boundary between a fragment 
which can be occluded by another primitive and a 

complementary fragment which cannot be occluded by said 
other primitive. 
A method according to Claim 11, wherein said 
primitive is split if the fragment does not occlude a 

third primitive, this being the next primitive in the 
cycle which is therefore occluded by the complementary 

fragment. 
Apparatus for processing data defining surface 
primitives in three-dimensional space, so as to determine 

an order for rendering said primitives, which is suitable 
for a set of values of at least one viewing parameter, 

the apparatus including means for detecting the presence 
of a cycle and for breaking said cycle by splitting a 

primitive in said cycle into a plurality of smaller 
primitives. 
Apparatus according to Claim 13, wherein said 
order is determined so as to produce a rendering order 

list, tree or directed graph. 
Apparatus according to Claim 13 or Claim 14, 
wherein a cycle is broken by splitting a primitive into 

two primitives. 
Apparatus according to any of Claims 13 to 15, 
wherein said means identifies cycles having exactly two 

primitives therein and splits a primitive of the two 
which is judged to minimise the probability of further 

cycles being created thereafter. 
Apparatus according to Claim 16, wherein a 
primitive is selected for splitting by making reference 

to the extents of each primitive with respect to the 
plane of the other primitive. 
Apparatus according to any of Claims 13 to 17, 
wherein said means is arranged to break cycles of three 

or more primitives, by identifying a plane along which 
primitives may be split. 
Apparatus according to Claim 18, wherein said 
at least one viewing parameter is a viewing direction and 

wherein a plane is selected as one which does not include 
any of the set of viewing direction values associated 

with the particular list, tree or graph. 
Apparatus according to Claim 19, wherein a 
plane is selected as a plane of one of the primitives in 

the cycle. 
Apparatus according to Claim 19, wherein a 
 

plane is selected from among a set of previously 
calculated planes. 
An apparatus according to any of claims 18 to 
21 wherein an orientation of the splitting plane is 

selected and the plane's position adjusted so as to split 
a minimum of the primitives in the cycle. 
Apparatus according to Claim 18, wherein a 
primitive is split along a boundary between a fragment 

which can be occluded by another primitive and a 
complementary fragment which cannot be occluded by said 

other primitive. 
Apparatus according to Claim 23, wherein said 
primitive is split if the fragment does not occlude a 

third primitive, this being the next primitive in the 
cycle which is therefore occluded by the complementary 

fragment. 
In an interactive graphics system, in which 
surface primitives defined in three dimensions are 

rendered to produce a two-dimensional image, a method of 
processing data defining primitives in three dimensions 

so as to determine an order for rendering said primitives 
which is suitable for a set of values of at least one 

viewing parameter, the method including detecting the 
 

presence of a cycle and breaking the detected cycle by 
splitting a primitive in said cycle into a plurality of 

smaller primitives. 
A method according to claim 25 wherein a 
plurality of rendering orders are determined in advance 

for a finite number of sets of values for said viewing 
parameter and wherein the rendering step includes 

identifying a specific set of viewing parameter values 
and selecting an associated rendering order from among 

those determined in advance. 
A method according to claim 26 wherein said at 
least one viewing parameter is a viewing direction, and 

wherein rendering orders are determined for a number of 
sets of viewing directions. 
An apparatus for rendering a two-dimensional 
image representing three-dimensional objects, the 

apparatus including means for determining an order for 
rendering surface primitives defined in three dimensions, 

by detecting the presence of a cycle in said ordering and 
breaking the detected cycle by splitting a primitive in 

said cycle into a plurality of smaller primitives. 
An apparatus according to claim 28 wherein a 
rendering order is determined in advance for a finite 

 
number of sets of values of at least one viewing 

parameter, and wherein said rendering means operates by 
identifying a specific set of viewing parameter values 

for the image and selecting an associated rendering order 
from among those determined in advance. 
An apparatus according to claim 29 wherein 
said at least one viewing parameter is a viewing 

direction, and wherein rendering orders are determined 
for a number of sets of viewing directions. 
A signal or storage medium conveying a two-dimensional 
image representing three-dimensional objects, 

wherein the image has been rendered in accordance with 
a rendering order for primitives defining the objects, 

and wherein the rendering order has been determined by 
detecting the presence of a cycle in said order and 

breaking said cycle by splitting a primitive in said 
cycle into a plurality of smaller primitives. 
A data carrying medium conveying instructions 
for programmable processing apparatus such that, when 

loaded into said apparatus, said apparatus is programmed 
to process data defining primitives
 in three-dimensional 
space, so as to determine an order for rendering said 

primitives, including detecting the presence of a cycle 
and breaking said cycle by splitting the primitive in 

 
said cycle into a plurality of smaller primitives. 
</CLAIMS>
</TEXT>
</DOC>
