<DOC>
<DOCNO>EP-0644698</DOCNO> 
<TEXT>
<INVENTION-TITLE>
B-frame processing apparatus with half pixel motion compensation for an image decoder.
</INVENTION-TITLE>
<CLASSIFICATIONS>H04N736	H04N736	H04N746	H04N746	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>H04N	H04N	H04N	H04N	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>H04N7	H04N7	H04N7	H04N7	</CLASSIFICATIONS-FOURTH>
<ABSTRACT>
A B-frame processing apparatus including a motion 
compensation apparatus in the unit of a half pixel for an image 

decoder adapted to a video appliance such as HDTV. According to 
the apparatus, motion compensation in the unit of a half pixel is 

performed in real time with respect to the image having been 
motion-compensated by frame memories, the half pixel motion-compensated 

image data is added by an adder to the image data 
provided from a restoring section, and then the added image data 

is provided to the frame memories for performing motion 
compensation in the unit of a pixel, while the order of the input 

image is adjusted corresponding to the display order of the final 
output image. 


</ABSTRACT>
<APPLICANTS>
<APPLICANT-NAME>
GOLD STAR CO
</APPLICANT-NAME>
<APPLICANT-NAME>
GOLDSTAR CO. LTD.
</APPLICANT-NAME>
</APPLICANTS>
<INVENTORS>
<INVENTOR-NAME>
LEE CHANG PYO
</INVENTOR-NAME>
<INVENTOR-NAME>
SONG KI HWAN
</INVENTOR-NAME>
<INVENTOR-NAME>
LEE, CHANG PYO
</INVENTOR-NAME>
<INVENTOR-NAME>
SONG, KI HWAN
</INVENTOR-NAME>
</INVENTORS>
<DESCRIPTION>
The present invention relates to an apparatus for processing 
I, P and B-frames for an image decorder adapted to a video 
appliance such as a high definition television (hereinafter 
referred to as HDTV), and more particularly to an appratus which 
can reduce memory capacity for processing B-frame and perform 
image motion compensation in the unit of a half pixel for B-frame, 
thereby obtaining a high definition picture. An image motion compensation apparatus in the conventional 
image decoder restores original image data by adding values of 
pixels, whose displacement correspond to motion vectors 
transmitted from the current frame memory, to values which are 
finally IDCT(Inverse Discrete Transform)-transformed. However, 
there has been a problem in that the conventional apparatus is 
insufficient to get high picture quality because it performs 
motion compensation only in the unit of a pixel. The present invention has been made to overcome the problems 
involved in the prior art. It is an object of the present invention to provide an 
apparatus for image motion compensation in the unit of a half 
pixel for an image decoder which can improve picture quality and  
 
the encoding rate of a video signal by performing image motion 
compensation even in the unit of a half pixel for B-picture as 
provided by the MPEG II algorithm. It is another object of the present invention to provide an 
apparatus for processing B-frame for an image decoder which can 
perform motion compensation in the unit of a half pixel for B-frame 
of image with memory whose capacity is small. In one aspect of the present invention, there is provided 
a B-frame processing apparatus for an image decoder comprising:
 
   a variable length decoder for decoding an encoded input 
video signal with variable length codes;
 
   a restoring means for performing an inverse quantization and 
an IDCT transform with respect to an image signal provided from 
said decoder;
 
   a delay and order adjusting means for adjusting said IDCT 
transform and motion compensation with respect to said image 
signal provided from said restoring means;
 
   a motion position transmitting means for providing a motion 
position of a current processed block in accordance with image 
information provided from said decoder;
 
   a motion vector adjusting means for providing a motion 
vector in the unit of a pixel in accordance with said information 
provided from said decoder;
 
   a frame mode information means for providing frame mode 
information in accordance
</DESCRIPTION>
<CLAIMS>
A B-frame processing apparatus for an image decoder 
comprising: 

   a variable length decoder for decoding an encoded input 
video signal with variable length codes; 

   a restoring means for performing inverse quantization and 
IDCT transform with respect to an image signal provided from said 

decoder; 
   a delay and order adjusting means for adjusting said IDCT 

transform and motion compensation with respect to said image 
signal provided from said restoring means; 

   a motion position transmitting means for providing a motion 
position of the current processed block in accordance with image 

information provided from said decoder; 
   a motion vector adjusting means for providing a motion 

vector in the unit of a pixel in accordance with said information 
provided from said decoder; 

   a frame mode information means for providing frame mode 
information in accordance with said information provided from 

said decoder; 
   first and second frame memories for performing motion 

compensation in the unit of a pixel, respectively; 
   first and second read address generators for generating read 

addresses of said first and second frame memories; 
   a first write address generator for generating write 

addresses of said first and second frame memories; 
   first and second multiplexers for selectively providing said 

read and write addresses;
 

   a bi-directional latch for storing and providing a frame 
image of said first and second frame memories; 

   a mean value calculating means for calculating a mean value 
of a signal provided from said bi-directional latch; 

   a delay control and selection means for selectively 
providing the compensated signal from said first or second frame 

memory and the signal from said mean value calculating means in 
accordance with said information provided from said decoder; 

   an adder for adding the output of said restoring means to 
the output of said delay control and selection means; 

   third and fourth frame memories for storing the image signal 
provided from said adder in order to adjust an image input order 

and a display order; 
   a delay control means for controlling the delay time of the 

image signal provided from said third and fourth frame memories; 
   a slice buffer for providing the video signal outputted from 

said adder without storing the signal in said first or second 
frame memory; 

   a third read address generator for generating read addresses 
of said third and fourth frame memories; 

   a second write address generator for generating write 
addresses of said third and fourth frame memories; 

   a fifth multiplexer for providing the output of said third 
read address generator to said third and fourth frame memories 

selectively; and 
   a sixth multiplexer for providing the output of said second 

write address generator to said third and fourth frame memories, 
selectively. 
A B-frame processing apparatus for an image decoder 
comprising; 

   a variable length decoder for decoding an encoded input 
video signal with variable length codes; 

   a restoring means for performing inverse quantization and 
IDCT transform with respect to an image signal provided from said 

decoder; 
   a delay and order adjusting means for adjusting said IDCT 

transform and motion compensation with respect to said image 
signal provided from said restoring means; 

   a motion position transmitting means for providing a motion 
position of the current processed block in accordance with image 

information provided from said decoder; 
   a motion vector adjusting means for providing a motion 

vector in the unit of a pixel in accordance with said information 
provided from said decoder; 

   a frame mode information means for providing frame mode 
information in accordance with said information provided from 

said decoder; 
   first and second frame memories for storing a frame image 

therein; 
   first and second multiplexers for providing read/write 

addresses of said first and second frame memories; 
   a write address generator for generating write addresses of 

said frame memories and providing the write addresses to said 
first and second multiplexers; 

   a first read address generator for generating a read address 
of said first frame memory according to an input motion vector 

 
and providing the read address to said first multiplexer; 

   a second read address generator for generating a read 
address of said second frame memory according to an input motion 

vector and providing the read address to said second multiplexer; 
   first and second bi-directional latches for providing the 

image signal provided from said adder to said first and second 
frame memories or providing the image signal read out from said 

first and second frame memories, respectively; 
   a mean value calculating means for calculating the mean 

value of the image signal provided from said first and second 

latches; 
   a third multiplexer for selectively providing the image 

signals provided from said first and second latches and the image 
signal calculated by said mean value calculating means; 

   an adder for adding the video signal provided from said 
third multiplexer to the IDCT-transformed image signal; 

   a FIFO memory for reading/writing said added image signal 
therein; 

   a read/write controller for controlling the read/write 
operation of said FIFO memory; and 

   a fourth multiplexer for selectively providing the image 
signal provided from said adder and the image signal provided 

from said FIFO memory corresponding to the frame mode. 
A B-frame processing apparatus for an image decoder 
comprising: 

   a variable length decoder for decoding an encoded input 
video signal with variable length codes; 

   a restoring means for performing inverse quantization and 
 

IDCT transform with respect to an image signal provided from said 
decoder; 

   a delay and order adjusting means for adjusting said IDCT 
transform and motion compensation with respect to the image 

signal provided from said restoring means; 
   a motion position transmitting means for providing a motion 

position of the current processed block in accordance with image 
information provided from said decoder; 

   a motion vector adjusting means for providing a motion 
vector in the unit of a pixel in accordance with said information 

provided from said decoder; 
   a frame mode information means for providing frame mode 

information in accordance with said information provided from 
said decoder; 

   first and second frame memories for reading/writing frame 
image signals therein; 

   first and second multiplexers for selectively providing the 
read/write addresses of said first and second frame memories; 

   a write address generator for generating the write addresses 
of said first and second frame memories and for providing the 

addresses to said first and second multiplexers; 
   third and fourth multiplexers for selectively providing a 

motion read address and a scan address to said first and second 
multiplexers, respectively; 

   a first motion read address generator for generating the 
motion read address of said first frame memory in accordance with 

an input motion vector and a clock(2CLK) whose period is twice as 
much as that of main clock, and providing an address to said 

 
third multiplexer; 

   a first scan read address generator for generating a scan 
read address of said first frame memory in accordance with the 

clock(2CLK), and providing the address to said third multiplexer; 
   a second motion read address generator for generating the 

motion read address of said second frame memory in accordance 
with an input motion vector and a clock(2CLK) whose period is 

twice as much as that of the main clock(CLK), and providing an 
address to said fourth multiplexer; 

   a second scan read address generator for generating a scan 
read address of said second frame memory in accordance with the 

clock(2CLK), and providing the address to said fourth 
multiplexer; 

   first and second bi-directional latches for 
receiving/providing the frame image signals from/to said first 

and second frame memories, respectively; 
   a third latch for providing the image signals provided from 

said first and second bi-directional latches after synchronizing 
the image signals with the main clock(CLK); 

   a mean value calculating means for calculating the mean 
value of the image signals provided from said third latch; 

   a fifth multiplexer for selectively providing the image 
signal outputted from said third latch and the image signal 

calculated by said mean value calculating means; 
   an adder for adding the image signal provided from said 

fifth multiplexed to the IDCT-transformed image signal; 
   fourth and fifth latches for providing the image signal 

provided from said first and second bi-directional latches 
 

according to the clock(CLK), respectively; 
   a first buffer which is enabled in accordance with the B-frame 

signal provided from said adder; 
   a second buffer which is enabled in accordance with the 

read-enable signal and a P-frame signal from said first frame 
memory for switching the output of said fourth latch; 

   a third buffer which is enabled in accordance with the read-enable 
signal and the P-frame signal from said second frame 

memory for switching the output of said fifth latch; 
   a first AND gate for AND-gating the P-frame signal and the 

read-enable signal of said first frame memory and providing the 
gated result as a control signal of said second buffer; and 

   a second AND gate for AND-gating the P-frame signal and the 
read, enable signal of said second frame memory and providing the 

gated result as a control signal of said third buffer. 
A motion compensating apparatus in the unit of a half pixel 
for a B-frame, comprising: 

   a plurality of frame memories for alternately 
reading/writing frame image signals with respect to the 

respective frames in accordance with motion vector information; 
   a plurality of read/write address generators for generating 

read/write addresses of said plurality of frame memories; 
   a plurality of multiplexers for providing the read/write 

addresses from said plurality of read/write address generators to 
said plurality of frame memories; 

   an output order adjusting means for adjusting and providing 
the frame image signals outputted from said plurality of frame 

memories corresponding to a display order;
 

   a first delay means for delaying pixel data A, whose 
position is to be motion compensated for and which are provided 

from said plurality of frame memories, as much as a 1-sample 
clock; 

   a first adder for adding said pixel data A to pixel data B 
having been delayed by said first delay means; 

   a second delay means for delaying said pixel data B, which 
were delayed by said first delay means, as much as a 16-sample 

clock; 
   a second adder for adding said pixel data A to pixel data C 

having been delayed by said second delay means; 
   a third delay means for delaying said pixel data C, which 

were delayed by said second delay means, as much as a 1-sample 
clock; 

   a third adder for adding the peel data C to the peel data 
D having been delayed by said third delay means; 

   a fourth adder for adding the pixel data provided from said 
third adder to the pixel data provided from said first adder; 

   a fourth delay means for delaying said pixel data A as much 
as a 24-sample clock: 

   a first mean value calculating means for calculating the 
mean value of the pixel data provided from said first adder; 

   a second mean value calculating means for calculating the 
mean value of the pixel data provided from said second adder; 

and 
   a third mean value calculating means for calculating the 

mean value of the pixel data provided from said fourth adder. 
A motion compensation apparatus in the unit of a half pixel 
 

for a B-frame as claimed in claim 4, further comprising: 
   first and second multiplexers for selectively providing the 

outputs of said fourth delay means, first mean value calculating 
means, second mean value calculating means, and third mean value 

calculating means in accordance with the motion vector 
information; 

   first and second FIFO memories for storing the output data 
of said first and second multiplexers therein in order to obtain 

image data whose unnecessary interpolation values are removed and 
which is synchronized with the main clock(CLK); 

   a fourth mean value calculating means for calculating the 
mean value of the signal provided from said second FIFO memory; 

   a delay control and selection means for selectively 

providing one of the frame image signals compensated for by said 
plurality of frame memories in accordance with the motion vector 

information and the mean value signal calculated by said fourth 
mean value calculating means; and 

   an adder for adding the IDCT-transformed output from said 
delay control and selection means. 
A motion compensating apparatus in the unit of a half pixel, 
comprising; 

   a variable length decoder for decoding an encoded input 
image data and motion vector information; 

   a restoring means for inverse-quantizing and IDCT-transforming 
the decoded image data from said variable length 

decoder; 
   a delay and order adjusting means for adjusting the IDCT 

transform and motion compensation with respect to the image 
 

signal provided from said restoring means; 
   a motion vector analyzing means for analyzing the value of 

a motion vector by calculating the address point corresponding to 
the displacement which is to be motion compensated for and by 

utilizing the value of the motion vector provided by said 
variable length decoder; 

   a read address generator for generating a data read address 
of a processed block to be compensated for by utilizing a frame 

synchronizing signal of image data from said variable length 
decoder; 

   a write address generator for generating a data write 
address of the processed block to be compensated for by utilizing 

a frame synchronizing signal of the image data from said variable 
length decoder; 

   a first multiplexer for selectively providing the addresses 
provided from said read address generator and said write address 

generator in the unit of a frame; 
   first and second frame memories for alternately 

reading/writing the image data provided from said first 
multiplexer in accordance with the read/write addresses provided 

from said first multiplexer; 
   an auxiliary block memory address generator, which receives 

the value of the motion vector provided from said motion vector 
analyzing means, for generating the read address of an auxiliary 

block memory which is employed to calculate the pixel value 
corresponding to a half pixel motion vector; 

   a second multiplexer for alternately providing the output 
data of said first frame memory to a first auxiliary block memory 

 
means and to a second auxiliary block memory means; 

   a third multiplexer for alternately providing the output 
data of said second frame memory to a first auxiliary block 

memory means and to a second auxiliary block memory means; 
   an auxiliary block memory and interpolation controlling 

means for controlling the read point of first and second 
auxiliary block memory means and an enable timing of an 

interpolation means by combining the address outputted from said 
auxiliary block memory address generating means and the value of 

the motion vector; 
   first and second auxiliary block memory means for providing 

data corresponding to the half pixel motion vector in accordance 
with the control signal provided from said auxiliary block memory 

and interpolation controlling means after storing the data 
provided from said second or third multiplexer therein; 

   a fourth multiplexer for selectively providing the output 
data of said first or second auxiliary block memory means to an 

interpolation means; 
   an interpolation means for generating image data which is 

finally motion-compensated corresponding to the value of the half 
pixel motion vector by calculating the data provided from said 

fourth multiplexer; 
   an adder for adding the motion-compensated image data from 

said interpolation means to the inverse-quantized and IDCT-transformed 
image data from said delay and order adjusting means; 

and 
   a fifth multiplexer for providing the image data provided 

from said adder to said first and second frame memories in the 
 

unit of a frame. 
A motion compensating apparatus in the unit of a half pixel 
as claimed in claim 6, wherein said auxiliary block memory 

address generator comprises: 
   an AND gate for AND-gating the sign bit (the most 

significant bit , MV5) of the motion vector MV and the half pixel 
motion vector bit (the least significant bit, MVO); and 

   a subtractor for subtracting the processed block read 
address of said frame memory in the unit of a pixel from the 

output of said AND gate in order to generate the processed block 
read address in the unit of a half pixel. 
Motion compensating apparatus in the unit of a half pixel as 
claimed in claim 6, wherein said auxiliary block memory and 

interpolation controlling means comprises: 
   first and second adders for adding the read addresses 

R/ADDR(X) and R/ADDR(Y) provided from said auxiliary block memory 
address generating means and providing the memory block addresses 

of said first and second auxiliary block memory means, 
respectively; 

   first through third gates for controlling the memory block 
chip-enable operation of said first and second auxiliary block 

memory means by gating the values of the half pixel motion 
vectors MVXO and MVYO provided from said motion vector analyzing 

means; and 
   an interpolation controlling means for enabling said 

interpolation means in accordance with the outputs of said first 
through third gates in the unit of a macro block. 
A motion compensating apparatus in the unit of a half pixel 
 

as claimed in claim 6, wherein said interpolation means 
comprises: 

   first through third multiplexers for selecting the data 
read out from said first and second auxiliary block memory means 

in accordance with the control signal of said auxiliary block 
memory and interpolation controlling means; 

   first and second adders for adding the data selected by said 
first through third multiplexers; 

   fourth and fifth multiplexers for selecting said added data 
and the data divided into a half in accordance with the control 

signal of said a half in accordance with the control signal of 
said auxiliary block memory and interpolation controlling means; 

   a third adder for adding the data colected by said fourth 
and fifth multiplexers; 

   a sixth multiplexed for selecting the added data and the 
data divided into a half in accordance with the control signal of 

said auxiliary block memory and interpolation controlling means 
and finally providing the half pixel mean value; and 

   first and second AND gates for gating the control signals of 
said auxiliary block memory and interpolation controlling means 

and controlling the data selecting operation of said fifth and 
sixth multiplexers. 
</CLAIMS>
</TEXT>
</DOC>
