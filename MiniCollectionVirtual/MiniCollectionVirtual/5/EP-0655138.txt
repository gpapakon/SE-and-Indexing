<DOC>
<DOCNO>EP-0655138</DOCNO> 
<TEXT>
<INVENTION-TITLE>
POSITION LOCATION SYSTEM
</INVENTION-TITLE>
<CLASSIFICATIONS>G01S314	A61B506	G01S314	A61B506	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>G01S	A61B	G01S	A61B	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>G01S3	A61B5	G01S3	A61B5	</CLASSIFICATIONS-FOURTH>
<ABSTRACT>
Methods and apparatus are provided for locating the position, preferably in three dimensions, of a sensor (7) by generating magnetic fields which are detected at the sensor (7). The magnetic fields are generated from a plurality of locations (1) and, in one embodiment of the invention, enable both the orientation and location of a single coil sensor (7) to be determined. The present invention thus finds application in many areas where the use of prior art sensors comprising two or more mutually perpendicular coils is inappropriate.
</ABSTRACT>
<APPLICANTS>
</APPLICANTS>
<INVENTORS>
</INVENTORS>
<DESCRIPTION>
The present invention relates to methods of and apparatus for, determining
the location of an object and in particular, but not exclusively to methods and
apparatus which employ a magnetic field which is sensed at the object.It has been long appreciated that if the magnetic field around a field
generating element, for example a generating coil, can be accurately mapped then
it might be possible to determine the location of a field sensor, for example a
sensing coil, relative to the generating coil, from the signals sensed by such a
sensing coil. However, a problem associated with doing this is that there are in
general many locations and/or orientations of the sensing coil within the field of
the generating coil that will provide the same characteristic sensing signals in the
sensing coil. In order to use a magnetic field for this purpose, additional
information must therefore be provided.Prior art approaches to providing the additional information required
comprise either moving the generating and sensing coils relative to each other, or
scanning the axis of the generated field past the sensing coil.An example of the first approach is taught in US 3,644,825 wherein a
system is disclosed for locating the position of a field sensor, comprising two
orthogonal sensing coils, relative to a field generating element which relies on
having knowledge of the direction of motion of the sensor relative to the
generator. It should be noted that this system cannot detect the location of an
object unless there is such relative motion, and its direction is known.The second approach of scanning the axis of the generated field is
disclosed, for position location in two dimensions, in US 3,121,228 and for
position location in three dimensions in US 3,868,565.US 3,121,228 describes how the distance and direction of a sensor, again
comprising two orthogonal sensing coils, relative to a field generator, also
comprising two orthogonal 
coils, can be determined. The two orthogonal generating
coils are driven in phase quadrature so that the axis of the
resultant field is caused to rotate within a plane. If the
sensor is located within this plane then the axis of the
field is guaranteed to scan past the sensor, and, because at
any given distance from a field generator the field strength
will be a maximum at the field axis, the sensor will detect
a maximum in field strength at this time. The voltage
induced in any one of the two coils forming the sensor will
be dependent on the orientation of the coil relative to the
field
</DESCRIPTION>
<CLAIMS>
A method of determining the location and/or orientation of a field sensor (7)
relative to a plurality of field generators (1) of known location, each field generator

(1) comprising a plurality of collocated field generating elements (3), each generating
element (3) being energised and a measurement being made at the field sensor (7) of

the respective field generated by the generating element (3), the method being
characterised by the steps of:


1) ) for each field generator (1) calculating, from the measurements of the field
generated by each of its generating elements (3) and an estimate of the

orientation of the sensor (7), an estimate of the distance from that
particular field generator (1) to the sensor (7), and
2) utilising the estimates of distance from step 1), and the known location of
the field generators (1) to calculate an estimate of the location of the

sensor (7);
3) employing the estimated location of the sensor (7) from step 2) and the
measurements of the field at the sensor (7) to calculate a new estimate of

the orientation of the sensor (7);
4) repeating steps 1) to 3) iteratively, with step 1) employing the new
estimate of sensor orientation from the preceding step 3), to improve the

estimates of location and orientation of the sensor (7).
A method as claimed in claim 1, wherein each generating element (3) of
each field generator (1) is energised in sequence so that only one generating element

(3) is energised at any given time.
A method as claimed in claim 1, wherein at least two generating elements
(3) are simultaneously energised, each of these at least two generating elements (3)

being energised at a different frequency from the other simultaneously energised
generating element(s) (3).
A method as claimed in claim 1 wherein at step 3), the estimated location
of the sensor (7) calculated in step 2) and the measurements of the field at the 

sensor (7) are used to calculate, for each field generator (1), the direction of the
respective field at the sensor (7) and from these field directions calculating a new

estimate of the orientation of the sensor (7).
A method as claimed in claim 1 or claim 4 wherein, at step 1), the initial
estimate of the orientation of the sensor (7) is taken to be the orientation as

calculated by the immediately preceding application of the method or, if this is the

first application of the method, the axis of the sensor (7) is initially assumed to be
directed towards the respective field generator (1).
A method of determining the location of a field sensor (7), comprising a
plurality of collocated field sensing elements (A,B,C), relative to a field generator (1)

comprising a plurality of collocated field generating elements (3), each field
generating element (3) being energised in turn and the value of the resultant field

strength being measured at the field sensor (7), the measured field strength being
dependent on the location of the sensor (7) within the respective field, the method

being characterised by the steps of:

1) calculating, by utilising all the values of measured field strength and an
estimate of the direction of the sensor (7) from the field generator (1), a

direction dependent weighting factor for each field generating element (3)
so that the calculated field strength B is equal to the field strength B that

would exist at the sensor (7) if the axis of the field were directed towards
the sensor (7),
2) iteratively altering the direction dependent weighting factors to maximise B
and thus to determine to a desired level of accuracy the direction of the

sensor (7) from the field generator (1), and
3) employing the measured values of the field strength to calculate the
distance of the sensor (7) from the field generator (1) and hence, from the

direction of the sensor (7) in step 2), the location of the sensor (7) relative
to the field generator (1).
A method of determining the location and/or orientation of a field generator
(7) relative to a plurality of field sensors (1) of known location, each field sensor (1) 

comprising a plurality of collocated field sensor elements (3), the generator (7) being
energised and a measurement being made at the field sensor elements (3) of the

respective field generated by the generator (7), the method being characterised by
the steps of:


1) for each field sensor (1) calculating, from the measurements of the field
generated at each of its sensor elements (3) and an estimate of the

orientation of the generator (7), an estimate of the distance from that
particular sensor (1) to the generator (7), and
2) utilising the estimates of distance from step 1), and the known location of
the field sensors (1) to calculate an estimate of the location of the

generator (7);
3) employing the estimated location of the generator (7) from step 2) and the
measurements of the field at the sensors (1) to calculate a new estimate of

the orientation of the generator (7);
4) repeating steps 1) to 3) iteratively, with step 1) employing the new
estimate of generator orientation from the preceding step 3), to improve

the estimates of location and orientation of the generator (7).
Apparatus for determining the location and/or orientation of a field sensor
(7) comprising:


a plurality of field generators (1) each comprising a plurality of collocated
field generating elements (3),
energising means (5) operable for each field generator (1) to energise each
of the plurality of field generating elements (3) to produce a field within which the

location and orientation of the sensor (7) may be determined,
measurement means (8), connected to the field sensor (7), to measure and
output a parameter of the field at the sensor (7), and
control means (6) to control the energising means (5), the control means
(6) comprising storing means to store parameters output by the measurement means

(8), and calculating means to calculate, from the stored measurements of the fields,
the location and orientation of the sensor (7),
the apparatus being characterised in that the calculating means comprises: 

location estimating means being operable to calculate, from the stored
measurements of the fields and an estimate of the orientation of the sensor (7), an

estimate of the distance of the sensor (7) from each of the field generators (1) and,
using the estimates of distance and the known location of the field generators (1), to

calculate an estimate of the location of the sensor (7);
orientation estimating means being operable to calculate, from the estimate
of sensor location by the location estimating means and the stored measurements of

the field, a new estimate of the orientation of the sensor (7);
means to iteratively improve the estimate of the location and orientation of
the sensor (7), which means in use repeatedly employ the location and orientation

estimating means in sequence, wherein the output of the orientation estimating
means is adopted by the location estimating means as the new estimate of sensor

orientation at each iteration.
Apparatus for determining the location of a field sensor (7) as claimed in
claim 8, wherein the field sensor (7) comprises a single field sensing element and the

parameter of the field sensed by said single field sensing element is dependent on
the orientation of the field sensing element within the field.
Apparatus for determining the location of a field sensor (7) as claimed in
claim 8 or claim 9, having three field generators (1), each comprising three mutually

orthogonal collocated field generating elements (3).
Apparatus for determining the location of an object relative to a field
generator (1), the apparatus comprising


a field generator (1) comprising a plurality of field generating elements (3),
energising means (5) to sequentially energise each of the field generating
elements (3) to produce a field within which the object may be located,
a sensor (7), to be attached to the object, comprising a plurality of
collocated field sensing elements (A,B,C), each able to sense a parameter of the

field, 
measurement means (8) to measure and output the parameter of the field
sensed by each field sensing element (A,B,C) when each field generating element (3)

is energised, and
control means (6) to control the energising means (5), store the parameters
output by the measurement means (8) and calculate the location of the sensor (7),

relative to the field generator (1),
the apparatus being characterised in that the control means (6) comprises
weighting means to weight each of the parameters, sensed by the sensor
(7), by a direction dependent weighting factor for each field generating element (3),

so that the calculated field strength B is equal to the field strength B that would exist
at the sensor (7) if the axis of the field were directed towards the sensor (7),
means to iteratively alter the direction dependent weighting factors until a
maximum value of the field strength is found, and to determine the direction of the

sensor (7) from the field generator (1) to a desired level of accuracy, and
calculating means to calculate the distance of the sensor (7) from the
generator (1) and hence the location of the sensor (7) relative to the generator (1).
Apparatus for determining the location of an object as claimed in claim 11,
wherein the field generator (1) comprises three mutually orthogonal field generating

elements (3) and the sensor (7) comprises three mutually orthogonal field sensing
ele
ments (A,B,C).
Apparatus as claimed in any one of claims 8 to 12, arranged for use in
surgery, therapy or diagnosis of a human or animal body.
An endoscopy system for use in the endoscopy of a human or animal body,
the endoscopy system comprising apparatus as claimed in any one of claims 8 to 12.
Apparatus for monitoring the position of an endoscope within a human or
animal body, the apparatus comprising a field sensor (7),


a plurality of field generators (1) each comprising a plurality of field
generating elements (3), 
energising means (5) operable for each field generator (1) to energise each
of the plurality of field generating elements (3) to produce a field within which the

location of the endoscope may be determined,
measurement means (8), connected to the field sensor (7), to measure and
output a parameter of the field at the sensor (7), and
control means (6) to control the energising means (5), store parameters
output by the measurement means (8), and calculate the location of the sensor (7)

relative to the plurality of field generators (1), the apparatus being characterised in
that the control means (6) are arranged to calculate the location of the sensor (7)

relative to the plurality of field generators (1) by the method as claimed in any one of
claims 1 to 7.
Apparatus for determining the location and/or orientation of a sensor (7) as
claimed in any one of claims 8, 9 or 10, wherein one or more of said sensors (7) are

attached to parts of a glove, the output of said apparatus providing data defining the
location and orientation of the respective parts of a glove wearer's hand.
Apparatus as claimed in claim 16, wherein one or more sensors (7) are
attached to fingers of the glove.
</CLAIMS>
</TEXT>
</DOC>
