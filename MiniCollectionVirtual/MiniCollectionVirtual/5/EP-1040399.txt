<DOC>
<DOCNO>EP-1040399</DOCNO> 
<TEXT>
<INVENTION-TITLE>
MICROPROCESSOR CONTROLLED ELECTRONIC BALLAST
</INVENTION-TITLE>
<CLASSIFICATIONS>H05B4128	H05B41285	H05B4136	H05B4136	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>H05B	H05B	H05B	H05B	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>H05B41	H05B41	H05B41	H05B41	</CLASSIFICATIONS-FOURTH>
<ABSTRACT>
An electronic ballast includes an AC to DC converter (51, 52) for power factor correction, a bulk capacitor (53, 120) for storing energy from the converter, and a microprocessor controlled, half-bridge inverter (54) including a series resonant, direct coupled output (35, 36). Input ports of the microprocessor (65) are coupled to several locations within the ballast to monitor the operation of the ballast or the operation of a gas discharge lamp coupled to the ballast. An analog voltage limiter (Q5) overrides the microprocessor to limit output voltage under fault conditions. A storage capacitor (121), connected in series with the bulk capacitor (120), stores energy at low voltage for powering the microprocessor. The microprocessor is programmed to provide lamp protection features, lumen maintenance, and a warm-up period for a lamp. The microprocessor is also programmed to meet the operating requirements of world markets and of different lamp types.
</ABSTRACT>
<APPLICANTS>
<APPLICANT-NAME>
UNIVERSAL LIGHTING TECHNOLOGIE
</APPLICANT-NAME>
<APPLICANT-NAME>
UNIVERSAL LIGHTING TECHNOLOGIES, INC.
</APPLICANT-NAME>
</APPLICANTS>
<INVENTORS>
<INVENTOR-NAME>
BANDEL MICHAEL W
</INVENTOR-NAME>
<INVENTOR-NAME>
BEZDON RONALD J
</INVENTOR-NAME>
<INVENTOR-NAME>
BOYKOV BOYKO
</INVENTOR-NAME>
<INVENTOR-NAME>
CROUSE KENT E
</INVENTOR-NAME>
<INVENTOR-NAME>
KEEGAN PATRICK J
</INVENTOR-NAME>
<INVENTOR-NAME>
KEITH WILLIAM L
</INVENTOR-NAME>
<INVENTOR-NAME>
SHACKLE PETER W
</INVENTOR-NAME>
<INVENTOR-NAME>
BANDEL, MICHAEL, W.
</INVENTOR-NAME>
<INVENTOR-NAME>
BEZDON, RONALD, J.
</INVENTOR-NAME>
<INVENTOR-NAME>
BOYKOV, BOYKO
</INVENTOR-NAME>
<INVENTOR-NAME>
CROUSE, KENT, E.
</INVENTOR-NAME>
<INVENTOR-NAME>
KEEGAN, PATRICK, J.
</INVENTOR-NAME>
<INVENTOR-NAME>
KEITH, WILLIAM, L.
</INVENTOR-NAME>
<INVENTOR-NAME>
SHACKLE, PETER, W.
</INVENTOR-NAME>
</INVENTORS>
<DESCRIPTION>
 MICROPROCESSOR CONTROLLED ELECTRONIC BALLASTBACKGROUND OF THE INVENTIONThis invention relates to electronic ballasts for gas discharge lamps and, in particular, to an electronic ballast that is controlled by a microprocessor.A gas discharge lamp, such as a fluorescent lamp, is a non-linear load to a power line, i.e. the current through the lamp is not directly proportional to the voltage across the lamp. Current through the lamp is zero until a minimum voltage is reached, then the lamp begins to conduct. Once the lamp conducts, the current will increase rapidly unless there is a ballast in series with the lamp to limit current .A resistor can be used as a ballast but a resistor consumes power, thereby decreasing efficiency, measured in lumens per watt. A "magnetic" ballast is an inductor in series with the lamp and is more efficient than a resistor but is physically large and heavy. A large inductor is required because impedance is a function of frequency and power lines operate at low frequency (50-60 hz . )An electronic ballast typically includes a rectifier for changing the alternating current (AC) from a power line to direct current (DC) and an inverter for changing the direct current to alternating current at high frequency, typically 25-60 khz. Because the frequency of the inverter is much higher than 50-60 hz . , the inductors for an electronic ballast are much smaller than the inductor in a magnetic ballast.Some ballasts include a boost circuit between the rectifier and the inverter. As used herein, a "boost" circuit is a circuit that increases the DC voltage, e.g. from approximately 180 volts (assuming a 120 volt input) to 300 volts or more, for operating a lamp and for providing 

power factor correction. "Power factor" is a figure of merit indicating whether or not a load in an AC circuit is equivalent to a pure resistance, i.e. indicating whether or not the voltage and current are in phase. It is preferred that the load be the equivalent of a pure resistance (a power factor equal to one) . The boost circuit, the inverter, or both, can be self-oscillating, triggered, or driven .There are many additional circuits described in the prior art for automatically shutting off a ballast in the event of a fault. A fault may be a problem with the ballast itself, e.g. high temperature, or with the lamp, e.g. a broken filament. These faults are addressed in a number of ways, all of which increase the complexity and cost of an electronic ballast. One cannot add circuits ad infini tum to accommodate every
</DESCRIPTION>
<CLAIMS>
What is claimed is :
1. In an electronic ballast for a gas discharge lamp having filaments at each end of the lamp, said ballast including an AC to DC converter for changing alternating current at low voltage to direct current at high voltage, an inverter coupled to said converter, and a microprocessor in said inverter for controlling said inverter, said inverter including a resonant output and a half bridge capacitor coupled to said output, said microprocessor including a first input port coupled to said half bridge capacitor for measuring the DC voltage on said half bridge capacitor, the improvement comprising: said microprocessor contains a stored program for sensing rectification by said lamp and for reducing the output voltage of said inverter in the event of lamp rectification.
2. The ballast as set forth in claim 1 wherein said microprocessor is programmed to flash said lamp periodically if the lamp is not conducting.
3. The ballast as set forth in claim 1 wherein said microprocessor includes a second input port coupled to said lamp for detecting the AC voltage across said lamp and wherein said microprocessor includes a stored program for measuring the AC voltage across said lamp and for shutting off said lamp if said AC voltage is slightly above normal for a long time or if said AC voltage is greatly above normal for a short time.
4. The ballast as set forth in claim 3 wherein said microprocessor is programmed to flash said lamp periodically if the lamp is not conducting. 

5. The ballast as set forth in claim 3 wherein said microprocessor is programmed to use the measured AC voltage to recognize a lamp from a plurality of lamp types and to select the appropriate current and lamp control parameters for the recognized lamp from a set of parameters stored in said microprocessor.
6. In an electronic ballast for a gas discharge lamp, said ballast including an AC to DC converter for producing direct current at high voltage, a half-bridge output circuit coupled to said converter and including series connected alternately conducting transistors, a drive circuit for controlling said transistors, a microprocessor coupled to at least said drive circuit and providing high frequency pulses to said drive circuit; the improvement comprising: an analog fault detector coupled to said microprocessor for overriding said microprocessor in the event of a fault.
7. The electronic ballast as set forth in claim 6 wherein said detector senses overvoltage and interrupts said high frequency pulses .
8. The electronic ballast as set forth in claim 7 wherein said detector interrupts individual high frequency pulses to reduce the duty cycles of the high frequency pulses .
9. In an electronic ballast for a gas discharge lamp, said ballast including an AC to DC converter for producing direct current at high voltage, a bulk capacitor for storing energy from said converter, an inverter powered from said bulk capacitor, and a microprocessor in said inverter for controlling said inverter, the improvement comprising: 


 a storage capacitor for storing energy at low voltage for powering said microprocessor, wherein said storage capacitor and said bulk capacitor are connected in series, thereby enabling said ballast to turn on rapidly.
10. The ballast as set forth in claim 9 wherein said converter includes a first integrated circuit for boosting said high voltage and said inverter includes a half-bridge output and a second integrated circuit for driving said half-bridge output and wherein said first integrated circuit and said second integrated circuit are powered from said storage capacitor.
11. In an electronic ballast for a gas discharge lamp, said ballast including an AC to DC converter for changing alternating current at power line voltage to direct current, an inverter coupled to said converter and adapted to be coupled to said lamp for producing a first voltage for said lamp, a microprocessor in said inverter for controlling said inverter, said microprocessor including an input port, and a detector coupled to said input port for sensing a second voltage, the improvement comprising: said microprocessor contains a stored program for reducing said first voltage when said second voltage indicates a fault condition.
12. The electronic ballast as set forth in claim 11 wherein said microprocessor is programmed to reduce said first voltage until said microprocessor is reset or said lamp is replaced.
13. The electronic ballast as set forth in claim 11 wherein said microprocessor is programmed to enter an endless loop of non-functional instructions in the event of 


a fault, thereby shutting off said inverter and reducing said first voltage of said ballast.
14. In an electronic ballast for a gas discharge lamp, said ballast including an AC to DC converter for changing alternating current at power line voltage to direct current, an inverter coupled to said converter and adapted to be coupled to said lamp, a microprocessor in said inverter for controlling said inverter, said microprocessor including an input port, and a detector coupled to converter for sensing said power line voltage, the improvement comprising: said microprocessor is programmed to respond to commands given by interrupting said power line voltage.
15. In an electronic ballast for a gas discharge lamp, said ballast including an AC to DC converter for changing alternating current to direct current, an inverter coupled to said converter, a microprocessor in said inverter for controlling said inverter, said microprocessor including an output port, the improvement comprising: opto-isolators coupled to said output port and to the filaments of said gas discharge lamp, wherein said microprocessor controls current through said filaments by means of said opto-isolators .
16. In an electronic ballast for a gas discharge lamp, said ballast including an AC to DC converter for producing direct current at high voltage from a source of input power, a bulk capacitor for storing energy from said converter, an inverter powered from said bulk capacitor, and a microprocessor in said inverter for controlling said inverter, the improvement comprising: said microprocessor contains a stored program for interpreting one or more brief dips in said input power as a command. 

17. The ballast as set forth in claim 16, wherein said command adjusts the output power to said lamp.
18. The ballast as set forth in claim 16, wherein said command causes said ballast to produce an indication of a condition of said lamp.
19. The ballast as set forth in claim 18 wherein said indication is brief variations in brightness of said lamp.
20. The ballast as set forth in claim 16 wherein said microprocessor contains a stored program for increasing the current through said lamp as said lamp ages.
21. In an electronic ballast for a gas discharge lamp, said ballast including an AC to DC converter for changing alternating current to direct current, an inverter coupled to said converter and adapted to be coupled to said lamp for producing a first voltage for said lamp, a microprocessor in said inverter for controlling said inverter, said microprocessor including an input port, and a detector coupled to said input port for sensing said first voltage, the improvement comprising: said microprocessor contains a stored program for measuring time elapsed from an overload in said first voltage and for increasing lamp current as a function of the time elapsed, thereby providing automatic lumen depreciation compensation.
22. In an electronic ballast for a gas discharge lamp, said ballast including an AC to DC converter for producing direct current at high voltage, a bulk capacitor for storing energy from said converter, an inverter powered from said bulk capacitor, and a microprocessor in said 


inverter for controlling said inverter, the improvement comprising: said microprocessor contains a stored program for increasing the current through said lamp as said lamp ages .
23. In an electronic ballast for a gas discharge lamp, said ballast including an AC to DC converter for producing direct current at high voltage from a source of input power, a bulk capacitor for storing energy from said converter, an inverter powered from said bulk capacitor, and a microprocessor in said inverter for controlling said inverter, the improvement comprising: said microprocessor contains a stored program for starting said lamp at reduced power and increasing the power to said lamp in steps until either full power is reached or there is a momentary dip in the input power to said ballast.
24. The ballast as set forth in claim 23 wherein said microprocessor contains a stored program for increasing the current through said lamp as said lamp ages.
25. In an electronic ballast for a gas discharge lamp, said ballast including an AC to DC converter for producing direct current at high voltage from a source of input power, a bulk capacitor for storing energy from said converter, an inverter powered from said bulk capacitor, and a microprocessor in said inverter for controlling said inverter, the improvement comprising: said microprocessor contains a stored program for starting said lamp at a predetermined current, monitoring the voltage across said lamp, and then selecting operating parameters for the lamp from data stored in said microprocessor . 

26. The ballast as set forth in claim 25 wherein said microprocessor contains a stored program for increasing the current through said lamp as said lamp ages.
27. In an electronic ballast for a gas discharge lamp, said ballast including an AC to DC converter for producing direct current at high voltage from a source of input power, a bulk capacitor for storing energy from said converter, an inverter powered from said bulk capacitor, and a microprocessor in said inverter for controlling said inverter, said microprocessor including an input port and detectors coupled to a node within said ballast, the improvement comprising : said microprocessor contains a stored program for detecting a first voltage on said node as indicative of filament continuity and commencing a starting sequence if said first voltage is detected.
28. The electronic ballast as set forth in claim 27, wherein said ballast includes a half bridge inverter and a half bridge capacitor in series with said lamp, and wherein said node is one side of said half bridge capacitor.
29. In an electronic ballast for a gas discharge lamp, said ballast including an half-bridge inverter for producing an output voltage at a series resonant, direct coupled output, a half-bridge capacitor coupled to said output, and a microprocessor in said inverter for controlling said inverter, said microprocessor including an input port coupled to said half-bridge capacitor for monitoring the voltage on said half-bridge capacitor, the improvement comprising: said microprocessor containing a stored program for reducing said output voltage when said output voltage indicates a fault and for maintaining said output voltage at a reduced level until either a predetermined time has 


elapsed or the ballast is made to restart by the lamp being replaced.
30. In an electronic ballast for a gas discharge lamp, said ballast including an AC to DC converter for producing direct current at high voltage from a source of input power, a bulk capacitor for storing energy from said converter, an inverter powered from said bulk capacitor, and a microprocessor in said inverter for controlling said inverter, said inverter including a series resonant, direct coupled output, the improvement comprising: said microprocessor contains a stored program for starting said lamp at a first frequency and then changes to a second frequency without sweeping through intermediate frequencies, wherein said first frequency is above the resonant frequency of said output and said second frequency is below the resonant frequency of said output.
31. The ballast as set forth in claim 30 wherein said microprocessor contains a stored program for increasing the current through said lamp as said lamp ages.
32. The ballast as set forth in claim 1 wherein said microprocessor contains a stored program for sensing filament continuity and for not starting said lamp in the event of filament discontinuity. 

</CLAIMS>
</TEXT>
</DOC>
