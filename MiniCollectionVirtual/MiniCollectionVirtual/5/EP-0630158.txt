<DOC>
<DOCNO>EP-0630158</DOCNO> 
<TEXT>
<INVENTION-TITLE>
Coding of analog image signals
</INVENTION-TITLE>
<CLASSIFICATIONS>H04N726	H03M730	H04N140	G06T900	H04N726	G06T900	H04N140	H03M730	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>H04N	H03M	H04N	G06T	H04N	G06T	H04N	H03M	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>H04N7	H03M7	H04N1	G06T9	H04N7	G06T9	H04N1	H03M7	</CLASSIFICATIONS-FOURTH>
<ABSTRACT>
An apparatus for coding an input analog video signal into a 
digital code comprises an A/D converter (2) for converting the input 

analog video signal (Sv) to a first quantization code having a first 
number of bits, a class sorting circuit (5), supplied with the first 

quantization code from the A/D converter (2), for effecting a class 
sorting process on a plurality of pixels including a pixel to be 

marked, based on the first quantization code corresponding to the pixel 
and the first quantization code corresponding to each of the pixels 

provided near the periphery of the pixel, and a quantizing circuit (4), 
supplied with the first quantization code produced from the A/D 

converter (2) and the result of class sorting by the class sorting 
means (5), for adaptively converting the first quantization code into 

a second quantization code having a second number of bits smaller than 
the first number of bits, based on the result of class sorting by the 

class sorting circuit (5). 

</ABSTRACT>
<APPLICANTS>
<APPLICANT-NAME>
SONY CORP
</APPLICANT-NAME>
<APPLICANT-NAME>
SONY CORPORATION
</APPLICANT-NAME>
</APPLICANTS>
<INVENTORS>
<INVENTOR-NAME>
KONDO TETSUJIRO
</INVENTOR-NAME>
<INVENTOR-NAME>
KONDO, TETSUJIRO
</INVENTOR-NAME>
</INVENTORS>
<DESCRIPTION>
This invention relates to coding of analog image signals. More
particularly, but not exclusively, the invention relates to a circuit
for quantizing image data used for representing analog image data in
the form of a digital quantization code having a predetermined number
of bits.In general, a previously proposed method for effecting analog-to-digital
(A/D) conversion of analog image data has heretofore been
carried out in the following manner. That is, a range of values
corresponding to the differences between the maximum values and the
minimum values both selectable by respective pixels of an original
image is divided according to the number of bits capable of being taken
out as an output. Each of divided level ranges corresponding to the
taken-out number of bits is represented in the form of a code using the
corresponding number of bits. It is next decided to which level range
the level of each pixel belongs. Further, a code indicative of the
divided level range to which the level of each pixel belongs is taken
out as a digital output signal. In this case, as a decode level
(decode representative level) of the code which represents each divided
level range at the time that a digital-to-analog (D/A) converting
process is effected, a central value of each level range is used.This method is equivalent to a method of minimizing quantization
distortion developed in each pixel unit. When the level division is
uniformly carried out, it is subjected to linear quantization. On the
other hand, when the level division is non-uniformly made depending on
the probability of development of a pixel level, it is subjected to
nonlinear quantization. However, the norm of minimizing the
quantization distortion developed in each pixel unit is applied even to
either case as it is.Since the above-described A/D converting method can minimize a
quantization error developed for each pixel and provide a satisfactory
signal-to-noise (S/N) ratio, the analog level of the original pixel can
be replaced with a decode representative level nearest to its analog
level.However, the A/D converting method has a problem in that,
although it is quantitatively satisfactory, visually remarkable
deterioration is often developed in the restored or reproduced image. 
This occurs because a human being sees or takes an image
as a time variation (motion) in image or a spatial
variation (details such as resolution, an outline or
contour of an image, etc.) in image without taking the
image as one pixel unit.When such a variation that the level of an
i
</DESCRIPTION>
<CLAIMS>
An apparatus for converting an input analog video signal to a
digital code, comprising:


an A/D converter (2) for converting the input analog video signal
into a first quantization code having a first number of bits;
class sorting means (5) for receiving said first quantization
code from said A/D converter and for detecting a characteristic of a

plurality of pixels including a pixel to be marked and for determining
a class corresponding to said pixel to be marked from a plurality of

predetermined classes based upon said characteristic; and
quantizing means (4) for receiving said first quantization code
produced from said A/D converter and the class determined by said class

sorting means and for adaptively converting said first quantization
code of said pixel to be marked into a second quantization code

corresponding to said class determined by said class sorting means
and having a second number of bits smaller than or equal

to the first number of bits;

characterised in that

   said characteristic detected by said class sorting means
corresponds to a pattern of values based on said first quantization

code corresponding to said pixel to be marked and said first
quantization code corresponding to each of said plurality of pixels

provided near the periphery of said pixel.
The apparatus according to claim 1, wherein said quantizing means
receives an image-quality switching signal which designate
s an image
quality characteristic of an image and adaptively converts said first

quantization code of said pixel to be marked into the second
quantization code based on said class determined by said class sorting

means and said image-quality switching signal.
The apparatus according to claim 1, wherein said plurality of
predetermined classes includes at least one of a class corresponding to

a flat portion in which luminance variation is relatively low, a class
corresponding to an edge portion, and a class corresponding to an

extreme-value portion.
The apparatus according to claim 1, wherein said quantizing means
receives a bit switching signal which designates a number of bits and 

wherein said quantizing means adaptively converts said first
quantization code into said second quantization code having a second

number bits smaller than the first number of bits based on said bit
switching signal.
The apparatus according to claim 2, wherein said quantizing means
receives a bit switching signal which designates a number of bits and

wherein said quantizing means adaptively converts said first
quantization code into said second quantization code having a second

number of bits smaller than the first number of bits based on said bit
switching signal.
Apparatus according to claim 1, wherein said quantizing means
comprises:


first difference generating means for making a difference between
said pixel to be marked and a pixel prior to said pixel to be marked so

as to generate a first differential value;
representative code generating means for generating a plurality
of kinds of codes each represented in the form of the second number of

bits;
code outputting means supplied with said first quantization code,
for converting said first quantization code into said second

quantization code having the second number of bits and outputting the
converted second quantization code therefrom;
a local decoder for decoding said second quantization code output
from said code outputting means to the code having the first number of

bits;
second difference generating means supplied with the output of
said local decoder and the plurality of kinds of codes output from said

representative code generating means and for making differences between
said output and said plurality of kinds of codes so as to generate a

plurality of second differential values;
third difference generating means for making differences between
said first differential value and said plurality of second differential

values so as to generate a plurality of third differential values; and
detecting means for detecting the minimum one of said plurality
of third differential values, 
whereby said code outputting means is controlled based on the
result of detection by said detecting means when the plurality of

pixels including said pixel to be marked are divided into a class
corresponding to a flat portion having a reduced variation in luminance

by said class sorting means.
A method for converting an input analog video signal to a digital
code, comprising the steps of:


converting the input analog video signal into a first
quantization code having a first number of bits;
receiving said first quantization code and detecting a
characteristic of a plurality of pixels including a pixel to be marked;
determining a class corresponding to said pixel to be marked from
a plurality of predetermined classes, based on said characteristic;
receiving said first quantization code and the determined class;
and
adaptively converting said first quantization code of said pixel
to be marked into a second quantization code corresponding to said

determined class and having a second number of bits smaller
than or equal to the first number of bits; characterised in that
said characteristic detected corresponds to a pattern of values
based on said first quantization code corresponding to said pixel to be

marked and said first quantization code corresponding to each of said
plurality of pixels provided near the periphery of said pixel to be

marked.
A method according to claim 7, further comprising the step of
receiving an image-quality switching signal which designates an image

quality characteristic of an image and wherein the converting step
adaptively converts said first quantization code of said pixel to be

marked into the second quantization code based on said determined class
and said image-quality switching signal.
A method according to claim 7, wherein said plurality of
predetermined classes includes at least one of a class corresponding to

a flat portion in which luminance variation is relatively low, a class
corresponding to an edge portion, and a class corresponding to an

extreme-value portion. 
A method according to claim 7, further comprising the step of
receiving a bit switching signal which designates a number of bits and

wherein the converting step adaptively converts said first quantization
code into said second quantization code having a second number of bits

smaller than the first number of bits based on said bit switching
signal.
A method according to claim 8, further comprising the step of
receiving a bit switching signal which designates a number of bits and

wherein the converting step adaptively converts said first quantization
code into said second quantization code having a second number of bits

smaller than the first number of bits based on said bit switching
signal.
A method according to claim 7, further comprising the steps of:

receiving a bit switching signal to thereby select a second
number of bits of said second quantization code based on said bit

switching signal, and wherein
said step of adaptively converting comprises the steps of:
making a difference between said pixel to be marked and a pixel
prior to said pixel to be marked so as to generate a first differential

value;
generating a plurality of kinds of codes each represented in the
form of the second number of bits;
receiving said first quantization code, converting said first
quantization code into said second quantization code having the second

number of bits and outputting the converted second quantization code
therefrom;
decoding said second quantization code output from said code
outputting means to the code having the first number of bits;
receiving an output produced from said local decoder and the
plurality of kinds of codes output from said representative code

generating means and making differences between said output and said
plurality of kinds of codes so as to generate a plurality of second

differential values;
making differences between said first differential value and said
plurality of second differential values so as to generate a plurality 

of third differential values; and
detecting the minimum one of said plurality of third differential
values,
whereby said code outputting means is controlled based on the
result of detection by said detecting means when the plurality of

pixels including said pixel to be marked are divided into a class
corresponding to a flat portion having a reduced variation in luminance

by said class sorting means.
</CLAIMS>
</TEXT>
</DOC>
