<DOC>
<DOCNO>EP-0632588</DOCNO> 
<TEXT>
<INVENTION-TITLE>
Dynamic filter
</INVENTION-TITLE>
<CLASSIFICATIONS>H03H1702	H03H1702	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>H03H	H03H	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>H03H17	H03H17	</CLASSIFICATIONS-FOURTH>
<ABSTRACT>
Difficulty is experienced where filters are required to provide a high level of noise 
reduction and a fast step response in systems where a large input step in comparison to 

the final resolution may occur. 
A suitable filter comprises a variable length averaging filter, an averaging sample 
counter, the count of which is reduced by a predetermined factor when the count reaches 

a maximum value, and a spike counter, the count of which is incremented when the 
difference between an input sample and the current filter output exceeds a predetermined 

value, the sample count being reset to 1 when the spike count reaches a predetermined 
value, the filter output being otherwise maintained at the previous output. 


</ABSTRACT>
<APPLICANTS>
<APPLICANT-NAME>
GEC AVERY LTD
</APPLICANT-NAME>
<APPLICANT-NAME>
GEC AVERY LIMITED
</APPLICANT-NAME>
</APPLICANTS>
<INVENTORS>
<INVENTOR-NAME>
EVANS JONATHAN PAUL
</INVENTOR-NAME>
<INVENTOR-NAME>
EVANS, JONATHAN PAUL
</INVENTOR-NAME>
</INVENTORS>
<DESCRIPTION>
The present invention relates to a filter for electrical signals which is intended to 
provide a high level of noise reduction in the signal whilst still maintaining a fast step 
response. The filter has its primary application in systems which tend to experience relatively 
large step changes in the input signal in comparison to the final resolution of the signal 
required. Large in this context may be as little as I in 5000. According to the present invention there is provided a filter comprising a variable 
length quasi-average filter and a spike counter, the count of the spike counter being 
incremented when the difference between an input sample and the current filter output 
exceeds a predetermined value, the input sample being added to the filter and the averaging 
length of the variable length quasi-average filter being incremented at each input sample 
when the spike count is not incremented and being decreased by a predetermined factor 
when the averaging length reaches a maximum value, the averaging length being reset to 
1 and the filter output set to the input sample when the spike count reaches a predetermined 
value, the filter output being otherwise maintained at the previous output. The present invention will now be described, by way of example, with reference to 
the accompanying drawings, in which:- 
Figure 1 shows a typical input signal divided into discrete samples; Figures 2A and 2B show the samples actually presented to the filters; Figures 3A and 3B show the filter outputs; Figures 2A, 3A and 2B, 3B relate to different filter constructions; Figure 4 represents an algorithm for carrying out the filter function. A filter according to the present invention may comprise three functional 
elements:- 
(1) A Variable Coefficient Digital Filter (VCDF); (2) Means to detect step changes and reject spikes; (3) Means to reduce the effects of ringing. Considering the input signal as shown in Figure 1, the signal is sampled as 
indicated by the vertical lines and is then input into the VCDF. The VCDF behaves 
initially as a variable length averaging filter. Each time a sample is input to the filter the 
length of the averaging stage is incremented. When the length of the averaging stage 
reaches a maximum value MAX_LENGTH then the averaging length is reduced by a 
factor REDUCTION. Before an input sample is presented to the input of the VCDF it is compared with 
the current output of the VCDF. If the difference between the input and the output 
exceeds a limit WINDOW_SIZE then it is assumed
</DESCRIPTION>
<CLAIMS>
A filter comprising a variable length quasi-average filter and a spike counter, the 
count of the spike counter being incremented when the difference between an input sample 

and the current filter output exceeds a predetermined value, the input sample being added 
to the filter and the averaging length of the variable length quasi-average filter being 

incremented at each input sample when the spike count is not incremented and being 
decreased by a predetermined factor when the averaging length reaches a maximum value, 

the averaging length being reset to 1 and the filter output set to the input sample when the 
spike count reaches a predetermined value, the filter output being otherwise maintained at 

the previous output. 
A filter as claimed in Claim 1, wherein the predetermined value is reduced as the 
averaging length increases. 
</CLAIMS>
</TEXT>
</DOC>
