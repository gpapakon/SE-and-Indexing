<DOC>
<DOCNO>EP-0650288</DOCNO> 
<TEXT>
<INVENTION-TITLE>
Precise discrimination of image type
</INVENTION-TITLE>
<CLASSIFICATIONS>H04N140	H04N140	H04N1405	H04N1405	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>H04N	H04N	H04N	H04N	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>H04N1	H04N1	H04N1	H04N1	</CLASSIFICATIONS-FOURTH>
<ABSTRACT>
An image processing apparatus having: an input unit 
for inputting image data; a unit for producing a 

plurality of parameters from a region consisting of 
the object pixel and peripheral pixels; and a 

discriminating unit for discriminating to what extent the 
region, preferably just the object pixel, is to be 

regarded as character image or halftone image, in 
accordance with correlation of the plurality of 

parameters. 
In one embodiment the parameters are the difference between the 
maximum value and the minimum value in the region and the difference 

between one of these values and a predetermined threshold. In another 
embodiment the discrimination result changes the weighting coefficients 

of an error diffusion circuit. 

</ABSTRACT>
<APPLICANTS>
<APPLICANT-NAME>
CANON KK
</APPLICANT-NAME>
<APPLICANT-NAME>
CANON KABUSHIKI KAISHA
</APPLICANT-NAME>
</APPLICANTS>
<INVENTORS>
<INVENTOR-NAME>
SAKAMOTO MASAHIRO
</INVENTOR-NAME>
<INVENTOR-NAME>
TSUJIMOTO TAKUYA
</INVENTOR-NAME>
<INVENTOR-NAME>
SAKAMOTO, MASAHIRO
</INVENTOR-NAME>
<INVENTOR-NAME>
TSUJIMOTO, TAKUYA
</INVENTOR-NAME>
</INVENTORS>
<DESCRIPTION>
The present invention relates to an image processing
apparatus and a method therefor that quantize image data,
and more particularly to an image processing apparatus
and a method therefor that discriminate an image type
attribute for each pixel from an image having characters
and halftone images mixed together.At present, an original document can satisfactorily
be reproduced in a digital copying machine, a digital
facsimile machine or the like by employing a fixed
threshold method for a character document and an error
diffusion method for a halftone image, such as a
photograph, selection between which can be made using
external keys. In the foregoing case, there arises a
problem in that the selection operation is too
complicated. What is worse, an excellent image cannot be
obtained from an original document including both 
characters and photographs, mixed together, by either of
the foregoing methods.Accordingly, a method has sometimes been employed
which uses an image region separation means that
automatically discriminates character regions and
photograph regions in the original document to select a
processing method. The image has been identified in such
a manner that the difference in brightness (the
difference between the maximum value and the minimum
value in a reference area including a pixel of interest)
is used as a parameter to be subjected to a comparison
with a certain fixed threshold, character regions and
photograph regions being discriminated on the basis of
this comparison.However, the method using the difference in the
brightness as the parameter and performing the
discrimination in such a manner that regions of a type
having a small difference in the brightness are
discriminated to be photograph regions and regions of a
type having a large difference are discriminated to be
character regions, can sometimes lead to the
unsatisfactory result that background portions and full-black
portions are discriminated to be photograph
regions. As a result, dot-like noise will be generated
in those regions. In order to prevent the generation of 
noise in background portions and full-black portions, it
might be feasible to employ a method in which background
portions (white portions) and black portions are
identified and are subjected to a threshold process which
prevents the dot-like noise. However, in the case where
only the difference in the brightness is used as
parameter to discriminate the regions by type gray
regions having substantially no change in the brightness
between the background
</DESCRIPTION>
<CLAIMS>
An image processing apparatus comprising:

input means (101) operable to input image data;
producing means (105) operable to produce a
plurality of parameters from a region consisting of an

object pixel of the input image data and pixels
peripheral the object pixel;
discriminating means (108) operable to discriminate
whether the object pixel is from a line drawing or

halftone image in accordance with the plurality of
parameters and to output a discrimination value

representative of a result of said discrimination; and
processing means (107,109;110) operable to process
the image data for the object pixel in accordance with

the discrimination value;

   characterised in that the discriminating means is
further operable to discriminate a degree to which the

image is a line drawing and a halftone image, whereby the
processing means is selectively operable to process the

image for the object pixel in accordance with the
discrimination value representing any one of


(a) a character or line drawing;
(b) a halftone image; and
(c) a degree of character or line drawing and
halftone image.
Apparatus as claimed in claim 1, wherein said 
processing means comprises conversion means (107,109) for

converting a tone of the input image data in accordance
with the discrimination value.
Apparatus as claimed in any preceding claim, wherein
said processing means comprises quantizing means (110)

operable to quantize the object pixel in accordance with
the discrimination value.
Apparatus as claimed in claim 3, wherein said
quantizing means is operable to specify a quantizing

parameter for use in quantization of the object pixel in
accordance with the discrimination value.
Apparatus as claimed in any of claims 3 and 4,
wherein said quantizing means (110) is operable to

quantize the object pixel using an error diffusion
method.
Apparatus as claimed in claim 2, wherein said

conversion means is operable to convert the tone by using
one of a plurality of tone correction tables (Fig 11(1) -

11(6)) stored in a storage medium and selected according
to the discrimination value.
Apparatus as claimed in any preceding claim, wherein
said producing means is operable to produce a first 

parameter and a second parameter, wherein the first
parameter represents a variation amount of a level of the

input image data in the region, and the second parameter
represents whether the level of the image data in the

region is closer to a predetermined first level or to a
predetermined second level which is lower than the first

level.
An image processing method comprising the steps of:

inputting (S301) image data;
producing (S304) a plurality of parameters from a
region consisting of an object pixel of the input image

data and pixels peripheral the object pixel;
discriminating (S306) whether the object pixel is
from a line drawing or halftone image in accordance with

the plurality of parameters and outputting a
discrimination value representative of a result of said

discrimination; and
processing (S305,S308) the image data for the object
pixel in accordance with the discrimination value;

   characterised in that the discriminating step
discriminates a degree to which the image is a line

drawing and a halftone image, whereby the processing
means is selectively operable to process the image for

the object pixel in accordance with the discrimination
value representing any one of


(a) a character or line drawing; 
(b) a halftone image; and
(c) a degree of character or line drawing and
halftone image.
A method as claimed in claim 8, wherein said
processing step comprises converting (S305) a tone of the

input image data in accordance with the discrimination
value.
A method as claimed in any of claims 8 and 9,
wherein said processing step comprises quantizing the

object pixel in accordance with the discrimination value.
A method as claimed in claim 10, wherein said
quantizing step specifies a quantizing parameter for use

in quantization of the object pixel in accordance with
the discrimination value.
A method as claimed in any of claims 10 and 11,
wherein said quantizing step quantizes the object pixel

using an error diffusion method.
A method as claimed in claim 9, wherein said
conversion step converts the tone by using one of a

plurality of tone correction tables (Fig 11(1) -11(6))
stored in a storage medium and selected according to the

discrimination value. 
A method as claimed in any of claims 8 to 13,
wherein said producing step produces a first parameter

and a second parameter, wherein the first parameter
represents a variation amount of a level of the input

image data in the region, and the second parameter
represents whether the level of the image data in the

region is closer to a predetermined first level or to a
predetermined second level which is lower than the first

level.
A computer program adapted for controlling an image
processing apparatus to implement all the steps of an

image processing method as claimed in any one of claims
8 to 14.
</CLAIMS>
</TEXT>
</DOC>
