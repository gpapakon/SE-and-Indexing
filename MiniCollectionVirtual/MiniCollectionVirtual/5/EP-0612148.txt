<DOC>
<DOCNO>EP-0612148</DOCNO> 
<TEXT>
<INVENTION-TITLE>
Digital filtering circuit operable as a three-stage moving average filter
</INVENTION-TITLE>
<CLASSIFICATIONS>H03H2100	H03H1706	H03H1702	H03H1702	H03H1700	H03H1700	H03H1706	H03H2100	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>H03H	H03H	H03H	H03H	H03H	H03H	H03H	H03H	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>H03H21	H03H17	H03H17	H03H17	H03H17	H03H17	H03H17	H03H21	</CLASSIFICATIONS-FOURTH>
<ABSTRACT>
In a digital filtering circuit for converting an 
input data signal (a) of a sampling frequency f
s
 into an 
output data signal (OUT) of an oversampling frequency Nf
s
 
which is N times the sampling frequency f
s
. The digital 
filtering circuit comprises a combination of a 

calculating circuit (30), and first and second 
integrating circuits (40, 50). The first integrating 

circuit (40) integrates a calculated signal (d) in 
synchronism with the oversampling frequency Nf
s
 to 
produce a first integration result signal (b) and a first 

delayed signal (e). The second integrating circuit (50) 
integrates the first delayed signal (e) in synchronism 

with the oversampling frequency Nf
s
 to produce a second 
integration result signal (c) and a second delayed signal 

(f) as the output data signal (OUT). The calculating 
circuit (30) carries out a predetermined calculation on 

the input data signal (a), the first integration result 
signal (b), and the second integration result signal (c) 

in synchronism with the sampling frequency f
s
 to produce 
the calculated signal (d). The predetermined calculation 

is represented by an equation as follows:


d = {a - c - (1 + 3N)b/2}/NÂ². 
</ABSTRACT>
<APPLICANTS>
<APPLICANT-NAME>
NIPPON ELECTRIC CO
</APPLICANT-NAME>
<APPLICANT-NAME>
NEC CORPORATION
</APPLICANT-NAME>
</APPLICANTS>
<INVENTORS>
<INVENTOR-NAME>
MARUYAMA YUICHI
</INVENTOR-NAME>
<INVENTOR-NAME>
MARUYAMA, YUICHI
</INVENTOR-NAME>
</INVENTORS>
<DESCRIPTION>
This invention relates to a digital filtering
circuit and, more particularly, to a digital filtering
circuit for interpolation for use in a digital-to-analog
converter (DAC) of oversampling type.As well known in the art, the digital-to-analog
converter of the oversampling type carries out a
digital-to-analog (D/A) conversion operation at a higher
sampling frequency which is tens of or hundreds of times
as large as a normal sampling frequency or the Nyquist
rate. The higher sampling frequency is called an
oversampling frequency. By using the oversampling
frequency, it is possible to distribute quantizing noise
into a wider frequency area and resulting in decreasing
the quantizing noise in a desired frequency band. This
means that it is possible to improve a signal-to-noise
ratio (S/N) by sampling at the oversampling frequency
although quantization bit number is the same on D/A
conversion. It is therefore possible to reduce the
quantization bit number by using the oversampling
frequency with respect to the same signal-to-noise ratio. In addition, in D/A conversion, an image signal
necessarily generates in out-of-band. To remove the
image signal, an analog filter is necessary. Such an
analog filter is referred to as a post-filter. A normal
digital-to-analog converter of no oversampling type is
called a digital-to-analog converter of the Nyquist
sampling type. It is necessary for the digital-to-analog
converter of the Nyquist sampling type to use a high
accuracy post-filter which has a rapid frequency
characteristic to remove the image signal. By using the
digital-to-analog converter of the oversampling type, the
post-filter is implemented by a filter which is simple in
structure and it is possible to reduce analog circuits.
However, the image signal is present at every Nyquist
sampling frequency if data of the Nyquist sampling frequency
is directly converted to an analog signal at the
oversampling frequency. As a result, it is impossible to
reduce a characteristic of the post-filter. In the
digital-to-analog converter of the oversampling type, in
order to reduce the characteristic of the post-filter,
the image signal is removed by a digital filter. The
digital filter is called an interpolation filter.The interpolation filter comprises first through
M-th digital filtering circuits, where M represents a
positive integer which is not less than two. The first
stage digital filtering circuit has a function of a
low-pass filter for removing the image signal having a
high frequency. To reduce a scale of a digital
</DESCRIPTION>
<CLAIMS>
A digital filtering circuit for converting an
input data signal of a sampling frequency f
s
 into an
output data signal of an oversampling frequency Nf
s
 which
is N times the sampling frequency f
s
, where N represents
a predetermined positive integer which is not less than

two, said digital filtering circuit comprising:

a first integrating circuit (40), supplied with a
calculated signal, for integrating the calculated signal

in synchronism with the oversampling frequency Nf
s
 to
produce a first integration result signal and a first

delayed signal which is given by delaying the first
integration result signal by a delay which is

substantially equal to a reciprocal of the oversampling
frequency Nf
s
;
a second integrating circuit (50), connected to
said first integrating circuit, for integrating the first

delayed signal in synchronism with the oversampling
frequency Nf
s
 to produce a second integration result
signal and a second delayed signal which is given by

delaying the second integration result signal by the
delay, said second integrating circuit producing the

second delayed signal as the output data signal; and
a calculating circuit (30), connected to said

first and said second integrating circuits and supplied
with the input data signal, for carrying out a

predetermined calculation on the input data signal, the 
first integration result signal, and the second

integration result signal in synchronism with the
sampling frequency f
s
 to produce the calculated signal,
the predetermined calculation being represented by an

equation as follows:

d = {a - c - (1 + 3N)b/2}/N
2
,

where a represents the input data signal, b represents
the first integration result signal, c represents the

second integration result signal, and d represents the
calculated signal.
A digital filtering circuit as claimed in
Claim 1, wherein said calculating circuit (30) comprises:


a first subtracting circuit (31), supplied with
the input data signal and a feedback signal, for

subtracting the feedback signal from the input data
signal to produce a first subtraction result signal;
a first multiplying circuit (32), connected to
said first subtracting circuit and provided with a first

coefficient (1/N), for multiplying the first subtraction
result signal by the first coefficient to produce a first

product signal;
a second subtracting circuit (33), connected to
said first multiplying circuit and supplied with the

first integration result signal (b), for subtracting the

first integration result signal from the first product
signal to produce a second subtraction result signal; 
a latch circuit (34), connected to said second
subtracting circuit, for latching the second subtraction

result signal at the sampling frequency f
s
 to produce a
latched signal;
a second multiplying circuit (35), connected to
said latch circuit and provided with a second coefficient

(1/N), for multiplying the latched signal by the second
coefficient to produce a second product signal as the

calculated signal;
a third multiplying circuit (36), connected to
said first integrating circuit and provided with a third

coefficient (1/2), for multiplying the first integration
result signal by the third coefficient to produce a third

product signal;
a first adding circuit (37), connected to said
third multiplying circuit and said second integrating

circuit, for adding the third product signal to the
second integration result signal to produce a first

addition result signal;
a fourth multiplying circuit (38), connected to
said first integrating circuit and provided with a fourth

coefficient (N/2), for multiplying the first integration
result signal by the fourth coefficient to produce a

fourth product signal; and
a second adding circuit (39), connected to said
fourth multiplying circuit and said first adding circuit,

for adding the fourth product signal to the first 
addition result signal to produce a second addition

result signal as the feedback signal.
A digital filtering circuit as claimed in
Claim 2, wherein the predetermined positive integer N is

equal to power of 2, each of said first through said
fourth multiplying circuits being implemented by a shift

register.
A digital filtering circuit as claimed in
Claim 1, wherein said first integrating circuit (40)

comprises:

a first adding circuit (41), connected to said
calculating circuit and supplied with the first delayed

signal, for adding the calculated signal to the first
delayed signal to produce a first addition result signal

as the first integration result signal; and
a first latch circuit (42), connected to said
first adding circuit, for latching the first integration

result signal at the oversampling frequency Nf
s
 to
produce a first latched signal as the first delayed

signal;
said second integrating circuit (50) comprising:
a second adding circuit (51), connected to said
first integrating circuit and supplied with the second

delayed signal, for adding the first delayed signal to
the second delayed signal to produce a second addition

result signal as the second integration result signal;
and 
a second latch circuit (52), connected to said
second adding circuit, for latching the second

integration result signal at the oversampling frequency
Nf
s
 to produce a second latched signal as the second
delayed signal.
A digital filtering circuit for converting an
input data signal of a sampling frequency f
s
 into an
output data signal of an oversampling frequency Nf
s
 which
is N times the sampling frequency f
s
, where N represents
a predetermined positive integer which is not less than

two, said digital filtering circuit comprising:

a first integrating circuit (40), supplied with a
calculated signal, for integrating the calculated signal

in synchronism with the oversampling frequency Nf
s
 to
produce a first integration result signal;
a second integrating circuit (50), connected to
said first integrating circuit, for integrating the first

integration result signal in synchronism with the
oversampling frequency Nf
s
 to produce a second
integration result signal and a delayed signal which is

given by delaying the second integration result signal by
a delay which is substantially equal to a reciprocal of

the oversampling frequency Nf
s
, said second integrating
circuit producing the delayed signal as the output data

signal; and
a calculating circuit (30), connected to said
first and said second integrating circuits and supplied 

with the input data signal, for carrying out a
predetermined calculation on the input data signal, the

first integration result signal, and the second
integration result signal in synchronism with the

sampling frequency f
s
 to produce the calculated signal,
the predetermined calculation being represented by an

equation as follows:

d = {a - c - (1 + 3N)b/2}/N
2
,

where a represents the input data signal, b represents
the first integration result signal, c represents the

second integration result signal, and d represents the
calculated signal.
A digital filtering circuit as claimed in
Claim 5, wherein said calculating circuit (30) comprises:


a first subtracting circuit (31), supplied with
the input data signal and a feedback signal, for

subtracting the feedback signal from the input data
signal to produce a first subtraction result signal;
a first multiplying circuit (32), connected to
said first subtracting circuit and provided with a first

coefficient (1/N), for multiplying the first subtraction
result signal by the first coefficient to produce a first

product signal;
a second subtracting circuit (33), connected to
said first multiplying circuit and supplied with the

first integration result signal, for subtracting the
first integration result signal from the first product 

signal to produce a second subtraction result signal;
a latch circuit (34), connected to said second
subtracting circuit, for latching the second subtraction

result signal at the sampling frequency f
s
 to produce a
latched signal;
a second multiplier circuit (35), connected to
said latch circuit and provided with a second coefficient

(1/N), for multiplying the latched signal by the second
coefficient to produce a second product signal as the

calculated signal;
a third multiplying circuit (36), connected to
said first integrating circuit and provided with a third

coefficient (1/2), for multiplying the first integration
result signal by the third coefficient to produce a third

product signal;
a first adding circuit (37), connected to said
third multiplying circuit and said second integrating

circuit, for adding the third product signal to the
second integration result signal to produce a first

addition result signal;
a fourth multiplying circuit (38), connected to
said first integrating circuit and provided with a fourth

coefficient (N/2), for multiplying the first integration
result signal by the fourth coefficient to produce a

fourth product signal; and
a second adding circuit (39), connected to said
fourth multiplying circuit and said first adding circuit, 

for adding the fourth product signal to the first
addition result signal to produce a second addition

result signal as the feedback signal.
A digital filtering circuit as claimed in
Claim 6, wherein the predetermined positive integer N is

equal to power of 2, each of said first through said
fourth multiplying circuits being implemented by a shift

register.
A digital filtering circuit as claimed in
Claim 5, wherein said first integrating circuit (40)

comprises:

a first adding circuit (41), connected to said

calculating circuit and supplied with a first latched
signal, for adding the calculated signal to the first

latched signal to produce a first addition result signal
as the first integration result signal; and
a first latch circuit (42), connected to said
first adding circuit, for latching the first integration

result signal at the oversampling frequency Nf
s
 to
produce the first latched signal;
said second integrating circuit (50) comprising:
a second adding circuit (51), connected to said
first integrating circuit and supplied with the delayed

signal, for adding the first integration result signal to
the delayed signal to produce a second addition result

signal as the second integration result signal; and 
a second latch circuit (52), connected to said
second adding circuit, for latching the second

integration result signal at the oversampling frequency
Nf
s
 to produce a second latched signal as the delayed
signal.
</CLAIMS>
</TEXT>
</DOC>
