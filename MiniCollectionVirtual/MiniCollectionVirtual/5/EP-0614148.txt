<DOC>
<DOCNO>EP-0614148</DOCNO> 
<TEXT>
<INVENTION-TITLE>
DATA PROCESSING APPARATUS
</INVENTION-TITLE>
<CLASSIFICATIONS>G06F1320	G06F948	G06F1326	G06F1324	G06F946	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>G06F	G06F	G06F	G06F	G06F	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>G06F13	G06F9	G06F13	G06F13	G06F9	</CLASSIFICATIONS-FOURTH>
<ABSTRACT>
A microprocessor (1) comprises a control circuit (15) for controlling a masking circuit (11) in order to delay the acknowledgment 
of an interrupt request to a possible extent and reduce the response time for an interrupt request with a higher priority. 

Upon accepting an interrupt request, the microprocessor receives its vector through a data bus D0-D15 and interrupt priority levels 
through interrupt signals IPL0# IPL2#. The values of the priority levels are put in a mask register (13) and used for interrupt 

masking. During the interrupt processing, the masking circuit (11) masks an interrupt request, the priority level of which is equal 
to or lower than that of an accepted interrupt request. 


</ABSTRACT>
<APPLICANTS>
</APPLICANTS>
<INVENTORS>
</INVENTORS>
<DESCRIPTION>
The present invention relates to an interrupt
processing starting method for a data processing device,
such as a microprocessor or the like, with a plurality of
interrupt priority levels, and, in particular, to a data
processing device in which the amount of hardware in the
configuration is reduced and the amount of electrical
energy consumed is restrained as the result of
automatically setting an interrupt mask level when
executing interrupt processing programs corresponding to
received interrupt causes, while, at the same time,
simplifying a priority order mediation circuit or the like
for an interrupt controller.Use of an interrupt mechanism provided with a
plurality of priority levels is an extremely powerful and
important technology for swiftly coping with interrupt
processing at a very high rate of urgency from within a
program for processing a large number of interrupt causes.
In the same manner, a vector interrupt mechanism whereby an
interrupt reception bus cycle is executed, an interrupt
vector for identifying the device requesting interrupt
processing is input, and branching to a processing routine
corresponding to the interrupt main cause received from
this vector value occurs, after an interrupt is received,
is also an important technology.These interrupt mechanisms are currently provided in
most high performance microprocessors. When an interrupt
vector is not introduced into an interrupt reception bus
cycle it is not possible to specify the device requesting
the interrupt. In order to specify the device requesting 
the interrupt within the interrupt process program these
devices must be polled, one at a time. This is extremely
time-consuming, therefore the response time for handling an
interrupt is greatly increased.The above-mentioned interrupt mechanism provided with
a plurality of priority levels and the vector interrupt
mechanism, for example, are contained in the 68000
microprocessor manufactured by the Motorola Company. A
general outline of the response procedures in a data
processing device with a 68000 microprocessor is as
follows.
(1) Interrupt request is received.(2) Interrupt receipt bus cycle (interrupt acknowledge
cycle) is executed.(3) Interrupt vector is received (introduced).(4) Address of interrupt processing program is
determined by referencing a table from the vector value.(5) Branching to interrupt processing program is
executed.FIG.5 is a detailed flowchart of the above-mentioned
interrupt response procedures, specifically, an interrupt
processing exception sequence.
</DESCRIPTION>
<CLAIMS>
A data processing device, comprising:

input means (IPL0# - IPL2#) for receiving an externally
supplied interrupt request with an interrupt priority

signal indicative of one interrupt priority level from
among a plurality of interrupt priority levels;
interrupt masking means (11) for masking interrupt
requests so that any interrupt request having a

priority level lower than that of an interrupt request
being currently handled is ignored;
mask level storing means (13) for storing a maximum
interrupt priority level among the interrupt priority

levels which are masked by the interrupt masking means
(11); and
control means (15) for receiving the interrupt priority
signal of a first interrupt request transmitted from

the input means (IPL0# - IPL2#), for accepting the
first interrupt request and for initiating an interrupt

bus cycle and thereafter for receiving the interrupt
priority signal of a second interrupt request having an

interrupt priority level higher than that of the first
interrupt request before a completion of the interrupt

bus cycle,
wherein, before the completion of the interrupt bus
cycle, the control means (15) inputs the interrupt priority 

level of the second interrupt request provided from the
input means (IPL0# - IPL2#) and sets the interrupt

priority level of the second interrupt request in the
mask level storing means (13) while outputting the

interrupt priority level of the second interrupt
request to accept the interrupt vector of the second

interrupt request.
A data processing device as claimed in claim 1,
characterized
 in that

said control means (15) comprises:

said receiving means which are adapted for receiving
one of said interrupt requests when the interrupt

request input from the input means is at a higher
priority level than the mask level stored in the mask

level storing means (13); and
said accepting means which are adapted for accepting
said interrupt vector which further indicates the

received interrupt priority level and executes receipt
of the interrupt;
wherein the interrupt vector accepting means instructs
said interrupt masking means to mask interrupt requests

with said priority level during the execution of the
interrupt process.
A data processing device according to claim 1
characterized
 in that

said control means (15) comprises:

said receiving means which are adapted for receiving
one of said interrupt requests when the interrupt

request input by the input means is at a higher priority level
than the mask level stored by the mask level storing

means; and 
said accepting means which are adapted for accepting an
interrupt vector which indicates the received interrupt

priority level and executes an interrupt receipt bus
cycle;
wherein said interrupt vector accepting means controls
so that, during the interrupt receipt bus cycle

execution at the same time as the interrupt vector is
accepted, said interrupt priority level value provided

from the input means is input, said interrupt priority

level value is set in the mask level storing means as
said mask level used during the interrupt processing

execution, and said interrupt requests with a priority
level the same or lower than an interrupt request

priority level received from said input means during
the interrupt process execution are masked.
</CLAIMS>
</TEXT>
</DOC>
