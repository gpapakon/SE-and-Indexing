<DOC>
<DOCNO>EP-0631430</DOCNO> 
<TEXT>
<INVENTION-TITLE>
Color image processing apparatus capable of suppressing moire.
</INVENTION-TITLE>
<CLASSIFICATIONS>H04N152	H04N152	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>H04N	H04N	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>H04N1	H04N1	</CLASSIFICATIONS-FOURTH>
<ABSTRACT>
An image data generating circuit of a color image 
processing apparatus generates multivalued image data for each 

color in accordance with density of each color of magenta (M), 
cyan (C) and yellow (Y). An M-screen threshold value 

generating circuit outputs a plurality of first threshold 
values, a C-screen threshold value generating circuit outputs 

a plurality of second threshold values, and a Y-screen 
threshold value generating circuit for outputting a plurality 

of third threshold values. A comparing circuit compares the 
multivalued image data outputted from the image data generating 

circuit with the first to third threshold values outputted from 
the M-, C- and Y- screen generating circuits f
or each color to 
output a comparison result in the form of a binary signal. The 

first and second threshold values is assigned to each pixel of 
an M multi-cell and a C multi-cell constituted by square 

matrixes having screen angles of 

± tan⁻¹(q/p) 
 
 and each side of 


β · p · q 
 
, respectively. For preventing coarse moire, p and q 

are any value of (11,3), (15,4) and (19,5), and the M multi-cell 
and the C multi-cell consist of 


N (= p² + q²) 
 
 sub-cells 

arrayed continuously in the directions of the screen angles of 

±tan⁻¹(q/p) 
 
 and having threshold values in accordance with the 

predetermined number of gradations. The third threshold value 
is assigned to a Y multi-cell constituted by a square matrix 

having a screen angle of 45 degrees and each side of 

β · p · q 
 
. 

The Y multi-cell consists of 2(p - q)² sub-cells arrayed  
 

continuously in the direction of the screen angle of 45 
degrees. The first to fourth threshold values are repeatedly 

outputted in a cycle of 

β · p · q 
 
 in synchronism with the 

multivalued image data of each color. 

</ABSTRACT>
<APPLICANTS>
<APPLICANT-NAME>
NIPPON ELECTRIC CO
</APPLICANT-NAME>
<APPLICANT-NAME>
NIPPON ELECTRIC CO
</APPLICANT-NAME>
</APPLICANTS>
<INVENTORS>
<INVENTOR-NAME>
ITO AKIRA C O NEC ENGINEERING
</INVENTOR-NAME>
<INVENTOR-NAME>
ITO MIKI C O NEC ENGINEERING L
</INVENTOR-NAME>
<INVENTOR-NAME>
KAJI MITSUO C O NEC ENGINEERIN
</INVENTOR-NAME>
<INVENTOR-NAME>
SATO YOUICHI C O NEC SCIENTIFI
</INVENTOR-NAME>
<INVENTOR-NAME>
TAJIMA JOHJI C O NEC CORPORATI
</INVENTOR-NAME>
<INVENTOR-NAME>
ITO AKIRA C O NEC ENGINEERING
</INVENTOR-NAME>
<INVENTOR-NAME>
ITO MIKI C O NEC ENGINEERING L
</INVENTOR-NAME>
<INVENTOR-NAME>
KAJI MITSUO C O NEC ENGINEERIN
</INVENTOR-NAME>
<INVENTOR-NAME>
SATO YOUICHI C O NEC SCIENTIFI
</INVENTOR-NAME>
<INVENTOR-NAME>
TAJIMA JOHJI C O NEC CORPORATI
</INVENTOR-NAME>
</INVENTORS>
<DESCRIPTION>
The present invention relates to a color image 
processing apparatus for use in a color scanner, a printer, a 
facsimile machine or the like, and more particularly to a color 
image processing apparatus using a threshold value of a digital 
halftone screen which prevents the occurrence of moire and 
generates a regular rosette pattern when a plurality of dot 
images having different screen angles in accordance with colors 
are superimposed on each other. Hitherto, a color image processing apparatus for 
generating a dot image uses a halftone screen set having screen 
angles of ±15 and 45 degrees to produce image signals of three 
color; a C (cyan), an M (magenta) and a Y (yellow) by dot-processing. According to the "PostScript Screening" by Peter Frink 
published by "Adobe Systems Incorporated" in 1992, that three 
plates having identical dot intervals are superimposed on each 
other at the interval of 30 degrees satisfies the condition 
under which the finest moire occurs. When the dot processing 
is digitally made, a screen angle is set to +15 degrees 
relative to magenta, -15 degrees relative to cyan and 45  
 
degrees relative to yellow, respectively. In order to generate 
image signals of dot images having these screen angles, a unit 
area equal to an area which can be occupied by one dot is 
determined, and threshold values corresponding to a plurality 
of pixels equal to or more than the number of gradations in the 
unit area are set. Such threshold values constitute threshold 
values in a digital halftone screen. Finally, the threshold 
values in the digital halftone screen are compared with color 
image signals obtained by scanning color original images, 
thereby to output its result in the form of digital values, 
that is, 1 and 0. When recording, a pixel corresponding to the 
digital value of 1 is recorded in the unit area thereby to 
record the dot image. The digital halftone screen has a structure in which 
dot cells 301 constituting a minimum unit of the threshold 
value are cyclically arranged as shown in Fig. 1, and 
represented by a periodic function of the following formula 
(1).

h (x - p, y - q) = h (x, y) h (x - q, y + p) = h (x, y)   (1) 


 
   Cyclic constants (p, q) in the formula (1) determines 
the screen angle and the number of gradations of the halftone 
screen. That is, the screen angle ϑ is determined in 
accordance with formula (2) whereas the number N of gradations 
is determined in accordance with formula (3)

ϑ = tan⁻¹(q/p)   (2) N = p² + q² + 1   (3) 


 
   x, y, p
</DESCRIPTION>
<CLAIMS>
A color image processing apparatus, comprising: 
   an image data generating circuit for generating 

multivalued image data for each color in accordance with 
density of each color of magenta (M), cyan (C) and yellow (Y); 

   an M-screen threshold value generating circuit for 
outputting a plurality of first threshold values for comparison 

with said multivalued image data of magenta (M); 
   a C-screen threshold value generating circuit for 

outputting a plurality of second threshold values for 
comparison with said multivalued image date of cyan (C); 

   a Y-screen threshold value generating circuit for 
outputting a plurality of third threshold values for comparison 

with said multivalued image data of yellow (Y); 
   a comparing circuit for comparing said multivalued 

image data outputted from said image data generating circuit 
with said first to third threshold values outputted from said 

M-, C- and Y- screen generating circuits for each color to 
output a comparison result in the form of a binary signal; and 

   a control circuit for controlling outputs of said first 
to third threshold values from said M-, C- and Y- screen 

threshold value generating circuits; 
   wherein said M-screen threshold value generating 

circuit and said C-screen threshold value generating circuit 
output said first and second threshold values respectively 

assigned to each pixel of an M multi-cell and a C multi-cell 
 

constituted by square matrixes having screen angles of 
± tan⁻ 

¹(q/p)  
 and each side of 

β · p · q  
 (β is an integer), 

respectively, and p and q are any value of (11,3), (15,4) and 
(19,5), and said M multi-cell and said C multi-cell 

respectively consist of 
N (= p² + q²)  

 sub-cells arrayed 
continuously in directions of said screen angles of 

±tan⁻¹(q/p)  
and having threshold values in accordance with the 

predetermined number of gradations; 
   wherein said Y screen threshold value generating 

circuit outputs said third threshold value assigned to a Y 
multi-cell constituted by a square matrix having a screen angle 

of 45 degrees and each side of 
β · p · q  

, and said Y multi-cell 
consists of 2(p - q)² sub-cells arrayed continuously in a 

direction of said screen angle of 45 degrees and having 
threshold values in accordance with the predetermined number of 

gradation; and 
   wherein said first to third threshold values are 

repeatedly outputted in a cycle of 
β · p · q  

 in synchronism 
with said multivalued image data of each color in accordance 

with control of the control circuit. 
A color image processing apparatus as claimed in 
Claim 1, wherein said M-, C-, Y- screen threshold value 

generating circuits comprise memories for storing said first, 
second, and third threshold values, respectively. 
A color image processing apparatus as claimed in 
Claim 1, wherein said sub-cells of said M multi-cell and said 

 
C multi-cell have said first and second threshold values set on 

the basis of the number of gradations represented by 
(p · q · 

β)² / (p² + q²)  
, respectively, and said sub-cells of said Y 

multi-cell has said third threshold value set on the basis of 
the number of gradations represented by 

(p · q · β)² / (2(p - 
q)²)  

. 
A color image processing apparatus, comprising: 
   an image data generating circuit for generating 

multivalued image data for each color in accordance with 
density of each color of magenta (M), cyan (C) and yellow (Y); 

   an M-screen threshold value storing circuit for storing 
a plurality of first threshold values for comparison with said 

multivalued image data of magenta (M); 
   a C-screen threshold value storing circuit for storing 

a plurality of second threshold values for comparison with said 
multivalued image date of cyan (C); 

   a Y-screen threshold value storing circuit for storing 
a plurality of third threshold values for comparison with said 

multivalued image data of yellow (Y); 
   a comparing circuit for comparing said multivalued 

image data outputted from said image data generating circuit 
with said first to third threshold values outputted from said 

M-, C- and Y- screen storing circuits to output a comparison 
result in the form of a binary signal; 

   a threshold value generating circuit for generating 
said first, second, and third threshold values;

 
   a control circuit for controlling writing and reading 

of said first to third threshold values into/from said M-, C-and 
Y- screen threshold value storing circuits; 

   wherein said M-screen threshold value storing circuit 
and said C-screen threshold value storing circuit store said 

first and second threshold values respectively assigned to each 
pixel of an M multi-cell and a C multi-cell constituted by 

square matrixes having screen angles of 
± tan⁻¹(q/p)  

 and each 
side of 

β · p · q  
 (β is an integer), respectively, and p and q 

are any values of (11,3), (15,4) and (19,5), and said M multi-cell 
and said C multi-cell respectively consist of 

N (= p² + q²)  
sub-cells arrayed continuously in directions of said screen 

angles of 
±tan⁻¹(q/p)  

 and having threshold values in accordance 
with the predetermined number of gradations, respectively; 

   wherein said Y screen threshold value storing circuit 
stores said third threshold value assigned to a Y multi-cell 

constituted by a square matrix having a screen angle of 45 
degrees and each side of 

β · p · q  
, and said Y multi-cell 

consists of 2(p - q)² sub-cells arrayed continuously in a 

direction of said screen angle of 45 degrees and having 
threshold values in accordance with the predetermined number of 

gradations; and 
   wherein said first to third threshold values are 

repeatedly outputted in a cycle of 
β · p · q  

 in synchronism 
with said multivalued image data of each color in accordance 

with control of said control circuit. 
A color image processing apparatus as claimed in 
Claim 4, wherein said threshold value generating circuit 

comprises: 
   coordinate data generating means for generating 

coordinate data X and Y of coordinates (X, Y) within a square 
region where a surplus region is added to image regions of said 

M multi-cell, said C multi-cell and said Y multi-cell; 
   first coordinate transformation means for transforming 

said coordinate data X and Y into coordinate data x and y of 
coordinates (x, y) on a virtual orthogonal screen plane in 

accordance with the affine transformation to output said 
coordinate data x and y; 

   second coordinate transformation means for transforming 
said coordinate data x and y into coordinate data x' and y' 

within a square region of 
-j ≦ x ≦ j  

 and 
-j ≦ y ≦ j  

 (j is an 
integer) to generate flags which discriminate the regions of 

said sub-cells of said M multi-cell, said C multi-cell and said 
BK multi-cell in association with said coordinate data x' and 

y'; 
   threshold value output means responsive to said 

coordinate data y' and y' for outputting a threshold value t on 
the basis of 

t = k · (|x'| + |y'|)/2  
 where k is an integer; 

   memory means for storing said threshold value t 
outputted from said threshold value output means in association 

with said flag;
 

   threshold value replacing means for selecting said 
threshold value t associated with said flag within said region 

from said memory means to replace said threshold value t with 
another threshold value so as to express a smooth halftone; and 

   writing means for allowing said another threshold value 
replaced by said threshold value replacing means to be stored 

in each of said M-, C- and Y- screen threshold value storing 
circuits. 
A color image processing apparatus as claimed in 
Claim 5, wherein said second coordinate transformation means 

comprises: 
   first adding/subtracting means for adding 2j to said 

coordinate data x outputted from said first coordinate 
transformation means until x becomes -j or more while x is 

smaller than -j, and for subtracting 2j from x until x becomes 
j or less while x is j or more; 

   first counting means for decreasing count according to 
adding operation and increasing count according to subtracting 

operation of said first adding/subtracting means; 
   second adding/subtracting means for adding 2j to said 

coordinate data y outputted from said first coordinate 
transformation means until y becomes -j or more while y is 

smaller than -j and for subtracting 2j from y until y becomes 
j or less while y is j or more; and

 
   second counting means for decreasing count according to 

adding operation and increaing count according to subtracting 
operation of said second adding/subtracting means. 
</CLAIMS>
</TEXT>
</DOC>
