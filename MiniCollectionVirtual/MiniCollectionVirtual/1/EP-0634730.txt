<DOC>
<DOCNO>EP-0634730</DOCNO> 
<TEXT>
<INVENTION-TITLE>
Method and reading device for identifying a code composed of alternated light and dark zones
</INVENTION-TITLE>
<CLASSIFICATIONS>G06K714	G06K714	G06K710	G06K710	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>G06K	G06K	G06K	G06K	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>G06K7	G06K7	G06K7	G06K7	</CLASSIFICATIONS-FOURTH>
<ABSTRACT>
The invention relates to an optical scanning arrangement for identifying a code 11 composed of successive light and dark zones forming in each case a module 16, 17, 18, 19, 20, 21, 22 consisting of an upwardly limited integral multiple of basic running lengths Bl to a module width M, in which code a predetermined number of successive modules 16, 17, 18, 19, 20, 21 and basic running lengths Bl form one character 25. The scanning device guides, by means of a light transmitter 14, a light spot 13, whose extension is smaller than the basic running length Bl, but is at a maximum only slightly larger than the basic running length Bl of the code 11, periodically successively over the modules 16, 17, 18, 19, 20, 21, 22. By means of its light receiver 15, the light scattered back from the region, of the code 11, encountered by the light spot 13 is received, and a corresponding electric signal is output at the output 24. By means of differentiation and rectification, a series of individual pulses 41 is formed. Connected to the light receiver 15 is a differential stage 26 with rectification and a counting stage 27 for the clock pulses generated by a clock generator 28 between in each case two predetermined levels of the edges of successive individual pulses 41. The individual counting results are applied to a memory 29 and stored there. Subsequently, a two-module selection stage 30 records in each case the measured width M' of two successive modules in units of the basic running length Bl. A correction stage 31 corrects each module width in the direction of the actual module width M in accordance with correction values stored there previously for each module width pair. For each measured module width M', a corrected module width signal is output.
</ABSTRACT>
<APPLICANTS>
<APPLICANT-NAME>
SICK AG
</APPLICANT-NAME>
<APPLICANT-NAME>
SICK AG
</APPLICANT-NAME>
</APPLICANTS>
<INVENTORS>
<INVENTOR-NAME>
BLOEHBAUM FRANK DIPL-ING
</INVENTOR-NAME>
<INVENTOR-NAME>
BLOEHBAUM, FRANK, DIPL.-ING.
</INVENTOR-NAME>
</INVENTORS>
<CLAIMS>
A method for the identification of a code (11) consisting of
sequential light and dark fields which respectively form modules

(16, 17, 18, 19, 20, 21, 22) put together from an upwardly restricted
integral multiple number of base running lengths (B1) to a module

width (M), with a predetermined number of sequential modules (16,
17, 18, 19, 20, 21) and base running lengths (B1) in the code

forming a mark (25), by means of an optical scanning device (12)
which, by means of a light transmitter (14), guides a light bead (13),

the extent of which is at most only fractionally larger and at the
extreme around 1.5 times greater than the base running length (B1)

of the code (11) over the modules (16, 17, 18, 19, 20, 21, 22) in
sequence and, by means of a light receiver (15), receives the light

scattered back from the regions of the code (11) met by the light
bead (13), and transmits a corresponding electrical signal at its

output (24) which is differentiated and also rectified in order to
receive a sequence of more or less narrow individual pulses (41)

each associated with a module boundary, wherein the time at which
the rising or falling flanks have reached a predetermined level define

measured boundaries of the modules (16, 17, 18, 19, 20, 21) and
the boundaries are combined into groups corresponding to the

mark (25), whereupon each group corresponding to a mark is
normed with respect to its temporal length and the time spacing of

the neighbouring boundaries, i.e. the module width, is determined
in units of the base running length (B1), and a conclusion is drawn

regarding the actual appearance of the code (11) from the so derived 
measured module width (M') in that it is assumed that each actual

module width (M) can only be an integral finite multiple of the base
running length (B1), 
characterised in that
 the measured module
widths are corrected 
in that
 a correction step is carried out in which
in each case the measured module widths (M') of two sequential

modules (16, 17, 18, 19, 20, 21) are compared at least once in such
a way that the correction value which applies to the combination of

these two sequential modules (16, 17, 18, 19, 20, 21) is determined
from a quantity of correction values previously specified with

respect to known marks for all the prevailing combinations of
sequential modules (16, 17, 18, 19, 20, 21), with the correction

values being so specified that faulty associations of the measured
module widths to actual module widths (M', M) are counteracted

and the measured width of the first and/or second of the two
sequential modules (16, 17, 18, 19, 20, 21) is correspondingly

corrected.
Method in accordance with claim 1, 
characterised in that
 the extent
of the light bead (13) is smaller than the base running length (B1);

and/or 
in that
 the scanning means periodically guides the light
bead (13) in sequence over the modules (16, 17, 18, 19, 20, 21, 22);

and/or 
in that
 the actual module width value associated with the
individual module (16, 17, 18, 19, 20, 21) is that one which comes

closest to the corrected module width value (Mk); and/or 
in that
 the
predetermined level on the flank corresponds to a preferably larger

proportion of the height and is determined by the absolute height of
the individual pulse or by an average height of a plurality of pulses.
Method in accordance with any one of the preceding claims,

characterised in that
 the corrected values are formed by averaging 
across repeated scans of the code; and/or 
in that
 the measured
values are iteratively corrected; and/or 
in that
 correction value
derived by the measurement of known marks is associated with

each pair of measured module widths; and/or 
in that
 all measured
module widths (M') are subdivided into discrete fractions of the base

running length (B1).
Method in accordance with any one of the preceding claims,

characterised in that
 a first membership function (E) is set up
empirically for obtaining correction values and recites for each

measured module width (M') the fractions (E1, E2, E3, E4) of the
membership to predetermined module widths, in particular to the

integral multiples of the base running lengths (B1), with the
maximum multiple being at least equal to the module width of the

longest module (17) encountered in the code (11) and preferably
being only one or two base running lengths greater than this

module width; and/or 
in that
 for obtaining correction values
empirically with respect to known modules a second membership

function (K) is set up which recites correction values (K1, K2, K3)
for each measured module width (M') which take account of the

deviation of the measured module width from the next closest
integral module width; and/or 
in that
 the correction values (K1, K2,
K3) become larger with the deviation of the measured module width

(M') from the integral value and preferably include a constant
maximum region in the area of maximum deviation.
Method in accordance with any one of the preceding claims,

characterised in that
 only the fractions (E1, E2, E3, E4) of the first
membership function (E) are formed from the measured width (M')

of the first module (16) of a code or of the first module (16) of a 
mark (25); and/or 
in that
 both the fractions (E1, E2, E3, E4) of the
first membership function (E) and also the correction values (K1,

K2, K3) of the second membership function (K) are formed from the
measured width (M') of the module (17, 18, 19, 20, 21) following the

first module; and/or 
in that
 in each case the fractions (E1, E2, E3,
E4) and correction values (K1, K2, K3) of a specific measured

module width (M') are linked with the fractions (E1, E2, E3, E4) of
the previously measured module width in such a way that corrected

module widths (Mk) are obtained which lie closer to the actual
module widths (M) than the originally measured module width (M').
Method in accordance with claim 4 or claim 5, 
characterised in that

the components (EKOMP) of the first membership function (E) have
small amounts outside of a respective interval of finite length which

preferably lies symmetrically about the multiple of the base running
length to be considered, with the length being preferably less than

or the same as twice the base running length and 
in that
 the
components (EKOMP) increase within the respective interval

initially with preferably finite gradients, adopt a maximum and
subsequently drop off up to the respective end of the interval;

and/or 
in that
 the components (EKOMP) of the first membership
function (E) each adopt their respective maximum value at an

integral multiple of the base running length; and/or 
in that
 at least
one component (EKOMP) of the first membership function (E)

adopts the maximum value only at a single discrete multiple of the
base running length; and/or 
in that
 at least one component
(EKOMP) of the first membership function (E) adopts the maximum

value over a region of the base running length of finite width;
and/or 
in that
 the first membership function (E) has a component
for each module width arising in the code. 
Method in accordance with claim 6, 
characterised in that
 the first
membership function (E) has a component for each module width

arising in the code and additionally two further components with
maxima which are assumed at base running lengths above and

below the largest and smallest module width respectively arising in
the code, wherein the component which has its maximum at a base

running length beneath the smallest module width occurring in the
code adopts this maximum between half of the smallest module

width arising in the code and the smallest module width arising in
the code, and wherein the component which has its maximum at a

base running length above the largest module width arising in the
code adopts this maximum between this largest arising module

width and the largest arising module width increased by an integral
multiple of the base running length; and/or 
in that
 each component
of the first membership function (E) assuming its maximum at a

module width arising in the code has a symmetrical shape within a
finite interval of base running length, with this interval lying around

the module width at which the component considered adopts its
maximum; and/or 
in that
 each component of the first membership
function (E) which does not adopt its maximum at a module width

arising in the code has an asymmetrical shape; and/or 
in that
 the
gradient of at least one of the components of the first membership

function is linear from the start of an interval which lies around the
base running length at which the considered component adopts its

maximum up to a maximum; and 
in that
 the drop-off of the
component following the maximum is likewise linear up to the edge

of the interval. 
Method in accordance with any one of claims 4 to 8, 
characterised
in that
 the components of the first membership function have a
shape of the form:


EKOMP(X) = A + B * [SIN(X)/X]

within intervals which are arranged around that multiple of the
base running length at which the components have their maximum,

with A being a constant which is preferably close to the real number
0 and, with B being a constant which is preferably close to the real

number 1 and with X being computed with real numbers C and D
in accordance with


X = C* (module width D),

wherein in particular the value D can adopt a different value for
each component of the membership function; and/or 
in that
 the
first membership function is zero outside of the interval of finite

length or preferably less than or equal to twice the base running
length which preferably lies symmetrically around the considered

multiple of the base running lengths; and/or 
in that
 within
respective intervals lying between the considered multiples of the

base running lengths the components (KKOMP) of the second
membership function (K) first increase with preferably finite

gradients, adopt a maximum and then drop off again with
preferably finite gradients; and 
in that
 outside of these respective
intervals of finite length of preferably less than twice the base

running length, which are preferably disposed symmetrically about
the multiples of the base running lengths to be considered, the

components of the second membership function (K) have small 
amounts; and/or 
in that
 the second membership function (K) is
zero between 0 times the base running length and one times the

base running length; and/or 
in that
 the components of the second
membership function adopt the value zero outside of the intervals;

and/or 
in that
 the increase of the second membership function (K)
begins at the multiples of the base running length to be considered

or shortly behind it and that the decrease ends before the next
multiples to be considered; and/or 
in that
 the end of the decrease
lies, with increasing multiples of the base length to be considered,

at an always greater distance before the integral multiple of the
base length to be considered; and/or 
in that
 the number of the
components of the second membership function does not exceed the

number of the possible combinations of module widths arising in
the code; and/or 
in that
 the gradient of the components of the
second membership function is linear in the rising and/or falling

region; and/or 
in that
 the correction values (K1b, K2b, K3b) of a
measured module width (M') are linked with the fractions (E1a, E2a,

E3a, E4a) of the measured width of the preceding module; 
in that

the result of this linking (Z) is linked with the fractions (E1b, E2b,
E3b, E4b) of the measured module width (M') and 
in that
 the
second linking result (A1b, A2b, A3b, A4b) obtained thereby is

averaged via an evaluation function (A) such that the corrected
module width corresponding to the average value lies closer to the

actual integral module width (M) than the originally measured
module width (M'); and/or 
in that
 the evaluation function (A) is put
together from functions which extend symmetrically and with linear

change in intervals which lie symmetrically around each multiple of
the base running length to be considered, with the maxima of the

functions being the same as the linking result (A1, A2, A3, A4) and
achieving the value zero at an adjacent multiple which is to be 

considered; and 
in that
 the averaging of the evaluation function A
takes place by the computation of the center of gravity of these

functions.
Optical scanning apparatus for the carrying out of the method in
accordance with any one of the preceding claims, comprising an

optical scanning device (12), which by means of a light transmitter
(14), guides a light bead (13), the extent of which is at most only

fractionally larger and at the extreme around 1.5 times greater than
the base running length (B1) of the code (11) over the modules (16,

17, 18, 19, 20, 21, 22) in sequence, and by means of a light receiver
(15) which receives the light scattered back from the regions of the

code (11) met by the light bead (13) and transmits a corresponding

electrical signal at its output (24), wherein a differentiating stage
(26) with rectification and a counting stage (27) for the clock pulses

generated by a clock generator (28) between in each case two
predetermined levels of the flanks of sequential individual pulses is

connected to the light receiver (15) and with a memory (29) in which
the individual counting results are stored, 
characterized in that
 a
two modulus selecting stage (30) is provided, which respectively

detects the measured width (M') of two sequential modules in units
of the base running length (B1) and transmits them to a correction

stage (31) which corrects each module width in the direction of the
actual module width (M) in accordance with correction values which

have previously been stored there for each module width pair and
transmits a corrected module width signal for each measured

module width (M').
Optical scanning arrangement in accordance with claim 9,

characterised in that
 the extent of the light bead (13) is smaller 
than the base running length (B1); and/or 
in that
 the scanning
apparatus periodically guides the light bead sequentially over the

modules (16, 17, 18, 19, 20, 21, 22); and/or 
in that
 the correction
stage (31) contains for each component (EKOMP1, EKOMP2,

EKOMP3, EKOMP4) associated with a multiple of the base running
length to be considered of a first membership function (E) a look-up

stage (LUTE) in which this component is deposited and which
derives the corresponding fraction (E1, E2, E3 and E4, respectively)

for the applied data word corresponding to the measured module
width being considered; and/or 
in that
 the correction stage further
contains a look-up stage (LUTK) for each component (KKOMP1,

KKOMP2, KKOMP3) of the second membership function (K) which
determines the corresponding correction value (K1, K2, K3) for the

applied data word corresponding to the considered measured
module width; and/or 
in that
 the outputs of the look-up stages
(LUTE; LUTK) are connected to a linking circuit (32); and/or 
in that

the algebraic linking circuit (32) has two memories (33, 34)
connected in parallel for the temporary storage of all membership

fractions (E1a, E2a, E3a, E4a) determined in the look-up stages
(LUTE) of the first measured module width and for all membership

fractions (E1b, E2b, E3b, E4b) of the second measured module
width and correction values (K1b, K2b, K3b) of the second

measured module width, a first combining stage (35) applied to both
memories (33, 34) for linking fractions (E1a, E2a, E3a, E4a) of the

first measured module width with the correction values (K1b, K2b,
K3b) of the second measured module width, a second further

combining stage (36) connected to the first combining stage (35) and
the second memory (34) and which links the output (Z) of the first

combining stage (35) and the fractions (E1b, E2b, E3b, E4b) of the
second measured module width, such that the result (A1b, A2b, 

A3b, A4b) of this linking is averaged via the evaluation function (A)
implemented in an evaluation stage (37); and 
in that
 the corrected
module width (Mk) corresponding to the average value lies closer to

the actual integral module width (M) than the originally measured
module width (Mb); and/or 
in that
 the implemented evaluation
function (A) is put together from functions which extend

symmetrically and with linear change in intervals which lie
symmetrically about each multiple of the base running length to be

considered, with the maxima of these intervals being the same as
the linkage result (A1b, A2b, A3b, A4b) and attaining the value zero

at a neighbouring multiple to be considered; and/or 
in that
 a
threshold member (42) is connected between the differentiating

stage (26) with rectification and the counting stage and transmits a
resetting signal and a trigger signal to the counting stage (27) at the

time at which the rising or falling flanks of the individual pulses
(41) exceed or fall short of a predetermined amplitude.
</CLAIMS>
</TEXT>
</DOC>
