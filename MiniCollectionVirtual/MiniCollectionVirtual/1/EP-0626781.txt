<DOC>
<DOCNO>EP-0626781</DOCNO> 
<TEXT>
<INVENTION-TITLE>
METHOD AND APPARATUS FOR MAPPING BETWEEN COLOR SPACES AND CREATING A THREE DIMENSIONAL INVERSE LOOK-UP TABLE.
</INVENTION-TITLE>
<CLASSIFICATIONS>G06T100	G06T100	G06T1160	G06T1160	G09G506	G09G506	H04N146	H04N146	H04N160	H04N160	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>G06T	G06T	G06T	G06T	G09G	G09G	H04N	H04N	H04N	H04N	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>G06T1	G06T1	G06T11	G06T11	G09G5	G09G5	H04N1	H04N1	H04N1	H04N1	</CLASSIFICATIONS-FOURTH>
<ABSTRACT>
The present invention provides a method to map 
color signals in a device independent color space (DICS) to 

color signals in a device dependent color space (DDCS) for 
fast color calibration. The present invention combines two 

operations of gamut clipping and backward interpolation 
into one inverse look-up table (ILUT) which contains 

lattice color signals in the DICS as input signals. The 
ILUT is used during forward interpolation to map signals 

from the DICS to the DDCS. The ILUT is created using a 
gamut descriptor based on a given look-up table (LUT) which 

contains lattice color points in the DDCS as input signals. 
The gamut descriptor is generated by determining a set of 

gamut boundary points located on a series of parallel 
planes with fixed angles. When the ILUT is not available, 

the present invention uses a gamut descriptor for fast 
color signal conversion from the DICS to the DDCS. 


</ABSTRACT>
<APPLICANTS>
<APPLICANT-NAME>
EASTMAN KODAK CO
</APPLICANT-NAME>
<APPLICANT-NAME>
EASTMAN KODAK COMPANY
</APPLICANT-NAME>
</APPLICANTS>
<INVENTORS>
<INVENTOR-NAME>
MILLER, RODNEY L., C/O EASTMAN KODAK COMPANY
</INVENTOR-NAME>
<INVENTOR-NAME>
SULLIVAN, JAMES R., C/O EASTMAN KODAK COMPANY
</INVENTOR-NAME>
<INVENTOR-NAME>
WAN, SHIJIE J., C/O EASTMAN KODAK COMPANY
</INVENTOR-NAME>
</INVENTORS>
<DESCRIPTION>
This application is related to the concurrently 
filed applications entitled Method And Apparatus For Convex 
Interpolation For Color Calibration by Wan, Miller and 
Sullivan having US serial number 068,823 and Method And 
Apparatus For Determining A Gamut Boundary And A Gamut 
Descriptor by Wan and having US serial number 068,887, both 
incorporated by reference herein. The present invention is directed to a fast 
mapping method and apparatus for converting data from one 
space to another space and creating an inverse look-up 
table for the conversion and, more particularly, to mapping 
using a gamut descriptor defining the boundaries of the 
gamut of a target device and to creating a color 
calibration inverse look-up table which will allow color 
values or signals, which have been converted from a first 
device dependent color space into color values or signals 
in a device independent color space, to be converted from 
the device independent color space into a second device 
dependent color space using a forward interpolation. Color information is stored in different color 
spaces for different devices. A color space is a 
coordinate system in which the colors reproducible by the 
device are points or signals in the coordinate system. For 
example, RGB color space which has color axes of red (R), 
green (G) and blue (B) is used for CRTs and CMY color space 
which has color axes of cyan (C), magenta (M) and yellow 
(Y) is used for printers. Both RGB and CMY are device 
dependent color spaces with signal values or code values 
typically ranging from 0 to 255. To reproduce a color 
image generated for one device on another device, a color  
 
calibration process is required. One goal of the color 
calibration process is to find a mapping from one device-dependent 
color space (DDCS) to another DDCS, so that 
colors can be reproduced correctly. U.S. Patent 4,500,919 
describes one way of performing such a transformation. A 
common approach to color calibration is to introduce a 
device independent color space (DICS) such as CIELAB or 
(L*a*b*) or CIELUV (L*u*v*) or CIEXYZ between two DDCSs. The relationship between a DDCS and a DICS can be 
established by a 3D→3D look-up table (LUT), which may be 
conventionally obtained by measuring a number of color 
patches generated from the specific device. For 
convenience, the code values of these color patches are 
usually chosen to be lattice points spanning the full range 
of the DDCS, while their corresponding points in the DICS 
may be distributed
</DESCRIPTION>
<CLAIMS>
A method of mapping signals of a first 
coordinate system to signals of a second coordinate system 

using a known relationship between points within the two 
coordinate systems, comprising: 


(a) determining a permissible signal boundary in the 
first coordinate system from a permissible signal range in 

the first coordinate system; 
(b) determining whether a first signal in the first 
coordinate system is within the permissible signal 

boundary; 
(c) converting the first signal into a second signal 
in the second coordinate system using the known 

relationship when the first signal is within the 
permissible signal boundary; and 
(d) changing the first signal into a third signal 
within or on the boundary when the first signal is outside 

the boundary and converting the third signal into the 
second signal using the known relationship. 
A method of mapping color signals from a 
device independent color space to a device dependent color 

space using a look-up table having lattice signals in the 
device dependent color space and irregularly spaced 

corresponding signals in the device independent color 
space, comprising: 


(a) creating a gamut boundary from a device color 
gamut in the device independent color space; 
(b) determining whether an independent space color 
signal in the device independent space is within the gamut 

using the gamut boundary descriptor; 
(c) interpolating the color signal using the look-up 
table to obtain a corresponding dependent space color 

signal in the device dependent color space when the 
independent space color signal is in the gamut; and 
(d) determining an in-gamut color signal in the 
device independent color space when the independent space 

color signal is outside the gamut and using the in-gamut 
 

color signal and the gamut boundary to interpolate to 
obtain the corresponding dependent space color signal in 

the device dependent color space. 
A method of creating an inverse look-up 
table using a look-up table having lattice color signals in 

a device dependent color space and corresponding output 
signals in a device independent color space, comprising: 


(a) producing a gamut boundary descriptor describing 
a gamut boundary in the device independent color space for 

a gamut in the device independent color space; 
(b) determining whether a lattice color signal in the 
device independent color space is inside the gamut 

boundary; 
(c) interpolating the lattice color signal to obtain 
a corresponding color signal in the device dependent color 

space using the look-up table when the lattice color signal 
is within the boundary; 
(d) determining an in-gamut color signal in the 
device independent space when the lattice color signal is 

outside the gamut boundary and interpolating the in-gamut 
color signal using the gamut boundary to get the 

corresponding color signal in the device dependent color 
space; and 
(f) storing the lattice color signal and the 
corresponding color signal in the inverse look-up table. 
A method as recited in claim 3, wherein step 
(a) comprises: 


(a1) designating planes of lattice color signals in 
the device independent color space; 
(a2) selecting angles for gamut boundary signals 
within each plane; and 
(a3) determining a gamut boundary signal along each 
angle and a corresponding device dependent space signal in 

the device dependent space using the look-up table. 
A method as recited in claim 4, wherein the 
planes and angles create a uniform distribution of boundary 

signals. 
A method as recited in claim 4, wherein step 
(c) comprises: 


(c1) determining an angle to the lattice color 
signal; 
(c2) determining the gamut boundary signals on either 
side of the angle; 
(c3) determining an intersection boundary signal 
along the angle by determining an intersection of a line 

along the angle to the lattice color signal and a line 
between the gamut boundary signals on either side of the 

angle; and 
(c4) comparing distances to the intersection boundary 
point and to the lattice color signal where the lattice 

color signal is within the gamut boundary when the distance 
of the lattice color signal is less than the distance of 

the intersection boundary signal. 
A method of transforming color values, 
comprising: 


(a) determining a range of output color signals in a 
device independent color space of a look-up table used for 

converting from device dependent signals to device 
independent signals; 
(b) producing a gamut descriptor having a gamut 
boundary in a device independent color space for a gamut in 

a device independent color space; 
(c) determining whether a lattice color signal in the 
device independent color space is within the boundary; 
(d) interpolating the lattice color signal to obtain 
a corresponding color signal in the device dependent color 

space using output values of the look-up table when the 
lattice color signal is within the boundary; 
(e) determining an in-gamut color signal in the 
device independent space when the lattice color signal is 

outside the boundary and interpolating the in-gamut color 
signal using the boundary to get the corresponding color 

signal in the device dependent color space; 
(f) storing the lattice color signal and the 
 

corresponding color signal in an inverse look-up table; and 
(g) using the inverse look-up table to transform the 
color values by forward interpolation. 
A method of mapping, comprising: 

(a) creating a gamut descriptor in a first space 

responsive to a gamut in the first space; 
(b) determining whether a signal in the first space 
is in the gamut responsive to the gamut descriptor; 
(c) clipping the signal to the gamut if not in the 
gamut; and 
(d) converting the signal from the first space to the 
second space. 
A method, comprising the steps of: 

(a) creating a gamut descriptor from a gamut; and 
(b) determining whether a signal is in the gamut 
using the gamut descriptor. 
An apparatus for mapping, comprising: 
   means for creating a gamut descriptor in a device 

independent color space from a device gamut in the device 
independent color space; 

   means for determining whether a first signal in the 
device independent color space is within the gamut using 

the gamut descriptor; 
   means for interpolating using the first signal to 

obtain a corresponding signal in the device dependent color 
space when the first signal is in the gamut; and 

   means for determining an in-gamut signal corresponding 
to the first signal using the gamut descriptor and. 

interpolating using the in-gamut signal to obtain the 
corresponding signal when the first signal is outside the 

gamut. 
</CLAIMS>
</TEXT>
</DOC>
