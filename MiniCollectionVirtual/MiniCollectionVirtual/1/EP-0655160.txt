<DOC>
<DOCNO>EP-0655160</DOCNO> 
<TEXT>
<INVENTION-TITLE>
TRANSMISSION ERROR CONCEALMENT
</INVENTION-TITLE>
<CLASSIFICATIONS>G10L2104	H04L100	G10L1900	G10L1100	G10L1300	H04B110	G10L2100	G10L1102	H04B110	H04L100	G10L1300	G10L1900	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>G10L	H04L	G10L	G10L	G10L	H04B	G10L	G10L	H04B	H04L	G10L	G10L	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>G10L21	H04L1	G10L19	G10L11	G10L13	H04B1	G10L21	G10L11	H04B1	H04L1	G10L13	G10L19	</CLASSIFICATIONS-FOURTH>
<ABSTRACT>
A receiver in a frame based radio communication system includes a speech decoder of the source-filter type which is controlled by means (20, 22, 24) including internal state variables updated on a frame by frame basis for modifying received filter parameters representing background sounds transmitted over a communication channel. The receiver includes means (12, 13, 14) for detecting frames containing transmission errors, means (16) for deciding whether a frame in which transmission errors have been detected is acceptable, and means (18) for concealing the detected transmission errors by restricting updating of at least one of the internal state variables if the detected frame is declared non-acceptable by the deciding means.
</ABSTRACT>
<APPLICANTS>
<APPLICANT-NAME>
ERICSSON TELEFON AB L M
</APPLICANT-NAME>
<APPLICANT-NAME>
TELEFONAKTIEBOLAGET LM ERICSSON
</APPLICANT-NAME>
</APPLICANTS>
<INVENTORS>
<INVENTOR-NAME>
BERGSTROEM ROLF ANDERS
</INVENTOR-NAME>
<INVENTOR-NAME>
WIGREN KARL TORBJOERN
</INVENTOR-NAME>
<INVENTOR-NAME>
BERGSTROEM, ROLF, ANDERS
</INVENTOR-NAME>
<INVENTOR-NAME>
WIGREN, KARL, TORBJOERN
</INVENTOR-NAME>
</INVENTORS>
<DESCRIPTION>
The present invention relates to transmission error concealment
in a radio communication system, and specifically to an apparatus
and a method for improving decoding of background sounds in such
a system.Means for improving encoding/decoding of background sounds,
primarily intended for digital cellular telephone systems, have
been described in Swedish Patent Applications 93 00290-5 and
93 01798-6. These means are primarily designed to handle a
situation where the connection between the speech encoder and the
speech decoder is close to ideal, in the sense that only a small
amount of bit or transmission errors remain after channel
decoding. However, since the connection is a radio channel the
received signal may contain some bit or transmission errors. In
such a case it may be necessary to modify the methods described
in the above Swedish patent applications.EP-A-0 275 751 describes a system in which speech
parameters of a previous frame are used if the
received frame contains too many bit errors.An object of the present invention is an apparatus and a method
in which so called error concealment is applied to the received
signal in order to make the speech decoding more robust or
insensitive to transmission errors.This object is solved in accordance with the enclosed claims. The invention, together with further objects and advantages 
thereof, may best be understood by making reference to the
following description taken together with the accompanying
drawing, which is a schematic block diagram of the relevant parts
of a receiver in a radio communication system containing an apparatus
in accordance with the present invention.To understand the operation of the invention it is useful to
briefly review the operation of a typical digital cellular radio
connection, typical error concealment techniques, and also to
review the algorithms of the above mentioned Swedish patent
applications.In a communication link of a digital cellular telephone system
the acoustic signal is first digitized and then a speech coding
algorithm is applied (see for example B.S. Atal, V. Cuperman and
A. Gersho, eds, "Advances in Speech Coding", Kluwer Academic
Publishers, 1991). This algorithm compresses the speech signal
and transforms it to a number of quantized parameters (usually in
a frame based manner). The resulting bits are thereafter
protected by addition of coding redundancy, using channel
encoding techniques (see for example G.C. Clerk and J.B. Cain,
"Error Correction Coding for Digital Communication", Plenum
Press, 1981). The
</DESCRIPTION>
<CLAIMS>
A frame based radio communication system comprising a receiver
comprising an apparatus for concealing transmission errors in a speech

decoder (26) caused by the communication channel, which speech decoder is of
the source-filter type, and which apparatus comprises


means (20, 22, 24) for controlling said decoder, said means including internal state
variables updated on a frame by frame basis for modifying received filter

parameters representing background sounds transmitted over said communication channel;
means (12, 13, 14) for detecting frames containing transmission errors;
means (16) for deciding whether a frame in which transmission errors have
been detected is acceptable;
means (18) for concealing said detected transmission errors by restricting
updating of at least one of said internal state variables if said detected frame is

declared non-acceptable by said deciding means, said apparatus being
characterized by:
a voice activity detector (20) controlling filter parameter modifying
means (24), said voice activity detector comprising at least a threshold for

speech/background sound decisions, said concealing means (18) restricting
updating of said threshold if said detected frame is declared non-acceptable by

said deciding means (16).
A frame based radio communication system comprising a receiver
comprising an apparatus for concealing transmission errors in a speech

decoder (26) caused by the communication channel, which speech decoder is of
the source-filter type, and which apparatus comprises


means (20, 22, 24) for controlling said decoder, said means including internal state
variables updated on a frame by frame basis for modifying received filter

parameters representing background sounds transmitted over said communication channel;
means (12, 13, 14) for detecting frames containing transmission errors;
means (16) for deciding whether a frame in which transmission errors have
been detected is acceptable; 
means (18) for concealing said detected transmission errors by restricting
updating of at least one of said internal state variables if said detected frame is

declared non-acceptable by said deciding means, said apparatus being
characterized by:
a voice activity detector (20) for performing speech/background sound
decisions on a frame by frame basis, said concealing means (18) inhibiting

updating of the speech/background sound decision obtained from the
previous frame if said detected frame is declared non-acceptable by said deciding

means (16).
The system of claim 1 or 2, characterized by said apparatus further
including a stationarity detector (22) connected to an output of said voice

activity detector (20) for discriminating between stationary and non-stationary
background sounds, said stationarity detector including at least one buffer

containing estimates of statistical moments of recent frames dominated by
background sounds for making stationarity decisions, said concealing means

restricting updating of said buffer if said detected frame is declared non-acceptable
by said deciding means (16).
The system of claim 1 or 2, characterized by said apparatus further
including a stationarity detector (22) connected to an output of said voice

activity detector (20) for discriminating between stationary and non-stationary
background sounds, said concealing means (18) inhibiting updating of the

stationarity/non-stationarity decision obtained from the previous frame if said
detected frame is declared non-acceptable by said deciding means (16).
The system of claim 1, 2, 3, or 4, characterized by said filter parameter
modifying means including means (24) for low pass filtering of the filter

parameters, said concealing means (18) restricting updating of filter
coefficients of the low pass filtering process if said detected frame is declared

non-acceptable by said deciding means (16). 
The system of claim 1, 2, 3, 4, or 5, characterized by said filter
parameter modifying means including means (24) for bandwidth expansion of

the filter represented by the filter parameters, said concealing means (18)
restricting updating of filter coefficients if said detected frame is declared non-acceptable

by said deciding means (16).
The system of claim 5 or 6, characterized by a post filter for modifying
the tilt of the spectrum of the decoded signal, said concealing means (18)

restricting updating of tilt information if said detected frame is declared non-acceptable
by said deciding means (16).
A transmission error concealment method for a frame based radio communication system comprising a receiver
comprising an apparatus for concealing transmission errors in a speech

decoder (26) caused by the communication channel, which speech decoder is of
the source-filter type, and which apparatus comprises means (20, 22, 24) for controlling

said decoder, said means including internal state variables updated on a
frame by frame basis for modifying received filter parameters representing background sounds transmitted over said communication channel,

which method includes the steps of:

detecting frames containing transmission errors;
deciding whether a frame in which transmission errors have been detected
is acceptable;
concealing said detected transmission errors by restricting updating of at
least one of said internal state variables if said detected frame is declared non-acceptable

in said deciding step, said method being characterized by
restricting, if said detected frame is declared non-acceptable in said
deciding step, updating of at least one threshold for speech/background

sound decisions in a voice activity detector (20) included in said apparatus and
controlling filter parameter modifying means (24).
A transmission error concealment method for a frame based radio communication system comprising a receiver
comprising an apparatus for concealing transmission errors in a speech

decoder (26) caused by the communication channel, which speech decoder is of 
the source-filter type, and which apparatus comprises means (20, 22, 24) for controlling

said decoder, said means including internal state variables updated on a
frame by frame basis for modifying received filter parameters representing background sounds transmitted over said communication channel,

which method includes the steps of:

detecting frames containing transmission errors;
deciding whether a frame in which transmission errors have been detected
is acceptable;
concealing said detected transmission errors by restricting updating of at
least one of said internal state variables if said detected frame is declared non-acceptable

in said deciding step, said method being characterized by
inhibiting, if said detected frame is declared non-acceptable in said deciding
step, updating of a speech/background sound decision of a previous

frame, said speech/background sound decision being obtained from a voice
activity detector (20) included in said apparatus for performing speech/background

sound decisions on a frame by frame basis.
The method of claim 8 or 9, said apparatus further including a stationarity
detector (22) connected to an output of said voice activity detector (20) for

discriminating between stationary and non-stationary background sounds,
said stationarity detector including at least one buffer containing estimates of

statistical moments of recent frames dominated by background sounds for
making stationarity decisions, characterized by said concealing step

comprising restricting updating of said buffer if said detected frame is declared
non-acceptable in said deciding step.
The method of claim 8 or 9, said apparatus further including a stationarity
detector (22) connected to an output of said voice activity detector (20) for

discriminating between stationary and non-stationary background sounds,
characterized by said concealing step comprising inhibiting updating of the

stationarity/non-stationarity decision obtained from the previous frame if said
detected frame is declared non-acceptable in said deciding step. 
The method of claim 8, 9, 10, or 11, said filter parameter modifying means (24)
including means for low pass filtering of the filter parameters, characterized by

restricting updating of filter coefficients of the low pass filtering process if said
detected frame is declared non-acceptable in said deciding step.
The method of claim 8, 9, 10, 11, or 12, said filter parameter modifying
means (24) including means for bandwidth expansion of the filter represented by

these parameters, characterized by restricting updating of filter coefficients if
said detected frame is declared non-acceptable in said deciding step.
The method of claim 12 or 13, wherein the tilt of the spectrum of the
decoded signal is modified by a post filter, characterized by restricting

updating of tilt information if said detected frame is declared non-acceptable
in said deciding step.
</CLAIMS>
</TEXT>
</DOC>
