<DOC>
<DOCNO>EP-0612030</DOCNO> 
<TEXT>
<INVENTION-TITLE>
Image processing
</INVENTION-TITLE>
<CLASSIFICATIONS>G06T1510	G06T1740	G06T760	G06T1540	G06T760	G06T1740	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>G06T	G06T	G06T	G06T	G06T	G06T	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>G06T15	G06T17	G06T7	G06T15	G06T7	G06T17	</CLASSIFICATIONS-FOURTH>
<ABSTRACT>
Polygons defined in three-dimensional space are 
processed in order to facilitate subsequent manipulation. 

A first polygon is tested against a second polygon to 
identify a part of one of said polygons which may have 

a particular relationship. Thereafter, a second test is 
performed with reference to said polygon part. 
When producing rendering order lists, trees or 
directed graphs, a current favourite polygon (for placing 

on a list, tree or graph) is tested against a candidate 
polygon to determine whether said candidate polygon may 

be occluded by the favourite polygon. In performing this 
test a fragment of the favourite polygon may be 

identified which may occlude the current favourite and 
a fragment of the current favourite may be identified, 

as that which may be occluded by the current favourite. 
Thereafter, a second test is performed with reference to 

said favourite fragment and said candidate fragment. 

</ABSTRACT>
<APPLICANTS>
<APPLICANT-NAME>
CANON KK
</APPLICANT-NAME>
<APPLICANT-NAME>
CANON KABUSHIKI KAISHA
</APPLICANT-NAME>
</APPLICANTS>
<INVENTORS>
<INVENTOR-NAME>
OTTO GERHARDT PAUL
</INVENTOR-NAME>
<INVENTOR-NAME>
OTTO, GERHARDT PAUL
</INVENTOR-NAME>
</INVENTORS>
<DESCRIPTION>
The present invention relates to a method and
apparatus for image processing. In particular, the
present invention relates to a method and apparatus for
processing data representing the position of surface
primitives such as polygons in three-dimensional space,
for example to produce an ordered list for rendering
views of said primitives in two-dimensional space.In an interactive three-dimensional graphics system,
such as a system of the type disclosed in the Applicant's
copending European Patent Publication No. EP-A-0531157
(not published at the first claimed priority date), data
representing polygons is manipulated in three-dimensional
space interactively, in response to input commands from
an operator. Two-dimensional images are presented to an
operator at a rate sufficient to maintain a closed
feedback loop between the operator and the virtual three-dimensional
environment.A two-dimensional image is generated by rendering the
three-dimensional image data onto a two-dimensional
plane. For each view, "hidden surface removal" can be
performed by ensuring that primitives which occlude other
primitives are rendered into the two-dimensional plane
either instead of the primitives which they occlude or
at least after said occluded polygons. Often the 
occlusions are partial, therefore it is preferable to
render occluded polygons prior to rendering the occluding
polygons. In addition, totally invisible primitives may
be culled and do not require further consideration during
the rendering process. Thus, it can be appreciated that
a very important aspect of the rendering process involves
ensuring that the primitives are rendered in the correct
order. However, determining the correct order for
rendering, repeatedly for each iteration, would account
for a considerable proportion of the available processing
time.A system for producing rendering order lists is
disclosed in the aforesaid copending European Patent
Publication, in which said lists are produced as a pre-process,
using a topological sort, prior to interactive
operation. If necessary, a plurality of view
orientations are selected and a rendering order list is
produced for each of these views. During interactive
operation, one of these rendering order lists is selected
by comparing the actual view orientation with the preprocessed
orientations, to determine which is the closest
fit. Thus, the computational overhead required during
interactive operation is reduced significantly.The invention provides a method of processing data
defining surface primitives
</DESCRIPTION>
<CLAIMS>
A method of processing data defining surface
primitives in three-dimensional space, to determine a

rendering order in which a first planar primitive and a
second planar primitive may be rendered so as to effect

hidden surface removal, the method comprising the steps
of:


processing the data to perform a first test of
determining whether any part of the second primitive is

behind the plane of the first primitive (183) and whether any
part of the first primitive is in front of the plane of

the second primitive (185), thereby to obtain either a positive
result (195) indicating that the first primitive can be

rendered before the second primitive, or a negative
result (194) indicating that it may not be possible to render

the first primitive before the second primitive; and
in the case of a negative result in the first test:

identifying (184) the part of the second primitive which
is behind the plane of the first primitive and (186) the

part of the first primitive which is in front of
the plane of the second primitive; and
processing (187-191) the data to perform a second test of
determining (190) whether the nearest point of the part

of the first primitive is further in a
predetermined direction than the furthest point of

the part of the second primitive, thereby to 
obtain either a positive result (195) indicating that

the first primitive in its entirety can be rendered
before the second primitive, in spite of the

negative result obtained in the first test or
a negative result (192-194) indicating again that it may not

be possible to render the first primitive before
the second primitive.
A method according to any preceding claim, wherein

at least one of the first and second tests is performed
with reference to a set of viewing directions in a

viewing direction space.
A method according to claim 2, wherein the set of
receiving directions is defined by bounding planes (45,

46, 47).
A method according to claim 3, wherein the
predetermined direction in the second test is a direction

normal to a bounding plane.
A method according to any preceding claim, further
comprising the step of generating a signal conveying the

determined rendering order.
A method according to claim 5, further comprising
the step of recording the signal. 
A method according to any preceding claim, further
comprising the step of rendering the first and second

primitives in accordance with the determined rendering
order to generate rendered image data.
A method according to claim 7, further comprising
the step of generating a signal conveying the rendered

image data.
A method according to claim 8, further comprising
the step of recording the signal.
Apparatus (315) for processing data defining surface
primitives in three-dimensional space to determine a

rendering order in which a first planar primitive and a
second planar primitive may be rendered so as to effect

hidden surface removal, the apparatus comprising:

first processing means for processing the data to
perform a first test of determining whether any part of

the second primitive is behind the plane of the first
primitive (183) and whether any part of the first primitive is

in front of the plane of the second primitive (185), thereby
to obtain either a positive result (195) indicating that the

first primitive can be rendered before the second
primitive, or a negative result (194) indicating that it may

not be possible to render the first primitive before the
second primitive; and 
second processing means for processing the data in
the case of a negative result in the first test to:


identify (184) the part of the second primitive which
is behind the plane of the first primitive and (186) the part

of the first primitive which is in front of the plane of
the second primitive; and
process (187-191) the data to perform a second test of
determining (190) whether the nearest point of the part of the

first primitive is further in a predetermined direction
than the furthest point of the part of the second

primitive, thereby to obtain either a positive result (195)
indicating that the first primitive in its entirety can

be rendered before the second primitive, in spite of the
negative result obtained in the first test, or a

negative result (192-194) indicating again that it may not be
possible to render the first primitive before the second

primitive.
Apparatus according to claim 10, wherein the
apparatus is arranged to process the data to perform at

least one of the first and second tests with reference
to a set of viewing directions in a viewing direction

space.
Apparatus according to claim 11, wherein the set of
viewing directions is defined by bounding planes (45, 46,

47). 
Apparatus according to claim 12, wherein the
predetermined direction in the second test is a direction

normal to a bounding plane.
A storage medium (319, 320) storing instructions for
causing a programmable processing apparatus to become

operable to carry out the method of any of claims 1 to
9.
A storage medium (319, 320) storing instructions for
causing a programmable processing apparatus to become

arranged as an apparatus according to any of claims 10
to 13.
A signal conveying instructions for causing a
programmable processing apparatus to become operable to

carry out the method of any one of claims 1 to 9.
A signal conveying instructions for causing a
programmable processing apparatus to become arranged as

an apparatus according to any of claims 10 to 13.
</CLAIMS>
</TEXT>
</DOC>
