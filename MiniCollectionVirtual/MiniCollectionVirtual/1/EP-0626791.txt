<DOC>
<DOCNO>EP-0626791</DOCNO> 
<TEXT>
<INVENTION-TITLE>
Motion vector detection apparatus for moving pictures
</INVENTION-TITLE>
<CLASSIFICATIONS>H04N736	H04N726	H04N736	H04N726	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>H04N	H04N	H04N	H04N	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>H04N7	H04N7	H04N7	H04N7	</CLASSIFICATIONS-FOURTH>
<ABSTRACT>
A motion vector detection apparatus for a moving 
picture which can detect a motion vector of a half pel 

accuracy at a high speed by pipeline processing. The 
motion vector detection apparatus comprises a buffer 

memory (4) for storing peldata of a search area within a 
reference frame required for detection of a motion 

vector, another buffer memory (3) for storing pel data 
of an object block for motion vector detection, a half 

pel interpolation circuit (2) for interpolating half 
pels horizontally and vertically into the data stored in 

the first buffer memory (4), a motion vector detection 
circuit (1) for performing block matching between pel 

data of a search area outputted from the pel 
interpolation circuit (2) and the pel data stored in the 

second buffer memory (3) and outputting a sum total of 
absolute values of differences between the individual 

pels for a plurality of candidate vectors, and a minimum 
value detector (5) for detecting a minimum value of the 

output of the motion vector detection circuit (1) and 
outputting the value of the candidate vector 

corresponding to the minimum value as a motion vector. 

</ABSTRACT>
<APPLICANTS>
<APPLICANT-NAME>
NIPPON ELECTRIC CO
</APPLICANT-NAME>
<APPLICANT-NAME>
NEC CORPORATION
</APPLICANT-NAME>
</APPLICANTS>
<INVENTORS>
<INVENTOR-NAME>
HOMMA HIDEKI
</INVENTOR-NAME>
<INVENTOR-NAME>
HOMMA, HIDEKI
</INVENTOR-NAME>
</INVENTORS>
<DESCRIPTION>
This invention relates to an apparatus for
detecting a motion vector of a moving picture.Motion compensation inter-frame prediction is
employed very frequently for high efficiency coding of a
moving picture. For example, also in the International
Standardization Organization ISO-IEC JTC1/SC2/WG11
(hereinafter referred to as MPEG), motion compensation
inter-frame prediction is employed as an international
standardization system, and for motion compensation,
pels (picture elements) are divided into a plurality of
blocks and motion compensation processing is performed
in units of a block. The motion compensation processing
is employed also in the international standardization
system H.261 for moving picture coding for visual
telephones. Further, motion compensation in units of a
block is generally based on detection of a motion vector
by block matching. In the international standardization system
H.261, a motion vector is detected by an accuracy of one
pel (picture element), and one of processors which can
be utilized for such motion vector detection is, for
example, STI3220 by SGS-THOMSON. Operation of the
processor for such motion vector detection with block
matching is described in Video Information Magazine,
June 1991, pp.83-89 or in "IMAGE PROCESSING DATA BOOK
2nd EDITION", SGS-THOMSON Microelectronics.In the MPEG, improvement in coding efficiency is
achieved particularly by raising the accuracy of a
motion vector to be used for motion compensation to an
accuracy of a half pel.When it is tried to construct a motion vector
detection apparatus conforming to the MPEG system, since
the calculation processing amount and the memory
capacity required for motion vector detection processing
have exhibited a remarkable increase comparing with
those of the international standardization system H.261
in terms of the detection range and the detection
accuracy, improvement for remarkable reduction of the
calculation amount is required. One of methods for
simplification of motion vector detection is reduction
of candidate vectors by a multi-stage searching method. 
Such method is described in Japanese Patent Laid-Open
Application No. Heisei 5-49023 (Japanese Patent
Application No. Heisei 3-199614) which is a prior
application of the assignee of the present invention in
Japan. In the document, motion vector searching is
performed such that motion vector searching in an
accuracy of up to two pels is performed from the first
stage to the K-lth stage and motion vector searching of
another accuracy of one pel or less is
</DESCRIPTION>
<CLAIMS>
A motion vector detection apparatus for a
moving picture wherein each picture frame of a moving

picture composed of a plurality of successive frames is
divided into a plurality of blocks each including a

plurality of pels and the matching degree between an
image of an individual block of a frame and a reference

frame different from the frame to which the block
belongs is calculated to estimate a motion vector of the

moving picture, comprising:

a first storage circuit (4) for storing data of
pels of a search area within the reference frame

required for detection of a motion vector;
a second storage circuit (3) for storing data of
pels of an object block for motion vector detection;
a half pel interpolation circuit (2) for
interpolating half pels horizontally and vertically into

the data of pels stored in said first storage circuit
(4);
a motion vector detection circuit (1) for
performing block matching between pel data of

a set of reference picture
elements in the reference frame produced by the half

picture element interpolation and corresponding to
a motion vector in an accuracy of a half picture

element after interpolation outputted from said pel
interpolation circuit (2) and the data of pels of the

object area for motion vector detection stored in said  
second storage circuit (3) and outputting a sum total of

absolute values of differences between the individual
pels for a plurality of candidate vectors; and
a minimum value detector (5) for detecting a
minimum value of the output of said motion vector

detection circuit (1) and outputting the value of one of
the candidate vectors which corresponds to the minimum

value as a motion vector;

wherein said motion vector detection circuit (1) includes

M processor elements (10) for accumulating
absolute values of differences between individual two

adjacent ones of M pels in one row or column of the
object block for motion vector detection;
M-1 first one-data registers (11) for delaying a
pel;
2x(N-M) second registers (11') for delaying a
pel, N being the number of pels in one row or column of

a search area;
M first selectors (12) provided for the
individual processor elements (10) each for selecting

one data from within output data of said half pel
interpolation circuit (2) which interpolates a half pel 

in horizontal and vertical directions and has 2x(N-M)+1
output ports which is equal to the number of candidate

vectors in the vertical or horizontal direction; and
a single second selector (13) for selecting an
initial value of the accumulated values of said

processor elements (10);
each of said first selectors (12) supplying its
selected data as search area pel data to one of said

processor elements (10);
said processor elements (10) and said first
registers (11) being arranged alternately in series

while said 2x(N-M) second registers (11') are arranged
in series subsequently to the last one of said processor

elements (10) and the output of one of said second
registers (11') at the last stage is connected to an

input of said second selector (13) so that a motion
vector of an accuracy of a half pel is detected.
</CLAIMS>
</TEXT>
</DOC>
