<DOC>
<DOCNO>EP-0929190</DOCNO> 
<TEXT>
<INVENTION-TITLE>
Method and apparatus for correcting luminance and chrominance data in digital color images
</INVENTION-TITLE>
<CLASSIFICATIONS>H04N164	H04N146	H04N146	H04N160	G06T100	H04N164	H04N160	G06T100	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>H04N	H04N	H04N	H04N	G06T	H04N	H04N	G06T	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>H04N1	H04N1	H04N1	H04N1	G06T1	H04N1	H04N1	G06T1	</CLASSIFICATIONS-FOURTH>
<ABSTRACT>
The present invention is directed to a method and apparatus for improving the efficiency of
color correcting subsampled luminance and chrominance based data. More specifically, the present

invention is directed to a method of applying a full conversion between color spaces for one pixel in a
selected pixel block. Chrominance values are assigned to the remaining pixels based upon their

luminance values relative to the luminance value of the converted pixel. The invention may be used to
convert between various types of color spaces, and may be used in the processing of both device

dependent and device independent data.

</ABSTRACT>
<APPLICANTS>
<APPLICANT-NAME>
XEROX CORP
</APPLICANT-NAME>
<APPLICANT-NAME>
XEROX CORPORATION
</APPLICANT-NAME>
</APPLICANTS>
<INVENTORS>
<INVENTOR-NAME>
BALASUBRAMANIAN THYAGARAJAN
</INVENTOR-NAME>
<INVENTOR-NAME>
KLASSEN VICTOR R
</INVENTOR-NAME>
<INVENTOR-NAME>
BALASUBRAMANIAN, THYAGARAJAN
</INVENTOR-NAME>
<INVENTOR-NAME>
KLASSEN, VICTOR R.
</INVENTOR-NAME>
</INVENTORS>
<DESCRIPTION>
The present invention is directed to a method of improving the efficiency of color correcting full resolution, averaged or subsampled luminance and chrominance based data. More specifically, the present invention is directed to a method of reducing the amount of data that is required to accurately describe a digital color image, and the processing resources required to color correct that data.Data reduction is required in data handling processes, where too much data is present for practical applications using the data. Generally speaking, digital images - images that have been discretized in both spatial coordinates and in brightness levels such as those acquired by scanning - are often large, and thus make desirable candidates for at least one form of data reduction. These digital images do not typically change very much on a pixel to pixel basis and have what is known as "natural spatial correlation." For example in a digital color image, it is commonly known that the required spatial resolution for chrominance data is less than the spatial resolution for luminance data. The natural spatial correlation enables reducing not only the digital image data, but the resources required by certain image processing operations on the reduced data.Digital color images may be described in terms of the chrominance and luminance values for each pixel contained therein. It is obviously desired to reproduce color images such that the colors in the copy exactly, or at least closely match the corresponding colors in the original image. Since image input and output devices are often quite different, reproducing an accurate color image often requires some form of color correction to be applied to the chrominance and luminance data before it is output. Color correction in digital images for a printing device is an image processing operation which may include a correction from 3-D device independent color space (e.g., YCrCb, RGB, XYZ, or L*a*b*) to a 3-D device dependent color space; and then a conversion to CMYK comprising under-color removal (UCR), gray-component replacement (GCR) and linearization processes.The time required for color conversions such as those described above is directly proportional to the amount of data to which it is applied. Thus, it is desirable in many applications to employ some form of data reduction in order to facilitate rapid image processing. In addition to compression, subsampling schemes are used in scanners, digital copiers or other devices that are used to reproduce, store or process
</DESCRIPTION>
<CLAIMS>
A method of correcting device independent luminance and chrominance data in a digital color image, comprising the steps of:

a) providing (302) device independent color image signals to a plurality of channels in a device independent color space, said device independent color image signals being subsampled and corresponding to color signals;
b) deriving (304) a set of device independent master signals from said device independent color image signals, said device independent master signal set including a signal from each of said channels and wherein the device independent color image signals have been subsampled and are received at three channels, a first channel L receives luminance signals at a luminance channel resolution, a second channel Cr receives red-green chrominance signals at a red-green chrominance channel resolution, and a third channel Cb receives blue-yellow chrominance signals at a blue-yellow chrominance channel resolution and wherein the master signal deriving step further comprises:

i) dividing the digital color image into a plurality of blocks, and further dividing said blocks into a plurality of sub-blocks, wherein each block includes a plurality of signal sets that have a substantially constant blue-yellow resolution, and each sub-block includes a plurality of signal sets that have substantially constant red-green chrominance and blue-yellow resolutions;
ii) selecting a master sub-block; and
iii) choosing a signal set within said master sub-block as said master signal set;
c) mapping said device independent master signal set to an output device dependent master signal set in an output device dependent color space;
d) defining output device dependent color image signals corresponding to a subset of said device independent color signals, wherein the output device dependent signals are created for each signal set in said block according to a luminance signal for each signal set relative to a luminance of said master signal set; and

converting (406) said output device dependent color image signals to output device dependent coordinate signals which correspond to output device colorants,
characterized In that

the red-green chrominance channel resolution being less than the luminance channel resolution and the blue-yellow chrominance channel resolution being less than the red-green chrominance channel resolution.
A method of correcting data as claimed in claim 1 wherein said mapping step further comprises applying a look up table conversion to transform said master signal set from said device independent color space to said output device dependent color space.
A method of correcting data as claimed in claim 2 wherein said output device dependent color space is an RGB space.
A method of correcting data as claimed in claim 3 wherein said creating step further comprises:
a) setting output device dependent signal R
ij
 = (R
m
/L
m
)L
ij
;
b) setting output device dependent signal G
ij
 = (G
m
/L
m
)L
ij
; and
c) setting output device dependent signal B
ij
 = (B
m
/L
m
)L
ij

for each signal set P
ij
 in said block, wherein ij denotes a location of each set within said block, L
ij
 is said luminance signal of signal set P
ij
, R
m
, G
m
, and B
m
 are master signal set output device dependent signals and L
m
 is said master signal set luminance signal.
A method of correcting data as claimed in claim 2 wherein an output device dependent color space is a CMYK color space.
A method of correcting data as claimed in claim 5 wherein said defining step further comprises:

a) setting output device dependent coordinate signal C
ij
 = 1-((1-C
m
)/L
m
)L
ij
;
b) setting output device dependent coordinate signal M
ij
 = 1-((1-M
m
)/L
m
)L
ij
;
c) setting output device dependent coordinate signal Y
ij
 = 1-((1-Y
m
)/L
m
)L
ij
 ; and
d) setting output device dependent coordinate signal K
ij
 = K
m
,

for each signal set P
ij
 in said block, wherein ij denotes a location of each signal set within said block, L
ij
 is said luminance signal of signal set P
ij
, C
m
, M
m
, Y
m
, and K
m
 are master signal set device dependent color image signals and L
m
 is a master signal set luminance signal.
An apparatus for correcting device independent luminance and chrominance data in a digital color image, comprising:
a) means for providing device independent color image signals to a plurality of channels in a device independent color space, said device independent color image signals being subsampled and corresponding to color signals;
b) means for deriving a set of device independent master signals from said device independent color image signals, said device independent master signal set including a signal from each of said channels and wherein the device independent color image signals have been subsampled and are received at three channels, a first channel L receives luminance signals at a luminance channel resolution, a second channel Cr receives red-green chrominance signals at a red-green chrominance channel resolution, and a third channel Cb receives blue-yellow chrominance signals at a blue-yellow chrominance channel resolution and wherein the means for deriving master signals further comprises:

i) means for dividing the digital color image into a plurality of blocks, and further dividing said blocks into a plurality of sub-blocks, wherein each block includes a plurality of signal sets that have a substantially constant blue-yellow resolution, and each sub-block includes a plurality of signal sets that have substantially constant red-green chrominance and blue-yellow resolutions;
ii) means for selecting a master sub-block; and
iii) means for choosing a signal set within said master sub-block as said master signal set;
c) means for mapping said device independent master signal set to an output device dependent master signal set in an output device dependent color space;
d) means for defining output device dependent color image signals corresponding to a subset of said device independent color signals, wherein the output device dependent signals are created for each signal set in said block according to a luminance signal for each signal set relative to a luminance of said master signal set; and
e) means for converting said output device dependent color image signals to output device dependent coordinate signals which correspond to output device colorants,
characterized in that

the red-green chrominance channel resolution being less than the luminance channel resolution and the blue-yellow chrominance channel resolution being less than the red-green chrominance channel resolution.
</CLAIMS>
</TEXT>
</DOC>
