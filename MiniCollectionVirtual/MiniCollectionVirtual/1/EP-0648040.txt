<DOC>
<DOCNO>EP-0648040</DOCNO> 
<TEXT>
<INVENTION-TITLE>
Image-dependent exposure enhancement
</INVENTION-TITLE>
<CLASSIFICATIONS>G06T500	G03G1501	H04N152	G03G1501	G06T500	H04N1407	H04N1407	H04N152	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>G06T	G03G	H04N	G03G	G06T	H04N	H04N	H04N	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>G06T5	G03G15	H04N1	G03G15	G06T5	H04N1	H04N1	H04N1	</CLASSIFICATIONS-FOURTH>
<APPLICANTS>
<APPLICANT-NAME>
XEROX CORP
</APPLICANT-NAME>
<APPLICANT-NAME>
XEROX CORPORATION
</APPLICANT-NAME>
</APPLICANTS>
<INVENTORS>
<INVENTOR-NAME>
ESCHBACH REINER
</INVENTOR-NAME>
<INVENTOR-NAME>
ESCHBACH, REINER
</INVENTOR-NAME>
</INVENTORS>
<DESCRIPTION>
The present invention is directed towards a method and apparatus for improving the
appearance of a digitally encoded image having a pictorial scene, and more particularly, toward a
method for improving exposure within a digitally encoded image having a pictorial scene.In the past, a typical application for copiers or scan-to-print image processing systems
was to reproduce an input image as accurately as possible, i.e., render a copy. Thus, copies have
been rendered as accurately as possible, flaws and all. However, as customers become more
knowledgeable in their document reproduction requirements, they recognize that an exact copy
is often not what they want. Instead, they would rather obtain the best possible document
output. Until recently, image quality from the output of a copier or a scan-to-print system was
directly related to the input document quality. One very common set of input documents includes
photographs. Unfortunately, photography is an inexact science, particularly among amateurs,
and original photographs are often poor. Alternately, technology, age or image degradation
variations often result in pictures having an unsatisfactory and undesirable appearance. What is
desired then, is a copy giving the best possible picture, and not a copy of the original.One improvement that can be made to an image is to correct the image's use of an
unbalanced distribution of density over the dynamic range of the image. This process is
sometimes characterized as exposure adjustment. Digital input images directed to reproduction
systems come from a variety of input sources such as copiers, slide scanners, flat-bed scanners,
cameras, etc. In many cases, the description of the image will come from an unknown source, or
one that might exhibit certain deficiencies. One common deficiency is that the digital
representation of the image has an unbalanced distribution of density over the range of possible
values, i.e., only covers a limited range of the possible values. This differs from contrast, which
refers to the perception of the dynamic range of the image. Contrast adjustment will change the
perceived contrast of the image, however it will only do a limited improvement on images that
have exposure levels that are commonly described as "too light" or "too dark". In order to correct
these kind of images, exposure and contrast have to be estimated and, when needed, enhanced. A
number of contrast adjustments using the image histogram is known in the art. Histogram
manipulation for the purpose of enhancing the
</DESCRIPTION>
<CLAIMS>
A method of altering the exposure in the reproduction
of an electrically encoded natural scene image, including:


a) receiving an electrically encoded natural scene
image, where the encoding is in terms of colour density

signals;
b) converting the colour density signals to a format
wherein at least one signal I
in
 represents image density and
is defined for L levels of intensity;
c) comparing intensity signals I
light
 and I
dark
 to a pair
of preset threshold signals T
light
, T
dark
 respectively wherein
I
light
 and I
dark
 are the intensity values between which a
predetermined percentage of the image intensity

distribution lies and generating a multi-state signal
responsive to the comparison indicating whether I
light
 and/or
I
dark
 exceed T
light
 and/or T
dark
 respectively;
d) directing the electrically encoded image without
alteration to a subsequent image processor if the signal

state indicates that either I
light
 
>
 T
light
 and I
dark
 
<
 T
dark
,
or I
light
 
<
 T
light
 and I
dark
 
>
 T
dark
;
e) responsive to a signal state indicating that one of
the intensity signals I
light
 or I
dark
 exceeds T
light
 or T
dark

respectively evaluating the function:

γ = 
ln[T
light
/L] 
ln[I
light
/L]

if the signal state indicates that I
light
 
<
 T
light

and I
dark
 
<
 T
dark
, or as

γ = 
ln[T
dark
/L] 
ln[I
dark
/L]

   if the signal state indicates that I
light
 
>
 T
light

and I
dark
 
>
 T
dark
;
f) adjusting the tone reproduction characteristics of
a destination reproduction device by the exponential 

function γ, such that the reproduced intensity I
out
 is given
by I
out
 = I
in
γ
.
A method as claimed in claim 1, wherein the colour
density signals are red-green-blue colour density signals

which are converted to a luminance-chrominance signal
format.
A method as claimed in claim 1 or 2, including the
initial step of sampling the electronic signals at a

resolution less than the resolution of the electronic
signals.
A method as claimed in any one of claims 1 to 3,
wherein I
light
 and I
dark
 represent maximum and minimum values
of the density respectively.
A method as claimed in any one of claims 1 to 4,
wherein prior to adjusting the tone reproduction

characteristics of a destination reproduction device by the
exponential function γ, the value of γ is checked for

validity, and if γ is an invalid value, the closest valid
value of γ is substituted therefor.
A method as claimed in claim 4, wherein prior to the
step of adjusting the tone reproduction characteristics a

further value γ' is obtained by:

subtracting from the signal I
in
 those portions of the signal
in preselected outer bands of intensity to derive a signal I';
comparing intensity signals I
light
' and I
dark
' to a pair
or preset threshold signals T
light
', T
dark
' respectively
wherein I
light
' and I
dark
' are the maximum and minimum
intensity values of the signal I';
responsive to a state signal indicating that either I
light


>
 T
light
 and I
dark
 
<
 T
dark
, or I
light
 
<
 T
light
 and I
dark
 
>
 T
dark
,
evaluating the function: 


γ' = 
ln[T
light
'/L] 
ln[I
light
'/L]

   if the signal state indicates that I
light
 
<
 T
light
 and I
dark


<
 T
dark
 or as

γ' = 
ln[T
dark
'/L] 
ln[I
dark
'/L]

if the signal state indicates that I
light
 
>
 T
light
 and
I
dark
 
>
 T
dark
 and adjusting the tone
reproduction characteristics of a destination reproduction

device by the exponential function α such that the
reproduced intensity l
out
 is given by

I
out
 = I
in
α

wherein α is the average value of γ and γ'.
A method as claimed in claim 6, wherein prior to
adjusting the tone reproduction characteristics of a

destination reproduction device by the exponential function
α, the value of γ is checked for validity, and if γ is an

invalid value, α is set equal to γ'; or wherein prior to
adjusting the tone reproduction characteristics of a

destination reproduction device by the exponential function
α, the value of γ' is checked for validity, and if the

value of γ' is an invalid value, α is set equal to
γ; or wherein prior to adjusting the tone reproduction

characteristics of a destination reproduction device by the
exponential function α, the value of γ' and γ is checked

for validity, and if γ' and γ are invalid value, α is set
equal to a closest valid value of γ.
A method as claimed in any one of claims 1 to 5,
wherein the step of evaluating the function γ

uses the value of I
light
 or I
dark
 as an address to a memory device
to retrieve a stored value of γ. 
An image processing system for preparing a colour
image for printing, and including an exposure adjustment

system altering the exposure in the reproduction of an
electrically encoded natural scene, including:


a) a memory receiving and storing an electrically
encoded natural scene image, where the encoding is in terms

of colour density signals;
b) a colour space conversion circuit, converting the
colour density signals to a signal format

comprising at least one signal which represents image intensity I
and is defined for L levels of intensity;
c) a thresholding circuit, receiving as inputs a pair
of preset threshold signals T
light
, T
dark
, and the intensity
signals I
light
 and I
dark
 wherein I
light
 and
I
dark
 are the intensity values between which a predetermined
percentage of the image intensity distribution lies and

generating a multi-state signal responsive to the
comparison indicating whether I
light
 and/or I
dark
 exceed T
light

and/or T
dark
 respectively;
d) a logic controller, responsive to the state signal,
and controlling transfer of the electronically encoded

natural scene image directly to a subsequent image
processing element if the signal state indicates that

either I
light
 
>
 T
light
 and I
dark
 
<
 T
dark
, or I
light
 
<
 T
light
 and
I
dark
 
>
 T
dark
;
e) a γ calculating circuit evaluating:

γ = 
ln[T
dark
/L] 
ln[I
dark
/L]

if the signal state if the signal state indicates that
I
light
 
>
 T
light
 and I
dark
 
>
 T
dark
, or as 

γ = 
ln[T
light
/L] 
ln[I
light
/L]

if the signal state indicates that I
light
 
<
 T
light

and I
dark
 
<
 T
dark
;
f) means for adjusting the tone reproduction
characteristics of a destination reproduction device by an

exponential function γ, such that such that the reproduced
intensity I
out
 is given by I
out
 = I
in
γ
.
An image processing system for preparing a colour
image for printing as claimed in claim 9, wherein the

memory receiving and storing the electrically encoded image
comprises a page buffer memory, the colour density signals

are red-green-blue colour density signals and wherein the
image intensity signal format is a luminance-chrominance

signal format.
A system as claimed in claims 9 or 10,
including:


a comparator having as an input the value of γ, and
a range of valid values for γ and generating an invalid

signal when γ is outside the valid value range; and
a memory, storing substitute values,
and returning to the tone reproduction characteristic

adjusting means a substitute value of γ upon receiving an
invalid signal.
</CLAIMS>
</TEXT>
</DOC>
