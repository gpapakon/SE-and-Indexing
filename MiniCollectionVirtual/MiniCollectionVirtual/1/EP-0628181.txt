<DOC>
<DOCNO>EP-0628181</DOCNO> 
<TEXT>
<INVENTION-TITLE>
PATTERN RECOGNITION ADAPTIVE CONTROLLER
</INVENTION-TITLE>
<CLASSIFICATIONS>G05B1302	G05B1142	G05B1142	G05B1302	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>G05B	G05B	G05B	G05B	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>G05B13	G05B11	G05B11	G05B13	</CLASSIFICATIONS-FOURTH>
<ABSTRACT>
A pattern recognition adaptive controller (20) configured to dynamically adjust proportional gain and integral time control parameters to minimize integrated absolute errors between a setpoint and a monitored controlled variable. The pattern recognition adaptive controller (20) receives a sampled signal representative of the controlled variable, and determines a smoothed signal based on the sampled signal. The controller (20) characterizes a disturbance in the smoothed signal by a damping factor and a closed loop response time. When a significant load disturbance or setpoint change occurs, the controller (20) estimates an optimal gain based on the damping factor, and an optimal integral time based on the response time. The estimated optimal gain and estimated optimal integral time are used to determining a new gain and a new integral time values, to which the control parameters of the controller (20) are then set.
</ABSTRACT>
<APPLICANTS>
<APPLICANT-NAME>
JOHNSON SERVICE CO
</APPLICANT-NAME>
<APPLICANT-NAME>
JOHNSON SERVICE COMPANY
</APPLICANT-NAME>
</APPLICANTS>
<INVENTORS>
<INVENTOR-NAME>
HAUGSTAD HOWARD J
</INVENTOR-NAME>
<INVENTOR-NAME>
SEEM JOHN E
</INVENTOR-NAME>
<INVENTOR-NAME>
HAUGSTAD, HOWARD
</INVENTOR-NAME>
<INVENTOR-NAME>
SEEM, JOHN, E.
</INVENTOR-NAME>
</INVENTORS>
<DESCRIPTION>
This invention relates to an apparatus and 
method for adjusting the gain and integral time 
parameters of a proportional-integral controller, and 
more specifically to an apparatus and method for 
adjusting the gain and integral time parameters of a 
proportional-integral controller in response to 
patterns in a feedback signal representative of a 
controlled variable. Single-loop feedback controllers 
("controllers") are commonly employed to maintain 
temperature, humidity, pressure, and flow rates for 
heating, ventilating, and air-conditioning equipment. 
For example, in an air conditioning system, a 
controller may be used to control the flow of chilled 
water through a cooling coil. In such a system, the 
controller adjusts the water flow rate based on a 
feedback signal indicative of the temperature of the 
air discharged from the coil (the "controlled 
variable"). The feedback signal is generated by a 
sensor disposed to monitor the controlled variable. The object of such controllers is to control 
the system in such a way as to maintain the controlled 
variable, as sensed by the feedback signal, at a 
desired level (the "setpoint"). For example, the 
controller of an air conditioning system attempts to  
 
maintain the temperature of the air discharged from the 
system at a specific level. When the actual 
temperature of the discharged air deviates from the 
desired temperature, the controller must appropriately 
adjust the flow of the chilled water to bring the 
actual air temperature back in line with the desired 
air temperature. Thus, if the feedback signal 
indicates that the actual air temperature is colder 
than the desired temperature, the controller will cause 
the flow rate of chilled water to decrease, which will 
cause the actual temperature of the discharged air to 
increase. Likewise, if the feedback signal indicates 
that the actual air temperature is warmer than the 
desired temperature, the controller will cause the flow 
rate of chilled water to increase, which will cause the 
actual temperature of the discharged air to decrease. An ideal feedback control system would be 
able to maintain the controlled variable at the 
setpoint based only on the feedback signal. However, 
actual feedback control systems require additional 
inputs known as control parameters. Control parameters 
are values used by a controller to determine how to 
control a system based on the feedback signal and the 
setpoint. One method for controlling a closed loop 
system, known as proportional plus
</DESCRIPTION>
<CLAIMS>
A method of dynamically adjusting the 
control parameters of a proportional gain and integral 

time controller (20) disposed to control an actuator 
(28) affecting a process, characterized by the steps 

of: 

sampling a feedback signal representative of 
a controlled variable of the process to generate a 

sampled signal; 
generating a smoothed signal based on the 
sampled signal; 
determining an estimated noise level of the 
sampled signal; 
determining a tune noise band based on the 
estimated noise level and the smoothed signal; and 
adjusting the gain and integral time values 
used by the controller (20) if either the difference 

between a previous setpoint value and a current 
setpoint value, or the difference between the current 

setpoint value and the smoothed signal, falls outside 
the tune noise band. 
The method of claim 1 further 
characterized in that the step of generating a smoothed 

signal includes determining a smoothed sample value 
based upon fitting a quadratic function through a first 

predetermined number of evenly spaced points, and 
estimating the slope of the sampled signal based upon 

fitting a quadratic function through a second 
predetermined number of evenly spaced points. 
The method of claim 1 further 
characterized in that the step of determining an 

estimated noise level includes determining a current 
noise level based on the difference between the sampled 

signal and the smoothed signal, and determining a long-term  
 

average noise level based on an exponentially 
weighted moving average of the current noise level and 

previously determined noise levels. 
The method of claim 1 further 
characterized in that the tune noise band is determined 

based upon the long-term average noise level and the 
current setpoint value. 
The method of claim 1 further 
characterized in that the step of adjusting the gain 

and integral time values used by the controller (20) is 
characterized by the steps of: 


determining whether a significant setpoint 
change has occurred by comparing the tune noise band to 

the difference between the previous setpoint value and 
the current setpoint value; 
determining whether a significant load 
disturbance has occurred by comparing the tune noise 

band to the difference between the current setpoint 
value and the smoothed signal; 
determining a damping factor based on the 
slope of the smoothed signal; 
determining a closed loop response time based 
on the height of the smoothed signal; 
determining an average disturbance size; 
estimating an optimal gain based on the 
damping factor; 
estimating an optimal integral time based on 
the response time; 
determining a new gain and a new integral 
time based on the estimated optimal gain, the estimated 

optimal integral time, the current gain and integral 
time values used in the controller (20), the signal-to-noise 

ratio of the sampled signal, and the size of the 
current load disturbance or setpoint change relative to 

the average disturbance size; and  
 
setting the gain and integral time of the 
controller (20). to the new gain and the new integral 

time. 
The method of claim 5 further 
characterized by the step of determining whether the 

actuator (28) is saturated. 
An apparatus for dynamically adjusting 
the control parameters of a proportional gain and 

integral time controller (20) disposed to control an 
actuator (28) affecting a process, characterized by: 


an analog to digital converter (40) for 
sampling a feedback signal representative of a 

controlled variable of the process to generate a 
sampled signal; and 
a processor (42) configured to determine an 
estimated noise level of the sampled signal, determine 

a tune noise band based on the estimated noise level 
and the sampled signal, and adjust the gain and 

integral time values used by the controller (20) if the 
difference between a previous setpoint value and a 

current setpoint value falls outside the tune noise 
band. 
The apparatus of claim 7 further 
characterized in that the processor (42) generates a 

smoothed signal based on the sampled signal, determines 
the tune noise band based on the estimated noise level 

and the smoothed signal, and adjusts the gain and 
integral time values used by the controller (20) if the 

difference between the current setpoint value and the 
smoothed signal falls outside the tune noise band.  

 
The apparatus of claim 8 further 
characterized in that the processor (42) generates the 

smoothed signal by determining a smoothed sample value 
based upon fitting a quadratic function through a first 

predetermined number of evenly spaced points, and 
estimating the slope of the sampled signal based upon 

fitting a quadratic function through a second 
predetermined number of evenly spaced points. 
The apparatus of claim 8 further 
characterized in that the process
or (42) determines an 
estimated noise level by determining a current noise 

level based on the difference between the sampled 
signal and the smoothed signal, and determining a long-term 

average noise level based on an exponentially 
weighted moving average of the current noise level and 

previously determined noise levels. 
The apparatus of claim 8 further 
characterized in that the processor (42) determines the 

tune noise band based upon the long-term average noise 
level and the current setpoint value. 
</CLAIMS>
</TEXT>
</DOC>
