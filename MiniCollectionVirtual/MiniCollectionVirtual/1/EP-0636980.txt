<DOC>
<DOCNO>EP-0636980</DOCNO> 
<TEXT>
<INVENTION-TITLE>
Apparatus and method for hibernation file creation.
</INVENTION-TITLE>
<CLASSIFICATIONS>G06F100	G06F100	G06F906	G06F906	G06F9445	G06F9445	G06F1114	G06F1114	G06F1200	G06F1200	G06F1216	G06F1216	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>G06F	G06F	G06F	G06F	G06F	G06F	G06F	G06F	G06F	G06F	G06F	G06F	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>G06F1	G06F1	G06F9	G06F9	G06F9	G06F9	G06F11	G06F11	G06F12	G06F12	G06F12	G06F12	</CLASSIFICATIONS-FOURTH>
<ABSTRACT>
Provided is an apparatus and method for the determination of a logical 
file appropriate to the creation of a hibernation file. 
A file with a predetermined name is created in a logical drive by 
selecting one such logical drive which the OS file system can access and 

which is larger than a predetermined size using an OS file system. The 
fact is then notified to the PM (power management) that said file was 

created (steps 605 through 608). The presence of confirmation that a 
file with a predetermined name was read from the PM code determines 

whether or not the creation of a hibernation file is appropriate at the 
drive (step 609). 


</ABSTRACT>
<APPLICANTS>
<APPLICANT-NAME>
IBM
</APPLICANT-NAME>
<APPLICANT-NAME>
INTERNATIONAL BUSINESS MACHINES CORPORATION
</APPLICANT-NAME>
</APPLICANTS>
<INVENTORS>
<INVENTOR-NAME>
SHIMOTONO SUSUMU
</INVENTOR-NAME>
<INVENTOR-NAME>
SHIMOTONO, SUSUMU
</INVENTOR-NAME>
</INVENTORS>
<DESCRIPTION>
The present invention relates to information processing systems that 
operate with a low power consumption, and more particularly to a 
portable information processing system such as a notebook computer. As a result of recent technological innovation, small-size and light-weight 
portable computers have become common. When such portable 
computers are used outdoors, electric power is supplied to them with 
batteries. However batteries mounted on portable computers are 
restricted to small-size batteries. Thus the period for which personal 
computers can be operated without recharging the batteries is short. 
Consequently various kind of facilities or devices are provided for 
reducing the consumption of power in many portable computers. A suspend/resume function is one of such facilities. When the 
suspend/resume function operates, the computer enters into a suspend 
mode. This may be in response to a situation such as no activity of an 
I/O device being detected for a certain time. In the suspend mode all 
tasks are suspended, and the main memory saves data required later for 
resuming the tasks. In the suspend mode, the main memory and the video 
memory (VRAM) are powered on, but CPU or the like are powered off. 
However, portable computers have a drawback in that the power of 
batteries are consumed when the suspend mode continues for a very long 
time with only the support of the suspend/resume function. This can 
result in the contents of the memory and the VRAM being erased. Therefore portable computers which are supported with hibernation mode, 
such as the LTE Lite/25 manufactured by Compaq Company (Compaq and LTE 
are registered trademarks of Compaq Computer Corporation), have been 
proposed and marketed. When hibernation mode is enabled, the computer 
enters a low battery-use state. Otherwise, when the suspend mode 
continues for a certain time, the computers enter hibernation mode after  
 
saving onto the hard disk all the data required later for resuming the 
task. In hibernation mode, the whole system, including the memory and 
the VRAM, is powered off. When users power on the system later, the 
data stored in the hard disk is restored in the memory and the VRAM and 
the tasks which had been suspended are automatically resumed. The 
series of operation accompanying power-on is also referred to as wake-up. It is necessary to secure in advance a space in a hard disk device for 
saving the content of the main memory and the VRAM. Some of the 
currently known systems secure it on a hard disk
</DESCRIPTION>
<CLAIMS>
A data processing system including a hibernation file creation 
device, a CPU, a volatile main memory, and a plurality of logical drives 

and supporting a hibernation function by which, upon occurrence of 
predetermined conditions, a task is suspended and the contents of said 

main memory is saved before said main memory is powered off to a 
hibernation file residing in one of the logical drives and being 

supervised by an OS file system, the save operation being implemented by 
a code to which said one of the logical drives is directly accessable, 

other than via BIOS or a driver supervised by said OS, said hibernation 
file creation device including: 


(a) means for identifying a logical drive of more than a predetermined 
size which can access said OS file system and said code; and 
(b) means for creating a hibernation file in said identified logical 
drive by using said OS file system. 
A data processing system according to claim 1 wherein said means 
(a) for identifying includes: 


(i) means for creating a file with a predetermined name to a 
logical drive accessible by OS file system and which is larger 

than a predetermined size by selecting one of said logical 
drives and using said OS file system; 
(ii) means for notifying to said code that said file with a 
predetermined name has been created; 
(iii) means for determining whether or not the creation of the 
hibernation file at said drive is appropriate, by determining 

whether said file with the predetermined name can be read by 
said code; 
(iv) means for actuating said means (i) to said means (iii) by 
selecting one unselected logical drive when said creation of 

the hibernation file at a selected logical drive is 
inappropriate: and wherein said means (b) creates a 

 
hibernation file on a logical drive that said means (iii) 

determines is appropriate. 
A data processing system according to claim 1 wherein said means 
(a) for identifying includes: 


(i) means for creating a file with a predetermined name by 
selecting one logical drive accessible by said OS file and 

which is larger than a predetermined size; 
(ii) means for notifying to said code that a file with a 
predetermined name has been created; 
(iii) means for determining whether or not the creation of the 
hibernation file at said drive is appropriate, by determining 

whether said file with the predetermined name can be read by 
said code; 
(iv) means for repetitively actuating said means (i) to said means 
(iii) until no unselected logical drive exists; and 
(v) a means for presenting to users a logical drive appropriate for 
creating a hibernation file, and wherein said means (b) creates 

a hibernation file to said selected logical drive in response 
to the selection of one logical drive presented by the user. 
A data processing system according to claims 2 or 3 wherein said 
means (i) notifies said OS file system of a logical drive having an 

attribute inappropriate to creating a hibernation file, to remove said 
specified logical drive from possible selection. 
A data processing system according to any one of the preceding 
claims, wherein said means (a) calls BIOS to obtain a value of said 

predetermined size. 
A data processing system according to any one of the preceding 
claims, wherein said predetermined size is a sum total provided by 

adding the sum of the main memory and the video memory to the quantity 
of work data including the hardware context. 

 
of work data including the hardware context. 
A method for creating a hibernation file in a data processing 
system including a hibernation file creation device, a CPU, a volatile 

main memory, and a plurality of logical drives and supporting a 
hibernation function by which, upon the occurrence of a task being 

suspended, the contents of said main memory is saved to a hibernation 
file residing in one of the logical drives and being supervised by an OS 

file system before said main memory is powered off, the save operation 
being implemented by code to which said one of the logical drives is 

directly accessible, other than via BIOS or a driver supervised by said 
OS, said method comprising the steps of: 


(a) specifying a logical drive accessible by said OS file system and 
said code and which is larger than a predetermined size; and 
(b) creating a hibernation file to said specified logical drive by 
using said OS file system. 
A method for creating a hibernation file according to claim 7, 
wherein said step (a) includes the steps of: 


(i) creating a file with a predetermined name in said logical drive 
by selecting one such logical drive which said OS file system 

can access and which is larger than a predetermined size and 
uses said OS file system; 
(ii) notifying to said code that said file with the predetermined 
size has been created; 
(iii) determining whether or not the creation of a hibernation file 
at said drive is appropriate, by determining whether said file 

with the predetermined name can be read by said code, followed 
by proceeding to step (b) when the creation of the hibernation 

file is appropriate; and 
(iv) executing steps (i) to (iii) by selecting one unselected drive 
when the creation of the hibernation file in a selected drive 

is inappropriate. 
A method for creating a hibernation file according to claim 7, 
wherein said step (a) includes the steps of: 


(i) creating a file with a predetermined name in said logical drive 
by selecting such logical drive which said OS file system can 

access and which is larger than a predetermined size; 
(ii) notifying to said code that said file with the predetermined 
name has been created; 
(iii) determining whether or not the creation of a hibernation file 
in said logical drive is appropriate, by determining whether 

said file with the predetermined name can be read by said code; 
(iv) repeating steps (i) to (iii) until the unselected logical 
drives cease to exist; 
(v) presenting to the user a logical drive appropriate for creating 

a hibernation file; and 
(vi) proceeding to step (b) in response to the selection of one 
logical drive presented by the user. 
</CLAIMS>
</TEXT>
</DOC>
