<DOC>
<DOCNO>EP-0646871</DOCNO> 
<TEXT>
<INVENTION-TITLE>
Data transfer control system
</INVENTION-TITLE>
<CLASSIFICATIONS>G06F1312	G06F1312	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>G06F	G06F	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>G06F13	G06F13	</CLASSIFICATIONS-FOURTH>
<ABSTRACT>
A data transfer control system in a data 
transfer apparatus (3) including a plurality of data 

processing units (1) having different data transfer 
speeds and a temporarily holding circuit (5) provided 

between the data processing units for temporarily holding 
data transferred between the data processing units. The 

data transfer apparatus sends a transfer request of data 
corresponding to a data storage capacity of the 

temporarily holding circuit of the data transfer 
apparatus to the data processing unit on the side of 

sending data and sends a transfer request of data 
corresponding to the data storage capacity of the 

temporarily holding circuit after an elapse of a 
delivering time of data to an 
information processing unit 
on the data transferred side of the temporarily holding 

circuit from sending of the data transfer request while 
the requested data from the data processing unit on the 

data sending side reaches the temporarily holding circuit 
of the data transfer apparatus. 


</ABSTRACT>
<APPLICANTS>
<APPLICANT-NAME>
HITACHI COMP ENGINEERING CO LT
</APPLICANT-NAME>
<APPLICANT-NAME>
HITACHI COMP PERIPHERALS CO
</APPLICANT-NAME>
<APPLICANT-NAME>
HITACHI LTD
</APPLICANT-NAME>
<APPLICANT-NAME>
HITACHI COMPUTER ENGINEERING CO., LTD.
</APPLICANT-NAME>
<APPLICANT-NAME>
HITACHI COMPUTER PERIPHERALS CO., LTD.
</APPLICANT-NAME>
<APPLICANT-NAME>
HITACHI, LTD.
</APPLICANT-NAME>
</APPLICANTS>
<INVENTORS>
<INVENTOR-NAME>
KAGA SHIGERU
</INVENTOR-NAME>
<INVENTOR-NAME>
KODAMA SATOSHI
</INVENTOR-NAME>
<INVENTOR-NAME>
OGATA MIKITO
</INVENTOR-NAME>
<INVENTOR-NAME>
SHIRAKI SHINJIRO
</INVENTOR-NAME>
<INVENTOR-NAME>
KAGA, SHIGERU
</INVENTOR-NAME>
<INVENTOR-NAME>
KODAMA, SATOSHI
</INVENTOR-NAME>
<INVENTOR-NAME>
OGATA, MIKITO
</INVENTOR-NAME>
<INVENTOR-NAME>
SHIRAKI, SHINJIRO
</INVENTOR-NAME>
</INVENTORS>
<DESCRIPTION>
The present invention relates to a data
transfer control system for controlling a data request to
a higher-rank CPU upon transfer of write data from the
higher-rank CPU by means of the packet communication or
the like in a lower-rank information recording sub-system
connected to a higher-rank apparatus such as the higher-rank
CPU or the like.A communication control unit such as an optical
communication control unit or the like used in such a
lower-rank information recording sub-system includes a
buffer for controlling a different transfer speed (input
from the higher-rank CPU and output to a lower-rank
memory unit) and requests the higher-rank CPU to send
data for the size or capacity of the buffer upon control
of writing. Once the request of data for the buffer
capacity is performed, the data request is stopped and
the communication control unit waits until the data for
one request is delivered from the buffer to a lower-rank
memory unit provided at a lower-rank position. When the
data for one request is delivered, the communication
control unit transmits the data request to the higher-rank
CPU again. The communication control unit controls
the data transfer from the higher-rank CPU to the lower-rank 
memory unit by repetition of the above operation. A
conventional data transfer control system described above
is disclosed in JP-A-4-225452.With such a conventional system, however, as a
length of the communication cable for connecting the
higher-rank CPU and the information recording sub-system
is made longer, there is a case where a time from the
data request to the data arrival therefor in the
information recording sub-system exceeds the data
delivering time of the buffer in the full state. In the
request of data for the buffer capacity, even if a next
data request is sent after the data has been reached in
the buffer once, the delivering of data to the lower-rank
memory unit from the buffer is completed earlier before
the next data is received. Accordingly, an empty state
of the buffer occurs and the data transfer is interrupted
during the empty state of the buffer, so that the buffer
is not used efficiently.The cause that the buffer becomes empty is that
the next data request to the higher-rank CPU is stopped
until data is reached when the request of data for the
buffer capacity is sent from the communication control
unit to the higher-rank CPU. The reason why the data
request is stopped is that data is prevented from
overflowing from the buffer (a pointer at an input side 
is prevented from passing
</DESCRIPTION>
<CLAIMS>
A data transfer control method in a data transfer
apparatus (3, 11) including a control unit (4,9), a temporary

holding means (5) for data, and a disk unit (11);
said method comprising:


a first transfer control step of transmitting data
transfer requests from said data transfer apparatus (3, 11)

to a higher rank apparatus that supplies data, so as to
receive at said temporary holding means (5) in said data

transfer apparatus (3,11) data in predetermined unit amounts
from said higher rank apparatus, each said predetermined

unit amount corresponding to a packet capacity of the data
transfer, said data transfer requests being limited such

that the data requested does not exceed the storage capacity
of said temporary holding means;
a second transfer control step of repeatedly
transmitting further data transfer requests from said data

transfer apparatus (3, 11) to said higher rank apparatus to
receive data in said predetermined unit amounts, each time a data

delivery time from the holding means to the disk unit has elapsed until the data requested by the
first transfer control step has arrived at said temporary

holding means, and
a third transfer control step of transmitting at least
one additional data transfer request for receiving data in

said predetermined unit amounts from said higher rank
apparatus, after the data requested by said first transfer

control step has arrived at said temporary holding means 
(5), and after one of said predetermined unit amounts of

data transferred to said temporary holding means (5) has
been transmitted from said temporary holding means to said

disk unit (11) .
A method according to claim 1, wherein said
delivery time has a first value when the data yet to be

transferred equals or exceeds the predetermined unit amount
and a second value when the data yet to be transferred is

less than the predetermined unit amount.
A method according to claim 2, wherein said first
value is based on average transfer speed from the temporary

holding means (5).
A method according to claim 1 or claim 2, wherein
said first transfer control step further comprises a step

receiving a data transfer start indication from said higher
rank apparatus.
A method according to any one of the preceding
claims, wherein the higher rank apparatus is informed when

all the requested data has been transferred.
</CLAIMS>
</TEXT>
</DOC>
