<DOC>
<DOCNO>EP-0629991</DOCNO> 
<TEXT>
<INVENTION-TITLE>
Synchronisation apparatus working over a wide range of frequencies
</INVENTION-TITLE>
<CLASSIFICATIONS>G09G116	G09G116	H04N512	H04N512	H03L710	G09G104	H03L708	G09G104	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>G09G	G09G	H04N	H04N	H03L	G09G	H03L	G09G	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>G09G1	G09G1	H04N5	H04N5	H03L7	G09G1	H03L7	G09G1	</CLASSIFICATIONS-FOURTH>
<ABSTRACT>
Synchronisation apparatus comprises a phase-locked loop (46) for 
generating an output signal (P) and for synchronising the output signal 

(P) to an input signal (HSYNC). A controller (44,45) iteratively 
determines whether the output signal (P) is synchronised to the input 

signal (HSYNC) by the phase-locked loop (46) and adjusting the frequency 
of the output signal (P) to locate the output signal (P) within the 

capture range of the phase-locked loop if the output signal (P) is not 
synchronised to the input signal (HSYNC). The apparatus can thus maintain 

the output signal (P) in synchronisation with the input signal (HSYNC) 
despite large step changes in the frequency of the input signal extending 

beyond the limits of the capture range of the phase-locked loop. The 
apparatus is therefore especially useful in display devices for computer 

systems that can generate video signals corresponding to a number of 
different display formats. 


</ABSTRACT>
<APPLICANTS>
<APPLICANT-NAME>
IBM
</APPLICANT-NAME>
<APPLICANT-NAME>
INTERNATIONAL BUSINESS MACHINES CORPORATION
</APPLICANT-NAME>
</APPLICANTS>
<INVENTORS>
<INVENTOR-NAME>
HENRY MICHAEL DAVID
</INVENTOR-NAME>
<INVENTOR-NAME>
JACKSON FREDERICK SAMUEL
</INVENTOR-NAME>
<INVENTOR-NAME>
LEAVER DAVID
</INVENTOR-NAME>
<INVENTOR-NAME>
WRIGHT-BOULTON NEIL
</INVENTOR-NAME>
<INVENTOR-NAME>
HENRY, MICHAEL DAVID
</INVENTOR-NAME>
<INVENTOR-NAME>
JACKSON, FREDERICK SAMUEL
</INVENTOR-NAME>
<INVENTOR-NAME>
LEAVER, DAVID
</INVENTOR-NAME>
<INVENTOR-NAME>
WRIGHT-BOULTON, NEIL
</INVENTOR-NAME>
</INVENTORS>
<DESCRIPTION>
The present invention relates to synchronisation apparatus for
synchronising an oscillator output to an input synchronisation (sync)
signal over a wide range of frequencies.Conventional synchronisation apparatus typically includes a phase-locked
loop for locking the output frequency of an oscillator to that of
an independently produced input signal. For example, in a raster-scanned
cathode ray tube (CRT) display device such as a computer visual display
unit or a television receiver, comprises a phase-locked loop for locking
an output line scan signal for scanning lines of video are scanned onto
the CRT screen to an input line synchronisation (sync) signal produced by
the video source. In general, a phase-locked loop of this kind is
associated with a "capture range" of frequencies sometimes referred to as
a "pull-in range". The capture range specifies the range of frequencies
centred on the frequency of the line sync signal within which the line
scan signal can be brought into synchronisation with the line sync
signal. If the frequency of the line scan signal is outside the capture
range of the phase-locked loop when the line sync signal is first
supplied to the display device, the phase-locked loop cannot synchronise
the line scan signal to the line sync signal. The phase-locked loop is
also associated with a "hold range" of frequencies, which is usually
slightly wider than the capture range. The hold range specifies the range
of frequencies centred of the line sync frequency within which the phase-locked
loop can hold tile line scan signal locked to the line sync signal
following, for example, a step change in the line sync frequency. If the
step change in the line sync frequency leaves the line scan signal
outside the hold range, the phase- locked loop cannot hold the line scan
signal in synchronisation with the line sync signal. Thereafter, the
phase-locked loop can only recover synchronisation if the line scan
frequency is brought within the capture range.Many computer display systems can generate video signals in a
number of picture display formats. Each display format is characterised
by a different combination of raster line and frame sync frequencies. The
variation in line sync frequency between different display formats can be
relatively wide, from 32kHz to 64kHz for example. This variation is much
wider than the capture and hold ranges of the phase-locked loops in the
synchronisation apparatus of conventional display devices, which are 
typically no greater than 6kHz. Therefore, a change in
</DESCRIPTION>
<CLAIMS>
Synchronisation apparatus comprising a phase-locked loop (46) for
generating an output signal (P) and for synchronising the output signal

(P) to an input signal (HSYNC), the phase-locked loop (46) comprising a
variable frequency oscillator (42) for generating the output signal (P)

and for varying the frequency of the output signal (P) as a function of a
combination of an error signal (Ef) and an offset level (Ec), a signal

generator (43) for generating a feedback signal (F) in response to the
output signal (P), and a pha
se detector (41) for generating the error
signal (Ef) as a function of the phase difference between the input

signal (HSYNC) and the feedback signal (F); and a controller (44,45) for
iteratively determining whether the output signal (P) is synchronised to

the input signal (HSYNC) by the phase-locked loop (46) and adjusting the
frequency of the output signal (P) to locate the output signal (P) within

the capture range of the phase locked loop if the output signal (P) is
not synchronised to the input signal (HSYNC); characterised in that the

controller (44,45) comprises means for sampling the output signal (P) in
response to the input signal (HSYNC); and means for adjusting the offset

level (Ec) if at least one of a predetermined plurality of successive
samples of the output signal (P) has a value other than a first value.
Apparatus as claimed in claim 1, wherein the controller (44,45)
comprises means for resetting the frequency of the output signal (P) to a

minimum value in response to a step change in the frequency of the input
signal (HSYNC); and means for thereafter adjusting the offset level (Ec)

to increment the frequency of the output signal (P) if at least one of
the successive samples of the output signal (P) has a value other than a

first value.
Apparatus as claimed in claim 2, wherein the controller (44,45)
comprises means for recording a first value of the offset level (Ec) upon

determining that the output signal (P) is synchronised to the input
signal (HSYNC), means for thereafter adjusting the offset signal (Ec) to

further increment the frequency of the output signal (P), means for
thereafter adjusting the offset level (Ec) to decrement the frequency of

the output signal (P) upon determining that the output signal (P) is not
synchronised to the input signal, means for recording a second value of

the offset level (Ec) upon detecting that the output signal (P) is again
synchronised to the input signal (HSYNC), and means for setting the

offset level (Ec) to a value midway between the first and second values 
to locate the frequency of the output signal (P) in the centre of a

capture range of the phase-locked loop (46).
Apparatus as claimed in any preceding claim wherein the controller
(44,45) comprises: a processor (44), a first interrupt input (IN1)

connected to receive the input signal (HSYNC), and a second interrupt
input (IN2) connected to receive the output signal (P), the processor

(44) being configured to sample the output signal (P) upon detection of
an edge in the input signal (HSYNC) and to adjust a digital value if at

least one of the predetermined plurality of successive samples has a
value other than the first value; and a digital to analog convertor (45)

connected to the oscillator (42) for generating the offset level (Ec) as
a function of the digital value determined by the processor (44).
Apparatus as claimed in claim 4, wherein the controller (44,45)
comprises a pulse width modulator for generating a pulse width modulated

signal (PWM) as a function of the digital value and a low pass filter
(45) for generating the offset level as a function of the pulse width

modulated signal (PWM).
Apparatus as claimed in claim 5, wherein the pulse width modulator
is integral to the processor (44).
A display device comprising synchronisation apparatus as claimed in
any preceding claim, wherein the input signal is a raster scan

synchronisation pulse signal and the output signal generates an address
signal for addressing video data to a display screen.
A method for synchronising an input signal to an output signal, the
method comprising:


generating the output signal via a variable frequency oscillator;
varying the frequency of the output signal as a function of a
combination of an error signal and an offset level;
generating a feedback signal in response to the output signal; and,
generating, via a phase detector, the error signal as a function of
the phase difference between the input signal and the feedback signal;
 
the method being characterised by:


sampling the output signal in response to the input signal; and,
adjusting the offset level if at least one of a predetermined
plurality of successive samples of the output signal has a value other

than a first value.
</CLAIMS>
</TEXT>
</DOC>
