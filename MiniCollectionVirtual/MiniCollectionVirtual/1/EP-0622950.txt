<DOC>
<DOCNO>EP-0622950</DOCNO> 
<TEXT>
<INVENTION-TITLE>
Imposed weight matrix error diffusion halftoning of image data
</INVENTION-TITLE>
<CLASSIFICATIONS>H04N1405	G06T500	G06T500	H04N1405	G09G320	G09G320	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>H04N	G06T	G06T	H04N	G09G	G09G	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>H04N1	G06T5	G06T5	H04N1	G09G3	G09G3	</CLASSIFICATIONS-FOURTH>
<ABSTRACT>
Methods are disclosed for improving output image quality and reducing 
processing time in digital halftoning systems. The direction of processing each scan 

line of a source image is selected with blue noise, rather than the traditional raster 
scan sequence, to reduce directional and start-up anomalies. Source image pixel 

gray values are adjusted by means of imposed matrices, prior to error diffusion, in 
order to minimize distracting patterns and other anomalies in the output image. 

Error diffusion threshold values are modulated with blue noise, and the average 
threshold value reduced to reduce start-up delay. Finally, error terms in the error 

diffusion process are diffused according to a new three-weight filter. The three-weight 
filter substantially reduces error diffusion processing time, without sacrificing 

output image quality when used in combination with the modulated error diffusion 
threshold values. 


</ABSTRACT>
<APPLICANTS>
</APPLICANTS>
<INVENTORS>
</INVENTORS>
<DESCRIPTION>
This invention relates to the field of digital halftoning and, in particular, to
methods for improving processing speed and output image quality in digital
halftoning systems.Digital image data must be transformed or preprocessed so that computer
display terminals with various gray level capacities, laser printers, dot matrix printers,
ink jet printers, etc, all having various resolutions and aspect ratios, will all render an
image represented by the image data in a similar way. A preprocessor associated
with or configured for each such device transforms the digital data to a form tailored
to the characteristics of that particular device.Digital Halftoning is a key component of such a preprocessor. This term
refers to any process that creates the illusion of continuous-tone images from careful
arrangement of binary picture elements, such as ink drops in the case of ink jet
printers. The process is also called spatial dithering.One of the problems with known halftoning techniques is transient behavior
near edges or boundaries. This also may be referred to as "start-up delay," and is
evident where the first portion of an image to be processed has a very low gray
value. Since several of the initial pixels have gray values lower than the error
diffusion threshold value, no dots are fired for a time. A first dot will be fired after the
accumulated error exceeds the threshold value. The need remains for a halftoning
technique that minimizes or eliminates start-up delay transients.Another common problem with known halftoning techniques is directional
hysteresis due to the raster order of processing. This is particularly apparent in very 
light and very dark patterns. The normal (unidirectional)
raster processing order also exacerbates start-up day
anomalies. A "serpentine" or boustrophedonic raster has
been suggested to break-up the directionality of a normal
raster without the expense of a full two-dimensional
buffer. Since neighborhood operations generally buffer
image date in full lines, a serpentine raster process does
not require increased memory over a normal raster.
Nonetheless, a serpentine raster order can itself introduce
visible patterns or anomalies which would not otherwise be
present in the rendered image. The need remains therefore
for reducing or eliminating anomalies that result from the
conventional raster ordered processing.Known error diffusion techniques are computationally
intensive and therefore time consuming. For example, even
the relatively simply Floyd and Steinberg technique
requires
</DESCRIPTION>
<CLAIMS>
A method of halftoning a digital image defined by a rectangular
array of scan lines of pixels, each pixel having a gray value, for forming an

output image, the method comprising the steps of:

a) for each possible gray value in the image, providing a corresponding
imposed matrix (70);
b) each imposed matrix having a respective average
gray value approximately equal to the corresponding pixel gray value;
c) each imposed matrix having non-uniform arbitrary dimensions;
d) prior to halftoning, adjusting each image pixel (90) to a new gray value
determined by the corresponding imposed matrix; and
e) error diffusing each pixel using the new gray value.
A method according to claim 1 wherein the adjusting step comprises:

reading the image data (84) to determine the pixel gray value;
selecting an imposed matrix (86) that corresponds to the pixel gray
value;
logically tiling the image (88) with the selected imposed matrix to
determine a location in the matrix that corresponds to the image pixel

location; and
adjusting the image pixel gray value to a corresponding new gray value
(90) defined by the corresponding location in the selected imposed matrix.
A method according to claim 2 wherein said error diffusing step
includes selecting a modulated error diffusion threshold value (92) and

quantizing each pixel against the selected threshold value, and wherein the
modulated threshold values vary from one pixel to the next according to a blue

noise function having a predetermined average value. 
A method according to claim 3 wherein the modulated threshold
values vary from one to the next with a minimum frequency such no three

consecutive values are above or below the average value.
A method according to claim 3 wherein said error diffusing step
includes applying a three-weight error diffusion filter.
A method according to claim 5 wherein the three-weight error
diffusion filter is a modified Floyd and Steinberg type filter having weights 8-0-5-3

expressed in clockwise sequence from the origin.
A method according to any of claims 1 through 6 and further
comprising:


for each scan line of pixels (30,32,34), selecting a corresponding
processing direction such that the selected processing direction varies from

each scan line to the next according to a blue noise function; and
sequentially processing the scan lines of pixels, the individual pixels in
each scan line being processed in the corresponding processing direction,

thereby reducing directional and start-up delay artifacts in the output
image.
A method according to claim 7 wherein the blue noise function for
selecting scan line processing direction has a minimum frequency of one

direction change per three scan lines.
A method according to claim 1 wherein providing the imposed
matrices includes providing a predetermined bit map and, for at

least one image gray value, selecting a pair of coefficients for substitution into
the bit map so as to form an imposed matrix having an average gray value

approximately equal to the said image gray value. 
A method according to claim 9 wherein the said bit map is used for
forming all of the imposed matrices, whereby each and every one of the

matrices is defined by a respective pair of coefficients for substitution into the
bit map.
</CLAIMS>
</TEXT>
</DOC>
