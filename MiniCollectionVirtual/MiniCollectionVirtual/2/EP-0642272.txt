<DOC>
<DOCNO>EP-0642272</DOCNO> 
<TEXT>
<INVENTION-TITLE>
Image data compression
</INVENTION-TITLE>
<CLASSIFICATIONS>G11B2012	G11B2012	H03M730	G06T900	H04N141	H04N726	H03M730	H04N141	G06T900	G11B2010	G11B2010	H04N726	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>G11B	G11B	H03M	G06T	H04N	H04N	H03M	H04N	G06T	G11B	G11B	H04N	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>G11B20	G11B20	H03M7	G06T9	H04N1	H04N7	H03M7	H04N1	G06T9	G11B20	G11B20	H04N7	</CLASSIFICATIONS-FOURTH>
<ABSTRACT>
A data compression technique is described for use in systems 
employing frequency separation, such as wavelet separation, in which 

the sub bands (0 to 9) have different numbers of frequency component 
values therein. The sub bands are scanned to form a stream of data for 

feeding to an entropy encoder (30) in an order in which a number of 
samples from each sub band are taken in turn, that number being 

proportional to how many frequency component values are in the 
particular sub band. 


</ABSTRACT>
<APPLICANTS>
<APPLICANT-NAME>
SONY UK LTD
</APPLICANT-NAME>
<APPLICANT-NAME>
SONY UNITED KINGDOM LIMITED
</APPLICANT-NAME>
</APPLICANTS>
<INVENTORS>
<INVENTOR-NAME>
WILKINSON JAMES HEDLEY
</INVENTOR-NAME>
<INVENTOR-NAME>
WILKINSON, JAMES HEDLEY
</INVENTOR-NAME>
</INVENTORS>
<DESCRIPTION>
This invention relates to the field of image data compression.
More particularly, this invention relates to image data compression
utilising frequency separation and entropy encoding.British Published Patent Application GB-A-2 251 756 (Sony
Broadcast & Communications Limited) describes a system using sub-band
frequency separation and entropy encoding as part of a data compression
process. Sub band frequency separation is used to decorrelate the
video data into spatial frequency bands of uniform size within the two-dimensional
spatial frequency domain. Spatial frequency component data
within these bands is then subject to entropy encoding to bring about
data compression.Another video data compression system is described in IEEE
Transactions on Circuits and Systems for Video Technology, Volume 1,
No. 2, June 1991, pages 174 to 183, "Sub band Coding Algorithms for
Video Application: Videophone to HDTV-Conferencing" by Hamid Gharavi.
In contrast to the above, a video compression system is described which
separates the data into sub band components in the two-dimensional
spatial frequency domain of non-uniform size. This form of frequency
separation is known as "logarithmic" or "wavelet" coding.A constant aim within image data compression systems is to
improve the degree of compression achieved. Such improved performance
could be used to increase the number of images that may be stored
within a given storage capacity or alternatively store the same number
of images but to a higher resolution.PCT Published Patent Application WO-A-93/10634 and SPIE Visual
Communications and Image Processing '91, Vol. 1605, 11/91 pages 456 -
466, Ohta et al "Entropy Coding for Wavelet Transform of Image And Its
Application For Motion Picture Coding" both disclose wavelet coding
techniques using zig-zag scan patterns. Published European Patent
Application EP-A-0,570,818, which was not published until after the
priority date of the present patent and so is relevant for novelty
purposes under Article 54(3), discloses wavelet coding using a zig-zag
scan pattern.Viewed from one aspect the invention provides apparatus for
compressing image data, said apparatus comprising: 
means for frequency separating input image data into a plurality
of spatial frequency bands, at least some lower spatial frequency bands
containing fewer frequency component values than at least some higher
spatial frequency bands;means for scanning frequency component values from said plurality
of spatial frequency bands with a repeating scan pattern to form a
scan
</DESCRIPTION>
<CLAIMS>
Apparatus for compressing image data, said apparatus comprising:

means for frequency separating (20) input image data into a
plurality of spatial frequency bands (Sub Band 0 to 9), at least some

lower spatial frequency bands (8) containing fewer frequency component
values than at least some higher spatial frequency bands (10, 12, 14);
means for scanning frequency component values (24, 26) from said
plurality of spatial frequency bands with a repeating scan pattern to

form a scanned data stream, said scan pattern being such that a number
of frequency component values are read from corresponding spatial

positions within each given spatial frequency band, said number being
proportional to how many frequency component values are in said given

spatial frequency band; and
means for entropy encoding (30) said scanned data stream to form
compressed image data; characterised in that

   the subsequent relative positions within each
frequency band are chosen such that
successive ones of said repeating scanning pattern correspond to
non spatially adjacent positions within said image data.
Apparatus as claimed in claim 1, wherein said means for entropy
encoding applies differing entropy encoding to frequency component

values from differing spatial frequency bands.
Apparatus as claimed in claims 1 and 2, comprising means for
formatting said compressed image data into fixed size data blocks for

subsequent processing on a block by block basis.
Apparatus as claimed in any one of the preceding claims,
comprising a quantiser (28) for quantising said image data according to

a quantisation step size that varies between spatial frequency bands.
Apparatus as claimed in claim 4, wherein said repeating scan
pattern moves between spatial frequency bands following increasing

quantisation step size.
Apparatus as claimed in any one of the preceding claims, wherein
said means for frequency separating performs a multistage frequency 

separation process in which spatial frequency bands of lower spatial
frequency undergo more stages of frequency separation than spatial

frequency bands of higher spatial frequency.
Apparatus as claimed in claim 6, wherein at each frequency
separation stage only that spatial frequency band of lowest spatial

frequency is further frequency separated.
Apparatus as claimed in claim 7, wherein said image data
undergoes N stages of frequency separation in a first direction and N

stages of frequency separation in a second direction orthogonal to said
first direction to yield 3N+1 spatial frequency bands.
Apparatus as claimed in claim 8, wherein N=3.
Apparatus as claimed in any one of claims 6 to 9, wherein when an
input spatial frequency band undergoes a stage of frequency separation

in a given direction to produce two output spatial frequency bands,
said output spatial frequency bands each have half the number of

frequency component values in said given direction than said input
spatial frequency band.
Apparatus as claimed in any one of the preceding claims,
comprising a frame store (22) into which said frequency component

values are stored by said means for frequency separating.
Apparatus as claimed in claim 11, wherein said means for scanning
comprises a read address generator (24) for generating a sequence of

read addresses (SA) for said frame store following said repeating scan
pattern.
Apparatus as claimed in any one of the preceding claims, wherein
said means for entropy encoding includes means for runlength coding to

form a stream of runlength codes.
Apparatus as claimed in claim 13, wherein said means for entropy
encoding includes means for Huffman coding said stream of runlength 

codes to form said compressed data.
Apparatus as claimed in any one of the preceding claims, wherein
said means for entropy encoding includes means for generating end of

block codes indicating that all further frequency component values

within a scan pattern from a current position are zeros.
Apparatus for decompressing image data, said apparatus
comprising:


means for entropy decoding (34) said compressed image data stream
to form a scanned data stream;
means for reordering (24, 26) said scanned data stream from a
repeating scan pattern through frequency component values into a

plurality of spatial frequency bands, said scan pattern being such that
a number of frequency component values are read from corresponding

spatial positions within each given spatial frequency band, said number
being proportional to how many frequency component values are in said

given spatial frequency band; and
means for frequency combining (42) a plurality of spatial
frequency bands into output image data, at least some lower spatial

frequency bands containing fewer frequency component values than at
least some higher spatial frequency bands; characterised in that

   the subsequent relative positions within each
frequency band are chosen such that
successive ones of said repeating scanning pattern correspond to
non spatially adjacent positions within said image data.
A method of compressing image data, said method comprising the
steps of:


frequency separating input image data into a plurality of spatial
frequency bands, at least some lower spatial frequency bands containing

fewer frequency component values than at least some higher spatial
frequency bands;
scanning frequency component values from said plurality of
spatial frequency bands with a repeating scan pattern to form a scanned

data stream, said scan pattern being such that a number of frequency
component values are read from corresponding spatial positions within

each given spatial frequency band, said number being proportional to
how many frequency component values are in said given spatial frequency 

band; and
entropy encoding said scanned data stream to form compressed
image data; characterised in that

   the subsequent relative positions within each frequency band are chosen such that

   successive ones of said repeating scanning pattern correspond to
non spatially adjacent positions within said image data.
A method of decompressing image data, said method comprising the
steps of:


entropy decoding said compressed image data stream to form a
scanned data stream;
reordering said scanned data stream from a repeating scan pattern
through frequency component values into a plurality of spatial

frequency bands, said scan pattern being such that a number of
frequency component values are read from corresponding spatial

positions within each given spatial frequency band, said number being
proportional to how many frequency component values are in said given

spatial frequency band; and
frequency combining a plurality of spatial frequency bands into
output image data, at least some lower spatial frequency bands

containing fewer frequency component values than at least some higher
spatial frequency bands; characterised in that

   the subsequent relative positions within each frequency band are chosen such that

   successive ones of said repeating scanning pattern correspond to
non spatially adjacent positions within said image data.
Apparatus for recording and reproducing image data comprising
apparatus for compressing image data as claimed in any one of claims 1

to 15 and apparatus for decompressing image data as claimed in claim 16.
</CLAIMS>
</TEXT>
</DOC>
