<DOC>
<DOCNO>EP-0633533</DOCNO> 
<TEXT>
<INVENTION-TITLE>
Producing image data representing a picture
</INVENTION-TITLE>
<CLASSIFICATIONS>G06T1510	G09G500	G06T1500	G06T1540	G09G500	G06T1500	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>G06T	G09G	G06T	G06T	G09G	G06T	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>G06T15	G09G5	G06T15	G06T15	G09G5	G06T15	</CLASSIFICATIONS-FOURTH>
<ABSTRACT>
In a technique for producing image data representing a picture 
from first two-dimensional image data producing instructions for 

producing two-dimensional image data and three-dimensional image data 
producing instructions for producing three-dimensional image data, two-dimensional 

image data producing instructions are derived (8) from the 
three-dimensional image data producing instructions. Display data 

producing priorities are assigned (2) to the various two-dimensional 
image data producing instructions. Image data are produced by 

executing the various two-dimensional image data producing instructions 
in an order corresponding to the assigned image data producing 

priorities. The image data include a plurality of pixels each having 
a corresponding picture location and the pixels are stored in a memory 

(10) such that first pixels produced after second pixels having the 
same corresponding picture locations overwrite the second pixels. 


</ABSTRACT>
<APPLICANTS>
<APPLICANT-NAME>
SONY COMP ENTERTAINMENT INC
</APPLICANT-NAME>
<APPLICANT-NAME>
SONY COMPUTER ENTERTAINMENT INC.
</APPLICANT-NAME>
</APPLICANTS>
<INVENTORS>
<INVENTOR-NAME>
FURUHASHI MAKOTO
</INVENTOR-NAME>
<INVENTOR-NAME>
SUZUOKI MASAKAZU
</INVENTOR-NAME>
<INVENTOR-NAME>
FURUHASHI, MAKOTO
</INVENTOR-NAME>
<INVENTOR-NAME>
SUZUOKI, MASAKAZU
</INVENTOR-NAME>
</INVENTORS>
<DESCRIPTION>
This invention relates to apparatus and methods for producing
image data representing a picture. An embodiment of the invention
described hereinbelow seeks to provide such a method and apparatus for
producing image data capable of producing realistic images simulating
three-dimensional physical effects. Embodiments of the invention are
particularly (but not exclusively) useful for producing such image data
in computer graphics applications wherein hardware resources are
limited, for example in the case of video game apparatus and computer
graphic apparatus.In certain previously proposed video game apparatus, two-dimensional
picture data are mapped to a rectangular picture area
(referred to herein as a "sprite"). In such apparatus, the sprites are
combined like the tiles of a mosaic on a display screen to produce an
image. Such video game apparatus are referred to as two-dimensional or
"2D" systems. In such 2D systems, images can only be produced as
combinations of two-dimensional images produced from sprite patterns
which have been stored in advance and which must be displayed as images
lying in a fixed plane.Other previously proposed apparatus include three-dimensional or
"3D" graphic systems such as computer graphic apparatus for producing
an image on a two-dimensional screen of a display in such a manner that
the image simulates three-dimensional effects. In such 3D systems, the
surface of a 3D object to be represented is separated into a plurality
of polygonal surfaces having various arbitrary shapes. Picture data
representing the 
polygonal areas of the 3D object are successively stored in a
frame memory having memory locations corresponding to positions
on a display screen to accumulate picture data which, when
supplied to the display, reconstruct an image which appears to be
three-dimensional.In such 3D systems the data representing each of the
polygonal surfaces must be transformed in order to represent
three-dimensional effects such as rotation of the object they
represent. This function would be very difficult to realize in a
2D system since it would be necessary to carry out complex
address calculations to map texture data to each transformed
polygonal surface.2D systems achieve image movement by rearranging sprite
patterns within a plane representing the display screen, which is
a relatively easy function to implement. However, such a
function would be very difficult to carry out in a 3D system for
the following reasons.The previous 3D systems do not assemble data for a
display screen as an
</DESCRIPTION>
<CLAIMS>
A method for producing image data representing a
picture, the method comprising the steps of


producing (2) sprite producing instructions representative of two
dimensional image data,

in which each of said sprite producing instructions includes a
sprite data portion (SD) and a sprite tag portion (TG)

representative of an address location;
producing (2,8), based on first polygon producing
instructions representative of three-dimensional image

data, second polygon producing instructions representative
of two-dimensional image data, each of said second polygon

producing instructions including a polygon data portion
and a polygon tag portion representative of an address

location;
performing (2) a sorting operation (104), based on the
address locations represented by the tag portions of the

sprite producing instructions and the second polygon
producing instructions, to determine

a mixed sequence of said sprite and second polygon
instuctions, said sequence defining, an order for executing

said sprite producing instructions and said second polygon
producing instructions;
producing (6) image data by executing the sprite
producing instructions and the second polygon producing

instructions in said determined order, the image data
including a plurality of pixels each having a 

corresponding image location; and
storing (10) the plurality of pixels of the produced
image data in a memory such that a pixel produced after

another pixel having a corresponding image location
overwrites the other pixel.
The method of claim 1, wherein the address location
of each of the sprite producing instructions and the

second polygon producing instructions represents a memory
address of a next one of the instructions to be executed.
The method of claim 1, wherein Z-data are used for
setting the address locations of the second polygon

producing instructions, said Z-data corresponding to
depths of respective surfaces represented by the produced

image data.
The method of claim 1, further comprising the step of
modifying the second polygon producing instructions in

accordance with movement of an image to be produced with
the use of the second polygon producing instructions and a

change in a point of view of the image to be produced.
The method of claim 4, wherein the step of modifying
the second polygon producing instructions comprises

determining said movement of said image and said change in
said point of view based on a command produced in response

to operation of a game input device (30).
The method of claim 1, wherein the step of producing 
image data comprises generating image surfaces and mapping

image texture data to the generated image surfaces to
produce said pixels.
The method of claim 6, further comprising the step of
reading the sprite and first polygon producing

instructions from a memory (20), reading compressed
texture data from the memory and decompressing (4) the

compressed texture data to produce the image texture data.
The method of claim 7, wherein the memory (20) is a
CD-ROM.
The method of claim 1, further comprising the steps
of forming a sprite producing instruction string from a

number of said sprite producing instructions, forming a
polygon producing instruction string from a number of said

second polygon producing instructions, and inserting one
of said sprite producing instruction string and said

polygon producing instruction string into the other of
said sprite producing instruction string and said polygon

producing instruction string at a desired location
thereof.
The method of claim 1, wherein the sprite data
portion of each of the sprite producing instructions

includes identification data indicating that the
instruction is a sprite producing instruction, and the

polygon data portion of each of the second polygon
producing instructions includes identification data 

indicating that the instruction is a polygon producing
instruction.
An apparatus for producing image data representing a

picture, said apparatus comprising

means (2) for producing
sprite producing instructions representative of two

dimensional data, in which
each of said sprite producing instructions includes a

sprite data portion (SD) and a sprite tag portion (TG)
representative of an address portion;
means (2,8) for producing, based on first polygon
producing instructions representative of three-dimensional

image data, second polygon producing instructions
representative of two-dimensional image data, each of

said second polygon producing instructions including a
polygon data portion and a polygon tag portion

representative of an address location;
means (2) for performing a sorting operation (104),
based on the address locations represented by the tag

portions of the sprite producing instructions and the
second polygon producing instructions, to determine

a mixed sequence of said sprite and second polygon
instuctions, said sequence defining an

order for executing said sprite producing instructions and
said second polygon producing instructions;
image data producing means (6) for producing image
data by executing the sprite producing instructions and

the second polygon producing instructions in said
determined order, the image data including a plurality of

pixels each having a corresponding image location; and 
first memory means (10) for storing the plurality of
pixels of the produced image data such that a pixel

produced after another pixel having a corresponding image
location overwrites the other pixel.
The apparatus of claim 11, further comprising second
memory means (3), wherein the address location of each of

the sprite producing instructions and the second polygon
producing instructions represents an address in the second

memory means of a next one of the instructions to be
executed.
The apparatus of claim 12, wherein Z-data are used
for setting the address locations of the second polygon

producing instructions, said Z-data corresponding to
depths of respective surfaces represented by the produced

image data.
The apparatus of claim 11, further comprising
modifying means for modifying the second polygon producing

instructions in accordance with movement of an image to be
produced with the use of the second polygon producing

instructions and a change in a point of view of the image
to be produced.
The apparatus of claim 14, wherein the modifying
means is operative to determine said movement of said

image and said change in said point of view based on a
command produced in response to operation of a game input

device (30). 
The apparatus of claim 11, wherein the image data
producing means (6) is operative to generate image

surfaces and to map image texture data to the generated
image surfaces to produce said pixels.
The apparatus of claim 11, wherein the first memory
means (10) includes first and second frame buffers and is

operative during a first vertical interval of the image
data to store pixels successively produced by the image

data producing means and simultaneously to read previously
produced pixels from the second frame buffer for producing

a display image, and is operative during a successive
vertical interval of the image data to write data produced

by the image data producing means in the second frame
buffer and simultaneously to read previously produced

pixels from the first frame buffer for producing a second
picture display.
The apparatus of claim 16, wherein the image data
producing means (6) is operative to produce data

representing rectangular image areas parallel to a plane
of the picture by executing the sprite producing

instructions.
The apparatus of claim 18, wherein the first memory
means (10) is operative to store the image texture data

for use by the image data producing means.
The apparatus of claim 18, wherein the first memory 
means (10) is operative to store a color conversion table

including a code representing transparency and to read
data from the color conversion table to the image data

producing means, and wherein the image data producing
means (6) is operative to utilize data from said color

conversion table to assign colors to pixels within said
rectangular image areas and in response to said code

representing transparency to refrain from overwriting
pixel data in corresponding locations previously stored in

the first memory means.
The apparatus of claim 11, further comprising means
for forming a sprite producing instruction string from a

number of said sprite producing instructions, for forming
a polygon producing instruction string from a number of

said second polygon producing instructions, and for
inserting one of said sprite producing instruction string

and said polygon producing instruction string into the
other of said sprite producing instruction string and said

polygon producing instruction string at a desired location
thereof.
The apparatus of claim 11, wherein the sprite data
portion of each of the sprite producing instructions

includes identification data indicating that the
instruction is a sprite producing instruction, and the

polygon data portion of each of the second polygon
producing instructions includes identification data

indicating that the instruction is a polygon producing
instruction. 
The apparatus of claim 11, further comprising second
memory means (3) for storing the sprite producing

instructions and the second polygon producing
instructions, and means (7) for transferring the

instructions stored in the second memory means to the
image data producing means (6) in said determined order.
A circuit comprising:

an apparatus according to claim 11;
a main bus (1);
input means (5, 9) coupled with the main bus (1) for
receiving the sprite producing instructions and the first

polygon producing instructions and providing the received
instructions to the main bus;
a main memory (3) coupled with the main bus (1) and
operative to receive therefrom, store and read out the

sprite producing instructions and the first polygon
producing instructions;
said means (2,8) for producing the second polygon
producing instructions being coupled with the main bus (1)

to receive the first polygon producing instructions;
said sorting means (2) being coupled with the main
bus to supply the sprite producing and second polygon

producing instructions to the main memory for storage
therein;
the image data producing means (6) being coupled with
the main bus; and
a memory controller (7) for transferring the sprite
producing instructions to the image data producing means 

(6) via the main bus (1);
said first memory means comprising frame memory means
(10) for storing the image data produced by the image data

producing means (6).
The circuit of claim 24, wherein the input means (5,
9) is operative to receive compressed image texture data

and to supply the compressed image texture data to the
main bus (1), the main memory (3) is operative to receive

from the main bus, store and read out the compressed image
texture data, the circuit further comprises an image data

decompressor (4) coupled with the main bus to receive the
compressed image
 texture data read out from the main
memory, the image data decompressor being operative to

decompress the compressed image texture data and supply
decompressed image texture data to the main bus, the frame

memory means (10) is operative to store the decompressed
image texture data in a texture area thereof, and the

image data producing means (6) is operative to produce the
image data utilizing the decompressed image texture data

stored in the frame memory means.
The circuit of claim 25, wherein the input means (5,
9) comprises a decoder (5) having an input to receive the

compressed image texture data, the sprite producing
instructions and the first polygon producing instructions

in encoded form and operative to decode the received
encoded compressed image texture data, sprite producing

instructions and first polygon producing instructions. 
The circuit of claim 26, wherein the decoder (5)
comprises a CD-ROM decoder, and wherein the input means

further comprises a CD-ROM drive (9) for reading the
encoded compressed image texture data, sprite producing

instructions and first polygon producing instructions
therefrom and to supply the same to the CD-ROM decoder.
A game playing apparatus for producing game image
data representing a game image based on sprite producing

instructions for producing two-dimensional image data and
polygon producing instructions for producing three-dimensional

image data, the game playing apparatus
comprising apparatus according to any one of claims 11 to

23, wherein:

game user input means (30) is operable to produce
game operation commands in response to an action by a

user;
said means (2,8) for producing the second polygon
producing instructions is operable based upon the game

operation commands;
said image data producing means (6) is operable to
produce the game image data; and
said first memory means (10) is operable to store the
plurality of pixels of the produced game image data and to

output the stored pixels for producing the game image.
The game playing apparatus of claim 28, further
comprising an A/D converter for converting the pixels

output by the first memory means to analog form.
</CLAIMS>
</TEXT>
</DOC>
