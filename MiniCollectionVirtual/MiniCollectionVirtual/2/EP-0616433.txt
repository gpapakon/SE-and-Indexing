<DOC>
<DOCNO>EP-0616433</DOCNO> 
<TEXT>
<INVENTION-TITLE>
Statistically based continuous autocalibration method and apparatus.
</INVENTION-TITLE>
<CLASSIFICATIONS>G12B1300	G12B1300	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>G12B	G12B	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>G12B13	G12B13	</CLASSIFICATIONS-FOURTH>
<ABSTRACT>
A method for compensating a sampled data process F by removing 
deviations therefrom to make it more nearly ideal, said process being ideally 

represented as:


F(X
n
) = Y
n



 
where X
n
 is an input and Y
n
 is a scaler output corresponding thereto;
 

   said process actually including one or more process parameters that cause 
the actual process to deviate from ideal so that the actual process is represented as:



F(X
n
,P
n
) = Y
n
' 



 
where X
n
 is the input, P
n
 is a vector representing the parameters for the 
corresponding sample, and Y
n
' is the output of the actual process corresponding to 
(X
n
,P
n
);
 

   the process being such that:


F(X
n
) = F(X
n
,P) 



 
where P is a fixed vector representing ideal process parameters;

 
   the method comprising the steps:

 
   providing a random vector Z
n
;
 

   performing an operation C on (X
n
,Z
n
) to yield an output X
n
';
 

   performing the operation F on (X
n
',P
n
) to yield an output W
n
';
 

   performing an operation H on (X
n
,Z
n
) to yield a vector output Z
n
'; and
 

   performing an operation D on (W
n
',Z
n
') to yield an output W
n
;
 

   calculating the parameter vector P
n
+
1
 for the next sample using the formula:


P
n
+
1
 = P
n
 - (W
n
·Z
n
')/K 



 
where K is a smoothing constant;

 
   wherein:

 
   operations C, H and D are chosen such that:



W
n
 = Y
n
 = F(X
n
,P) = D(F(C(X
n
,Z
n
),P),H(X
n
,Z
n
)) 



 
and:

 
   the sign of each element of the expected value of [W
n
Z
n
'] is the same as the 

sign of the corresponding element of the expected value of [P
n
-P]. 


 
</ABSTRACT>
<APPLICANTS>
<APPLICANT-NAME>
HEWLETT PACKARD CO
</APPLICANT-NAME>
<APPLICANT-NAME>
HEWLETT-PACKARD COMPANY
</APPLICANT-NAME>
</APPLICANTS>
<INVENTORS>
<INVENTOR-NAME>
HILTON HOWARD E
</INVENTOR-NAME>
<INVENTOR-NAME>
HILTON, HOWARD E.
</INVENTOR-NAME>
</INVENTORS>
<DESCRIPTION>
The present invention relates to the calibration of sampled systems, and 
more particularly relates to the automatic statistical calibration of such systems to 
compensate for parameters that may cause such systems to deviate from ideal. For expository convenience, the present invention is described with reference 
to one illustrative application thereof, namely a system for removing conversion errors 
in a subranging analog-to-digital conversion circuit (ADC). It will be recognized, 
however, that the invention is not so limited. A typical subranging ADC 10 is shown in Fig. 1. It includes a track and 
hold circuit 12, first and second ADCs 14, 16, a digital-to-analog converter (DAC) 18, 
a load 20, an amplifier 22, and a summer 24. In operation, an input analog signal is 
applied to the track and hold circuit 12. The output from this circuit tracks its input 
until a clock signal applied thereto causes the circuit to momentarily hold its output 
fixed. The first ADC 14 then converts this analog output signal into digital form, 
thereby providing a first approximation of the digitized value. The digital output from ADC 14 is converted back into analog current form 
by the DAC 18, causing an error, or residual voltage to be developed across the load 
20. This residual voltage is amplified by the amplifier 22 and converted into digital 
form by the second ADC 16. The accuracy of ADC2 is less critical than ADC1 since 
it is only operating on the residual or "subrange" of the original signal. In the Fig. 1 
system, the errors of ADC2 are only one 64th as significant as errors in ADC1. The summer 24 sums ADC1's first approximation of the input analog signal 
and ADC2's representation of the residual (appropriately adjusted for the gain of the 
amplifier) to provide a composite digital output signal. The advantage of the subranging approach is that the accuracy of the result 
is dependent only on the accuracy of the DAC and ADC2, not on the accuracy of 
ADC1. The size of the residual is still a function of ADC1 accuracy but the accuracy 
of the residual is not. This shifts the primary accuracy requirements to the DAC 
instead of the ADC, taking advantage of the inherently higher accuracy of DACs for a 
given sample rate.  The principal limit on accuracy in subranging ADC 10 is the accuracy with 
which the DAC 18 converts the digital output of ADC1 14 back into analog form. 
The DAC 18 typically generates its output signals by controllably gating binarily 
weighted currents into a summation node in response to
</DESCRIPTION>
<CLAIMS>
A method for compensating a sampled data process F by removing 
deviations therefrom to make it more nearly ideal, said process being ideally 

represented as:F(Xn) = Yn
 

where Xn is an input and Yn is a scaler output corresponding thereto; 
   said process actually including one or more process parameters that cause 

the actual process to deviate from ideal so that the actual process is represented as:F(Xn,Pn) = Yn' 
 

where Xn is the input, Pn is a vector representing the parameters for the 
corresponding sample, and Yn' is the output of the actual process corresponding to 

(Xn,Pn); 
   the process being such that:F(Xn) = F(Xn,P) 

 
where P is a fixed vector representing ideal process parameters; 

   the method comprising the steps: 
   providing a random vector Zn; 

   performing an operation C on (Xn,Zn) to yield an output Xn'; 
   performing the operation F on (Xn',Pn) to yield an output Wn'; 

   performing an operation H on (Xn,Zn) to yield a vector output Zn'; and 
   performing an operation D on (Wn',Zn') to yield an output Wn; 

   calculating the parameter vector Pn+1 for the next sample using the formula:Pn+1 = Pn - (Wn·Zn')/K 
 

where K is a smoothing constant; 
   wherein: 

   operations C, H and D are chosen such that:Wn = Yn = F(Xn,P) = D(F(C(Xn,Zn),P),H(Xn,Zn)) 
 

and: 
   the sign of each element of the expected value of [WnZn']
 is the same as the 
sign of the corresponding element of the expected value of [Pn-P]
. 
The method of claim 1 in which:H(Xn,Zn) = Zn' = Zn. 
The method of claim 1 in which Zn is a scaler;C(Xn,Zn) = Xn + Zn 
; andD(Wn',Zn) = Wn' - F(Zn,P). 
The method of claim 2 in which the process F is an amplifier with a 
variable gain Pn 

and the desired gain is P such that:F(Xn,Pn) = Xn·Pn 
; and

 
   the operation D generates the output Wn such that:D(Wn',Zn) = Wn = Wn' - PZn. 
The method of claim 1 in which: 
   the process F is an analog-to-digital signal conversion process; 

   Xn is an analog signal to be converted into digital form; 
   Yn is the digital counterpart of Xn; 

   Pn is a set of adjustable parameters which models the conversion errors 
associated with the analog-to-digital conversion process; and 

   Zn is a vector of digital noise signals. 
The method of claim 1 in which: 
   Xn comprises an analog voltage Vn and three digital numbers A1n, A2n and 

A3n; 
   the ideal process is described as:F(Xn) = Vn - A1n = Yn

 
where A2n = A3n = 0, and Yn is a digital output with acceptable precision; 

   the actual process is described by:F(Xn,Pn) = Vn - A1n + A2n - A3n + (Pn·Bn) 
 

where Bn is a vector comprised of the individual bits used to encode the three digital 
numbers A1n, A2n and A3n, and (Pn·Bn) is a vector dot product yielding a scaler; 

   the random vector Zn consists of two random digital numbers, Zn comprises 
two random digital numbers Z1n and Z2n;

 
   the operation C generates an output Xn' comprising the analog voltage Vn 

and three digital numbers D1n, D2n and D3n, such that:D1n = A1n + Z1nD2n = Z1n + Z2nD3n = Z2n; 
 

   the operation D generates an output Wn such that:D(Wn',Zn') = Wn' = Wn 
; and

 
   the operation H generates an output Zn' comprising a vector of all the 

individual bits used to encode the three digital numbers D1n, D2n and D3n. 
</CLAIMS>
</TEXT>
</DOC>
