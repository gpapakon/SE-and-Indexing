<DOC>
<DOCNO>EP-0659322</DOCNO> 
<TEXT>
<INVENTION-TITLE>
METHOD AND APPARATUS FOR COLOR OUTPUT DEVICE CHARACTERIZATION
</INVENTION-TITLE>
<CLASSIFICATIONS>H04N146	H04N146	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>H04N	H04N	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>H04N1	H04N1	</CLASSIFICATIONS-FOURTH>
<ABSTRACT>
The objet of the present invention consists in providing a color image processing method and apparatus for characterizing the color image signal values of a color output device using device-independent color representations. This means that the method and the apparatus of the present invention permit to determine the device-independent color values and to generate signals and hence the color image signal values for a color reproduction device, so that the color reproduction device produces colors which are identical or closest to target colors, in such a way that the human observer is not able to distinguish between the target color and the color produced by the color output device by means of the present invention. The method of the present invention consists preferably of two phases to determine the color image signal values A, B and C which will produce a desired minimum difference value (Delta)E, which indicates the difference between a given target color and the closest color produced by a color output device.
</ABSTRACT>
<APPLICANTS>
<APPLICANT-NAME>
AGFA GEVAERT NV
</APPLICANT-NAME>
<APPLICANT-NAME>
AGFA-GEVAERT N.V.
</APPLICANT-NAME>
</APPLICANTS>
<INVENTORS>
<INVENTOR-NAME>
GOVAERT RENE RAYMOND
</INVENTOR-NAME>
<INVENTOR-NAME>
GOVAERT, RENE, RAYMOND
</INVENTOR-NAME>
</INVENTORS>
<DESCRIPTION>
The present invention relates to a method and apparatus for color
output device characterization applicable to a wide range of color
hardcopy technologies. In particular, the present invention provides a
color image processing method and apparatus for characterizing the
image signals of a color output device using device-independent color
representations.In device-independent color communication, input and output devices
(such as scanners and printing devices, respectively) have to be characterized
by device-independent color representations such as the CIEXYZ or
CIEL*a*b* coordinates. The goal of color characterization of output
devices is to define the relation between the device-independent color
representation and the device-dependent color image signals which control
the amount of colorants (inks, pigments, dyes, toners) used in the
device to reproduce a color. Based upon this relation, a specific target
color or colors of an original image can be reproduced with a high level
of color correspondence. Preferably the color characterization also
includes information on the color reproduction range or color gamut of
the output devices. The European patent application EP-A-264 281 discloses a method for printing a color on
paper which matches a color on a CRT display. The technique is based on linear mixing
calculations in the CIExyY color space.The European Patent EP-B1-124 908 describes a method for obtaining halftone dot
percents required to reproduce the color of a color specimen by printing. The method is
based on color density measurement.US-A-5 121 196 describes a method of determining a combination of yellow, magenta,
cyan and black (CMYK) color densities from a color value expressed in color space.
100% under color corrected color patches are measured and a relationship produced
between the color value expressed in color space and the CMYK values. The CMYK
values for a color which does not lie in a color patch, are obtained in one embodiment by
a convergence interpolation method. This method has the disadvantage that it relies on
interpolation within the non-linear device-dependent space to find the corresponding
device-dependent coordinates which correspond to a target color.The object of the present invention consists in providing a color image processing method
and apparatus for characterising the color image signal values of a color output device
using device-independent color representations (e.g. CIEL*a*b* coordinates). This means
that the method and the apparatus of the present invention
</DESCRIPTION>
<CLAIMS>
Method for generating device-dependent color image signals which at least
approximate target colors, using a first conversion table containing device-dependent

color image signal triplets of a color output device and their corresponding device-independent
coordinate triplets, said method comprising:


(1) determining in said first conversion table a first device-independent coordinate
triplet having the smallest color difference value ΔE with the device-independent

coordinate triplet of a target color;
(2) determining on the basis of said first conversion table a first device-dependent
color image signal triplet corresponding to said first device-independent coordinate

triplet;
(3) defining a group of second device-dependent color image signal triplets
surrounding said first device-dependent color image signal triplet;
(4) determining second device-independent coordinate triplets corresponding to each
one of the group of second device-dependent color image signal triplets on the basis

of said first conversion table or by interpolating between device-independent
coordinate/device-dependent color image signal triplets known from said first

conversion table;
(5) determining the color difference value ΔE between each of the group of second
device-independent coordinate triplets and the device-independent coordinate triplet

of said target color;
(6) selecting one of the group of said second device-independent coordinate triplets
having the smallest value of ΔE; and
(7) using the device-dependent color signal triplet corresponding to the device-independent 
coordinate triplet with the smallest value of ΔE to generate a device-dependent

color image signal.
Method according to claim l, wherein said first conversion table relates actual
device-dependent color image signal triplets with device-independent coordinate

triplets measured from the color generated by said respective actual device-dependent
color image signal triplets with said color output device.
Method according to claim 1 or 2, further comprising:

(8) storing the device-independent coordinate triplet of said target color as input
triplet and said generated device-dependent color image triplet, determined during

step (7), as output triplet in the form of second conversion table.
Method according to any of the preceding claims, wherein said step (3) of selecting a
group of second device-dependent color image signal triplets surrounding said first

device dependent color image signal triplet includes selecting a group of known
preselected second device-dependent color image signal triplets surrounding said

first device-dependent color image signal triplet.
Method according to any of the preceding claims, in which said color difference ΔE
is the distance in the device-independent CIEL*a*b* space between the device-independent

coordinate triplet of said target color and the device-independent
coordinate triplet corresponding to a device dependent color image signal triplet,

wherein ΔE is given by:

ΔE = 
rΔL*
2
 + sΔa*
2
 + tΔb*
2
,

where ΔL*, Δa*, Δb* represent the differences in the device-independent
CIEL*a*b* space between the first, second and third coordinate respectively of the

device-independent coordinate triplet of said target color and the first, second and
third coordinate respectively of the device-independent coordinate triplet 

corresponding to the device dependent color image signal triplet, and r, s, t are
weight values which may equal 1.
Method according to any of the preceding claims, in which a device-dependent
color image signal triplet, preferably corresponding to said first device-independent

coordinate triplet is indicated as pivot triplet Ac, Bc, Cc; the steps (3) to (7)
comprising the following steps:


(a) selecting for each value of said pivot triplet Ac, Bc, Cc a positive and negative
increment on the respective A, B, and C axis of the ABC color space of said output

device, thus defining two new additional points on each A, B, C axis;
(b) determining said group of second device-dependent color image signal triplets
surrounding said first device-dependent color image signal triplet by determining all

possible A, B, C combination triplets from said pivot triplet and said increments;
(c) calculating the group of second device-independent coordinate triplets by
interpolation using the device-independent coordinates triplets stored in said first

conversion table for ABC triplets neighboring said group of second device-dependent
color image signal triplets;
(d) calculating for each said calculated second device-independent coordinate triplet
the difference ΔE with the device-independent coordinate triplet of said target color;
(e) selecting from said group of second device-dependent color image signals and the
pivot triplet the one corresponding to the calculated device-independent coordinate

triplet having the smallest color difference value ΔE as the new triplet Ac, Bc, Cc;
and
(f) ending the method, preferably when said smallest calculated color difference
value ΔE of step (f) is smaller than a predetermined minimum difference value, and

using said new triplet Ac, Bc, Cc as the generated device-dependent color signal, 
or repeating steps (a) to (f) employing said new triplet Ac, Bc, Cc as the new pivot

triplet.
Method according to claim 6, in which at least one, preferably each of said
increments, of step (a) is reduced by a predetermined value in comparison with the

previous increments or maintained at a respective predetermined minimum value,

thus defining two new additional points on each A, B, and C axis.
Method according to claim 6 or 7, in which step (f) comprises ending the method
when said increments are equal to their respective minimum value and when the new

triplet Ac, Bc, Cc is identical to the one ofthe previous iteration, and using the new
triplet Ac, Bc, Cc as the generated device-dependent signal.
Method according to claim 7 or 8, in which said reducing is only executed if said
new triplet Ac, Bc, Cc is identical to the previous pivot triplet Ac, Bc, Cc.
Method according to one of the claims 6 to 9, in which all increments in said step (a)
have a same distance with respect to said pivot point Ac, Bc, Cc on each of the three

A, B and C axes.
Method according to any of claims 7 to 10, in which all increments are reduced so as
to have a same distance with respect to said pivot point Ac, Bc, Cc on each of the

three A, B and C axes.
Method according to one of the preceding claims 1 to 8, step (f) furthermore
indicating the presence of a target color which is out of the color gamut of said color

output device.
Method according to one of the claims 6 to 12, step (f) indicating the presence of a
target color which is out of the color gamut of said output device, if at least one

value of said new triplet Ac, Bc, Cc is a minimum or a maximum value of the ABC
space of said color output device and said corresponding color difference value ΔE is

larger than said predetermined minimum color difference value. 
Apparatus for generating device-dependent color image signals which when
employed to generate a color with a color output device (30), at least approximate

target colors, said apparatus comprising:

(a) input means for receiving a device-independent coordinate triplet of a given
target color;
(b) first memory means (20) in which a first conversion table is stored, said first
conversion table containing device-dependent color image signal triplets of a color

output device and their corresponding device-independent coordinate triplets;
(c) data processor means (10) for performing, on the basis of said first conversion
table, a conversion of said device-independent triplet of said target color into a

generated device-dependent color image signal coordinate triplet at least
approximating said target color, said data processor means (10) being adapted for:


determining in said first conversion table a first device-independent coordinate triplet
having the smallest color difference value ΔE with the device-independent coordinate

triplet of a target color;
determining on the basis of said first conversion table a first device-dependent color
image signal triplet corresponding to said first device-independent coordinate triplet;
defining a group of second device-dependent color image signal triplets surrounding
said first device-dependent color image signal triplet;
determining second device-independent coordinate triplets corresponding to each
one of the group of second device-dependent color image signal triplets on the basis

of said first conversion table or by interpolating between device-independent
coordinate/device-dependent color image signal triplets known from said first

conversion table; 
determining the color difference value ΔE between each of the group of second
device-independent coordinate triplets and the device-independent coordinate triplet

of said target color;
selecting one of the group of said second device-independent coordinate triplets
having the smallest value of ΔE; and
generating said device-dependent color image signal coordinate triplet using the
device-dependent color signal triplet corresponding to the device-independent

coordinate triplet with the smallest ΔE.
Apparatus according to claim 14, further comprising:

second memory means for storing the device-independent coordinate triplet of said
target color as input triplet and said device-dependent color image signal triplet with

the smallest ΔE which at least approximates said target color, as an output triplet in
the form of a second conversion table.
Apparatus according claim 14 or 15, in which said data processing means
is adapted for selecting a group of known preselected second device-dependent color

image signal triplets as said group of second device-dependent color image signal
triplets surrounding said first device-dependent color image signal triplet.
Apparatus according to any of the preceding claims, in which said color difference
ΔE is the distance in the device-independent CIEL*a*b* space between the device-independent

coordinate triplet of said target color and the device-independent
coordinate triplet corresponding to a device dependent color image signal triplet,

wherein ΔE is given by:

ΔE = 
rΔL*
2
 + sΔa*
2
 + tΔb*
2
 ,

where ΔL*, Δa*, Δb* represent the differences in the device-independent
CIEL*a*b* space between the first, second and third coordinate respectively of the 

device-independent coordinate triplet of said target color and the first, second and
third coordinate respectively of the device-independent coordinate triplet

corresponding to the device dependent color image signal triplet, and r, s, t are
weight values which may equal 1.
Apparatus according to any of claims 14 to 17, in which said data processor means
further comprises:


indicator means for indicating a device-dependent color image signal coordinate
triplet, preferably corresponding to said first device-independent coordinate triplet,

as pivot triplet Ac, Bc, Cc; and
processing means for executing steps (a) to (f) defined in one of the claims 6 to 11.
Apparatus according to any one of the claims 14 to 18, comprising information
output means outputting a signal indicative of the presence of a target color received

by said input means, which is out of the color gamut of said color output device.
Apparatus according to claim 18 or 19, comprising detecting means for detecting the
presence of a target color, received by said input means, which is outside the color

gamut of said color output device, it at least one value of said new triplet Ac, Bc, Cc
is a minimum or a maximum value of the ABC color space gamut of said color

output device and said corresponding color difference value ΔE is larger than said
predetermined minimum color difference value.
A color output device (30) comprising the apparatus according to any of claims 14
to 20.
A combination of a color output device, in particular a color printer or color copier, and an
apparatus as defined by any one of the claims 14 to 20, said color output device

comprising:

(a) input means for receiving device-independent coordinate triplets as target colors; 
(b) storage means for storing the device-independent coordinate triplets and the
corresponding device-dependent color image signal triplets output by said apparatus

in one of the claims 14 to 20, as input and output triplets, respectively, of a

conversion table.
(c) data processing means for determining for a device-independent coordinate
triplet of a target color, received by said input means, the corresponding device-dependent

color image signal triplet on the basis of said conversion table stored in
said storage means; and
(d) output means for outputting a color represented by a device-dependent color
image signal triplet determined by said data processing means, said output color at

least approximating a target color.
</CLAIMS>
</TEXT>
</DOC>
