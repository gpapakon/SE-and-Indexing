<DOC>
<DOCNO>EP-0622732</DOCNO> 
<TEXT>
<INVENTION-TITLE>
Microcomputer
</INVENTION-TITLE>
<CLASSIFICATIONS>G06F942	G06F946	G06F946	G06F930	G06F948	G06F940	G06F930	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>G06F	G06F	G06F	G06F	G06F	G06F	G06F	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>G06F9	G06F9	G06F9	G06F9	G06F9	G06F9	G06F9	</CLASSIFICATIONS-FOURTH>
<ABSTRACT>
A microcomputer having: a register-set portion 
provided with a plurality of register sets having a 

plurality of registers, a first memory means (44) for storing 
select data for selecting said register-sets, a register-set 

selection means (41) for selecting said register-sets in 
accordance with said select data stored in said first 

memory means, a second memory means (52) for storing select data 
change data for changing the selection of said register 

sets, a third memory means (44) for storing, for the purpose of 
reservation, said select data stored in said first memory 

means, and an arithmetic means (62) for performing predetermined 
operations using said select data stored in said first 

memory means (44) and said select data change data stored in 
said second memory means (52) and supplying the results of the 

predetermined operations to said first memory means (44) to 
change said select data. 


</ABSTRACT>
<APPLICANTS>
</APPLICANTS>
<INVENTORS>
</INVENTORS>
<DESCRIPTION>
The present invention relates to a microcomputer, and
more particularly to a microcomputer provided with a device
for controlling the switching of tasks when a main program
is processed.The interrupt processing procedure for a
microcomputer relevant to the present invention is
described hereinbelow.As shown in FIG. 5, when a reception 12 of an
interrupt is made while a program 11 is being processed, an
interrupt receiving process 13 is started. In the
interrupt receiving process 13, a program status word
(hereinafter referred to as PSW) indicating status of a
main program which includes flag information is first
reserved. This PSW is reserved in a rewritable memory
indicated by a stack pointer (hereinafter referred to as
SP). Further, information of a program counter
(hereinafter referred to as PC) of the main program is
reserved in a stack. Subsequently, for assigning a program
to be processed by the interrupt, vector information
indicating which interrupt requirement is read from a
program memory and stored in the PC.After such an interrupt receiving process 13 has been
completed, a register saving process 14 is carried out. In
the process 14, the content of a register used immediately
before the interrupt reception during the main program
process 11 is stored in another rewritable memory.
Thereafter, a regular interrupt process 15 is executed.Upon completion of the interrupt process 15, a return
process 16 to the main program is carried out. In this
return process 16, the content of the register which has
been saved in the rewritable memory is again returned to
and stored in the register.Subsequently, an interrupt return process 17 reads PC
information and PSW information of the main program stored 
in the stack. The thus read PSW information is written
into PSW without modification whereas the PC information is
written into PC. Thereby, the return to the main program
18 which has been executed at the time of reception of the
interrupt process is effected.However, the above-described microcomputer had the
following problems. In the case where the interrupt
process is carried out, a process for saving the register
used in the main program to the memory as described above
is required. Normally, there is a plurality of registers,
and time is needed for reserving the data stored in all
registers. Furthermore, the memory for storing the data
comprises a rewritable memory. Normally, a data RAM is
used. Since it takes time for the writing into the data
RAM, it also takes time for the storage.Moreover, in
</DESCRIPTION>
<CLAIMS>
A microcomputer comprising:

a register-set portion provided with a plurality of
register sets having a plurality of registers;
a first memory means for storing register selection data for
selecting said register sets;
a register-set selection means for selecting said
register-sets in accordance with said register selection data

stored in said first memory means;
a second memory means for storing register selection
change data for changing the selection of said

register sets;
a third memory means for storing, for the purpose
of reservation, said register selection data stored in said

first memory means when switching the execution context of a process from a
main program process to an interrupt process or

to a
subroutine program; and

characterized by further comprising:
an arithmetic means for performing predetermined
operations using said register selection data stored in said

first memory means and said register selection change data
stored in said second memory means at every switching of

the execution context of a process from a main program process to
an interrupt process or

to a subroutine program, said operations being performed so as to
render at least one of multiple nested interrupt process execution 

and multiple nested subroutine program execution possible, wherein
the results of the predetermined

operations are supplied to said first memory means to change
said register selection data at every switching of the process

execution context.
A microcomputer according to claim 1, wherein said
register selection change data stored in said second memory

means is fixed to a predetermined value, and
predetermined operations are performed between said

register selection data stored in said first memory means and said
predetermined value at every interrupt receiving

process.
A microcomputer according to claim 1, further
comprising:


a fourth memory means for storing register selection
change enable data indicative of whether or not the

change of said register selection data stored by said first
memory means is permitted; and
a means for supplying said register selection change data
stored in said second memory means to said

arithmetic means only in the case where in the
interrupt receiving process, said register selection

change enable data stored in said fourth memory
means permits the change of said register selection data.
A microcomputer according to claim 1, wherein said
register selection change data stored in said second memory

means is fixed to a predetermined value, and
predetermined operations are performed between said

register selection data stored in said first memory means said
predetermined value every switching of the process execution

context to a subroutine program. 
A microcomputer according to claim 1, further
comprising:


a fourth memory means for storing register selection
change enable data indicative of whether or not the

change of said register selection data stored in said first
memory means is permitted; and
a means for supplying said register selection change data
stored in said second memory means to said

arithmetic means only in the case where said
register selection change enable data stored in said fourth

memory means permits the change of said register selection data
when switching a process execution context from a main program to a

subroutine program.
</CLAIMS>
</TEXT>
</DOC>
