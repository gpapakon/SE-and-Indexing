<DOC>
<DOCNO>EP-0639003</DOCNO> 
<TEXT>
<INVENTION-TITLE>
Digitally adjustable and calibrated delay line and method.
</INVENTION-TITLE>
<CLASSIFICATIONS>H03H1126	H03H1126	H03K513	H03K513	H03K514	H03K514	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>H03H	H03H	H03K	H03K	H03K	H03K	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>H03H11	H03H11	H03K5	H03K5	H03K5	H03K5	</CLASSIFICATIONS-FOURTH>
<ABSTRACT>
A CMOS delay line and method for adjusting and calibrating 
propagation characteristics of the delay line. The delay line includes an 

array of cells connected in series with terminals spaced along the line for 
detecting the time that the transition edges of a propagating signal appear 

can be detected relative to the time of appearance of said transition edge of 
the input signal. Each cell of the delay line includes a CMOS transistor pair 

with both gates connected to an input terminal of the cell and both drains 
connected to an output terminal of the cell. The source terminals of the 

PMOS transistor and the NMOS transistor are each connected to biasing 
potential through a digitally controllable load. The load is another array of 

PMOS and NMOS transistors which add resistances and capacitance in 
parallel and therefore control propagation characteristic of the cell. The 

load is adjustable by applying logic signals on selected gates to the series 
array. A preferred method of calibration is to begin with all switches (logic 

gates) between bias potential and gates open so as to maximize delay, then 
open switches successively to move the transition edge of the propagated 

signal. An embodiment of the invention accomplishes this shift in two 
modes, a coarse mode which is the initial mode and a fine mode. 


</ABSTRACT>
<APPLICANTS>
<APPLICANT-NAME>
ADVANCED MICRO DEVICES INC
</APPLICANT-NAME>
<APPLICANT-NAME>
ADVANCED MICRO DEVICES INC.
</APPLICANT-NAME>
</APPLICANTS>
<INVENTORS>
<INVENTOR-NAME>
BEHRIM MICHAEL N
</INVENTOR-NAME>
<INVENTOR-NAME>
BEHRIM, MICHAEL N.
</INVENTOR-NAME>
</INVENTORS>
<DESCRIPTION>
This invention relates to a delay line and particularly to a method and 
apparatus for adjusting the propagation characteristic of the line to control 
the phase of the output signal relative to the phase of the input signal. A fundamental requirement for communication in a pulse encoded 
data system is to time the arrival of leading and falling edges of transmitted 
data pulses arriving at the receiving station (the received pulses) to coincide 
with edges from pulses of a signal local to the receiver. Systems to which 
this requirement applies include a host computer and a peripheral and one 
computer communicating with another. Traditionally, phase locked loops using analog and digital techniques 
have been the method of choice for recovering serially transmitted data 
The technique involves comparing the phases of the data bit and local 
oscillator pulse to produce a signal that controls the frequency of a voltage 
controlled oscillator. Digital techniques are now replacing this analog 
approach and digitally controlled delay lines are needed to assist in 
performing these functions. An approach is described in IBM Technical Disclosure Bulletin v. 28, 
No. 7, Dec. 1985 according to which a time delay circuit for digital MFM data 
separation uses an extra clock pulse to charge a capacitor for the duration 
of a clock pulse after which, arrival of a data pulse initiates discharge of the  
 
capacitor to generate a delay signal having the same duration as the clock 
signal. More recently, delay circuits using CMOS technology have been 
disclosed which suggest an alternate method for performing these delay 
functions. None of the cited art known to me provides the fine incremental 
adjustment of delay that is provided by the present invention. The large size 
and expense of inductors used in normal delay lines present difficulties in 
combining that technology with digital circuits. The increased speed and 
reliability of CMOS circuits has stimulated interest in applying CMOS 
technology to delay line applications. However due to processing problems, 
it is impossible to design a CMOS delay line which will operate for all 
temperatures and voltages expected while maintaining the close tolerances 
on delay specification. We will describe a calibrateable delay line 
involving techniques that are primarily digital and easy to process using 
CMOS technology. It is therefore contemplated that these techniques be 
especially convenient for integration into digital VLSI design. We will describe a delay line
</DESCRIPTION>
<CLAIMS>
A delay line having a plurality of cells wherein each said cell 
comprises: 

   an input terminal and an output terminal; 
   a first PMOS/NMOS pair of transistors, each said transistor having 

source, drain and gate electrodes; 
   said drain electrode of said first NMOS transistor being connected to 

said drain electrode of said first PMOS transistor and to said cell output 
terminal; 

   said gate electrodes of said first PMOS and said first NMOS 
transistors being both connected to said cell input terminal ; 

   means for controlling and calibrating the propagation delay of each 
said cell, said means including a control terminal means adapted for 

connection to a control potential, said means also including a first portion 
and a second portion, said first portion being connected between said 

source electrode of said first PMOS transistor and a terminal adapted for 
connection to a positive bias potential, said second portion being connected 

between said source electrode of said first NMOS transistor and a terminal 
adapted for connection to ground potential; and 

   a plurality of said cells connected in series, said cell output terminal of 
each of said cells connected to a cell input terminal of a next one of said 

cells beginning with a first one of said cells having its input terminal adapted 
as a delay line input for connection to a signal source and a last one of said 

cells having its said cell output terminal adapted as a delay line output 
terminal. 
A delay line comprising: 
   a plurality of cells, each said cell having a cell input and cell output 

terminal;
 

   a CMOS transistor comprising a first PMOS/NMOS pair of transistors, 
said PMOS/NMOS transistors each having a gate, source and drain 

electrode wherein said drain electrode of said first NMOS transistor is 
connected to said drain electrode of said first PMOS transistor and to said 

cell output terminal, and wherein said gate electrode of said first PMOS 
transistor and said gate electrode of said first NMOS transistor are 

connected to said cell input terminal; 
   a plurality of second PMOS transistors, each having source, drain 

and gate electrodes; 
   said first PMOS transistor having its said source electrode connected 

to said drain electrodes of each of said second PMOS transistors; 
   a plurality of second NMOS transistors, each having source, drain and 

gate electrodes; 
   said first NMOS transistor having its said source electrode connected 

to said drain electrode of each of said second NMOS transistors; 
   each said drain electrode of each said second PMOS transistor being 

adapted for connection to a positive bias potential; 
   each said drain electrode of each said second NMOS transistor being 

adapted for connection to a ground potential; 
   a first control terminal adapted for receiving a first control voltage; 

   a second control terminal adapted for receiving a second control 
voltage; a means for switchably connecting said first and second 

control terminals to a first and second group of selected gate electrodes 
respectively of said second PMOS and said second NMOS transistors, said 

gate electrodes in each said first and second groups selected to provide a 
desired propagation delay on said delay line; 

   said plurality of cells being connected together with said cell output 
terminal of each one of said cells being connected to said cell input terminal 

of a next one of said cells beginning with a first one of said cells having its 
cell input terminal adapted as a delay line input for connection to a signal 

 
source and a last one of said cells having a cell output terminal adapted as 

a delay line output terminal. 
A delay line as in claim 1 further comprising a plurality of 
sampling buffers, one buffer for a predetermined one of said cells 

respectively, each said buffer having a clocking terminal and a sampling 
terminal, said sampling terminal being connected to a said cell output 

terminal of a said predetermined one of said cells. 
A delay line as in claim 2 which includes a plurality of sampling 
buffers, one buffer for a preselected one of said cells respectively, each 

said buffer having a clocking terminal and a sampling terminal, said 
sampling terminal being connected to said cell o
utput terminal of said 
preselected cell. 
A delay line as in claim 3 wherein said sampling buffer comprises: 
   a D flipflop having a flipflop input terminal, a clock terminal and a 

flipflop output terminal; 
   said clock terminal being connected to said delay line input terminal; 

and 
   said flipflop input terminal being said buffer sampling terminal 

whereby a signal is elicited on said flipflop output terminal corresponding to 
the signal at said sampling terminal clocked by said input to said delay line. 
A delay line as in claim 4 wherein said buffer comprises: 
   a D flipflop having a flipflop input terminal, a clock terminal and a 

flipflop output terminal; 
   said clock terminal being connected to said delay line input terminal; 

   said flipflop input terminal being connected to one of said selected 
 

sampling terminals respectively whereby a signal is elicted on said flipflop 
output terminal responsive to a signal at said sampling terminal clocked by a 

delay line input signal. 
A delay line as in claim 5 wherein means for detecting the position 
of said pulse edge includes: 

   a plurality of NAND gates, each said NAND gate having two input 
terminals; 

   one terminal of each NAND gate being connected to an input terminal 
of a neighboring NAND gate and to an output terminal of one of said D 

flipflops, respectively, such that when a transition edge of a propagated 
signal exists between two neighboring selected sampling points, a logical 

one will be elicited by said output terminal of said NAND gate having its 
inputs connected to said D flipflops having flipflop terminals connected to 

said neighboring sampling points on both sides of said transition of said 
pulse edge. 
A delay line as in claim 6 wherein means for detecting position of 
said pulse edge includes: 

   a plurality of NAND gates, each said NAND gate having two input 
terminals; 

   one terminal of each NAND gate being connected to an input terminal 
of a neighboring NAND gate and to an output terminal of one of said D 

flipflops, respectively, such that when a transition edge of a propagated 
signal exists between two neighboring selected sampling points, a logical 

one signal will be elicited by said output terminal of said NAND gate having 
its inputs connected to said D flipflops having flipflop input terminals 

connected to said neighboring sampling points on both sides of said 
transition of said pulse edge. 
The delay line of claim 2 wherein said means for switchably 
connecting includes, one FET switch member for each PMOS/NMOS 

transistor pair, each said FET switch member having a gate, source and 
drain, said source electrodes of said FET switch member being connected to 

said gate electrode of said respective second NMOS transistor; 
   a plurality of control inverters, one said control inverter for each said 

second PMOS/NMOS transistor pair, each control inverter having a first 
inverter terminal connected to said FET source and a second control inverter 

terminal connected to a gate electrode of said respective second PMOS 
transistor of said PMOS/NMOS transistor pair. 
A delay line as in claim 9 further comprising an OR gate 
corresponding to each FET switch, said OR having one output and a pair of 

inputs; 
   each said gate of said FET switch member is coupled to said output 

of said OR gate. 
The delay line of claim 8 wherein said means for switchably 
connecting includes a plurality of FET switch members, one FET switch 

member for each second PMOS/NMOS transistor pair, each said FET switch 
member having a gate terminal and a first and second channel terminals, 

said first channel terminal being connected to said gate electrode of said 
respective second NMOS transistor. 
The delay line of claim 1 further comprising on algorithmic state 
machine connected to said means for controlling and calibrating said delay 

line; and wherein said first portion of said means for controlling comprising a 
plurality of parallel PMOS transistors 
The delay line of claim 12 wherein said algorithmic state machine 
 

includes 
   a coarse and fine select register; 

   a sequence state machine controller; said sequence state machine 
controller coupled to said course and fine registers; and 

   said coarse and fine register, responsive to said sequence state 
machine controller, provides control signals to said means for controlling and 

calibrating said delay line. 
A delay line as in claim 13 including 
   a plurality of OR gates, each said OR gate including two OR input 

terminals and an OR output terminal, said OR output terminal being coupled 
to a said gate electrode of a said PMOS transistor; 

   wherein said delay line further comprises, 
   each said coarse and fine register having a plurality of register output 

terminals, one register output terminal connected to one OR input terminal 
respectively for applying a digital code signal to said OR input terminals; 

   a plurality of sampling terminals connected between groups of said 
cells; and 

   a plurality of AND gates, each said AND gate having an output 
terminal and a plurality of AND input terminals, each AND input terminal 

being coupled to two of said sampling terminals such that a logic one signal 
is elicited on said AND output terminal when a transition edge from a 

propagated signal exists in the delay line between said sampling terminals. 
A method for calibrating a delay line wherein said delay line 
includes a plurality of delay cells connected in series with an output terminal 

of one cell connected to the input terminal of a next cell beginning with a 
first cell having an input terminal where a signal is input to the delay line and 

ending with a last cell where said signal propagated along said delay line is 
output at an output terminal, each cell having a propagation time, said 

 
method including the steps: 


(a) detecting a transition edge of a propagating signal at a sampling 
terminal between two cells relative to a transition edge of an initiating signal 

input to said delay line; 
(b) adjusting said propagation time of selected ones of said delay 
cells as to move said transition edge of said propagating signal to said 

output terminal. 
A method as in claim 15 wherein, 
step (a), includes adjusting said propagation delay of said selected cells 

such that an edge transition of a propagating signal occurs at a sampling 
terminal distant from said output terminal; and 

   wherein said step (b) includes adjusting propagation delays 
simultaneously of groups of said cells such as to effect coarse movements 

of said transition toward said output terminal of said delay line, and then 
adjusting propagation delays of selected single cells such as to effect fine 

movement of said transition toward said output terminal of said delay line. 
The method of claim 16 wherein both step (a) and step (b) are 
controlled by a sequence controller according to a algorithm. 
The method of claim 17 wherein said algorithm attempts to 
maintain said transition in a target position between two said selected cells 

of said delay line and so long as said transition is within a predetermined 
number of said cells from its said target position, said algorithms will cause 

said sequence controller to remain in said fine movement mode of step (b). 
</CLAIMS>
</TEXT>
</DOC>
