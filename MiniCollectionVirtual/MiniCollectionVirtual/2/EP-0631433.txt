<DOC>
<DOCNO>EP-0631433</DOCNO> 
<TEXT>
<INVENTION-TITLE>
Video camera and method of controlling the same
</INVENTION-TITLE>
<CLASSIFICATIONS>H04N5907	H04N5225	H04N5232	H04N5225	H04N5907	H04N5232	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>H04N	H04N	H04N	H04N	H04N	H04N	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>H04N5	H04N5	H04N5	H04N5	H04N5	H04N5	</CLASSIFICATIONS-FOURTH>
<ABSTRACT>
A video camera is provided in which an 
effective image plane is not affected even if a 

command to write data is supplied from a 
microcomputer to a signal processing portion in an 

effective video period. A plurality of control 
registers are provided in an interface portion. If 

a command to write data is supplied from the 
microcomputer to the signal processing portion in an 

effective video period for a video signal, data, 
which must be transferred, and address are 

temporarily stored in the registers and the stored 
signals are transferred to the signal processing 

portion in a retrace line period for a next video 
signal. As a result of the structure, data is 

written on the signal processing portion in the 
retrace line period for the next video signal even 

if the command to write data is supplied from the 
microcomputer to the signal processing portion. 

Therefore, if data different from the data which 
must be transferred is supplied from the 

microcomputer to the register on which the data for 
the signal processing portion has been written, the 

effective image plane is not affected. 

</ABSTRACT>
<APPLICANTS>
<APPLICANT-NAME>
CANON KK
</APPLICANT-NAME>
<APPLICANT-NAME>
CANON KABUSHIKI KAISHA
</APPLICANT-NAME>
</APPLICANTS>
<INVENTORS>
<INVENTOR-NAME>
YAMADA KUNIHIKO
</INVENTOR-NAME>
<INVENTOR-NAME>
YAMADA, KUNIHIKO
</INVENTOR-NAME>
</INVENTORS>
<DESCRIPTION>
The present invention relates to a video
camera for digital-computing a video signal.An example of data communication between a
logical computing portion (hereinafter called a
"microcomputer") and a signal processing portion in
a conventional video camera (hereinafter called a
"digital camera") for digital- computing a video
signal will now be described with reference to Figs.
1 and 2A to 2C.Fig. 1 is a block diagram showing the
structure of a conventional digital camera, and
Figs. 2A to 2C are timing charts showing a state of
communication between an ordinary microcomputer and
an interface.Referring to Fig. 1, reference numeral 1
represents a lens, 2 represents an image sensing
device for converting, into an electric signal, an
image of an object projected by the lens 1, 3
represents an A/D converter for converting a video
signal supplied from the image sensing device 2 into
a digital signal, 4 represents a signal processing 
portion for computing a digital signal converted
from the analog signal, 5 represents an interface
portion for reading or writing data onto a data
register included in the signal processing portion
4, 6 represents a microcomputer that receives data
read by the interface portion 5 to process data in a
predetermined manner or transmit data to be written
to the interface portion 5, and 7 represents a D/A
converter for converting computed video signal into
an analog signal.In the signal processing portion 4, reference
numerals 411 to 41n represent writing registers for
writing data received by the interface portion 5
from the microcomputer 6. Data to be stored in the
registers 411 to 41n is data (for example, the gains
of AGC signals, those of R, G and B signals for
white balance and a value for determining a region
for autofocusing process) required for operations to
process the video signal in the signal processing
portion 4. Reference numerals 421 to 42n represent
reading registers for storing data in the signal
processing portion 4 to transmit it to the
microcomputer 6. Reference numeral 43 represents a
status register for holding, for each register, a
state whether data has been stored in each of the
reading registers 421 to 42n or not. Reference 
numeral 44 represents an OR circuit for obtaining an
interruption signal from load signals L1 to Ln of
each reading register. Reference numeral 45
represents a data selector. Each of the aforesaid
registers is a shift register which is capable of
serially inputting/outputting data when it receives
a clock. Reference numeral 46
</DESCRIPTION>
<CLAIMS>
A video camera comprising:

a lens (1) which focuses image light onto an
image sensing device (2) so as to generate an analog

image signal;
A/D conversion means (3) for converting the analog
output of the image sensing device into a digital image

signal;
signal processing means (4) adapted to process
digitally an image signal;
storage means (411-41n) for storing control data
utilised by said signal processing means to process the

image data;
a microcomputer (6) for computing data for
controlling said signal processing means;

   characterised by

control means (5a) adapted to control the writing
of control data into said storage means so that control

data which would effect the video signal is written into
the storage means within a line retrace period of the

video signal,
and wherein said control means comprise a plurality
of control memories (511-514, 521-524) disposed in an

interface portion (5a) interposed between said
microcomputer and said signal processing means for

performing communication of said control data between 
said signal processing means and said microcomputer.
A video camera according to claim 1, wherein said
signal processing means includes a plurality of

internal data registers (411, 412... 41n); and wherein
the control registers of the interface portion are

operative to perform communication with said data
registers in such a way that a digital signal of a

plurality of bits is treated as data of one word.
A video camera as claimed in claim 2, wherein said
control means is operative so that if said control data

is transferred from said microcomputer in an effective
video period of the video signal said control means

temporarily causes said control memories to store said
transferred control data together with the address of the

or each internal data registers which is intended to
receive the control data, and then to transfer said

control data to the appropriate register or registers in
said signal processing means during a retrace line period

of the next video signal.
A video camera according to claim 3, wherein said
control means comprise:


a counter (54) for counting the number of said
control memories in which said control data is stored;

and 
inhibition means for inhibiting communication until
the retrace line period of the next video signal even if

a command to write data in said internal registers has
been issued by said microcomputer in the case where the

value stored in said counter indicates that the data to
be transferred cannot be accommodated.
A video camera according to any one of claims 1 to
4, and further comprising selection means (56) connected

between said control memories of said interface and said
internal data registers so that data can be transferred

either directly from said microcomputer to said internal
data registers or via the control registers in said

interface.
A video camera according to claim 5, wherein said
selection means is a switch adapted to select the direct

transmission of data from said microcomputer to said
signal processing section during at least the vertical

retrace line period of the digital image signal.
A video camera according to any one of claims 2 to
6 and including a status register in which the state of

bits corresponding to respective reading registers is
changed if data has been written on a register to be read

from outside when communication is performed between a
microcomputer and an internal data register in such a way 

that a digital signal of a plurality of bits is treated
as data of one word; and reading means for reading said

status register from said microcomputer simultaneously
with transference of said address or said data when said

microcomputer sets the address of said register to be
read from outside or when communication is performed to

transfer data to a register onto which data is written
from outside.
A video camera according to any one of the preceding
claims and including identification means for identifying

horizontal and vertical retrace line periods of said
digital image signal.
A video camera according to claim 8 and further
comprising reading means for reading changes in the

status of said signal processing means in synchronisation
with the writing or reading of said control data.
A method of processing the image signal of a video
camera comprising:


focusing image light onto an image sensing device
(2) so as to generate an analog image signal;
converting in A/D conversion means the analog output
of the image sensing device into a digital image signal;

and
utilising digital signal processing means (4) to 
process digitally the image signal;
storing control data utilised by said signal
processing means to process the image data in storage

means (411-41n);
utilising a microcomputer (6) to compute data for
controlling said signal processing means;

   characterised by

controlling by control means (5a) the writing of
control data into said storage means so that control data

which would effect the video signal is written into the
storage means within a line retrace period of the video

signal,
and wherein said control means comprise a plurality
of control memories (511-514, 521-524) disposed in an

interface portion (5a) interposed between said
microcomputer and said signal processing means for

performing communication of said control data between
said signal processing means and said microcomputer.
A method according to claim 10, wherein said signal
processing means includes a plurality of internal data

registers (411, 412... 41n); and wherein the control
memories of the interface portion perform communication

with said data registers in such a way that a digital
signal of a plurality of bits is treated as data of one

word. 
A method as claimed in claim 11, wherein said
control means is operative so that if said control data

is transferred from said microcomputer in an effective
video period of the video signal said control means

temporarily causes said control memories to store said
transferred control data together with the address of the

or each internal data registers which is intended to
receive the control data, and then to transfer said

control data to the appropriate register or registers in
said signal processing means during a retrace line period

of the next video signal.
A method according to claim 12, including:

utilising a counter (54) to count the number of said
control registers in which sa
id control data is stored;
and
inhibiting communication until the retrace line
period of the next video signal even if a command to

write data in said internal registers has been issued by
said microcomputer in the case where the value stored in

said counter indicates that the data to be transferred
cannot be accommodated.
A method according to any one of claims 10 to 13,
and further comprising utilising selection means (56)

connected between said control memories of said interface
and said internal data registers so that data can be 

transferred either directly from said microcomputer to
said internal data registers or via the control registers

in said interface.
A method according to claim 14, wherein said
selection means selects the direct transmission of data

from said microcomputer to said signal processing section
during at least the vertical retrace line period of the

digital image signal.
A method according to claim 15 and including
identifying horizontal and vertical retrace line periods

of said digital image signal.
</CLAIMS>
</TEXT>
</DOC>
