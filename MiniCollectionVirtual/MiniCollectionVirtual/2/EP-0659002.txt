<DOC>
<DOCNO>EP-0659002</DOCNO> 
<TEXT>
<INVENTION-TITLE>
Method and circuit for the transmission of voice signals
</INVENTION-TITLE>
<CLASSIFICATIONS>H04L100	H04B1404	H03M1339	H04L100	G10L1300	H03M1300	H04B1404	H03M1300	G10L1300	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>H04L	H04B	H03M	H04L	G10L	H03M	H04B	H03M	G10L	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>H04L1	H04B14	H03M13	H04L1	G10L13	H03M13	H04B14	H03M13	G10L13	</CLASSIFICATIONS-FOURTH>
<APPLICANTS>
<APPLICANT-NAME>
KONINKL PHILIPS ELECTRONICS NV
</APPLICANT-NAME>
<APPLICANT-NAME>
PHILIPS INTELLECTUAL PROPERTY
</APPLICANT-NAME>
<APPLICANT-NAME>
KONINKLIJKE PHILIPS ELECTRONICS N.V.
</APPLICANT-NAME>
<APPLICANT-NAME>
PHILIPS INTELLECTUAL PROPERTY 
&
 STANDARDS GMBH
</APPLICANT-NAME>
</APPLICANTS>
<INVENTORS>
<INVENTOR-NAME>
HELLWIG KARL
</INVENTOR-NAME>
<INVENTOR-NAME>
LORENZ DIETMAR
</INVENTOR-NAME>
<INVENTOR-NAME>
HELLWIG, KARL
</INVENTOR-NAME>
<INVENTOR-NAME>
LORENZ, DIETMAR
</INVENTOR-NAME>
</INVENTORS>
<CLAIMS>
A circuit arrangement for receiving bit blocks which are built from speech
signals lasting a time slot of predefined duration, comprising a receiving part (22) for

receiving and demodulating transmitted bit blocks for the generation of channel bits, a
channel decoder (24) for generating different code words from the channels bits on a

channel output (29), while bits are secured by a test word at predefined bit positions of the
code words, and an error masking circuit (30, 34) coupled to the channel output (29), the

circuit comprising a memory (52) for storing the code words of a previous bit block and a
speech decoder (30, 36) for generating speech signals from received code words,


characterized in that
 means are provided for generating error signals from the channel bits,
the error signals indicating an extent of faults in a received bit block and/or a test word built

from this bit block and to be applied to the error masking circuit (30, 34) and in the error
masking circuit (30, 34) the generation of error class signals is provided in dependence on

the error signals, an error class being determined by an error value and either a test word
error signal or a fault signal, a modification of the code words of the received bit block

being provided in different manners in dependence on the error class signals.
A circuit arrangement as claimed in claim 1, 
characterized in that
 the
channel decoder (24) has a first, second and third error output (25, 26, 27) which is

provided for issuing error signals and for applying them to the error masking circuit (30,
34), and in the error masking circuit (30, 34) there is provided to generate error class

signals for different errors of the code word groups in dependence on the error signals in a
classification circuit.
A circuit arrangement as claimed in claim 1, 
characterized in that
 the
channel decoder (24) is arranged for producing on the channel output (29) a first, a second,

a third and a fourth code word group, in which the first code word group denotes filter
coefficients, the second code word group amplitude values, the third code word group dwell 

time coefficients and the fourth code word group individually coded rest signals of the
speech signal for a reconstruction of speech signals to be produced.
A circuit arrangement as claimed in claim 1, 
characterized in that
 the
channel decoder (24) is arranged for generating on a first error output (26) a test word error

signal from each bit block while the test word error signal is derived from a test word
contained in the received bit block.
A circuit arrangement as claimed in claim 4, 
characterized in that
 for
generating an error value on a second error output (27) a coding circuit (62) is provided for

generating channel coded auxiliary signals from the decoded channel bits and comprises a
comparator (64) for comparing the auxiliary signals with respective channel bits of the

receive part (22) and for generating error signals in case there is no correspondence, a
counter (66) for counting the error signals and an evaluation circuit (68) coupled to the

counter (66) for generating the error value on the second error output (27).
A circuit arrangement as claimed in claim 5, 
characterized in that
 the
channel decoder (24) is arranged for generating on a third error output (25) the fault signal

for an indication of a probable extent of faults in the received bit block.
A circuit arrangement as claimed in claim 2, 
characterized in that
 the error
masking circuit (30, 34) comprises

a first threshold comparator (48) for comparing the error value from a second error output
(27) with a plurality of error thresholds (47) and

a second threshold comparator (46) for comparing the fault signal from a third error output
(25) with a fault threshold,

and includes

a fault indicator circuit (44) coupled at least to a first error output (26) to generate a fault
indicator signal (45) depending on at least the test word error signal,

and 
in that
 the fault indicator circuit (44) comprises

a combining circuit for generating the fault indicator signal via a logic combination of an
output signal from the first threshold comparator (48), an output signal from the second

threshold comparator (46) and the test word error signal from the first error output (26) 
and

a classification circuit (42) is provided which is coupled to the first threshold comparator
(48) to generate one from a number of different error class signals in dependence on an

exceeded error threshold and the fault indicator signal of one from a number of different
error class signals, and includes


a code word controller (50) triggered by the error class signals to modify at least
several of the code word groups produced by the channel decoder (24) in dependence on

applied error class signals, more particularly by replacing a code word group derived from
the code word groups from the memory (52).
A circuit arrangement as claimed in claim 1 in a base station, 
characterized
in that
 in the base station (12, 14, 16) the channel decoder (24) is arranged for generating at
least the error signals and the error masking circuit (34) is provided for modifying the code

words of the channel decoder (24) in dependence on the error signals in the base station

(12, 14, 16) and the speech decoder (36) and the controller (38) are provided in a central
station (10).
A system comprising at least a base station and at least a mobile station for
transmitting speech signals between the mobile station (1 to 7) and the base station (12, 14,

16), each station comprising a transmitting part for converting the speech signals of a time
slot of predefined length into a plurality of code word groups consisting of bits, which

groups have different meanings and for converting the bits into channel bits of a channel
code and for transmitting the channel bits as one bit block as well as the circuit arrangement

as claimed in one of the claims 1 to 8.
A method of transmitting speech signals between a stationary first station and at
least one mobile second station, in which the speech signals of a given time slot are

converted to several multi-bit code words having different connotations, while the most
significant bits of the code words are secured by a test word and the bits of the code words

are recoded into channel bits of a channel code and are transmitted as bit blocks from which
the code words and quality features are recovered at the receiving end by channel decoding,

error masking measures for generating modified code words being triggered when an error
is detected by means of the quality features and output speech signals being formed from 

the code words or in event of an error from the modified code words, 
characterized in that

information items about error properties of the received bit blocks are generated as quality
features during the channel decoding, the information items being formed from the bit

blocks and from the test words formed by the bit blocks and 
in that
 error classes are formed
from these information items, which error classes are determined by an error value and

either a test word error signal or a fault signal and by means of which values the code
words are modified in different manners.
A method as claimed in claim 10, 
characterized in that
 predefined bits of
code word groups are collectively provided with a test word at the transmitting end, which

test word is recovered at the receiving end and 
in that
 during the channel decoding an error
value is formed with an estimated bit error rate and is compared with a plurality of error

thresholds and 
in that
 in dependence on the exceeded error threshold and on the value of a
fault indicator which depends on at least one error detected by means of the test word, one

of a number of predefined error classes is formed and for several error classes at least the
first two code word groups are modified.
A method as claimed in claim 10, 
characterized in that
 a fault indicator is formed
as a binary value if at least one of the following conditions is satisfied:


an error is detected via the test word,
a metric value formed during the channel decoding exceeds a given metric threshold,
the error value exceeds a predefined first error threshold.
A method as claimed in claims 10 and 12, 
characterized in that
 a first error
class is formed

if the error value lies between a second and a third error threshold if the binary fault
indicator is lacking and for this error class in a first code word group indications for at least

the first two filter coefficients are compared with filter thresholds and, if at least one
indication exceeds this filter threshold, a modified first code word group is formed by the

first code word group of a previous stored bit block and in a second code word group each
amplitude value is compared with an amplitude value derived from the amplitude values of

the previous bit block and in the case of a deviation from this average amplitude value to a
predefined extent in the modified code word group, is replaced by this average amplitude 

value, and a modified third and fourth code word group is equal to a corresponding
received code word group,
in that
 a second error class is formed,

if the error value of the available fault indicator does not exceed a fourth error threshold or,
if the fault indicator is lacking the fault indicator was available in the previous bit block and

the error value in the current bit block exceeds a fifth error threshold and for this second
error class the modified first and second code word group is the respective corresponding

stored code word group of the previous bit block and the modified third and fourth code
word group is equal to the respective corresponding received code word group, and
in that
 a third error class is formed

if the error value of the available fault indicator exceeds the fourth error threshold while for
this third error class the modified first, second and third code word groups are the

respective stored code word groups of the previous bit block and the modified fourth code
word group consists of a random value.
A method as claimed in claims 10 and 13, 
characterized in that
 for a bit block that
is detected as the control word without speech information, the error masking measures are

carried out in accordance with the third error class.
A method as claimed in claims 10 to 14, 
characterized in that
 at least when
an error is detected by means of the test word in two consecutive bit blocks, the first

modified code word group is the stored first code word group of the previous bit block and
the second modified code word group contains the amplitude value of the stored second

code word group reduced by a fixed amount, and the stored second code word group is
replaced by the modified second code word, and in case of a bit block for which the second

error class is formed, the third and fourth modified code word group is the unchanged
respective code word group of this bit block, and 
in that
 with a bit block for which the third
error class is formed, the second modified code word group contains for all amplitude

values a mean value which is formed from the amplitude values of the stored second code
word group with the exception of the smallest and largest amplitude value and the third

modified code word group is the stored third code word group of the previous bit block and
the fourth modified code word group is a random value. 
A method as claimed in one of the claims 10 to 15, 
characterized in that

during speech pauses the speech signal is generated as background noise, which
background noise is formed from the first two code word groups of a bit block which is

featured as background noise bit block and for a reliable detection of a background noise bit
block in which the error value lies below a predefined sixth error threshold, the modified

first code word group is the received first code word group the two extreme amplitude
values have been omitted from the received second code word group and the average value

of the remaining amplitude values is used for all the amplitude values in the modified
second code word group and 
in that
 for a reliably detected background noise bit block in
which the error value lies above the sixth error threshold or in which the fault indicator is

present, or for a non-reliably detected background noise bit block, the first or second code
word group received in a previous bit block is used as a modified first and second code

word group.
A method as claimed in one of the claims 10 to 16, 
characterized in that
 the
error value is formed 
in that
 the channel-decoded channel bits are again channel coded and
the recoded bits are compared with the received bits as regards bit posit
ions and bit
positions having different bit values are counted to produce a count and the error value is

derived from the count.
A method as claimed in one of the preceding claims 10 to 17, 
characterized
in that
 for the bit blocks sent from the mobile stations the error masking measures are
implemented integrally in the base station and are only produced as error-free code words.
</CLAIMS>
</TEXT>
</DOC>
