<DOC>
<DOCNO>EP-0659012</DOCNO> 
<TEXT>
<INVENTION-TITLE>
Method for quantization of gray level pixel data with extended distribution set
</INVENTION-TITLE>
<CLASSIFICATIONS>G06T500	H04N1405	G06T500	G09G536	H04N1405	G09G536	H04N141	H04N141	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>G06T	H04N	G06T	G09G	H04N	G09G	H04N	H04N	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>G06T5	H04N1	G06T5	G09G5	H04N1	G09G5	H04N1	H04N1	</CLASSIFICATIONS-FOURTH>
<ABSTRACT>
A method and arrangement for quantization of the nth pixel in scan line ℓ (i.e., pixel 
n,ℓ), with error diffusion to a matrix including pixels at pixel locations corresponding to pixels 

{(n + 1, ℓ), (n-2, ℓ + 1), (n-1, ℓ + 1), (n,ℓ + 1)}. Distribution weighting may be in accordance with 
the scheme {(n + 1, ℓ) =0.5, (n-2, ℓ + 1) = 0.125 (n-1, ℓ + 1) = 0.125 (n,ℓ + 1) = 0.25}. In another 

embodiment, distribution weighting may be in accordance with the scheme {(n + 1, ℓ) = 0.5, (n-3, 
ℓ + 1) = 0.0625, (n-2, ℓ + 1) = 0.0625, (n-1, ℓ + 1) = 0.125, (n, ℓ + 1) = 0.25, }. 


</ABSTRACT>
<APPLICANTS>
<APPLICANT-NAME>
XEROX CORP
</APPLICANT-NAME>
<APPLICANT-NAME>
XEROX CORPORATION
</APPLICANT-NAME>
</APPLICANTS>
<INVENTORS>
<INVENTOR-NAME>
FAN SHIGANG
</INVENTOR-NAME>
<INVENTOR-NAME>
SHIAU JENG-NAN
</INVENTOR-NAME>
<INVENTOR-NAME>
FAN, SHIGANG
</INVENTOR-NAME>
<INVENTOR-NAME>
SHIAU, JENG-NAN
</INVENTOR-NAME>
</INVENTORS>
<DESCRIPTION>
This invention relates to conversion of images from gray scale pixel values to a
reduced number of levels pixel values, using error diffusion techniques that reduce visible
artifacts normally noted with error diffusion.Algorithms that convert gray images to binary or other number of level images
attempting to preserve gray density exist, and include among them error diffusion, as taught,
for example, in "An Adaptive Algorithm for Spatial Greyscale" by Floyd and Steinberg,
Proceedings of the SID 17/2, 75-77 (1976) (hereinafter, "Floyd and Steinberg"). The Floyd and
Steinberg method proposes distribution of error determined in the quantization of the nth
pixel in scan line ℓ (i.e., pixel n,ℓ), the matrix including pixels at pixel locations corresponding to
pixels {(n + 1, ℓ), (n-1, ℓ + 1), (n, ℓ + 1), (n + 1,ℓ + 1)}. Distribution weighting in accordance with
the scheme is given by {(n + 1, ℓ) = 0.4375, (n-1, ℓ + 1) = 0.1875 (n,ℓ + 1)= 0.3125
(n + 1,ℓ + 1) = 0.0625}, or approximated for computer calculation by the set {(n + 1, ℓ) = 0.5, (n-1,
ℓ + 1) = 0.125 (n, ℓ + 1) = 0.25 (n + 1,ℓ + 1) = 0.125} as taught in US-A 4,733,230 to Kurihara.
See, Figure 1.Additional modifications to the error diffusion algorithm taught by Floyd and
Steinberg have been proposed, e.g.: a different weighting matrix, as taught, for example, in
"A Survey of Techniques for the Display of Continuous Tone Pictures on Bilevel Displays" by
Jarvis et al., Computer Graphics and Image Processing, Vol. 5., pp. 13-40 (1976), and in "MECCA -
A Multiple-Error Correction Computation Algorithm for Bi-Level Image Hardcopy
Reproduction" by Stucki, IBM Res. Rep. RZ1060 (1981). Expanded distribution sets cooperate to
reduce worms, at the expense of over-enhancement of edges, more computation and stronger
texture orientation in midtone regions. Modifications of the error calculation and weight
allocation have been taught, for example, in US-A Patent 4,924,322 to Kurosawa et. al., US- A
5,077,812 to Kanno US-A 4,339,774 to Temple, and US-A 4,955,065,to Ulichney.Error diffusion attempts to maintain gray by making the conversion from gray pixels
to binary or other level pixels on a pixel-by-pixel basis. The procedure examines each pixel with
respect to a threshold, and the difference between the gray level pixel value and the threshold
is then forwarded to a selected group of neighboring pixels, in accordance with a weighting
scheme. The thus corrected image pixels are then considered input to the processing. In this
way, the error calculated includes
</DESCRIPTION>
<CLAIMS>
A method of quantizing pixel values, in which an image
is formed by a plurality of pixels, each pixel representing

an optical density of the image at a location within the
image, and having an original optical density value

associated therewith selected from one of a set of original
optical density values, the number of different density values within the set of original density values being larger

than the number of different density values within a set of desired output optical density values,
including:


adding to each pixel an error (ε
n,ℓ
) resulting from
quantization of previous pixels, if any, to derive a

modified optical density value;
comparing the modified optical density value of an nth
pixel in a scan line ℓ(n,ℓ) with a threshold to select an

output value (B
n,ℓ
) representing the pixel;
determining an error term (ε
m
) that is a difference
between the output value and the modified optical density

value;
distributing a weighted portion of the error term
(ε
m
), to a preselected plurality of pixels, including
pixels at positions (n+1, ℓ), (n-3, ℓ+1) (n-2, ℓ+1),

(n-1,ℓ+1), (n,ℓ+1), wherein the weighting of each weighted
portion corresponds to:
(n+1,ℓ)=0.5; (n-3,ℓ+1)=0.0625; (n-2,ℓ+1)=0.0625;
(n-1,ℓ+1)=0.125; (n,ℓ+1)=0.25.
Apparatus for preparing an electronic document for
printing at a printer adapted to printing n level spots for

each pixel, including:

a document input receiving document images defined in
terms of digital electronic input signals, each signal

having a magnitude selected from one of m levels (where m
is greater than n) and corresponding to a pixel and

describing density of the document at position n in a scan
line ℓ(n,ℓ);
a summing circuit (10), for adding to each input
signal (I
n,ℓ
) an error signal (ε
n,ℓ
) resulting from 
quantization of previous signals, if any, to derive a

modified input signal;
a comparator (14), operatively connected to said
document input to receive the modified input signals and to

a source of threshold signals, and producing an output
response selected from one of the n level spots upon

comparing each modified input signal with a threshold
signal;
a difference circuit (22) for receiving as inputs the
output response and the modified input signals and deriving

a digital electronic error term signal representing the
difference in density between the output response and the

modified input signal;
a first error term buffer (24) and a corresponding
shift register (26) operatively connected to said

difference circuit, for receiving an error term from
quantization of signal (n-1,ℓ) therefrom and shifting the

error term for addition of a weighted portion thereof at
said summing circuit to input signal n in scan line ℓ(n,ℓ) ;
a line buffer operatively connected to the first error
term buffer, storing a line of error term signals

corresponding to signals in scan line ℓ-1;
at least second, third, fourth and fifth error term
buffers (32,34,36,38), each having a corresponding shift

register (40,42,44,46), and operatively connected to said
line buffer, to receive error terms from th
e quantization
of signals at positions (n,ℓ-1), (n+1,ℓ-1), (n+2,ℓ-1),

(n+3,ℓ-1) each shift register shifting the error term for
addition of a weighted portion thereof at said summing

circuit to input signal n in scan line ℓ(n,ℓ), wherein the
weighting of each weighted portion corresponds to:
(n-1,ℓ)=0.5; (n+3,ℓ-1)=0.0625; (n+2,ℓ-1)=0.0625;
(n+1,ℓ-1)=0.125; (n,ℓ-1)=0.25.
</CLAIMS>
</TEXT>
</DOC>
