<DOC>
<DOCNO>EP-0626652</DOCNO> 
<TEXT>
<INVENTION-TITLE>
Method and apparatus for determining elementary circuits and initial values of flows in a pipe network
</INVENTION-TITLE>
<CLASSIFICATIONS>F17D104	F17D100	G06F1750	G06F1750	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>F17D	F17D	G06F	G06F	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>F17D1	F17D1	G06F17	G06F17	</CLASSIFICATIONS-FOURTH>
<ABSTRACT>
A method for determining elementary circuits and initial values of 
flows in a pipe netwerk including one or more source nodes and a 

plurality of demanding nodes. An upstream node and a downstream node of 
each pipe is determined. The upstream node has less total resistance 

than the downstream node to the source node. A pipe joined between an 
upstream node and a downstream node is selected as an upstream pipe of 

the downstream node. A pipe which is never designated as an upstream 
pipe is selected as a circuit origin pipe. A node level, which indicates 

the number of nodes included in the passage from the source node, is 
determined. An elementary circuit is determined, by tracing upstream 

nodes along a first route starting from a first node of the circuit 
origin pipe and along a second route starting from a second node of the 

circuit origin pipe in accordance with the node level of the upstream 
node of each pipe, until the first and second routes reach the same 

source node or the same demanding node. Each elementary circuit is used 
for settling initial values of flows of pipes, and then for computing 

the flows. 

</ABSTRACT>
<APPLICANTS>
<APPLICANT-NAME>
TOKYO GAS CO LTD
</APPLICANT-NAME>
<APPLICANT-NAME>
TOKYO GAS COMPANY LIMITED
</APPLICANT-NAME>
</APPLICANTS>
<INVENTORS>
<INVENTOR-NAME>
ENOMOTO JUNICHI
</INVENTOR-NAME>
<INVENTOR-NAME>
SHINOAKI SAKURA
</INVENTOR-NAME>
<INVENTOR-NAME>
ENOMOTO, JUNICHI
</INVENTOR-NAME>
<INVENTOR-NAME>
SHINOAKI, SAKURA
</INVENTOR-NAME>
</INVENTORS>
<DESCRIPTION>
The present invention relates to a method
and apparatus for determining elementary circuits
and initial values of flows in a pipe network
before applying the Hardy Cross method or the
like to the pipe network to compute the flow of
each pipe.Computation of flows in a network of pipes
has been performed in such cases as new pipes are
installed or stable supply are considered in
water or gas networks. Similar computation has
also been carried out in electric distribution
networks.A method for such computation using the
Hardy Cross method is described, for example, on
pages 427 - 438 in "Fluid Mechanics", V. L.
Streeter, et al., McGraw-Hill Book Co., 1985. In
this method, an engineer must divide a pipeline
network into a plurality of elementary circuits,
and then designate an initial flow for each pipe
of the network at the initial stage of the 
computation. Once these initial setting has been
completed, the Hardy Cross method which has been
programmed for numerical solution on a digital
computer can accomplish the computation, and
outputs the flow distribution of the network.
Here, an elementary circuit refers to a loop or a
pseudo loop described in the Streeter reference
mentioned above.Determination of the elementary circuits and
initial values, however, requires manual
operation. This presents a problem because
determining the elementary circuits in a
complicated network of pipes is a very time
consuming process. In addition, wasteful
computations are often involved in the process
owing to engineer's errors, such as selecting an
unnecessary elementary circuit.Likewise, since the initial values of flows
are set by an intuition of an engineer, an
increasing number of iteration of computation
will be required unless the initial setting is
appropriate. This also presents a problem in
that it takes a long time to complete the
computation.It is therefore an object of the present
invention to provide a method and apparatus for
determining elementary circuits and initial
values of flows in a pipe network, which can
automatically determine the elementary circuits
and initial values of flows in a pipeline
network.In a first aspect of the present invention, 
there is provided a method in accordance with claim 1. The method may further comprise the
steps of:
dividing the pipeline network into the
elementary circuits by assuming that a flow of
each of the circuit origin pipes is zero so that
each of the elementary circuits has a tree
structure; anddetermining an initial flow of each pipe of
the pipeline network by
</DESCRIPTION>
<CLAIMS>
A method for automatically determining elementary circuits
and initial values of flows in a pipe network

including one or more source nodes (N
1
, N
4
) and a
plurality of demanding nodes (N
2
, N
3
, N
5
 to N
10
), said source nodes (N
1
, N
4
)
and demanding nodes being interconnected with

pipes (P
1
 to P
13
), and each of the pipes (P
1
 to P
13
) having a known
resistance (RES), said method characterized by

comprising the steps of:

(a) determining a resistance of a passage
from each of said source nodes (N
1
, N
4
) to each one of
said demanding nodes on the basis of the

resistance of said pipes (P
1
 to P
13
);
(b) determining, for each demanding node, a
source node and a total resistance (SD) on the basis

of the resistance of the passages, said total
resistance (SD) being determined as the minimum

resistance of the passages from the demanding
node to the source nodes (N
1
, N
4
), and said source node
being determined as a source node joined to the

demanding node through the passage providing the
total resistance (SD);
(c) determining, for each of said pipes (P
1
 to P
13
), an
upstream node (UNODE) and a downstream node (DNODE) on the basis

of the total resistances, said upstream node
having less total resistance than said downstream

node;
(d) designating a pipe joining one of said
upstream nodes to one of said downstream nodes as

an upstream pipe (UPIPE) of that downstream node (DNODE);
(e) selecting a pipe, which is never
designated as an upstream pipe, as a circuit

origin pipe;
(f) determining, for each of said source 
nodes and said demanding nodes, a node level (LEVEL) on

the basis of said upstream nodes and said
downstream nodes by ignoring the circuit origin

pipes of said pipeline network, said node level
indicating the number of nodes included in the

passage from the source node; and
(g) determining elementary circuits (C), by
tracing upstream nodes (UNODE) along a first route

starting from a first node of one of said circuit
origin pipes and along a second route starting

from a second node of the circuit origin pipe in
accordance with the node level of the upstream

node of each pipe, until the first and second
routes reach a same source node (N
1
, N
4
), or different
source nodes, or a same demanding node, each of

said elementary circuits being used as an element
for determining a flow of each of said pipes.
A method for determining elementary circuits
and initial values of flows in a pipe network as

claimed in claim 1, further characterized by
comprising the steps of:


dividing said pipeline network into said
elementary circuits (C) by assuming that a flow of

each of said circuit origin pipes is zero so that
each of said elementary circuits has a tree

structure; and
determining an initial flow of each pipe of
said pipeline network by tracing said first route

and second route by adding demand quantity of
each node along said routes.
A method for determining elementary circuits
and initial values of flows in a pipe network as

claimed in claim 2, further characterized by 
comprising the step of determining the flow of

each pipe (P
1
 to P
13
) in said pipeline network by using the
initial flow of each pipe obtained in the step of

determining the initial flow.
A method for determining elementary circuits
and initial values of flows in a pipe network as

claimed in claim 3, characterized in that said
step of determining the flow employs the Hardy

Cross method.
A method for determining elementary circuits
and initial values of flows in a pipe network as

claimed in claim 4, characterized in that said
pipeline network is a gas pipeline network.
A method for determining elementary circuits
and initial values of flows in a pipe network as

claimed in claim 4, characterized in that said
pipeline network is a water pipeline network.
A method for determining elementary circuits
and initial values of flows in a pipe network as

claimed in claim 4, characterized in that said
pipeline network is an electric power network,

said flow is a current, and said pipeline is a
power line. 
An apparatus for automatically determining elementary
circuits and initial values of flows in a pipe

network including one or more source nodes (N
1
, N
4
) and a
plurality of demanding nodes (N
2
, N
3
 , N
5
 to N
10
), said source nodes
and demanding nodes being interconnected with

pipes (P
1
 to P
13
), and each of the pipes having a known
resistance (RES), said apparatus characterized by

comprising:

(a) means for determining a resistance of a
passage from each of said source nodes (N
1
, N
4
) to each
one of said demanding nodes on the basis of the

resistance (RES) of said pipes;
(b) means for determining, for each
demanding node, a source node and a total

resistance (SD) on the basis of the resistance of the
passages, said total resistance being determined

as the minimum resistance of the passages from
the demanding node to the source nodes (N
1
, N
4
), and said
source node being determined as a source node

joined to the demanding node through the passage
providing the total resistance (SD);
(c) means for determining, for each of said pipes (P
1
 to P
13
), an upstream node (UNODE) and a downstream node (DNODE) on
the basis of the total resistances (
SD), said upstream
node having less total resistance than said

downstream node;
(d) means for designating a pipe joining
one of said upstream nodes to one of said

downstream nodes as an upstream pipe (UPIPE) of that
downstream node (DNODE);
(e) means for selecting a pipe, which is
never designated as an upstream pipe, as a

circuit origin pipe;
(f) means for determining, for each of said 
source nodes (N
1
, N
4
) and said demanding nodes (N
2
, N
3
, N
5
 to N
10
), a node
level (LEVEL) on the basis of said upstream nodes and

said downstream nodes by ignoring the circuit
origin pipes of said pipeline network, said node

level indicating the number of nodes included in
the passage from the source node; and
(g) means for determining elementary
circuits (C), by tracing upstream nodes (UNODE) along a first

route starting from a first node of one of said
circuit origin pipes and along a second route

starting from a second node of the circuit origin
pipe in accordance with the node level of the

upstream node of each pipe, until the first and
second routes reach a same source node (N
1
, N
4
), or
different source nodes, or a same demanding node,

each of said elementary circuits being used as an
element for determining a flow of each of said

pipes.
An apparatus for determining elementary
circuits and initial values of flows in a pipe

network as claimed in claim 8, further
characterized by comprising:


means for dividing said pipeline network
into said elementary circuits (C) by assuming that a

flow of each of said circuit origin pipes is zero
so that each of said elementary circuits has a

tree structure; and
means for determining an initial flow of
each pipe of said pipeline network by tracing

said first route and second route by adding
demand quantity of each node along said routes.
An apparatus for determining elementary
circuits and initial values of flows in a pipe 

network as claimed in claim 9, further
characterized by comprising means for determining

the flow of each pipe (P
1
 to P
13
) in said pipeline network by
using the initial flow of each pipe obtained by

said means for determining the initial flow.
An apparatus for determining elementary
circuits and initial values of flows in a pipe

network as claimed in claim 10, characterized in
that said means for determining the flow employs

the Hardy Cross method.
An apparatus for determining elementary
circuits and initial values of flows in a pipe

network as claimed in claim 11, characterized in
that said pipeline network is a gas pipeline

network.
An apparatus for determining elementary
circuits and initial values of flows in a pipe

network as claimed in claim 11, characterized in
that said pipeline network is a water pipeline

network.
An apparatus for determining elementary
circuits and initial values of flows in a pipe

network as claimed in claim 11, characterized in
that said pipeline network is an electric power

network, said flow is a current, and said
pipeline is a power line.
</CLAIMS>
</TEXT>
</DOC>
