<DOC>
<DOCNO>EP-0648032</DOCNO> 
<TEXT>
<INVENTION-TITLE>
A signal quality detecting circuit and method for receivers in the GSM system
</INVENTION-TITLE>
<CLASSIFICATIONS>H04B1500	H04B726	H04L120	H04B1500	H04L120	H04B726	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>H04B	H04B	H04L	H04B	H04L	H04B	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>H04B15	H04B7	H04L1	H04B15	H04L1	H04B7	</CLASSIFICATIONS-FOURTH>
<ABSTRACT>
The invention provides an improved method and apparatus for identifying a bad 
GSM speech frame. Both the estimated signal-to-noise ratio (ESNR) of the received 

signal and the pseudo bit error rate (PBER) of a recoded speech signal are used to 
determine whether or not a speech frame is bad. 


</ABSTRACT>
<APPLICANTS>
<APPLICANT-NAME>
NOKIA CORP
</APPLICANT-NAME>
<APPLICANT-NAME>
NOKIA CORPORATION
</APPLICANT-NAME>
</APPLICANTS>
<INVENTORS>
<INVENTOR-NAME>
HEIKKILA ILKKA
</INVENTOR-NAME>
<INVENTOR-NAME>
JOKINEN HARRI
</INVENTOR-NAME>
<INVENTOR-NAME>
RANTA JUKKA
</INVENTOR-NAME>
<INVENTOR-NAME>
HEIKKILA, ILKKA
</INVENTOR-NAME>
<INVENTOR-NAME>
JOKINEN, HARRI
</INVENTOR-NAME>
<INVENTOR-NAME>
RANTA, JUKKA
</INVENTOR-NAME>
</INVENTORS>
<DESCRIPTION>
The invention relates to digital data transmission techniques and its application in
digital mobile phone systems.Bit errors occur in the speech blocks of digital data transmission and it is not
possible to correctly decode all the blocks at the receiving end. Therefore, some
method must be used to remove faulty speech frames in order to avoid the
disturbing sounds in earphones or speakers that are caused by the faulty frames.GSM speech channels (GSM, Group Special Mobile) use three parity bits in each
speech frame for detecting errors in data transmission. However, this is not
sufficient. In addition to the parity check another method for estimating the quality
of the received signal should be used. If the estimated quality of the signal is poor,
the speech frame is removed even though the parity was correct. It should be
remembered that the parity can be correct even though the only air interface signal
received is noise.There are two quality measures that are used in respective methods for estimating
the quality of the received signal ie the estimation of the signal-to-noise ratio, and
the estimation of the bit error rate of a decoded channel. The respective quality
measures for these methods are the Estimated Signal-to-Noise Ratio (ESNR) and
the Pseudo Bit Error Rate (PBER).When using the method using the signal-to-noise ratio, a poor-quality speech frame
is detected by giving the ESNR a certain threshold value. In this case all frames
with an ESNR lower than the threshold value are removed.When using the bit error rate method, the decoded speech frame is recoded and
the coded bits are compared with the received bits. The PBER which is an estimate
of the real bit error rate is obtained in this way. A certain threshold value can also
be placed on the number of bit errors, whereby all the frames with a higher 
number of bit errors are removed.It is known from the publication WO 92/22162 to select a
transmission modulation state on the basis of the assessment of
the received signals and to adjust the transmission state of the
transmitter to be the selected modulation state. The number of
binary digits encoded onto each symbol may be varied according
to the RSSI or the measured BER. An estimate of the channel
during each received data packet can be obtained by overlaying a
BCH code onto the last bits of input data in each block.In another known publication, US patent 4 991 184 the SNR and
BER are each separately compared to respective threshold values.
The comparisons are made for the purpose of
</DESCRIPTION>
<CLAIMS>
A decoder (1) for a radio telephone, for providing a
decoded signal from a signal transmitted in respective groups

comprising:

means for providing first (4) and second (5) quality
measures each being indicative of different error information

on the signal for estimating the quality of each of the
transmitted signal groups received; and
means (7) responsive to a functional relation of the
first and second quality measures for disregarding signal groups

failing to meet a chosen quality threshold.
A decoder according to claim 1 wherein the first and
second quality measures are an estimated signal-to-noise ratio

and a pseudo bit error rate.
A decoder according to claim 2, wherein the estimated
signal-to-noise ratio comprises a vector indicative of the

signal-to-noise ratio of a signal group.
A decoder according to claim 2 wherein the estimated
signal-to-noise ratio comprises a scalar defining the

approximate signal to noise ratio.
A decoder according to any preceding claim wherein the
means for disregarding comprises means for comparing a linear

combination of the first and second quality measures with a
threshold value.
A decoder according to any one of claims 1 to 4
wherein the means for disregarding comprises means for

determining a threshold value based on one or both of the
quality measures, and means for comparing a function of the

other or both of the quality measures with the threshold value. 
A decoder according to claim 6 wherein the threshold
value is a function of the signal-to-noise ratio variance and

the pseudo bit error rate is compared with the threshold value.
A method for identifying a faulty signal group
transmitted in a digital radio telephone system comprising:


determining a first quality measure (4) indicative of
error information on the signal;
determining a second, different, quality measure (5)
indicative of error information on the signal; and
disregarding a signal group in response to a
functional relation of the first and second quality measures (7)

which fails to meet a chosen quality threshold.
A method for identifying a bad GSM speech frame in
digital mobile phone systems, 
characterized in that
 the
estimation of the quality of the received signal is carried out

using

estimated signal-to-noise ratio ESNR (4) so that the ESNR is a
vector comprising the estimated signal-to-noise ratio of each

received burst or a scalar describing their approximate signal-to-noise
ratio, and
pseudo bit error rate PBER (5) of the received and recoded
speech frame, and that the ESNR and PBER are functionally

related (7) to a chosen threshold and a speech frame is removed
if it fails to meet the threshold.
A method according to claim 9 wherein the speech frame
is removed if f(ESNR, PBER) 
>
 T

where f is a function of variables ESNR and PBER and T is a
chosen threshold value.
A method according to claim 10, wherein the function
is so formed that the number of faulty decisions to remove

speech frames can be minimized.
A method according to claim 10 wherein

f(a,b) = (C1 * a) + (C2 * b)
 
is chosen for the function so that the speech frame is removed

if

(C1 * ESNR) + (C2 * PBER) 
>
 T

where C1 and C2 are constants and the function is a linear
combination of variables ESNR and PBER.
A method according to claim 10, wherein the function
is implemented in the form of a table so that the ESNR and PBER

are indexed variables of the table.
A method according to any one of claims 10 to 13,
wherein function f and threshold limit T are made adaptive.
A method according to claim 10, wherein

the threshold value is calculated

BFI_LIM = (SNR_VAR) - C1) * C2 + C3

where SNR_VAR is a variance of the values of the ESNR-vectors

the obtained result BFI_LIM is limited in the following way

C4 ≤ BFI_LIM ≤ C5

so that the speech frame is removed if

PBER 
>
 BFI_LIM

where C1, C2, C3, C4 and C5 are constants defined by simulation.
</CLAIMS>
</TEXT>
</DOC>
