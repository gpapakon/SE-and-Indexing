<DOC>
<DOCNO>EP-0622892</DOCNO> 
<TEXT>
<INVENTION-TITLE>
Method and apparatus for kelvin current sensing in a multi-phase driver for a polyphase dc motor
</INVENTION-TITLE>
<CLASSIFICATIONS>G01R3134	H02P600	G01R3134	G01R1900	G01R1900	H02P600	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>G01R	H02P	G01R	G01R	G01R	H02P	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>G01R31	H02P6	G01R31	G01R19	G01R19	H02P6	</CLASSIFICATIONS-FOURTH>
<ABSTRACT>
A kelvin current sensing circuit in an integrated control 
circuit that controls the current flowing through the driving 

coils of a polyphase DC motor. The invention provides for 
adjusting the voltage to the lower driver transistors (23,24,25) of the 

control circuit by having the kelvin current sensing occur 
internally within the chip. A ground compatible differential 

amplifier circuit is used in one embodiment. Each of the lower 
transistors is connected to the base of respective PNP 

transistors, the emitters of which being connected together to 
control one side of the differential amplifier. A control 

voltage (VIN) is applied to the other side of the differential 
amplifier. The output of a comparator, that is connected to the 

differential amplifier, is used to control the operation of the 
lower driver transistors. Therefore all of the sensing is done 

internally in the semiconductor chip. The voltages are taken at 
the source of each of the lower transistors. This eliminates the 

parasitic resistances associated with the connection between the 
transistors and the sense resistor attached externally to the 

device. Since the kelvin current sensing is done internally, the 
pin which connected the inverting input of the comparator to the 

sensing resistor has been eliminated. 

</ABSTRACT>
<APPLICANTS>
<APPLICANT-NAME>
SGS THOMSON MICROELECTRONICS
</APPLICANT-NAME>
<APPLICANT-NAME>
SGS-THOMSON MICROELECTRONICS, INC.
</APPLICANT-NAME>
</APPLICANTS>
<INVENTORS>
<INVENTOR-NAME>
CAROBOLANTE FRANCESCO
</INVENTOR-NAME>
<INVENTOR-NAME>
CAROBOLANTE, FRANCESCO
</INVENTOR-NAME>
</INVENTORS>
<DESCRIPTION>
This invention relates to improvements in circuitry for 
current sensing. More particularly, the invention is drawn to 
voltage sensing internally within the semiconductor device to 
reduce the effects of any parasitic resistances while sensing the 
voltages. Although the invention pertains to polyphase DC motors, in 
general, it finds particular application with three-phase DC 
motors. These motors can be of the brushless, sensorless type that 
are used for rotating data media, such as the motors in hard disk 
drives, CD ROM drives, floppy disks and other computer related 
applications. These motors are typically thought of as having a stator with 
three coils connected in a "Y" configuration, although in actual 
systems many stator coils may be used with multiple motor poles. 
In operation, the coils are selectively energized to set up a 
current path through two coils of the "Y" configuration and to 
leave a third coil floating. Another method is to energize sequentially 
one coil at a time by having a current path through a single 
coil to a center tap. In either case, a sequence of energized 
coils is arranged so as the current paths are changed, or commutated, 
at least one of the coils used to form the current path 
becomes a floating coil in the next sequence. For a three phase dc motor, there are typically six driver 
transistors that may be, for example, CMOS transistors, that 
control the current applied to three stator coils. Three upper 
driver transistors connect power to selected coils, and three lower 
driver transistors connect selected coils to ground. Typically, 
all six driver transistors are contained on a single semiconductor  
 
integrated circuit chip. Each of the lower driver transistors are 
connected to an output connection of the semiconductor device, with 
each of the output connections being connected to the upstream side 
of a sense resistor, RSENSE, the downstream side of which being 
attached to ground. To control the lower driver transistors, a comparator is 
provided as a part of the circuitry of the integrated circuit chip. 
The comparator has a noninverting input connected to a bonding pad 
on the semiconductor chip that is connected to an external 
connection pin. A reference voltage, Vin, is supplied to the 
external connection pin by an outside source. Alternatively, the 
reference voltage may be developed internally to the device by 
other circuitry (not shown). The inverting input of the comparator 
is connected to a second bonding pad on the semiconductor chip
</DESCRIPTION>
<CLAIMS>
A control circuit for operating a polyphase DC motor 
having a rotor, and a plurality of stator coils (11,12,13), 

said control circuit having a plurality of control transistors 
(23,24,25) each having a first electrode coupled to a 

respective stator coil for energizing sequentially the stator 
coils, a plurality of output nodes (90,91,92) for connection 

to a sense resistor (16) wherein said output nodes (90,91,92) 
are connected to second electrodes of at least some of the 

control transistors (23,24,25) whereby a current flowing in 
the stator coils flows through the sense resistor (16), and a 

current sensing circuit (38) comprising: 

a differential amplifier (37) responsive to a voltage 
across the sense resistor for producing a sense output; 
a comparator (58;75) connected to produce an output 
change when the sense output exceeds a predetermined voltage, 

characterised in that:- 
the current sensing circuit (38) has plural inputs, each 
of said inputs being connected to the second electrode of a 

respective control transistor (23,24,25) whereby the 
differential amplifier (37) responds to the lowest sensed 

voltage of the control transistors. 
A circuit as claimed in claim 1, wherein the control 
circuit further comprises circuitry (26,27,28) for applying 

the output of the comparator to control the control 
transistors connected to said output nodes. 
A circuit as claimed in claim 1 further comprising a 
plurality of switches (26,27,28) each connected to one of the control 

transistors connected to said output nodes, said switches are 
operated in response to sequence signals (LA,LB,LC) to connect 

a control element of the respective control transistor to an 
output of the comparator when the respective control 

transistor is selected and to connect the control element to a 
voltage potential to turn off the control transistor when the 

control transistor is not selected.  
 
A circuit as claimed in any preceding claim, wherein the 
current sensing circuit further comprises a plurality of 

voltage sensing transistors (43,44,45) connected in parallel, 
with each voltage sensing transistor having a current path 

between a third current source (48) and ground, and having a 
current control element connected to one of said inputs to 

said current sensing circuit (38). 
A circuit as claimed in any one of claims 1-3, wherein 
one side of the differential amplifier (37) comprises a 

plurality of transistors (72-74) connected in parallel, with 
each transistor having a current path and a current control 

element connected to one of said inputs to said current 
sensing circuit (38). 
A circuit as claimed in any preceding claim, wherein the 
differential amplifier (37) has current paths between a 

current source (47,76) and current sinks (49,50,77,78), and the 

comparator (58,75) is connected to the differential amplifier on 
the side of the current sinks. 
A circuit as claimed in any preceding claim, wherein the 
differential amplifier (37) comprise at least one of bipolar 

transistors, MOS transistors, and FET transistors. 
A circuit as claimed in claim 6, wherein the current 
sinks (49,50) are resistors. 
A circuit as claimed in claim 4 wherein the differential 
amplifier comprises a first transistor (40) having a current 

path between a first current source (46) and ground, and 
having a control element connected to a reference voltage; 


a second transistor (42) having a current path between a 
second current source (47) and a second current sink (50), and 

having a current control element receiving currents flowing 
through the plurality of voltage sensing transistors (43-45), 

a voltage produced across the second current sink (50) being  
 

connected to the inverting input of the comparator; and 
a third transistor (41) having a current path between the 
second current source (47) and a first current sink (49), and 

having a current control element receiving the current flowing 
through the first transistor (40), a voltage produced across 

the first current sink (49) being connected to the 
noninverting input of the comparator (58). 
A circuit as claimed in claim 9, wherein the plurality of 
voltage sensing transistors and the first transistor through 

third transistor are at least one of bipolar transistors, MOS 
transistors, and FET transistors. 
A circuit as claimed in claim 9, wherein the first second 
and third current sources are saturated transistors. 
A circuit as claimed in claim 5 wherein the differential 
amplifier comprises a first transistor (71) having a current 

path between a second current source (76) and a first current 
sink (78), and having a current control element controlled by 

a reference voltage, a voltage produced across the first 
current sink (78) being connected to the noninverting input of 

the comparator (75); and
 
   said plurality of transistors comprises a plurality of 

voltage sensing transistors (72-74), with each voltage sensing 
transistor having a current path between the second current 

source (76) and a second current sink (77), the voltage produced 
across the second current sink being connected to the 

inverting input of the comparator (75). 
A circuit as claimed in claim 12, wherein the first 
transistor and the plurality of voltage sensing transistors 

are at least one of bipolar transistors, mos transistors, and 
FET transistors. 
A circuit as claimed in claim 7, 10 or 13, wherein the 
bipolar transistors are PNP transistors.  

 
A circuit as claimed in claim 9 or claim 12, wherein the 
plurality of voltage sensing transistors for a three-phase DC 

motor comprises three transistors. 
A circuit as claimed in claim 6 or claim 12, wherein the 
current source is a saturated transistor. 
A circuit as claimed in claim 9 or claim 12, wherein the 
first current sink (78) and the second current sink (77) are 

resistors. 
A circuit as claimd in any one of claims 1, 9 and 12, 
wherein the comparator is an operational amplifier (58,75). 
A circuit as claimed in any one of claims 1, 9 and 12, 
wherein the current sensing circuit and the control circuit 

are contained on a single semiconductor chip, and wherein a 
sensing of the voltage of the control transistors connected to 

said output nodes is derived immediately adjacent to the 
respective control transistors. 
A method of current sensing in a control circuit for 
operating a polyphase DC motor having a rotor and a plurality of 

stator coils, said control circuit having a plurality of 
control transistors (23,24,25) to sequentially energize the stator coils (11,12,13), 

and having a plurality of output nodes (90,91,92) for connection to a 
sense resistor (16), said output nodes being connected to at least 

some of the control transistors wherein a current flowing in 
the stator coils flows through the sense resistor, said method 

comprising the steps of: 

sensing voltage at the output of each control transistor 
connected to said output nodes and determining a lowest said 

voltage; 
comparing the lowest said voltage to a reference voltage; 
applying a signal that is produced in response to the 
comparing step to the control transistors connected to said 

output nodes. 
</CLAIMS>
</TEXT>
</DOC>
