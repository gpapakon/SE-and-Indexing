<DOC>
<DOCNO>EP-0616293</DOCNO> 
<TEXT>
<INVENTION-TITLE>
Encoded data printing apparatus and method
</INVENTION-TITLE>
<CLASSIFICATIONS>H04N1387	G06K100	G06K112	H04N132	H04N132	H04N1387	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>H04N	G06K	G06K	H04N	H04N	H04N	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>H04N1	G06K1	G06K1	H04N1	H04N1	H04N1	</CLASSIFICATIONS-FOURTH>
<ABSTRACT>
A code printing method and apparatus which prints 
an image and a code on the same recording medium. The 

apparatus stores a plurality of density patterns 
corresponding to each density, and codes corresponding 

to the density patterns. When code data is inputted and 
printing of the code is instructed, the apparatus 

determines the density of each pixel of image data, 
selects the density pattern representing the code data 

among the density patterns corresponding to the pixel 
density, and prints the density pattern instead of the 

image pixel. Thus, the image and code are printed 
without deterioration of the image qua
lity. 

</ABSTRACT>
<APPLICANTS>
<APPLICANT-NAME>
CANON KK
</APPLICANT-NAME>
<APPLICANT-NAME>
CANON KABUSHIKI KAISHA
</APPLICANT-NAME>
</APPLICANTS>
<INVENTORS>
<INVENTOR-NAME>
ARAI ATSUSHI
</INVENTOR-NAME>
<INVENTOR-NAME>
NAKATA KAZUHITO
</INVENTOR-NAME>
<INVENTOR-NAME>
YANAGI HARUYUKI
</INVENTOR-NAME>
<INVENTOR-NAME>
YOKOI KATSUYUKI
</INVENTOR-NAME>
<INVENTOR-NAME>
ARAI, ATSUSHI
</INVENTOR-NAME>
<INVENTOR-NAME>
NAKATA, KAZUHIRO
</INVENTOR-NAME>
<INVENTOR-NAME>
YANAGI, HARUYUKI
</INVENTOR-NAME>
<INVENTOR-NAME>
YOKOI, KATSUYUKI
</INVENTOR-NAME>
</INVENTORS>
<DESCRIPTION>
The present invention relates to encoded data
printing apparatus and method capable of printing an
image in unit of dots on a recording medium.It is known to print encoded data (symbol) obtained
by coding characters or numbers by a printer which
prints an image by dots on a recording medium. Among
such codes, there are a one-dimensional bar code or a
two-dimensional bar code. The one-dimensional bar code
has a plurality of vertical lines whose widths and
intervals are changed to correspond to coded characters
or numbers. The two-dimensional bar code is printed so
as to blacken the unit area or to form a white area in
accordance with coded characters and numbers.As described above, in the conventional technique,
bar codes are printed in black/white pattern.
Accordingly, if such a bar code is printed on various
cards having artistic value in their designs such as a
membership's card, the original design can be disfigured
by the black/white bar code.Furthermore, since the bar code can be
discriminated by human eyes, any person can easily
recognize that the bar code is printed, and there is a 
problem in that the bar-coded information may be decoded
and used for a wrong purpose.A number of solutions to this problem have been
proposed.European Patent Specification No EP-A-0493091
discloses a method and a system for embedding machine
readable digital data in gray scale images by low
contrast modulating areas of the image (either background
or foreground). Said areas are selected if they have a
constant nominal gray scale values.United States Patent Specification No US-A-4641347
discloses an apparatus for printing encrypted data to
prevent forgery of postage indicia. In one embodiment
data can be stored in the image of a character by
"variable void encoding" which involves offsetting some
of the dots forming the character.European Patent Application No EP-A-493053 discloses
a method and an apparatus for encoding data in halftone
images by modulating the angular orientation of the
halftone patterns.An article entitled "A Unified Coding Method of
Dithered Image and Text Data using Micro-Patterns" by
Yasuhiro Nakamura and Kineo Matsui, at pages 1475-1481 of
The Transactions of the Institute of Electronics,
Information and Communication Engineers, Vol.J70-B. No.
12, December 1987 discloses a unified coding method in
which data can be incorporated in a monochrome dithered
image based on available micro-patterns. However this document is silent on encoding whole
images.In the light of the above problem of the prior
</DESCRIPTION>
<CLAIMS>
A code printing apparatus for printing a colour
image including a code on a recording medium, comprising:


storage means (104) for storing a plurality of dot
patterns corresponding to a predetermined pixel density,

each of the dot patterns corresponding to code data;
means (111, S302) for calculating the number L of
continuous pixels required to represent input code data;
means (111, S303) for obtaining the colour of pixels
in which the input code data is to be inlaid on the basis

of the color which has the highest occurrences in at
least L continuous pixels of an input colour image;
determination means (111, S304) for determining the
density of each pixel having the obtained colour; and
control means (101) for reading out a dot pattern
corresponding to the input code data from among the

plurality of dot patterns having the density of the pixel
determined by said determination means and for converting

the pixel of the input colour image into the dot pattern
corresponding to the input code data; and
printing means (105) for printing said image 
including dot patterns converted by said control means.
Apparatus according to claim 1, 
characterised in
that
 said control means only converts the image pixels
which are halftone pixels.
Apparatus according to claim 1 or claim 2,

characterised in that
 some of the plurality of dot
patterns stored in said storage means correspond to the

same density and 
in that
 each of the dot patterns is
assigned to different code data.
Apparatus according to any one of claims 1 to 3,

characterised in that
 said control means is adapted not
to convert the pixels having a minimum density or a

maximum density.
A method of printing a colour image including a code
on a recording medium, comprising:


for storing a plurality of dot patterns
corresponding to a predetermined pixel density, each of

the dot patterns corresponding to code data; 
calculating the number L of continuous pixels
required to represent input code data;
obtaining the colour of pixels in which the input
code data is to be inlaid on the basis of the colour

which has the highest occurrences in at least L
continuous pixels of an input colour image;
determining the density of each pixel having the
obtained colour; and
reading out a dot pattern corresponding to the input
code data from among the plurality of dot patterns having

the density of the pixel as determined by said
determination step and converting the pixel of the input

colour image into the dot pattern corresponding to the
input code data; and
printing said image including dot patterns converted
by said conversion step.
A method according to claim 5, wherein in said
converting step only halftone pixels are converted.
A method according to claim 5 or claim 6

characterized in that
 some of the plurality of stored dot 
patterns correspond to the same density and each of the

dot patterns is assigned to different code data.
A printing method according to any one of claims 5
to 7 
characterized in that
 the pixels having a minimum
density or a maximum density are not converted in said

converting step.
</CLAIMS>
</TEXT>
</DOC>
