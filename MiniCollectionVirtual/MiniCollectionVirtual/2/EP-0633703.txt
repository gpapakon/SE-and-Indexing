<DOC>
<DOCNO>EP-0633703</DOCNO> 
<TEXT>
<INVENTION-TITLE>
Recording of video signals
</INVENTION-TITLE>
<CLASSIFICATIONS>H04N730	H04N592	H04N9804	H04N5913	H04N9808	H04N730	H04K104	H04N9804	H04K104	H04N5765	H04N5765	H04L918	H04N5913	H04N7169	H04L918	H04N7167	H04N592	H04N9808	H04N7169	H04N7167	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>H04N	H04N	H04N	H04N	H04N	H04N	H04K	H04N	H04K	H04N	H04N	H04L	H04N	H04N	H04L	H04N	H04N	H04N	H04N	H04N	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>H04N7	H04N5	H04N9	H04N5	H04N9	H04N7	H04K1	H04N9	H04K1	H04N5	H04N5	H04L9	H04N5	H04N7	H04L9	H04N7	H04N5	H04N9	H04N7	H04N7	</CLASSIFICATIONS-FOURTH>
<ABSTRACT>
Unauthorized copying of a video signal is prevented by a 
compression encoding circuit (14) that selectively applies scrambling 

to the encoded signal. The compression encoding circuit (14) divides 
(20) frames of a digital video signal into rectangular data blocks, 

aggregates a predetermined number of data blocks to form macroblocks, 
shuffles (2) the macroblocks within the video frame, and performs 

(22) discrete cosine transform processing block-by-block on the 
rectangular data blocks making up the shuffled macroblocks. The 

scrambling may be accomplished by rearranging the order of the 
rectangular data blocks within each macroblock, or by changing the 

pattern according to which macroblocks are shuffled in the video 
frames. The scrambling may also be accomplished by interchanging 

bits in a component, such as the DC component, of the DCT-processed 
data, or by setting such data bits to predetermined values. A 

compression encoding circuit (14) with the above-described scrambling 
capability may be used in a digital video tape recorder (VTR), and 

the scrambling capability may be activated in response to a copyright 
protection signal present in an analog vi
deo signal supplied as an 
input to the digital VTR. 


</ABSTRACT>
<APPLICANTS>
<APPLICANT-NAME>
SONY CORP
</APPLICANT-NAME>
<APPLICANT-NAME>
SONY CORPORATION
</APPLICANT-NAME>
</APPLICANTS>
<INVENTORS>
<INVENTOR-NAME>
KANOTA KEIJI
</INVENTOR-NAME>
<INVENTOR-NAME>
SUGISAKI KIMINORI
</INVENTOR-NAME>
<INVENTOR-NAME>
KANOTA, KEIJI
</INVENTOR-NAME>
<INVENTOR-NAME>
SUGISAKI, KIMINORI
</INVENTOR-NAME>
</INVENTORS>
<DESCRIPTION>
This invention relates to recording of video
signals.There has been proposed a video tape recorder (VTR) for
consumer use in which program information in the form of a video
signal and an associated audio signal are recorded in digital form on
a magnetic tape. Digital recording of video signals and associated
audio signals makes it possible for such program information to be
reproduced and copied (or "dubbed") onto another tape with little or
no deterioration in the quality of the signal reproduced from the
copy tape. There are times, however, when it is desirable to prevent
such signals from being recorded. For example, in order to protect
the rights of those holding a copyright in the recorded material,
copyright protection schemes have been proposed in which the digital
recording format includes copyright protection information recorded
in auxiliary information recording areas on the same magnetic tape
with the program information. Such proposed copy protection systems
are designed to prevent unauthorized copying of a signal that is
transmitted in digital form from one digital VTR to another. In
particular, when a digital signal reproduced from the magnetic tape
is supplied as an input signal for recording to a VTR, the 
operation of the recording circuitry in the digital VTR is either
permitted or inhibited in accordance with the copy protection
information that is included in the input digital video signal.
Thus, if the information indicates that the program information
is not available for copying, the recording circuitry is
controlled either to completely prevent any recording, or so that
a scrambled video signal is recorded on the tape.A similar copyright protection system relating to
digital audio tape recordings is disclosed, for example, in U.S.
Patents Nos. US-A-5 057 947 and US-A-5 185 792, in which it has been
proposed to provide within the copyright protection information a
bit which indicates the "generation" of the tape on which digital
audio data has been recorded. For example, the "generation" bit,
may indicate either that the tape is an "original" recording, or
that it is a copy of an original recording.With respect to digital VTRs that can provide analog
video and audio output and can receive analog video and audio
signals as input signals, transmission of the video and audio
signals in analog form from one digital VTR to another permits
the receiving VTR to record a very high quality signal in digital
form. The previously proposed copy protection systems for
digital VTRs are, for
</DESCRIPTION>
<CLAIMS>
A method of recording a video signal, comprising:

converting (13) an input analog video signal into a digital video signal;
compression-encoding (14) said digital video signal by dividing (20) each
frame of said digital video signal into rectangular blocks of data and forming

macroblocks from said rectangular blocks of data by aggregating a predetermined
number of said blocks of data to form each of said macroblocks, shuffling (21)

positions of said macroblocks within said frame of the digital video signal,
performing discrete cosine transform processing (22) block-by-block on said

rectangular blocks of data making up said shuffled macroblocks, and quantizing
and coding (23, 24) the transform processed data to form compression-encoded

data;
decoding (18) copy protection information that is included in said input
analog video signal and is indicative of whether copying of said input analog video

signal is permitted; and
controlling (19) said shuffling (21) and/or said transform processing (22) in
accordance with said decoded copyright protection information so that the

compression-encoding is carried out in a standard manner if copying of said input
analog video signal is permitted, and so that the digital video signal is scrambled if

copying of said input analog video signal is not permitted.
A method according to claim 1, wherein the scrambling of
said digital video signal comprises controlling said shuffling (21) so as to arrange

the rectangular blocks of data making up each macroblock at positions within said
macroblock that are different from standard positions for said rectangular blocks of

data.
A method according to claim 2, wherein each frame of said digital video
signal is formed from three types of data signals which are Y, R-Y and B-Y data

signals, and each of said rectangular blocks of data is formed from only one of
said three types of data signals. 
A method according to claim 3, wherein each frame of said digital video
signal includes M samples of said Y data signals in a horizontal direction and

N samples of said Y data signals in a vertical direction and M' samples of each of
said R-Y and B-Y data signals in the horizontal direction and N' samples of each

of said R-Y and B-Y data signals in the vertical direction, where M, N, M' and
N' are all positive integers and M is an integral multiple of M'.
A method according to claim 4, wherein each of said rectangular blocks of
data is formed from a plurality of samples in both of the horizontal and vertical

directions.
A method according to claim 5, wherein each of said macroblocks is
formed from four of said rectangular blocks of Y data signals and one each of said

rectangular blocks of R-Y and B-Y data signals, and said scrambling of said digital
video signal includes controlling said shuffling (21) so as to rearrange the

rectangular blocks of data within each of said macroblocks.
A method according to claim 6, wherein said rearranging of the rectangular
blocks of data within each of said macroblocks includes interchanging positions of

said rectangular blocks of Y data signals.
A method according to claim 7, wherein said scrambling of said digital
video signal also includes controlling said shuffling (21) so as to use a pattern for

shuffling said macroblocks within each frame that is different from a standard
pattern for shuffling said macroblocks.
A method according to claim 8, wherein said scrambling of said digital
video signal also includes controlling said transform processing (22) so as to

interchange at least some bits of a particular component of said discrete cosine
transform processed data. 
A method according to claim 9, wherein said scrambling of said digital
video signal includes controlling said transform processing (22) so as to set to a

predetermined value at least some bits of a particular component of said discrete
cosine transform processed data.
A method according to claim 1, wherein the scrambling of said digital
video signal comprises controlling said shuffling (21) so as to use a pattern for

shuffling said macroblocks within each frame that is different from a standard
pattern for shuffling said macroblocks.
A method according to claim 1, wherein the scrambling of said digital
video signal comprises controlling said transform processing (22) so as to

interchange at least some bits of a particular component of said discrete cosine
transform processed data.
A method according to claim 1, wherein the scrambling of said digital
video signal comprises controlling said transform processing (22) so as to set to a

predetermined value at least some bits of a particular component of said discrete
cosine transform processed data.
A video signal recording apparatus comprising:

an analog-to-digital converter (13) for converting an input analog video
signal into a digital video signal;
a compression coding circuit (14) including block forming means (20) for
dividing each frame of said digital video signal into rectangular blocks of data and

forming macroblocks from said rectangular blocks of data by aggregating a
predetermined number of said blocks of data to form each of said macroblocks,

shuffling means (21) for shuffling positions of said macroblocks within said frame
of the digital video signal, transform processing means (22) for performing

discrete cosine transform processing block-by-block on said rectangular blocks of
data making up said shuffled macroblocks, and quantization and coding means (23, 

24) for quantizing and encoding the transform processed data to form
compression-encoded data;
a signal decoder (18) for decoding copy protection information that
is included in said input analog video signal and is indicative of whether copying

of said input analog video signal is permitted; and
control means (19) responsive to said signal decoder (18) for
controlling said shuffling means (21) and/or said transform processing means (22)

in accordance with said decoded copyright protection information so that the
compression coding circuit (14) operates in a standard manner if copying of said

input analog video signal is permitted, and so that the compression coding circuit
(14) scrambles the digital video signal if copying of said input analog video signal

is not permitted.
A video signal recording apparatus according to claim 14, wherein the
control means (19) is responsive to said signal decoder (18) for controlling said

shuffling means (21) in accordance with said decoded copyright protection
information os that the rectangular blocks of data making up each macroblock are

arranged according to a standard pattern within said macroblock if copying of said
input analog video signal is permitted, and so that the rectangular data blocks

making up each macroblock of data are arranged within said macroblock according
to a scrambled pattern that is different from said standard pattern if copying of

said input analog video signal is not permitted.
A video signal recording apparatus according to claim 15, comprising:

a signal processing circuit (15) for forming a combined signal by
performing error correction coding and composition processing on the

compression-encoded data formed by the compression coding circuit (14), and
a modulator circuit (16) for recording said combined signal on a recording
medium.
A video signal recording apparatus according to claim 16, wherein each
frame of said digital video signal is formed from three types of data signals which 

are Y, R-Y and B-Y data signals, and each of said rectangular blocks of data is
formed from only one of said three types of data signals.
A video signal recording apparatus according to claim 17, wherein each
frame of said digital video signal includes M samples of said Y data signals in a

horizontal direction and N samples of said Y data signals in a vertical direction
and M' samples of each of said R-Y and B-Y data signals in the horizontal

direction and N' samples of each of said R-Y and B-Y data signals in the vertical
direction, where M, N, M' and N' are all positive integers and M is an integral

multiple of M'.
A video signal recording apparatus according to claim 18, wherein each of
said rectangular blocks of data is formed from a plurality of samples in both of the

horizontal and vertical directions.
A video signal recording apparatus according to claim 19, wherein each of
said macroblocks is formed from four of said rectangular blocks of Y data signals

and one each of said rectangular blocks of R-Y and B-Y data signals, and said
scrambling of said digital video signal includes controlling the shuffling means

(21) to rearrange the rectangular blocks of data within each of said macroblocks.
A video signal recording apparatus according to claim 20, wherein said
control means (19) controls said shuffling means (21) so that said macroblocks are

shuffled within each frame of said digital video signal according to a standard
shuffling pattern if copying of said input analog video signal is permitted, and so

that said macroblocks are shuffled within each frame of said digital video signal
according to a scrambled shuffling pattern that is different from said standard

shuffling pattern if copying of said input analog video signal is not permitted.
A video signal recording apparatus according to claim 19, wherein, if
copying of said analog video signal is not permitted, said control means (19) 

controls said transform processing means (22) to interchange at least some bits of
a particular component of said discrete cosine transform processed data.
A video signal recording apparatus according to claim 22, wherein if
copying of said analog video signal is not permitted, said control means (19)

controls said transform processing means (22) to set to a predetermined value at
least some bits of a particular component of said discrete cosine transform

processed data.
A video signal recording apparatus according to claim 14, wherein said
control means (19) is responsive to said signal decoder (18) for controlling said

shuffling means (21) in accordance with said decoded copy protection information
so that said macroblocks are shuffled within each frame of said digital video signal

according to a standard shuffling pattern if copying of said input analog video
signal is permitted, and so that said macroblocks are shuffled within each frame of

said digital video signal according to a scrambled shuffling pattern that is different
from said standard shuffling pattern if copying of said input analog video signal is

not permitted.
A video signal recording apparatus according to claim 14, wherein said
control means (19) is responsive to said signal decoder (18) for controlling said

transform processing means (22) in accordance with said decoded copy protection
information so that, if copying of said analog video signal is not permitted, said

compression coding circuit interchanges at least some bits of a particular
component of said discrete cosine transform processed data.
A video signal recording apparatus according to claim 14, wherein said
control means (19) is responsive to said signal decoder (18) for controlling said

transform processing means (22) in accordance with said decoded copy protection
information so that, if copying of said analog video signal is not permitted, said

compression coding circuit sets to a predetermined value at least some bits of a
particular component of said discrete cosine transform processed data. 
A video signal recording apparatus according to any one of claims 14 to
26, wherein said signal decoder (18) decodes said copy protection information

included in said input analog video signal after said input analog video signal is
converted into said digital video signal by said analog-to-digital converter (13).
</CLAIMS>
</TEXT>
</DOC>
