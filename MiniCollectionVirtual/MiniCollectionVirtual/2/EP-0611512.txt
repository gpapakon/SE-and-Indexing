<DOC>
<DOCNO>EP-0611512</DOCNO> 
<TEXT>
<INVENTION-TITLE>
APPARATUS FOR CONCEALING ERRORS IN A DIGITAL VIDEO PROCESSING SYSTEM
</INVENTION-TITLE>
<CLASSIFICATIONS>H04N746	H03M730	H04N750	H04N746	H04N752	H04N754	H04N768	H04N726	H04N726	H03M730	H04N764	H04N750	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>H04N	H03M	H04N	H04N	H04N	H04N	H04N	H04N	H04N	H03M	H04N	H04N	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>H04N7	H03M7	H04N7	H04N7	H04N7	H04N7	H04N7	H04N7	H04N7	H03M7	H04N7	H04N7	</CLASSIFICATIONS-FOURTH>
<ABSTRACT>
A digital video signal processing system includes apparatus for concealing errors which might occur in reproduced images due to image data lost during signal transmission. The system includes circuitry for detecting transmitted video data (20-24), generating error signals if errors are present in segments (transport blocks) of the received data (25), and excising segments having errors from the data stream. The received data is applied to a decoder/decompressor system (26, 27) which decodes and decompresses the transmitted video data according to a predetermined sequence. The decompressed video data may be applied to a memory (318) for subsequent display, recording, etc. The decompressor is responsive to the error signals for altering the predetermined sequence.
</ABSTRACT>
<APPLICANTS>
<APPLICANT-NAME>
RCA THOMSON LICENSING CORP
</APPLICANT-NAME>
<APPLICANT-NAME>
RCA THOMSON LICENSING CORPORATION
</APPLICANT-NAME>
</APPLICANTS>
<INVENTORS>
<INVENTOR-NAME>
SUN HUIFANG
</INVENTOR-NAME>
<INVENTOR-NAME>
ZDEPSKI JOEL WALTER
</INVENTOR-NAME>
<INVENTOR-NAME>
SUN, HUIFANG
</INVENTOR-NAME>
<INVENTOR-NAME>
ZDEPSKI, JOEL, WALTER
</INVENTOR-NAME>
</INVENTORS>
<DESCRIPTION>
The invention relates to concealing image data that is
lost during signal transmission.The International Organization for Standardization is
currently developing a standard specifying the coded
representation of video for digital storage media, supporting a
continuous data transfer rate of 1.5 Mbits/sec., which standard is
described in the document ISO-IEC JTC1/SC2/WG11; CODING OF
MOVING PICTURES AND ASSOCIATED AUDIO; MPEG90/176 Rev.2,
December 18, 1990. This format has become known as MPEG.
According to this format sequences of frames are divided into
groups, and respective frames within each group are encoded
according to one of a plurality of coding modes. Typically the
coding modes include intraframe coding, (I frames) and two types
of interframe predictive coding (P and B frames). In all modes
only odd fields are encoded, the even fields being discarded.The Advanced Television Research Consortium (ATRC)
in the United States has modified the MPEG format for
transmission of high definition television (HDTV) signals in digital
form. Generally, the initial signal coding of this HDTV signal is
similar to MPEG except that the pixel resolution, and data rates
are increased, and both odd and even frames of each field are
coded. In the HDTV system the coded signal is prioritized
between a higher and a lower priority channel for transmission.
Coded data having apparent greater importance to picture
reproduction is transmitted with a given power level and coded
data of lesser importance is transmitted with a lesser power level,
to minimize cochannel interference.FIGURE 1 is a pictorial representation of the coding
format prior to prioritization. The frame sequence is merely
representative. The letters I, P, and B above respective frames
indicate the coding mode for the respective frame. The frame
sequence is divided into groups of frames (GOF) each of which 
includes the same coding sequence. Each frame of coded data is
divided into slices representing, for example, 16 image lines. Each
slice is divided into macroblocks each of which represents, for
example, a 16 x 16 matrix of pixels. Each macroblock is divided
into 6 blocks including four blocks of information relating to
luminance signal and two blocks of information relating to
chrominance signal. The luminance and chrominance information
are coded separately and then combined for transmission. The
luminance blocks include data relating to respective 8 x 8
matrices of pixels. Each chrominance block comprises an 8 x 8
matrix of data relating to the entire
</DESCRIPTION>
<CLAIMS>
Error concealment apparatus in a compressed video data
decompressor, said compressed video data occurring in transport blocks including a

plurality of macroblocks, each macroblock containing a plurality of blocks of data,
said transport blocks being subject to errors and including codewords from which

errors in a transport block may be determined, said apparatus comprising:

a source (20) of transmitted said compressed video data;
a detector(21, 25, 250) responsive to said codewords for detecting
occurrences of errors in detected transport blocks; characterised by
circuitry (256, 65, 67, 360, 370) including a memory , and
responsive to detection of the occurrence of an error in a transport block, for

eliminating the plurality of macroblocks contained in an erred transport block and
replacing the eliminated macroblocks with a plurality of sequences of data in

compressed format, said sequences being accessed from said memory and each
sequence emulating, at least in part, compressed video data representing a respective

macroblock; and
a decompressor (27), having an input port coupled to said circuitry,
and having an output port for providing decompressed data representing images.
The apparatus set forth in claim 1 wherein said circuitry generates
error tokens responsive to detection of errors, and responsive to ones of said error

tokens said decompressor (27) provides substitute decompressed video signal
information for decompressed video signal corresponding to said plurality of

sequences of data in compressed format.
The apparatus set forth in claim 1 wherein said circuitry further
includes means (66) for including motion vectors, derived from neighboring

macroblocks, within said sequences of data.
The apparatus set forth in claim 1 further including:

a memory (318)coupled to receive and store decompressed video

signal from said decompression means; 
error map generating circuitry (SYSTEM CONTROLLER), for
generating an error map representing image areas corresponding to ones of said

macroblocks which were replaced; and
memory control circuitry (313), responsive to said error map, for
inhibiting said memory from writing decompressed video data into memory locations

corresponding to said ones of said macroblocks which were replaced.
The apparatus set forth in any of claims 1 through 4 wherein said
circuitry is further characterized by means (360,370) responsive to user stimuli for

replacing entire frames of compressed video data with substitute compressed video
data in order to provide special effects.
The apparatus set forth in claim 2 wherein said decompressor (27)
includes means (313,318) responsive to said error tokens for replacing decompressed

video data corresponding to ones of macroblocks of compressed data in which errors
occurred, with temporally displaced, spatially collocated decompressed video data.
The apparatus set forth in claim 1 wherein said compressed video
data having been formed in macroblocks each containing a plurality of blocks of

data, the data in respective macroblocks and blocks being hierarchically layered,
with data through hierarchy level K (a variable) for respective macroblocks being

included in partial blocks of said macroblocks in high priority transport blocks, and
the remaining data above hierarchy level K in said respective macroblocks being

included in partial blocks of corresponding macroblocks in low priority transport
blocks, respective partial blocks of low priority data having an end of block code,

EOB, and respective partial blocks of high priority data not having an end of block
code, EOB, unless all data for a respective block is contained in the high priority

block, and wherein said apparatus further comprises:

means (25,250) responsive to compressed video data in said high and
low priority transport blocks for detecting the occurrence of errors and excising

transport blocks of information containing errors;
means (26) for combining corresponding partial blocks of high and 
low priority information,
and wherein when a transport block of low priority information is
excised, said circuitry replaces excised blocks of low priority information with end

of block codes, EOB's; and
means (27) for decompressing the combined blocks of information to
produce a decompressed video signal.
The apparatus set forth in claim 7, wherein said means for
combining include means (65,67) for excising partial blocks of low priority

information corresponding to excised partial blocks of high priority information.
The apparatus set forth in claim 8 wherein said means for
combining further includes:


storage means (66) for storing sequences of compressed data in
compressed video format; and
means (65,67) for replacing excised high priority macroblocks and
corresponding excised low priority macroblocks with macroblocks of predetermined

sequences of compressed data.
The apparatus set forth in claim 7 further including:

memory means (318) coupled to said decompressing means for
storing decompressed video signal in raster scan format, said memory being

regularly updated with decompressed data from said decompressing means;
means (65) associated with said means for detecting for generating an
error map depicting image areas represented by compressed video data in ones of

transport blocks which have been excised; and
means (360), responsive to said error map, for inhibiting said
memory means from updating data in said memory means corresponding to image

areas represented by compressed video data in said ones of transport blocks which
have been excised.
The apparatus set forth in claim 7 further including:

means (66) for storing portions of compressed video data from
said high priority transport blocks;
storage means (65) for storing sequences of compressed data which
emulates compressed video data; and
wherein said combining means includes means (67) for replacing
excised high priority macroblocks and corresponding low priority macroblocks with

macroblocks of sequences of compressed data augmented with compressed video
data from said means for storing compressed video data.
</CLAIMS>
</TEXT>
</DOC>
