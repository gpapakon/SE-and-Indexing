<DOC>
<DOCNO>EP-0645532</DOCNO> 
<TEXT>
<INVENTION-TITLE>
Fuel injection control system for an internal combustion engine
</INVENTION-TITLE>
<CLASSIFICATIONS>F02D4110	F02D4110	F02D4500	F02D4134	F02D4500	F02D4134	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>F02D	F02D	F02D	F02D	F02D	F02D	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>F02D41	F02D41	F02D45	F02D41	F02D45	F02D41	</CLASSIFICATIONS-FOURTH>
<ABSTRACT>
A fuel injection control system has an
intelligent timer (TPU: 40) to perform fuel injection control

using the TPU (40) even on request of asynchronous injection
which is not synchronous with rotational angle signals. A

central processing unit (CPU: 30a) calculates a value to be
used during the execution of a synchronous injection (e.g., a

fuel injection time: FUT) and an asynchronous injection time
(AFT) and stores these values in a parameter RAM (50). The

CPU (30a) further determines whether there is a request for an
asynchronous injection or not from, for example, the quantity

of a change in the opening of a throttle. The TPU (40) also
executes a synchronous injection if there is no asynchronous

injection request. If there is an asynchronous injection
request, it transmits an on output from input/output pins and

causes a compare register (51) to store a value which is the
sum of the current time and an asynchronous injection time

(AFT). It transmits an off output from the input/output pins
if this value agrees with a value in a first free run counter

(44).

</ABSTRACT>
<APPLICANTS>
<APPLICANT-NAME>
NIPPON DENSO CO
</APPLICANT-NAME>
<APPLICANT-NAME>
NIPPONDENSO CO., LTD.
</APPLICANT-NAME>
</APPLICANTS>
<INVENTORS>
<INVENTOR-NAME>
KONDO HIROSHI
</INVENTOR-NAME>
<INVENTOR-NAME>
MAKI KENICHI
</INVENTOR-NAME>
<INVENTOR-NAME>
NISHIYORI YOICHI
</INVENTOR-NAME>
<INVENTOR-NAME>
SHIBATA HIROSHI
</INVENTOR-NAME>
<INVENTOR-NAME>
KONDO, HIROSHI
</INVENTOR-NAME>
<INVENTOR-NAME>
MAKI, KENICHI
</INVENTOR-NAME>
<INVENTOR-NAME>
NISHIYORI, YOICHI
</INVENTOR-NAME>
<INVENTOR-NAME>
SHIBATA, HIROSHI
</INVENTOR-NAME>
</INVENTORS>
<DESCRIPTION>
The present invention relates to a fuel injection
control system for an internal combustion engine.There have been control systems for controlling an
internal combustion engine using a microcomputer. One such
system is disclosed in EP-A-463 613. In this system a
central processing unit calculates fuel injection start and
end times according to operating conditions and stores
them. A further such system is disclosed in EP-A-451 829.
In this system a central processing unit calculates fuel
injection start timings and injection periods and uses this
data to set counters which operate independently of the
central processing unit. Although the injection start
timings and the injection periods are controlled by the
counters independently of the central processing unit, the
injection start position still has to be determined by the
central processing unit. In order to reduce computational
loads to or number of processing steps of a CPU (central
processing unit) in a microcomputer, some recent systems
are equipped with an intelligent timer (hereinafter
referred to as TPU) in addition to the CPU to control the
engine. The TPU is a timer having control functions such
as outputting a desired signal when a predetermined point
in time is reached. Specifically, with only the timing for
starting a fuel injection, a fuel injection time, and the
like obtained by a calculation performed by the CPU set in
a parameter RAM in the TPU, the TPU independently performs
subsequent injection executing processes such as driving
injectors for injecting fuel for a predetermined time at a
predetermined angular displacement or position without
requiring processing of the CPU.In such conventional systems, however, the TPU can
perform only processes which are in synchronism with rotational 
angle signals such as a process of starting injections
upon rotational angle signals at predetermined intervals.
Therefore, TPU has not been so practical because it has been
unable to perform asynchronous injections wherein fuel is
injected at timing which is not in synchronism with rotational
angle signals.Although asynchronous injections can be performed by
way of control of the output of the TPU performed by the CPU,
asynchronous injection times must be controlled by the CPU in
such a case. As a result, additional calculation processes
are required for the CPU to control asynchronous injections
notwithstanding the fact that the TPU is provided to reduce
the calculation processes of the CPU. Further, a timer for
asynchronous injections must be
</DESCRIPTION>
<CLAIMS>
A fuel injection control system comprising:

a central processing unit (30a) for calculating fuel
injection data including a fuel injection start position (NET)

and a fuel injection time (FUT, AFT) depending on operation
conditions of an internal combustion engine (1);
storage means (50) for storing said fuel injection
data calculated by said central processing unit; and
timer means (40) for performing fuel injection control
independently of processes performed by said central processing

unit so that an injection is started and finished at
timings which are defined by said fuel injection data stored

in said storage means;
said central processing unit including determining
means (403) for determining whether there is a request for an

asynchronous injection, asynchronous injection time calculating
means (404) for calculating an asynchronous injection

time when said determining means determines that said
asynchronous injection is requested, and asynchronism setting

means (405) for setting first data at a predetermined level and said
calculated asynchronous injection time in said storage means;
said timer means being arranged to detect said first data at said predetermined
level stored in said storage means and to execute a fuel

injection in accordance with said asynchronous injection time
stored in said storage means when said determining means 

determines that said asynchronous injection is requested; and
said timer means including;

a calculation executing portion (42);
a first counter (44) which is counted up at a predetermined
time interval;
a second counter (45) which is counted up at a predetermined
crank angular interval of said internal combustion

engine;
a compare register (51) in which said fuel injection
data stored in said storage means through calculation processes

performed by said calculation executing portion are set and
which compares a value of one of said first and second counters

with said fuel injection data; and
output means (53) for outputting an injection signal

at a high or low level to execute and cut off a fuel
injection when said compare register indicates that said fuel

injection data match with the value in one of said first and
second counters.
A fuel injection control system according to claim 1,
wherein said calculation executing portion includes means

(Figs. 12 and 13) for determining whether there is a fuel
injection in progress or not when it is determined that said

asynchronous injection is requested as a result of detection 
of the data at said predetermined level stored in said storage

means, for bringing said injection signal from said output
means to a highlevel when it is determined that there is no

fuel injection in progress, for calculating an asynchronous
injection end time in accordance with said asynchronous

injection time stored in said storage means, and for setting
said asynchronous injection end time in said compare register.
A fuel injection control system according to claim 1,

wherein identification data is provided for identifying
an injection delay time between a crank angular position

in which said synchronous injection is started and an actual
execution of fuel injection, and
wherein said calculation executing portion includes
means (Figs. 12 and 13) for determining whether there is a

fuel injection in progress or not when it is determined that
there is a request for said asynchronous injection as a result

of retrieval of the data at said predetermined level stored in
said storage means, for bringing said injection signal from

said output means to said high level when it is determined
that there is no fuel injection in progress, for comparing

said asynchronous injection time stored in said storage means
when it determines that it is in said injection delay time by

detecting said identification data, and for setting the time
at which said synchronous injection is to be finished in said

compare register when it is determined that said asynchronous
injection and said synchronous injection overlap.
A fuel injection control system according to claim 1,
wherein said calculation executing portion includes:


means (Figs. 12 and 13) for determining whether there
is a fuel injection in progress or not when it determines that

there is a request for said asynchronous injection by detecting
the data at said predetermined level stored in said

storage means, and for setting, if there is a fuel injection
in progress, a value which is the sum of said injection end

time of said fuel injection in progress and said asynchronous
injection time stored in said storage means in said compare

register.
A fuel injection control system according to claim 1,

wherein a second identification data is provided to
indicate that said injection signal from said output means is

at said high level and said crank angular position in which
the next synchronous injection is to start has been reached;

and
wherein said calculation executing portion includes
means (Figs. 12 and 13) for determining whether there is a

fuel injection in progress or not when it is determined that
there is a request for said asynchronous injection as a result

of retrieval of the data at said predetermined level stored in
said storage means, for determining whether said second

identification data have been set or not if it is determined
that there is a fuel injection in progress, for comparing said

injection delay time for a next synchronous injection and said 
asynchronous injection time stored in said storage means if

said second identification data have been set, and for
setting the time at which said next synchronous injection

is to be finished in said compare register if it is
determined that said asynchronous injection overlaps with

said next synchronous injection.
A fuel injection control system according to claim
1, wherein said central processing unit includes fuel

cutoff determining means (400) for determining whether
operation of said internal combustion engine is in a fuel

cutoff operation region, and fuel cutoff setting means
(401) for setting second data at a predetermined level in

said storage means when it is determined that said fuel
cutoff operation region has been entered; and


said timer means includes means (Fig. 6) for executing
a fuel injection in accordance with said asynchronous

injection time stored in said storage means by detecting
said first and second data at the predetermined levels

stored in said storage means and for stopping the fuel
injection in progress
A fuel injection control system according to claim 6,
wherein said calculation executing portion includes means

(Fig. 6) for interrupting fuel injection in progress when it
determines that said fuel cutoff operation region has been

entered by detecting said second data at the predetermined
level stored in said storage means and for setting the crank

angular position in which a next synchronous injection is to
start in said compare register.
A fuel injection control system according to claim
6, wherein said calculation executing portion includes:


first calculation process means which is activated
when there is a fuel injection in progress and the crank

angular position in which said next synchronous injection is
to start is reached for comparing injection duration which is

the difference between the time at which said injection in
progress will be finished and the current time to the injection

delay time for the next synchronous injection, for
setting third identification data if said injection duration

is shorter than said injection delay time, and for setting the
time at which the next synchronous injection will be finished

in said compare register if said injection duration is longer
than said injection delay time; and
second operation process means which is activated when
said injection in progress is finished for setting the time at

which said next synchronous injection is to start in said
compare register.
</CLAIMS>
</TEXT>
</DOC>
