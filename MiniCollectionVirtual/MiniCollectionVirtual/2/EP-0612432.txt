<DOC>
<DOCNO>EP-0612432</DOCNO> 
<TEXT>
<INVENTION-TITLE>
METHOD AND APPARATUS FOR DETECTING AND CORRECTING ERRORS IN DATA ON MAGNETIC TAPE MEDIA.
</INVENTION-TITLE>
<CLASSIFICATIONS>G06F306	G06F306	G11B15087	G11B15087	G11B1568	G11B1568	G11B2012	G11B2012	G11B2018	G11B2018	G11B2700	G11B2700	G11B2730	G11B2730	G11B2732	G11B2732	H03M1300	H03M1329	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>G06F	G06F	G11B	G11B	G11B	G11B	G11B	G11B	G11B	G11B	G11B	G11B	G11B	G11B	G11B	G11B	H03M	H03M	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>G06F3	G06F3	G11B15	G11B15	G11B15	G11B15	G11B20	G11B20	G11B20	G11B20	G11B27	G11B27	G11B27	G11B27	G11B27	G11B27	H03M13	H03M13	</CLASSIFICATIONS-FOURTH>
<ABSTRACT>
The helical scan data write circuits (410, 321) operate on the received stream of data records to produce two orthogonal error detection and correction codes on a scan group level. The data write circuit (410, 321) divides the received stream of data records into data segments, each of which contains a predetermined number of data bytes. A first of these scan group error codes is generated on a per data segment basis while a second scan group error code is generated across multiple data segments. A third level error correcting code (ECC-3) is also used to protect an entire scan group (700) rather than data on a per byte basis. The third level error correction code generator (805) produces an error code over a predetermined number of sequentially written scan groups (700) to enable the control unit (350) to reconstruct an entire scan group (700) if its data integrity is comprised.
 
</ABSTRACT>
<APPLICANTS>
<APPLICANT-NAME>
STORAGE TECHNOLOGY CORP
</APPLICANT-NAME>
<APPLICANT-NAME>
STORAGE TECHNOLOGY CORPORATION
</APPLICANT-NAME>
</APPLICANTS>
<INVENTORS>
<INVENTOR-NAME>
DODT WILLIAM CARL
</INVENTOR-NAME>
<INVENTOR-NAME>
LIEHE THOMAS GARDINER
</INVENTOR-NAME>
<INVENTOR-NAME>
MCCARTHY DONALD FRANCIS
</INVENTOR-NAME>
<INVENTOR-NAME>
MILLIGAN CHARLES ALLEN
</INVENTOR-NAME>
<INVENTOR-NAME>
DODT, WILLIAM, CARL
</INVENTOR-NAME>
<INVENTOR-NAME>
LIEHE, THOMAS, GARDINER
</INVENTOR-NAME>
<INVENTOR-NAME>
MCCARTHY, DONALD, FRANCIS
</INVENTOR-NAME>
<INVENTOR-NAME>
MILLIGAN, CHARLES, ALLEN
</INVENTOR-NAME>
</INVENTORS>
<DESCRIPTION>
 METHOD AND APPARATUS FOR DETECTING AND CORRECTING ERRORS IN DATA ON MAGNETIC TAPE MEDIAFIELD OF THE INVENTIONThis invention relates to magnetic data storage media and, in particular, to a method and apparatus for detecting and correcting errors in the data that is written on a magnetic tape media.PROBLEMIt is a problem in the field of data storage systems to maximize the data storage capacity of the data storage media while minimizing both the cost of the media and the data retrieval time. Magnetic tape has become the industry standard data storage media for the storage and retrieval of large amounts of data, where the media cost must be kept to a minimum and the data retrieval time is not a critical factor. The data storage capacity and media cost of magnetic tape have been reduced by the use of helical scan data 

 recording techniques on magnetic tape media.Helical scan tape drive systems make use of the 3480-type magnetic tape cartridge which contains a single reel of half inch magnetic tape. The 3480-type magnetic tape cartridge is an industry standard media form factor used in the data processing industry for longitudinal recording of data on magnetic tape. The selection of this form factor is desirable due to the fact that automated library systems, such as the 4400 Automated Cartridge System (ACS) manufactured by Storage Technology Corporation of Louisville, Colorado r are presently used to robotically store and retrieve a large number of 3 80-type magnetic tape cartridges for an associated plurality of tape drives. The helical scan data recording format enables the user to store significantly more data on a 3480-type magnetic tape form factor cartridge than is presently available with longitudinal recording on magnetic tape. A significant problem with all magnetic tape media is that the media can contain defects that cause errors in the data written thereon. The greater the data density on the media, the more data errors are caused by a media defect. Therefore, the error 

detection and correction systems used on the media must be robust enough to safeguard the data from media defects.The helical scan data format read/write apparatus segments the received stream of data records into tracks that are written on to the magnetic tape in a pattern called scan groups. Existing error detection and correction systems are designed to handle individual byte errors on a single track in a single scan group. Media defects that impact the magnetic tape on a multiple track basis cause recoverable errors.
</DESCRIPTION>
<CLAIMS>
WE CLAIM:
1. In a drive element (300) which reads and writes a stream of data records, received from a host computer (1) , on a magnetic tape (100) in a helical scan format, which includes at least one longitudinal track (201-203) written on said magnetic tape (100) and a plurality of tracks (204) helically written on said magnetic tape (100) for storing said stream of data records, apparatus operationally independent of said host computer (1) for writing error correction data on said magnetic tape (100) to protect said stream of data records, comprising: means (402-*, 403-*) for generating a first error correcting code specific to a plurality of bytes of said stream of data records; means (404-*, 405-*) for dividing said received stream of data records and said first error correcting codes into a series of data segments, each data segment containing a predetermined number of bytes; means (406-*) for generating a second error correcting code specific to each of said data segments; means (407-* - 409-*) for concatenating a plurality of said data segments and their associated generated second error correcting codes to form a helical track (204) of data; means (410, 321) for writing a plurality of said helical tracks (204) of data on to said magnetic tape (100) to form a scan group (700) ; 


 means (805) for computing a third error correcting code (ECC-3) across a plurality of said scan groups (700) sequentially written on to said magnetic tape (100) ; and means (806, 807, 321) for writing said third error correcting code (ECC-3) on to said magnetic tape (100) .
2. The apparatus of claim 1 wherein said writing means (806, 807, 321) writes said third error correcting code (ECC-3) on to said magnetic tape (100) immediately following a last of said plurality of scan groups (700) across which said third error correcting code (ECC-3) is generated.
3. The apparatus of claim 1 wherein said computing means (805) includes: means (2004) for Exclusive ORing said plurality of scan groups (700) to form a parity scan group (ECC-3) .
4. The apparatus of claim 3 wherein at least one track (204) of each of said scan groups (700) includes rewriteable header information (1601) containing scan group administrative data, said Exclusive ORing means (2004) operates on said plurality of scan groups (700) exclusive of said rewriteable header information (1601) in said plurality of scan groups (700) .
5. The apparatus of claim 1 wherein said second 


error correcting code generating means (406-*) includes: means for computing a Reed Solomon code across said data segment.
6. The apparatus of claim 1 wherein said first error correcting code generating means (402-*, 403-*) includes: means (402-*) for storing said stream of data records in a memory on a column by column basis; means (403-*) for computing a Reed Solomon code on a column by column basis for said stream of data records stored in said memory; means (403-*) for appending said generated Reed Solomon code to said memory on a column by column basis; and means (405-*) for reading data from said memory to said dividing means (404-*, 405-*) on a row by row basis.
7. In a drive element (300) which reads and writes a stream of data records, received from a host computer (1), on a magnetic tape (100) in a helical scan format, which includes at least one longitudinal track (201-203) written on said magnetic tape (100) and a plurality of tracks (204) helically written on said magnetic tape (100) for storing said stream of data records, a method that is operationally independent of said host computer (1) for writing error correction data on said magnetic tape (100) to protect said stream of data records, comprising the 


 steps of: generating a first error correcting code specific to a plurality of bytes of said stream of data records; dividing said received stream of data records and said first error correcting codes into a series of data segments, each data segment containing a predetermined number of bytes; generating a second error correcting code specific to each of said data segments; concatenating a plurality of said data segments and their associated generated second error correcting codes to form a helical track (204) of data; writing a plurality of said helical tracks (204) of data on to said magnetic tape (100) to form a scan group (700) ; computing a third error correcting code (ECC-3) across a plurality of said scan groups (700) sequentially written on to said magnetic tape (100) ; and writing said third error correcting code (ECC-3) on to said magnetic tape (100) .
8. The method of claim 7 wherein said step of writing writes said third error correcting code (ECC- 3) on to said magnetic tape (100) immediately following a last of said plurality of scan groups (700) across which said third error correcting code (ECC-3) is generated. 


 9. The method of claim 7 wherein said step of computing includes:
Exclusive ORing said plurality of scan groups (700) to form a parity scan group.
10. The method of claim 9 wherein at least one track (204) of each of said scan groups (700) includes rewriteable header information (1601) containing scan group administrative data, said step of Exclusive ORing operates on said plurality of scan groups (700) exclusive of said rewriteable header information (1601) in said plurality of scan groups (700) .
11. The method of claim 7 wherein said step of generating said second error correcting code includes: computing a Reed Solomon code across said data segment.
12. The method of claim 7 wherein said step of generating said first error correcting code includes: storing said stream of data records in a memory on a column by column basis; computing a Reed Solomon code on a column by column basis for said stream of data records stored in said memory; appending said generated Reed Solomon code to said memory on a column by column basis; and reading data from said memory on a row by row basis. 

</CLAIMS>
</TEXT>
</DOC>
