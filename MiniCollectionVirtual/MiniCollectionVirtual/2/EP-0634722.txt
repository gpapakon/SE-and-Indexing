<DOC>
<DOCNO>EP-0634722</DOCNO> 
<TEXT>
<INVENTION-TITLE>
Universal asynchronous receiver/transmitter.
</INVENTION-TITLE>
<CLASSIFICATIONS>G06F1320	G06F1328	G06F1338	G06F1338	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>G06F	G06F	G06F	G06F	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>G06F13	G06F13	G06F13	G06F13	</CLASSIFICATIONS-FOURTH>
<ABSTRACT>
Data characters to be transferred from a peripheral 
device to a central processing unit are serially shifted 

into the receiver shift register of a universal 
asynchronous receiver/transmitter (UART). A multiple 

byte first-in-first-out memory stores a plurality of 
data characters received by the shift register. The 

UART checks the status of each data character stored in 
the FIFO to determine whether it will trigger an 

exception. A bytes till exception register indicates 
the number of data characters remaining in the FIFO 

until an exception is encountered. Then, upon request 
by the CPU, the UART provides the count of consecutive 

valid data characters from the top of the FIFO to the 
first exception, eliminating the need to check status on 

every transferred byte. Each of the multiple channels 
of the UART includes an Initialization Register. 

Setting the appropriate bit Initialization Register of 
any UART channel allows concurrent writes to the same 

selected register in each channel's register set. This 
function reduces initialization time for all of the 

common parameters that are loaded into each channel's 
registers. The UART implements a methodology which 

allows for the processing of any control characters or 
errors received by the UART during DMA while internal 

and/or external FIFOs are being used. 

</ABSTRACT>
<APPLICANTS>
<APPLICANT-NAME>
NAT SEMICONDUCTOR CORP
</APPLICANT-NAME>
<APPLICANT-NAME>
NATIONAL SEMICONDUCTOR CORPORATION
</APPLICANT-NAME>
</APPLICANTS>
<INVENTORS>
<INVENTOR-NAME>
MICHAEL MARTIN S
</INVENTOR-NAME>
<INVENTOR-NAME>
MICHAEL, MARTIN S.
</INVENTOR-NAME>
</INVENTORS>
<DESCRIPTION>
The present invention relates to data 
communications between a data processing system and its 
associated peripheral devices and, in particular, to an 
improved universal asynchronous receiver/transmitter 
(UART) device. According to a first aspect of the 
invention, multiple data bytes can be transferred from 
the UART in a single access without checking the error 
status of each individual byte transferred. According 
to a second aspect of the invention, the multiple-channel 
UART allows concurrent writes to the same 
register of each channel's identical register set. 
According to a third aspect of the invention, the UART 
processes any control characters or errors received by 
the UART during a direct memory access (DMA) transfer 
while either internal or external first-in-first-out 
(FIFO) memories are being used. Data communications is a broad term used to define 
the transmission of data from one point to another. To ensure coherent data communications between two 
or more points, e.g. between a data processing system 
and one of its peripheral devices, an interface standard 
is established to define the characteristics of the 
communication link. The most popular interface standard for data 
transmission is asynchronous communication. This 
standard specifies that each data character to be 
transmitted be proceeded by a "start" bit and be 
followed by one or more "stop" bits. Between 
characters, a mark condition is continuously maintained. 
Because each transmitted character is bracketed by these  
 
"start" and "stop" bits, the receiver is resynchronized 
with each transmission, allowing unequal intervals 
between characters. One commonly used asynchronous data communications 
device is the Universal Asynchronous Receiver/Transmitter, 
or UART. A conventional UART relies on two 
separate serial shift registers, each with its own 
serial port and clock, to receive data from and transmit 
data to a modem or peripheral device in response to 
control signals from the associated data processing 
system. This architecture allows data to be 
simultaneously sent and received through the UART at 
different data rates. To transmit data from its associated data 
processing system to a selected modem or peripheral 
device, a UART can reguest the parallel transfer of data 
(typically an 8-bit character, or byte, which is placed 
on the system's data bus) into the UART's transmitter 
holding register. The transmitter holding register then 
transfers the data to a transmitter shift register which 
serially
</DESCRIPTION>
<CLAIMS>
A data processing system comprising: 

(a) a data processing system having a direct 

memory access unit associated therewith for 
transferring data characters from a system memory of 

the data processing system to a data communications 
device utilizing the direct memory access unit; 
(b) a data communications device comprising 

(i) transmitter memory means having storage 
locations for a plurality of data characters 

received by the data communications device from 
the system memory; 
(ii) means for determining whether the 
transmitter memory means is empty; 
(iii) means for establishing a count of the 
number of data characters that are to be 

transferred from the system memory to the data 
communications device utilizing the direct 

memory access unit; 
(iv) means for enabling the direct memory 
access unit for direct transfer of the number of 

data characters from the system memory to the 
data communications device; and 
(v) means for transferring the number of 
data characters to the data communications 

device utilizing the direct memory access unit. 
A data processing system for transferring 
data characters from a data communications device to 

the system memory of a data processing system 
utilizing a direct memory access unit associated with 

the data processing system, the data communication 
device including receiver memory means having storage 

locations for a plurality of data characters received 
by the data communications device from a peripheral 

 
system for transfer to the system memory, the data 

processing system comprising: 

(a) means for maintaining account of the number 
of data characters available for transfer from the 

receiver memory means before an exception is 
encountered; 
(b) means for establishing a trigger level for 
the 35 receiver memory means; 
(c) means for initiating the transfer data 
characters from the receiver memory means to the 

system memory utilizing the direct memory access unit 
when the receiver memory means trigger level is 

reached; and 
(d) means for continuing the transfer of data 
characters from the receiver memory means to the 

system memory utilizing the direct memory access unit 
until either an exception is encountered or until the 

number of valid data characters remain to be 
transferred is less than the with of the data bus of 

the data processing system. 
A method of transferring data characters 
from the system memory of a data processing system 

having a direct memory access unit associated 
therewith to a data communications device utilizing 

the direct memory access unit, the data 
communications device including transmitter memory 

means having storage locations for a plurality of 
data characters received by the data communications 

device from the system memory, the method comprising: 

(a) determining whether the transmitter memory 
means is empty; 
(b) establishing a count of the number of data 
characters that are to be transferred from the system 

memory to the data communications device; 
(c) enabling the direct memory access unit for 
direct transfer of the number of data characters from 

the system memory to the data communications device; 
and 
(d) transferring the number of data characters 
to the data communications device utilizing the 

direct memory access unit. 
A method of transferring data characters 
from the system memory of a data processing system 

having a direct memory access unit associated 
therewith to an external storage unit have storage 

locations for a plurality of data characters, the 
method comprising: 


(a) determining whether the external storage 
unit is empty; 
(b) establishing a count of the number of data 
characters that are to be transferred from the system 

memory to the external storage unit; 
(c) enabling the direct memory access unit for 
direct transfer of the number of data characters from 

the system memory to the external storage unit. 
A method as in claim 4 and further including 
the steps of issuing an interrupt to the data 

processing system when the number of data characters 
have been transferred from the system memory to the 

external storage unit; 
   identifying the interrupt as indicating that the 

number of data characters has been transferred to the 
external storage unit; 

   disabling the interrupt; 
   reenabling the direct memory access unit to 

facilitate subsequent data character transfers; 
A method of transferring data characters 
from a data communications device to the system 

memory of a data processing system utilizing a direct 
memory access unit associated with the data 

processing system, the data communications device 
including receiver memory means having storage 

locations for a plurality of data characters received 
by the data communications device from a peripheral 

system for transfer to the system memory, the method 
comprising 


(a) maintaining a count of the number of data 
characters available for transfer from the receiver 

memory means before an exception is encountered; 
(b) establishing a trigger level for the 
receiver memory means; 
(c) initiating the transfer of data characters 
from the receiver memory means to the system memory 

utilizing the direct memory access unit when the 
receiver memory means trigger level is reached; 
(d) continuing the transfer of data characters 
from the receiver memory means to the system memory 

utilizing the direct memory access unit until either 
an exception is encountered or until the number of 

valid data characters remaining to be transferred is 
less than the width of the data bus of the data 

processing system. 
A method as in claim 6 wherein transfer of 
data characters continues until an exception is 

encountered, the exception being an empty receiver 
memory means, the method including the additional 

step of terminating all data character transfers from 
the receiver memory means until the trigger level of 

the receiver memory means is reached. 
A method as in claim 7 wherein transfer of 
data characters continues until an exception is 

encountered, the exception being a line status error, 
the method including the following additional steps: 


(a) issuing an interrupt to the data processing 
system; 
(b) determining the type of interrupt; 
(c) determining the location of valid data in 
the receiver memory means; 
(d) determining the specific nature of the 
exception; 
(e) clearing the interrupt; 
(f) executing a service routine for the 
specific line status error interrupt; 
(g) clearing the receiver memory means; 
(h) executing a purge routine to eliminate the 
remaining. incoming data associated with the data 

character that triggered the exception; and 
(i) requesting retransmissions of the data 
associated with the data character that triggered the 

exception. 
A method as in claim 7 wherein transfer of 
data characters continues until an exception is 

encountered, the exception being a match between a 
data character r
eceived by the data communications 
device and preselected comparison information, the 

method including the following additional steps: 

(a) issuing an interrupt to the data processing 
system; 
(b) determining the type of interrupt; 
(c) determining the location of valid data 
characters in the receiver memory means; 
(d) identifying the matched data character; 
(e) reaching the first storage location in the 
receiver memory means, discarding the matched data 

character; and 
(f) executing an appropriate control character 
service routine. 
A method as in claim 7 wherein transfer of 
data characters continues until the number of data 

characters remaining to be transferred is less than 
the width of the data bus, the method including the 

additional step of terminating transfers from the 
receiver memory means utilizing the direct memory 

access unit until the trigger level has been reached. 
A method as in claim 7 wherein transfer of 
data characters continues until the number of data 

characters remaining to be transferred is less that 
the width of the data bus and data character 

transfers have been discontinued for a preselected 
timeout period, the method including the following 

additional steps: 

(a) issuing an interrupt to the data processing 
system; 
(b) identifying the interrupt and the number of 
valid data characters remaining to be transferred; 
(c) transferring the number of consecutive valid 
data characters remaining to be transferred; 
(d) enabling the direct memory access unit for 
subsequent data character transfers from the receiver 

memory means to the system memory utilizing the 
direct memory access unit. 
A method of transferring data characters 
from a data communications device to an external 

storage unit for further transfer to a system memory 
of a data processing system utilizing a direct memory 

 
access unit associated with the data processing 

system, the external storage unit having storage 
locations for storing a plurality of data characters 

received from the data communications device, the 
data communications device including an internal 

receiver memory means having storage locations for 
storing a plurality of data characters received by 

the data communications device from a peripheral 
system, the method comprising: 


(a) establishing a preselected number of data 
characters that may be transferred from the internal 

receiver memory means to the external storage unit 
utilizing the direct memory access unit; 
(b) establishing a trigger level for the 
internal receiver memory means that indicates that 

the internal receiver memory means is storing a 
predefined number of data characters; 
(c) initiating the transfer of data characters 
from the internal receiver memory means to the 

external storage unit utilizing the direct memory 
access unit when the number of data characters stored 

in the internal receiver memory means equals the 
trigger level; and 
(d) continuing the transfer of data characters 
from the internal receiver memory means to the 

external storage unit utilizing the direct memory 
access unit until either the preselected number of 

data characters has been transferred to the external 
storage unit or an exception is encountered by the 

data processing system or until the number of valid 
data characters remaining to be transferred from the 

internal receiver memory means is less than the width 
of the data bus of the data processing system. 
A method as in claim 12 wherein transfer of 
data characters continues until the receiver memory 

 
means trigger level is reached, the method including 

the additional steps of 

(a) issuing an interrupt to the data processing 
system; 
(b) reading the number of characters that have 
been transferred to the external storage unit; 
(c) clearing the interrupt; 
(d) processing the data characters stored in the 
external storage unit; 
(e) enabling the direct memory access unit for 
subsequent data character transfers from the receiver 

memory means. 
</CLAIMS>
</TEXT>
</DOC>
