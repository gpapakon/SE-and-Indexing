<DOC>
<DOCNO>EP-0335424</DOCNO> 
<TEXT>
<INVENTION-TITLE>
Improved parity checking apparatus
</INVENTION-TITLE>
<CLASSIFICATIONS>G06F1300	G06F1300	G06F1110	G06F1110	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>G06F	G06F	G06F	G06F	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>G06F13	G06F13	G06F11	G06F11	</CLASSIFICATIONS-FOURTH>
<ABSTRACT>
Apparatus and methods for performing parity checking in an 
environment in which devices which perform parity checking (103) and 

those which do not (150) are connected to the same synchronous bus. 
The bus includes a parity enable line (113), which carries an parity 

enable signal indicating that the device transmitting data on the 
bus is a parity device which provides the parity of the data it 

transmits, a parity line (111), which carries the parity of the data 
being transmitted, and a parity error line (109) which carries a 

parity error signal indicating whether the receiving device detected 
a parity error. The data is transmitted in a first bus cycle, the 

parity enable signal and the parity are transmitted in the following 
bus cycle, and the receiving device transmits the parity error 

signal in the next bus cycle after that. The bus interface for each 
parity device includes a parity generator (327) and logic (519, 521, 

523, 525, 509) which generates the parity and parity enable signals 
and receives the parity error signal when the parity device is 

transmitting and which receives the parity and parity enable signals 
and generates the parity error signal when the device is receiving. 

The apparatus is used with system diagnostic apparatus which records 
the occurrence of any parity error among devices attached to the 

bus. 

 
</ABSTRACT>
<APPLICANTS>
<APPLICANT-NAME>
WANG LABORATORIES
</APPLICANT-NAME>
<APPLICANT-NAME>
WANG LABORATORIES, INC.
</APPLICANT-NAME>
</APPLICANTS>
<INVENTORS>
<INVENTOR-NAME>
MORRISON PETER A
</INVENTOR-NAME>
<INVENTOR-NAME>
NASH ROBERT C
</INVENTOR-NAME>
<INVENTOR-NAME>
MORRISON, PETER A.
</INVENTOR-NAME>
<INVENTOR-NAME>
NASH, ROBERT C.
</INVENTOR-NAME>
</INVENTORS>
<DESCRIPTION>
The invention disclosed herein relates to systems for transferring 
digital data and more particularly to systems which 
generate and check parity while transferring data. Parity generation and checking has long been used in the computer 
arts to confirm the integrity of a word of data. When a 
word of data is transmitted from one device to another, the 
sending device also generates a parity value for the word and 
transmits a parity signal representing the parity value. The 
value of the parity signal indicates whether there was an even 
or odd number of bits i the word with the value "1". The 
receiving device receives the word and generates its own parity 
value from the received word; if that parity value is different 
from the one represented by the parity signal for the word, the 
received word has an odd number of "1" bits where the transmitted 
word had an even number or vice-versa. Consequently, by 
checking parity, the receiving device can detect any change in 
the value of the transmitted data which involves an odd number 
of bits. A difficulty with parity checking in the prior art has been 
upgrading from systems which did not check parity to systems 
that did. Even though a bus had provisions for parity checking, 
devices which checked parity could not do so if other 
devices were attached to the bus which did not perform parity 
checking. Consequently, no gradual upgrading of devices to 
perform parity checking was possible. Once a decision was made 
to use a bus which provided for parity checking, all devices 
which were to be attached thereto had to be upgraded to perform 
parity checking at the same time.  
 A further difficulty with parity checking in the prior art has 
been that the generation of a parity value requires time, and 
consequently, devices which performed parity checking required 
longer bus cycles than devices which did not. The addition of 
parity checking thus slowed the whole system down. Moreover, 
the requirement for bus cycles longer than those for devices 
that did not parity check further aggravated the problem of 
connecting both types of devices to the same synchronous bus. Another difficulty with parity checking has been that the 
transmitting and receiving devices have known that there was a 
parity error, but there has been no simple mechanism for determining 
independently of the transmitting and receiving devices 
that a parity error had occurred during the transmission. To attain a mixed use of a circuit having a check circuit for 
bus parity and a
</DESCRIPTION>
<CLAIMS>
A digital computer system (101) comprising a bus (107) for 
transferring data between devices (105, 103) including two or 

more parity devices (103) and one or more non-parity devices 
(105),
 
the bus including
 
one or more data lines (119) connected to all of the devices 

for transferring a word of the data between a transmitting 
device of the devices and a receiving device thereof, and 

parity lines (108) connected only to the parity devices (103), 
the parity lines (108) comprising 


a parity enable line (113) for transmitting a parity 

enable signal from a transmitting parity device indicating 
that the transmitting device is a parity device, and 
a parity line (111) for transmitting a parity signal from 
a transmitting parity device indicating the parity at the 

transmitting parity device of a word transferred on the 
data lines (119), 
 
characterised in that said parity lines further comprise
 
   a parity error line (109) for transmitting a parity error signal from a receiving parity device indicating whether 

the parity of the transferred word at the receiving parity 
device was the same as the parity of the transferred word 

at the transmitting parity device,
 
wherein said bus further comprises a bus clock line (201) 

connected to all of the devices for providing a bus clock 
signal for timing cycles of the bus (107),
 
and wherein
 
said transmitting parity device (103) 


for placing a data word on the data lines (119) in a 
first one of the bus cycles, 
for placing the parity enable signal on the parity enable 
line (113) in a second one of the bus cycles that immediately 

follows the first one of the bus cycles;  
 
for placing the parity signal on the parity line (111) in 
the second one of the bus cycles; and 
for receiving, if appropriate, the parity error signal on 
the parity error line (109) in a third one of the bus 

cycles that immediately follows the second one of the bus 
cycles. 
The system according to claim 1,
characterized by:
each of the parity devices (103) includes parity enable signal 
generation means (339) coupled to the parity enable line (113) 

for operating when the parity device is transmitting the data 
word to generate the parity enable signal in the second one of 

the bus cycles; 
parity generation means (327) coupled to the data lines (119) 
for operating when the parity device is transmitting said data 

word to generate the parity of the transmitted data word in the 
first one of the cycles and operating when the parity device is 

receiving said data word to generate the parity of the received 
data word in the second one of the bus cycles; 
parity signal providing means (329) coupled to the parity 
generation means (327) and coupled to the parity line (111) for 

operating when the parity device has transmitted the data word 
to receive the parity of the transmitted word from the parity 

generation means (327) and to provide the parity signal to the 
parity line (111) in the second one of the bus cycles; and 

parity error signal providing means (330) coupled to the parity 
generation means (327) and coupled to the parity line (111) and 

to the parity error line (109) 

for operating when the parity device is receiving the data 
word 
to receive the parity of the received data word from the 
parity generation means (327), receive the parity signal, 

compare the parity indicated by the parity signal and the 
parity received from the parity generation means (327), 

and 
generate the parity error signal in the third one of the 
bus cycles. 
The system according to claim 2
characterized by:
each of the parity devices (103) further includes 
means (319) for storing a transmit parity error bit, the 

transmit parity error bit being set when the parity device is 
the transmitting device and when the parity error signal 

indicates a parity error; and 
means (321) for storing a receive parity error bit, the receive 
parity error bit being set when the parity device is the 

receiving device and generates said parity error signal indicating 
that the parity of the transferred word at the receiving parity 

device was not the same as the parity of the transferred word 
at the transmitting parity device. 
Interface apparatus of a parity device (103) in a system 
according to one of claims 1 to 3 for interfacing the parity 

device (103) to the bus (107),
characterized by:
parity enable signal generating means (339) coupled to the 
parity enable line (113) of the bus (107) for operating when 

the parity device (103) has transmitted said data word to data 
lines (119) of the bus (107) to provide said parity enable signal 

to the parity enable line (113) indicating that the transmitting 
device is a parity device; 
parity generation means (327) coupled to the data lines (119) 
of the bus (107) for generating the parity of data words 

provided to the data lines by the parity device or received 
from the data lines by the parity device; 
parity signal providing means (329) coupled to the parity 
generation means (327) and coupled to the parity line (111) of 

the bus for operating when the parity device has transmitted said 
data word to receive the parity of the transmitted data word 

from the parity generation means and provide said parity signal 
indicating the received parity on the parity line (111); 

parity error signal providing means (330) coupled 

to the parity generation means (327), 
to the parity line (111), 
to the parity enable signal line (113), and 
to the parity error line (109) of the bus (107) 
  
 

for operating, when the parity device (103) is receiving said data 
word transmitted from another parity device (103), to receive 

the parity of the received data word from the parity generation 
means (327) and to respond to the parity enable signal (113) 

and to the parity signal (111) by comparing the parity of the 
received data word with the parity indicated by the parity 

signal for generating said parity error signal on the parity error 
line (109) if the indicated parity and the parity of the 

received data word do not match, and 
parity error signal receiving means (337) coupled to the parity 
error line (109) for operating, when the parity device (103) 

has transmitted said data word, to receive any parity error signal 
generated by the parity error signal providing means (330) of 

the other parity device (103) upon receiving the transmitted 
data word. 
The interface apparatus according to claim 4,
Characterized in that
 
each parity device (103) is coupled to and responsive to the 

bus clock line (201) for: 

(a) receiving the data word from the bus (107) during said 
first bus cycle, 
(b) receiving the parity enable signal and the parity 
signal from the bus (107) during said second bus cycle that 

immediately follows the first bus cycle, and 
(c) generating the parity error signal and providing the 
generated parity error signal to the parity error line 

(109), if required, during said third bus cycle that 
immediately follows the second bus cycle. 
The interface apparatus according to claim 4 or 5
characterized in that:
 
the parity device (103) includes 


means (319) for storing a transmit parity error bit, the 
transmit parity error bit being set when the parity device is 

the transmitting device and when the parity error signal 
indicates a parity error; and  

 
means (321) for storing a receive parity error bit, the receive 
parity error bit being set when the parity device is the 

receiving device and generates said parity error signal indicating 
that the parity of the transferred wo
rd at the receiving parity 
device was not the same as the parity of the transferred word 

at the transmitting parity device. 
The interface apparatus according to claim 4 or 5,
characterized in that:
said digital 
computer system (101) further includes a system bus 

(501), a system console (519), and a serial bus (521, 523, 525) 
that is coupled to the system console (519) ; 
the serial bus includes a serial data line (521), a control line 
(523), and an interrupt line (525); 
the parity device (103) is a system bus interface device (509) 
operably connected to the bus (107), the system bus (501), and 

the serial bus (521, 523, 525) for interfacing the bus to the 
system bus; 
the system bus interface device (509) further includes 
means (511) for storing a bus parity error bit, the means for 

storing the bus parity error bit being set to indicate a bus 
parity error whenever the parity error line (109) carries a 

parity error signal indicating that the parity of said transferred 
data word at said receiving parity device was not the same as the 

parity of the transferred word at the transmitting parity 
device; 
the means (511) for storing the bus parity error bit is coupled 
to the serial data line (521), and is operating to output the 

value of the bus parity error bit on the serial data line 
(521) in response to signals on the control line 

(523); 
an interrupt logic (527) means is coupled to the means (511) 
for storing the bus parity error bit and to the 

interrupt line (525) for generating an interrupt signal on the 
serial bus whenever the bus parity error bit is set to indicate 

a bus parity error; and  
 
the system console (519) responds to the interrupt signal by 
providing a signal on the control line (523,) for 

causing the means (511) for storing the bus parity error bit to 
output the bit's value to the serial data line (521). 
</CLAIMS>
</TEXT>
</DOC>
