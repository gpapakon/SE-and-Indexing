<DOC>
<DOCNO>EP-0627814</DOCNO> 
<TEXT>
<INVENTION-TITLE>
Digital circuit to regulate the gain of an amplifier stage
</INVENTION-TITLE>
<CLASSIFICATIONS>H03G320	H03G516	H03G330	H03G330	H03G516	H03G320	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>H03G	H03G	H03G	H03G	H03G	H03G	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>H03G3	H03G5	H03G3	H03G3	H03G5	H03G3	</CLASSIFICATIONS-FOURTH>
<ABSTRACT>
A digital circuit for controlling the gain of an amplifier 
stage (FA) of a coded signal receiving channel (1) 

comprising a peak detector (2) coupled to the input 
terminal of the receiving channel through a coded signal 

rectifying circuit means, and a gain control stage (3) 
comprising a digital comparator (6) having two input 

terminals respectively connected to an output terminal of 
the peak detecctor and to a memory (8), and an output 

terminal coupled to a gain control terminal of the 
amplifier stage and to address select terminals of the 

memory containing predetermined peak values in coded form. 

</ABSTRACT>
<APPLICANTS>
<APPLICANT-NAME>
ST MICROELECTRONICS SRL
</APPLICANT-NAME>
<APPLICANT-NAME>
STMICROELECTRONICS S.R.L.
</APPLICANT-NAME>
</APPLICANTS>
<INVENTORS>
<INVENTOR-NAME>
CONFALONIERI PIERANGELO
</INVENTOR-NAME>
<INVENTOR-NAME>
CRIPPA CARLO
</INVENTOR-NAME>
<INVENTOR-NAME>
DALLAVALLE CARLO
</INVENTOR-NAME>
<INVENTOR-NAME>
CONFALONIERI, PIERANGELO
</INVENTOR-NAME>
<INVENTOR-NAME>
CRIPPA, CARLO
</INVENTOR-NAME>
<INVENTOR-NAME>
DALLAVALLE, CARLO
</INVENTOR-NAME>
</INVENTORS>
<DESCRIPTION>
This invention relates to a digital circuit for controlling
the gain of an amplifier stage. Such a circuit is known, for example from US-A- 5 134 631.In particular, the invention concerns a circuit effective
to prevent distortion phenomena due to clipping, that is to
say due to the dynamic saturation of an amplifier, in a
receive channel for voice signals in digital form.The field of application of the invention pertains,
particularly but not exclusively, to digital telephone
equipment connected to integrated service digital networks,
and the description which follows will make reference to
that field of application for simplicity of illustration
only.In this type of communications networks, analog voice
signals are converted to digital signals by sampling.The digital signal, which for example may be coded with 8
bits, contains information as to both the amplitude (bits
7-1) and the sign (bit 0) of the sampled analog signal.Digital telephone equipment of medium-high level using the
PCM technique requires final amplifiers which can drive a
speaker with sufficient power to allow "room" listening,
even from a distance of a few meters from the telephone
set.In general, the digital and analog circuits present in the
signal path are all designed to supply the speaker with the
highest possible power at a low (e.g. < 0.2%) distortion
when input a maximum amplitude signal.However, it is unlikely that a voice signal can attain and
retain for some time a level corresponding to the maximum 
amplitude envisaged.It follows that the level of a standard phone call may be
found low even at the highest volume setting of the called
set.On the other hand, if both the digital circuits and the
analog ones present in the signal path are designed to
provide maximum output power with low distortion at a
medium level of the input signal -- leaving it for the
subscriber to select a lower sound volume, then a
sufficiently high level of telephone talk can be obtained
even with the speakerphone operated.At above-medium level of the input signal, however,
distortion problems due to clipping are encountered. Thus,
the channel ought to be provided with an anti-clipping
circuit affording, when required, maximum output power and
low distortion.To fill that demand, state-of-art proposals include
approaches of the analog type and of the mixed analog-digital
type, which both make ample use of external
components.Such approaches involve, however, high power consumption
and increased costs.It is an object of this invention to provide a gain
</DESCRIPTION>
<CLAIMS>
A digital circuit for controlling the gain of an
amplifier stage of a coded signal receiving channel (1)

having at least one signal input terminal, at least one
gain control terminal of the amplifier stage (FA), and at

least one output terminal for coupling to an
electroacoustic device, comprising


a digital peak detector (2) coupled to the input terminal
of the receiving channel through a coded signal rectifying

circuit means, and
a gain control stage (3) comprising a first digital
comparator (6), characterised in that said first comparator has at least first and second input

terminals respectively connected to an output terminal of
the peak detector and to a memory (8) containing coded peak

values dependent on predetermined gain control values, and
at least first and second output terminals respectively

coupled to first and second count select input terminals of
a first up/down counter (7) through first and second logic

AND gate circuit means (13), each having an input terminal
connected to a first clock signal generator (18), such

first counter having at least one output terminal coupled
to at least one address select input terminal of the memory

and to said gain control terminal of the amplifier stage.
A circuit according to Claim 1, characterized in that
the first comparator outputs complementary signals.
A circuit according to either Claim 1 or 2,
characterized in that the digital peak detector comprises a

second digital comparator (5) having at least first and
second output terminals respectively coupled to first and

second count select input terminals of a second up/down
counter (4) through third and fourth logic AND gate circuit

means (14), each having an input terminal respectively 
connected to second and third clock signal generators

(16,17), said second digital comparator having at least
first and second input terminals respectively connected to

said coded signal rectifying circuit means and to an output
terminal of the second up/down counter.
A circuit according to Claim 3, characterized in that
the second comparator outputs complementary signals.
A circuit according to Claim 4, characterized in that
the second and third generators coupled to the second

up/down counter (4) generate clock signals at different
frequencies from each other.
A circuit according to Claim 5, characterized in that
the clock signal generator (17) coupled to the input

terminal reserved for up-count selection (UP) of the second
up/down counter (4) generates clock signals having a higher

frequency than the frequency of the clock signals generated
by the generator (16) coupled to the input terminal

reserved for down-count selection.
A circuit according to Claim 5, characterized in that at
least one (16) of said clock signal generators is driven by

a programming circuit means (15).
A circuit according to any of Claims 3, 4, 5, 6 and 7,
characterized in that the second and third clock signal

generators are dividers acting on a primary clock signal.
A circuit according to any of the preceding claims,
characterized in that, connected between the first up/down

counter and the memory, is a digital adder (9) having at
least one output terminal connected to at least one address

select input terminal of the memory and to the gain control
terminal of the amplifier stage, and having at least two

input terminals respectively connected to at least one 
output terminal of the counter and to a storage register

(11) for coded values of sound volume.
A circuit according to Claim 9, characterized in that
at least some of the address select inputs of the ROM are

connected to a storage register (12) for coded values of a
distortion threshold.
</CLAIMS>
</TEXT>
</DOC>
