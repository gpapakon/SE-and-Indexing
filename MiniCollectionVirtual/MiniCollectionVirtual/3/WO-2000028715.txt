<DOC>
<DOCNO>WO-2000028715</DOCNO> 
<TEXT>
<INVENTION-TITLE>
FAULT-TOLERANT NETWORKING
</INVENTION-TITLE>
<CLASSIFICATIONS>H04L1228	H04L1228	H04L1240	H04L1240	H04L1244	H04L1244	H04L2906	H04L2906	H04L2914	H04L2914	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>H04L	H04L	H04L	H04L	H04L	H04L	H04L	H04L	H04L	H04L	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>H04L12	H04L12	H04L12	H04L12	H04L12	H04L12	H04L29	H04L29	H04L29	H04L29	</CLASSIFICATIONS-FOURTH>
<ABSTRACT>
Methods and apparatus for implementation of fault-tolerant networks provide a network fault-tolerance manager for detecting failures and manipulating a node to communicate with an active channel. Failure detection incorporates one or more methods, including message pair and link pulse detection. Failure recovery includes switching all node data communications to a stand-by channel or switching just those nodes detecting a failure. Communication between nodes provides the distributed detection, with detecting nodes reporting failures to their network fault-tolerance manager and the network fault-tolerance manager broadcasting the failure recovery to all nodes. The network fault-tolerance manager is middleware, residing with each node in a logical hierarchy above a physical layer of a network and below a transport layer of the network. The approach is particularly suited to Ethernet LANs and capable of using commercial off-the-shelf network components.
</ABSTRACT>
<APPLICANTS>
<APPLICANT-NAME>
HONEYWELL INC
</APPLICANT-NAME>
<APPLICANT-NAME>
HONEYWELL INC.
</APPLICANT-NAME>
</APPLICANTS>
<INVENTORS>
<INVENTOR-NAME>
HUANG JIANDONG
</INVENTOR-NAME>
<INVENTOR-NAME>
LI LING
</INVENTOR-NAME>
<INVENTOR-NAME>
SONG SEJUN
</INVENTOR-NAME>
<INVENTOR-NAME>
HUANG, JIANDONG
</INVENTOR-NAME>
<INVENTOR-NAME>
LI, LING
</INVENTOR-NAME>
<INVENTOR-NAME>
SONG, SEJUN
</INVENTOR-NAME>
</INVENTORS>
<DESCRIPTION>
 FAULT-TOLERANT NETWORKINGTECHNICAL FIELD OF THE INVENTIONThe present invention relates generally to network data communications. In particular, the present invention relates to apparatus and methods providing fault tolerance of networks and network interface cards, wherein middleware facilitates failure detection, and switching from an active channel to a stand-by channel upon detection of a failure on the active channel.A portion of the disclosure of this patent document contains material which is subject to copyright protection. The copyright owner has no objection to the facsimile reproduction by anyone ofthe patent disclosure, as it appears in the Patent and Trademark Office patent files or records, but otherwise reserves all copyright rights whatsoever. The following notice applies to the software and data as described below and in the drawings hereto: Copyright Â© 1998, Honeywell, Inc., All Rights Reserved.BACKGROUND OF THE INVENTION Computer networks have become widely popular throughout business and industry. They may be used to link multiple computers within one location or across multiple sites. The network provides a communication channel for the transmission of data, or traffic, from one computer to another. Network uses are boundless and may include simple data or file transfers, remote audio or video, multimedia conferencing, industrial process control and more.Perhaps the most popular network protocol is Ethernet, a local area network (LAN) specification for high-speed terminal to computer communications or computer to computer file transfers. The Ethernet communication protocol permits and accommodates data transfers across a bus, typically a twisted pair or coaxial cable. Other media for data bus exist, such as fiber optic bus or wireless bus as just two examples. For convenience, the generic term bus will be used, regardless of media type. A typical LAN will have a number of nodes connected to and in communication with the LAN. Each node will have a network interface card (NIC) providing the communication link to the physical LAN through a drop to the LAN. Alternatively, 

several nodes may be connected to a network hub, or switch, through their respective network interface cards. In addition, multiple LANs may be bridged together to create larger networks.Nodes generally comply with the OSI model, i.e., the network model ofthe International Standards Organization. The OSI model divides network communications into seven functional layers. The layers are arranged in a logical hierarchy,
</DESCRIPTION>
<CLAIMS>
CLAIMS
1. A fault-tolerant communication network, comprising: at least two nodes, wherein each ofthe at least two nodes is connected to a plurality of channels for data transmission; and a network fault-tolerance manager associated with each ofthe at least two nodes, wherein the network fault-tolerance manager associated with a node directs that node to selectively transmit data packets on one ofthe plurality of channels connected to that node, further wherein the network fault-tolerance managers reside in a logical hierarchy above a physical layer ofthe network and below a transport layer ofthe network, still further wherein each network fault-tolerance manager communicates with other network fault-tolerance managers.
2. The fault-tolerant communication network of claim 1 , wherein the network fault- tolerance managers further direct each ofthe at least two nodes to transmit data packets on the same one ofthe plurality of channels.
3. The fault-tolerant communication network of claim 1 , wherein one of the at least two nodes comprises: a network interface card connected to each ofthe plurality of channels in a one-to-one relationship; and a network interface card switch connected to each of the network interface cards in a one-to-many relationship; wherein the network interface card switch directs the data packets to one ofthe network interface cards as directed by the network fault- tolerance manager.
4. The fault-tolerant communication network of claim 1 , wherein the plurality of channels utilize network resources, further wherein the network resources utilized for a first channel ofthe plurality of channels is shared with the network resources utilized by a second channel ofthe plurality of channels. 


 utilized for a first channel ofthe plurality of channels is shared with the network resources utilized by a second channel of the plurality of channels.
5. A fault-tolerant network for data communication, comprising: a first network; a second network; and at least two nodes, wherein each ofthe at least two nodes is connected to the first network and the second network, further wherein each ofthe at least two nodes has a network fault-tolerance manager, still further wherein each of the network fault-tolerance managers is in communication with other network fault-tolerance managers; wherein each network fault-tolerance manager directs its corresponding node to selectively transmit data packets on a network selected from the group consisting of the first network and the second network, further wherein each network fault-tolerance manager is responsive to messages received from other network fault-tolerance managers, still further wherein each network fault-tolerance manager resides in a logical hierarchy above a physical layer ofthe network and below a transport layer ofthe network.
6. The fault-tolerant network of claim 5, wherein the first network and the second network are both logical networks of a single physical network.
7. A node for use in a communication network, comprising: a first network interface; a second network interface; a network fault-tolerance manager, wherein the network fault-tolerance manager resides in a logical hierarchy above a physical layer ofthe network and below a transport layer ofthe network; and a network interface card switch in communication with the network fault- tolerance manager, wherein the network interface card switch selectively directs data traffic between the node and one ofthe network interfaces in response to the network fault-tolerance manager. 

8. The node of claim 7, wherein the network fault-tolerance manager and the network interface card switch are combined as a single software object.
9. A failure recovery method for a fault-tolerant communication network having an active network and a stand-by network and further having a plurality of nodes connected to the active and stand-by networks, the method comprising: initiating data communications from a first node, wherein the data communications are transmitted by the first node on the active network through a first network interface; detecting a failure by the first node, wherein the failure is selected from the group consisting of a failure on the active network and a failure on the stand-by network; directing the first node to switch data traffic to the stand-by network through a second network interface when the failure is on the active network; and reporting the failure when the failure is on the stand-by network.
10. The failure recovery method of claim 9, wherein the active network and the stand-by network are both logical networks of a single physical network.
11. A machine-readable medium having instructions stored thereon for causing a processor to implement the method of claim 9.
12. A failure recovery method for a fault-tolerant communication network having an active network and a stand-by network and further having a plurality of nodes connected to the active and stand-by networks, the method comprising: initiating data communications from a first node, wherein the data communications are transmitted by the first node on the active network through a first network interface; detecting a failure by the first node, wherein the failure occurs on the active network; 


 directing the first node to switch data traffic to the stand-by network through a second network interface; and directing each remaining node ofthe plurality of nodes to switch data traffic to the stand-by network.
13. The failure recovery method of claim 12, wherein the active network and the stand-by network are both logical networks of a single physical network.
14. A machine-readable medium having instructions stored thereon for causing a processor to implement the method of claim 12.
15. A failure detection method for a fault-tolerant communication network having an active network and a stand-by network and further having a plurality of nodes connected to the active and stand-by networks, the method comprising: transmitting a plurality of message pairs from a first node, wherein a first message of each message pair is transmitted on the active network and a second message of each message pair is transmitted on the stand-by network; monitoring receipt ofthe plurality of message pairs at a second node, wherein monitoring receipt comprises determining an absolute delta time between receiving the first and second messages of each message pair; comparing the absolute delta time of each message pair to a predetermined time, wherein an absolute delta time greater than the predetermined time is indicative of a receipt failure; declaring a failure if a number of consecutive receipt failures exceeds a predetermined maximum.
16. The failure detection method of claim 15, wherein the failure is selected from the group consisting of a failure on the active network and a failure on the stand-by network. 

17. The failure detection method of claim 15, wherein the active network and the stand-by network are both logical networks of a single physical network.
18. The failure detection method of claim 15, wherein receiving the first message of a message pair occurs before receiving the second message ofthe message pair.
19. The failure detection method of claim 15, wherein transmitting a plurality of message pairs comprises transmitting a plurality of message pairs at regular intervals.
20. The failure detection method of claim 15, wherein declaring a failure if a number of consecutive receipt failures exceeds a predetermined maximum comprises declaring a failure if a number of consecutive receipt failures exceeds one.
21. A machine-readable medium having instructions stored thereon for causing a processor to implement the method of claim 15.
22. A failure detection method for a fault-tolerant communication network having an active network and a stand-by network and further having a plurality of nodes connected to the active and stand-by networks, the method comprising: transmitting a first message of a message pair from a first node on the active network; transmitting a second message ofthe message pair from the first node on the stand-by network; receiving the first message by a second node on the active network; waiting a predetermined time to receive the second message at the second node on the stand-by network; and declaring a failure if the second message does not arrive at the second node on the stand-by network within the predetermined time.
23. The failure detection method of claim 22, wherein transmitting a first message occurs before transmitting a second message. 


24. A machine-readable medium having instructions stored thereon for causing a processor to implement the method of claim 22.
25. A failure detection method for a fault-tolerant communication network having an active network and a stand-by network and further having a plurality of nodes connected to the active and stand-by networks, the method comprising: transmitting a first message of a message pair from a first node on the active network; transmitting a second message of the message pair from the first node on the stand-by network; receiving a message by a second node, wherein the message is selected from the group consisting ofthe first message and the second message; waiting a predetermined time to receive a remaining message ofthe message pair by the second node; and declaring a failure if the remaining message does not arrive at the second node within the predetermined time.
26. The failure detection method of claim 25, wherein transmitting a first message occurs before transmitting a second message.
27. A machine-readable medium having instructions stored thereon for causing a processor to implement the method of claim 25.
28. A failure detection method for a fault-tolerant communication network having an active network and a stand-by network and further having a plurality of nodes connected to the active and stand-by networks, the method comprising: transmitting a first message of a first message pair from a first node on the active network; transmitting a second message ofthe first message pair from the first node on the stand-by network; 


 receiving a message by a second node, wherein the message is selected from the group consisting ofthe first message ofthe first message pair and the second message of the first message pair; waiting a first predetermined time to receive a remaining message ofthe first message pair by the second node; transmitting a first message of a second message pair from the first node on the active network; transmitting a second message of the second message pair from the first node on the stand-by network; receiving a message by a second node, wherein the message is selected from the group consisting ofthe first message ofthe second message pair and the second message ofthe second message pair; waiting a second predetermined time to receive a remaining message of the second message pair by the second node; declaring a failure if the remaining message ofthe first message pair does not arrive at the second node within the first predetermined time and the remaining message ofthe second message pair does not arrive at the second node within the second predetermined time, wherein the remaining message ofthe first message pair and the remaining message ofthe second message pair were both transmitted on one network selected from the group consisting of the active network and the stand-by network.
29. A machine-readable medium having instructions stored thereon for causing a processor to implement the method of claim 28.
30. A node for use in a fault-tolerant communication network, comprising: a first network interface; a second network interface; a processor; and 


 a machine-readable medium coupled to the processor, wherein the machine- readable medium has instructions stored thereon capable of causing the processor to implement a method, the method comprising: initiating data communications from the node, wherein the data communications are transmitted by the node through the first network interface; detecting a failure by the node, wherein the failure occurs on a first network coupled to the first network interface; and directing the node to switch data communications to a second network through the second network interface.
31. The node of claim 30, wherein the machine-readable medium further has instructions stored thereon capable of causing the processor to report the failure. 

</CLAIMS>
</TEXT>
</DOC>
