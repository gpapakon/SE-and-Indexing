<DOC>
<DOCNO>EP-0610034</DOCNO> 
<TEXT>
<INVENTION-TITLE>
High speed PWM without linearity compromise at extreme duty cycles
</INVENTION-TITLE>
<CLASSIFICATIONS>H03K708	H03K700	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>H03K	H03K	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>H03K7	H03K7	</CLASSIFICATIONS-FOURTH>
<ABSTRACT>
A circuit for reducing the amount of instability in a pulse width modualtion circuit by 
providing a minimum amount of overdrive after the crossover point between a ramp and a 

voltage threshold level (V₁,V
N
), and a constant amount of discharge time (Control 1) between 
the end on one ramp and the beginning of the next. Also, a feedback loop (C
H
,C
h
,l₁,l₂) is 
provided to increase or decrease the slope to compensate for a decreasing or increasing 

amount of time between clock pulses, to maintain the duty cycle of the output when the clock 
frequency varies. 


</ABSTRACT>
<APPLICANTS>
<APPLICANT-NAME>
XEROX CORP
</APPLICANT-NAME>
<APPLICANT-NAME>
XEROX CORPORATION
</APPLICANT-NAME>
</APPLICANTS>
<INVENTORS>
<INVENTOR-NAME>
GIRMAY GIRMAY K
</INVENTOR-NAME>
<INVENTOR-NAME>
GIRMAY, GIRMAY K.
</INVENTOR-NAME>
</INVENTORS>
<DESCRIPTION>
The present invention relates to circuits for generating pulse width modulated (PWM)
pulses.US-A4,847,695 discloses image processing apparatus in which minimum and maximum
widths of a pulse-width modulated signal can be independently adjusted in accordance with
predetermined data signals. The minimum and maximum widths are adjusted by variable resistors,
one of which sets a maximum amplitude of an analog image signal, the other of which sets the bias
level of a triangle wave signal. US-A-4,847,695 discloses that the triangle wave could be replaced
by a saw-tooth wave.A PWM circuit normally compares a ramp waveshape having a constant slope against a
variable threshold DC level to produce an output pulse that toggles at the point where the ramp level
exceeds the threshold level. Also, as soon as the threshold level is reached, the ramp is discharged
to zero. For long output pulses in relatively high speed circuits, the time for the ramp circuit to
discharge is short, and any variability in the ramp slope or threshold voltage results in a variation in
this discharge time, which in turn, affects the timing of the next cycle. Thus, the variability of the
discharge time of the circuit results in significant PWM tolerances that make the circuit unusable in
high speed precision applications such as the modulation of video data.Also, the ramp waveshape actually has to go a bit past the threshold level for the
comparator to be able to react to it. This additional amount of drive is called "overdrive", and the
comparator output delay is highly influenced by the amount of this overdrive at its input. Overdrive
less than a certain minimum value results in more delay between the time of the crossover point and
the fall time of the output pulse. In current designs this amount is not controlled, thereby resulting in
inconsistent widths for the same threshold levels. However, due to the over-all period mandated by
some design requirements (such as for switching power supply applications) the variabilities of the
device delays are considered insignificant. However, an uncontrolled amount of overdrive can
result in timing tolerances that are unacceptable, especially in applications where these
uncertainties are significant as compared to the over-all period of the data being modulated.A third problem that a PWM circuit must deal with is that of a changing clock frequency.
If the output pulse ON time is fixed and the clock frequency changes, the OFF time, and therefore
the duty cycle, also changes. A fourth problem is
</DESCRIPTION>
<CLAIMS>
A pulse width modulation pulse generator comprising:

a clock generator for generating a series of clock pulses at a clock frequency that
changes,
threshold means (63) for generating a threshold voltage of any value between a low
voltage (V
1
) and a high voltage (V
N
) within a voltage range,
ramp means for generating a ramp having a slope, amplitude and duration, said ramp
amplitude exceeding said high voltage in said range by a predetermined amount, said ramp duration

being an amount less than the time between clock pulses, and
a comparator (41, 42) for producing an output of one state immediately before the
crossover of said ramp and threshold level, and for producing an output of the other state for the

remainder of the time between clock pulses,
the ramp means being responsive to the time between clock pulses for increasing or
decreasing the slope of said ramp as the time between clock pulses decreases or increases,

respectively, the ramp means increasing or decreasing the slope of said ramp to provide a constant
pulse width modulation output pulse duty cycle despite change in the clock frequency.
A pulse generator as claimed in Claim 1 in which the ramp means comprises:

ramp charge storage means (C
H
) for storing charge to generate the ramp;
slope charge storage means (C
h
) for storing charge to set the slope of the ramp; and
control means (50-57, I
1
, I
2
) for controlling the charging and discharging of the ramp
charge storage means (C
H
) and the slope charge storage means(C
h
); the control means (50-57, I
1
,
I
2
), during a discharge duration in each clock period, discharging the ramp charge storage means
(C
H
) completely and discharging the slope charge storage means (C
h
) to leave a residual charge on
the slope charge storage means (C
h
); the control means (50-57, I
1
, I
2
), after the discharge duration,
charging the ramp charge storage means (C
H
) at a rate that is slower or faster as the residual

charge on the slope charge storage means (C
h
) is greater or less, respectively; the control means
(50-57, I
1
, I
2
), after the ramp reaches a reference voltage level (V
REF
; 5/2 V
REF
), charging the slope
charge storage means (C
h
) for a time that depends on the clock period.
A pulse generator as claimed in claim 2 in which the control means (50-57, I
1
, I
2
),
during the discharge duration, discharges the slope charge storage means (C
h
) for a fixed amount of
time.
A pulse generator as claimed in claim 2 or claim 3 in which the control means (50-57,
I
1
, I
2
) charges the slope charge storage means (C
h
) from when the ramp reaches the reference 
voltage level (V
REF
; 5/2 V
REF
) until the start of the next clock pulse and in which the discharge
duration of the next clock period begins in response to the start of the next clock pulse.
A pulse generator as claimed in any of claims 2 to 4 in which, when the clock
period is not changing, the amount by which the control means (50-57, I
1
, I
2
) discharges the slope
charge storage means (C
h
) during the discharge duration is equal to the amount by which the
control means (50-57, I
1
, I
2
) charges the slope charge storage means (C
h
) after the ramp reaches
the reference voltage level (V
REF
; 5/2 V
REF
).
A pulse generator as claimed in any of claims 2 to 5 in which the control means
(50-57, I
1
, I
2
) comprises:

logic means (51) for providing a signal when the ramp reaches the reference voltage level
(V
REF
; 5/2 V
REF
) to start charging of the slope charge storage means (C
h
); and
charging means (I
2
; 47) for responding to the signal from the logic means (51) by charging
the slope charge storage means (C
h
).
</CLAIMS>
</TEXT>
</DOC>
