<DOC>
<DOCNO>EP-0628234</DOCNO> 
<TEXT>
<INVENTION-TITLE>
MOTION COMPENSATED VIDEO IMAGE PROCESSING
</INVENTION-TITLE>
<CLASSIFICATIONS>H04N701	H04N732	H04N701	H04N746	H04N514	H04N514	H04N746	H04N726	H04N732	H04N726	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>H04N	H04N	H04N	H04N	H04N	H04N	H04N	H04N	H04N	H04N	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>H04N7	H04N7	H04N7	H04N7	H04N5	H04N5	H04N7	H04N7	H04N7	H04N7	</CLASSIFICATIONS-FOURTH>
<ABSTRACT>
Motion compensated image processing is performed by producing vectors assigned to elementary areas of video fields. These are produced from at least two video fields in a sequence. A first technique is used to produce the vectors. If an error signal is produced by the first technique then a second technique is used for the production of vectors.
</ABSTRACT>
<APPLICANTS>
<APPLICANT-NAME>
BRITISH BROADCASTING CORP
</APPLICANT-NAME>
<APPLICANT-NAME>
BRITISH BROADCASTING CORPORATION
</APPLICANT-NAME>
</APPLICANTS>
<INVENTORS>
<INVENTOR-NAME>
BURL MICHAEL
</INVENTOR-NAME>
<INVENTOR-NAME>
BURL, MICHAEL
</INVENTOR-NAME>
</INVENTORS>
<DESCRIPTION>
This invention relates to video image processing and in particular to
motion compensated image processing.Various motion compensation techniques may be used when it is
desired to calculate a frame intermediate of two frames in a video sequence.
This may be necessary in slow motion simulation or in standards conversion.
The positions of moving objections within these fields are calculated with
reference to a plurality of the other fields in the sequence. An example of
such a motion compensation system is given in our British Patent Application
No. 9111348.0 published 2.12.1992 under the No. GB-A-2 256 341.There are two commonly used motion estimation techniques used to
produce motion vectors representing the differences between a pair of video
images and further techniques exist.The first of these is phase correlation and a technique for
implementing this is described in our British Patent Number GB-A-2188510 published 30.9.1987. This
produces a list of motion vectors which are applicable over the whole area of
the image and over each elementary area of the image. To use the vectors
it is necessary to select which of them will apply to a given elementary area
of the picture. Each elementary area may be as small as a pixel or may
comprise a block of many pixels. A proposal has been made (see Signal
Processing: Image Communication, Volume 3, 1991, (Colchester), HM
Ahmad Fadzil et al, "VIDEO SUBBAND VQ AT 64 kbit/s USING SHORT-KERNEL
FILTER BANKS WITH AN IMPROVED MOTION ESTIMATION
TECHNIQUE") to employ a hierarchical approach in which candidate motion
vectors from a phase correlation process are passed to a hierarchical block
search process.Phase correlation has been found to work very well for linear
movements in objects and is very rarely confused by detail in the scene. It
has not been found, however, to be particularly effective when used on
rotating objects or on scenes where small picture elements move in different
directions. The other commonly used technique for motion estimate is known as
'block matching'. In this a block of video data n pixels by m pixels is
compared with a corresponding block in a previous field and with each of a
plurality of equally sized blocks within a predetermined range in that previous
field. For a pair of interleaved video fields this range might be +/- 8 field
lines vertically and +/- 16 pixels horizontally. The block which gives the best
match to the original block is then used to derive a motion vector for that
block. (For an example of a block match process, see
</DESCRIPTION>
<CLAIMS>
A method for motion compensated image processing comprising
the steps of producing vectors assigned to elementary areas of

video fields from at least two fields in a sequence of video images
by means of a first motion estimation technique and producing an error signal from said first motion estimation technique, the method being characterised by switching to a second motion estimation technique in response to an error signal produced by the first motion estimation technique.
A method according to claim 1 in which the first motion estimation technique
comprises the steps of deriving a set of motion vectors from a

phase correlation between input fields and assigning to an
elementary area of a field the vector that gives the best fit in

deriving one field from another.
A method according to claim 1 or 2 in which the second motion estimation
technique comprises a block matching technique.
A method according to claim 1, 2 or 3 including the step of
switching to a third motion estimation technique in response to error signals

produced by the first and second motion estimation techniques.
A method according to claim 4 in which the third motion estimation technique
comprises assigning a zero vector to an elementary area.
A method according to claim 3 in which the block matching
means performs overlapping block matches.
A method according to claim 2 in which a predetermined
number of motion vectors are used in the assigning step.
A method according to any preceding claim including the step
of normalising the error in the derivation of an elementary area in

the output.
A method according to claim 8 in which the normalising step
comprises dividing the error for that elementary area by the 

luminance gradient for that elementary area.
Apparatus for motion compensated image processing, comprising first
means (4,10,12) for producing and assigning vectors to elementary areas of

video fields according to a first motion estimation technique, means (26) for producing an error signal from the first producing
and assigning means, characterised in that there are provided second

means (6) for producing and assigning vectors to elementary areas of video
fields according to a second motion estimation technique, and means (20) for switching from the first to the second producing

and assigning means in response to the error signal.
Apparatus for motion compensated image processing according to
claim 10 in which the first producing and assigning means comprises phase

correlation means (4).
Apparatus for motion compensated image processing according to
claim 10 or 11 in which the second producing and assigning means

comprises block matching means (6).
Apparatus for motion compensated image processing according to
claim 10, 11 or 12 including third vector producing and assigning means and

in which the switching means switches to the third vector producing and
assigning means in response to error signals from the first and second

producing and assigning means.
Apparatus for motion compensated image processing according to
claim 10, 11, 12 or 13 including means for normalising errors in the

derivation of an elementary area in an output field.
</CLAIMS>
</TEXT>
</DOC>
