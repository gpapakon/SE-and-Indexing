<DOC>
<DOCNO>EP-0652674</DOCNO> 
<TEXT>
<INVENTION-TITLE>
Cascaded image processing using histogram prediction
</INVENTION-TITLE>
<CLASSIFICATIONS>H04N1407	H04N100	H04N1407	H04N100	H04N160	H04N160	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>H04N	H04N	H04N	H04N	H04N	H04N	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>H04N1	H04N1	H04N1	H04N1	H04N1	H04N1	</CLASSIFICATIONS-FOURTH>
<ABSTRACT>
A method of improving processing of a color natural scene image defined by color 
density signals processed by multiple processing elements, wherein after an exposure 

processor (112) incorporates a luminance signal histogram, a modifying TRC curve is derived 
(114) and applied to the luminance histogram signal. The resultant modified luminance 

histogram signal is blurred prior to directing it to a contrast processor (132). The modifying 
TRC curves determined at each processor are combined (140) and applied to the color density 

signals only after combination. 

</ABSTRACT>
<APPLICANTS>
<APPLICANT-NAME>
XEROX CORP
</APPLICANT-NAME>
<APPLICANT-NAME>
XEROX CORPORATION
</APPLICANT-NAME>
</APPLICANTS>
<INVENTORS>
<INVENTOR-NAME>
ESCHBACH REINER
</INVENTOR-NAME>
<INVENTOR-NAME>
FUSS WILLIAM A
</INVENTOR-NAME>
<INVENTOR-NAME>
ESCHBACH, REINER
</INVENTOR-NAME>
<INVENTOR-NAME>
FUSS, WILLIAM A.
</INVENTOR-NAME>
</INVENTORS>
<DESCRIPTION>
The present invention is directed toward a method and apparatus for improving the
appearance of a digital image having a pictorial scene, and more particularly, toward
improving processing time and image quality of an image which is processed by multiple
cascaded processing elements.In the past, a typical application for copiers or scan-to-print image processing systems
was to reproduce an input image as accurately as possible, i.e., render a copy. Thus, copies have
been rendered as accurately as possible, flaws and all. However, as customers become more
knowledgeable in their document reproduction requirements, they recognize that an exact
copy is often not what they want. Instead, they would rather obtain the best possible
document output. Until recently, image quality from the output of a copier or a scan-to-print
system was directly related to the input document quality. One very common set of input
documents includes photographs. Unfortunately, photography is an inexact science,
particularly among amateurs, and original photographs are often poor. Alternatively,
technology, age or image degradation variations often result in pictures having an
unsatisfactory and undesirable appearance. What is desired then, is a copy giving the best
possible picture, and not necessarily a copy of the original.Photography has long dealt with this issue. Analog filters and illumination variations
can improve the appearance of pictures in the analog photographic process. Thus, for
example, yellow filters enhance the appearance of white clouds against a blue sky in black and
white images. Further, various electrophotographic devices, including digital copiers, can clean
up and improve images by adjustment of threshold, filtering, or background suppression.
Generally, these methods are manual methods which a user must select on an image by image
basis. Unfortunately, the casual user is not skilled enough to perform these operations. The
inability to perform image enhancement operations is exacerbated when additionally dealing
with color controls.Three possible choices are presented by the art in the area of image enhancement. In
the first case, we can do nothing. Such a system is a stable system, in that it does no harm to an
image. This is a common approach taken to reproduction. However, the output documents of
such a system are sometimes not satisfactory to the ultimate customer.In a second case of image enhancement, the image can always be processed. It turns
out that an improvement can usually be made to an image
</DESCRIPTION>
<CLAIMS>
A method of cascade processing a natural scene image recorded as a set of electronic
signals, at plural image processing modules each requiring histogram data, including the steps of:


receiving a set of color image-describing electronic signals from a source of natural
scene images;
deriving from the received color image describing signals a signal representing
overall intensity of the image;
from the intensity signal, generating a histogram signal, describing a population of
intensity signals at each possible intensity level in the image;
using the histogram signal at a first image processing module, and generating a first
tone reproduction curve reflecting processing of the image at the first image processing

module;
operating on the histogram signal with the tone reproduction curve to produce a
modified histogram signal;
operating on the modified histogram signal with a filter, to produce a blurred or
smoothed modified histogram signal;
directing the blurred or smoothed modified histogram signal to a next image
processing module;
using the histogram signal at the next image processing module, and generating a
second tone reproduction curve reflecting processing of the image at the next image

processing module;
combining each of the generated tone reproduction curves, and applying the combined curve
to the received color image describing signals.
A method for cascade processing a natural scene image recorded as a set of
electronic signals to alter at least exposure and contrast, comprising:


receiving a set of color image-describing electronic signals from a source of natural
scene images;
deriving from the image a luminance signal describing image intensity;
from the luminance signals, generating a histogram signal, describing the
population of luminance signals at each possible intensity level;
from the histogram signal at an exposure processing module, generating a first tone
reproduction curve reflecting exposure processing of the image at the exposure processing

module;
operating on the histogram signal with the tone reproduction curve to produce a
first modified histogram signal; 
operating on the modified histogram signal with a blur filter, to produce a blurred
modified histogram signal;
directing the blurred modified histogram signal to the contrast processing module;
operating on the histogram signal at the contrast processing module, and
generating a tone reproduction curve reflecting processing of the image at the contrast

processing module;
combining each of the generated tone reproduction curves, and applying the combined curve
to the received color image describing signals.
The method as defined in claim 1 or claim 2, wherein each original electronic signal is
defined in terms of red-green-blue color space.
The method as defined in claim 3, wherein each original electronic signal defined in
terms of red-green-blue color space is converted to luminance-chrominance space, and the

signal describing intensity of the image is the luminance signal.
The method as defined in any one of claims 1 to 4, including the initial step of
sampling the electronic signals at a resolution less than the resolution of the electronic signals.
Apparatus for cascade processing a natural scene image recorded as a set of
electronic signals to alter at least exposure and contrast, comprising:


a color density signal input (100), receiving color image-describing electronic color density
signals from a source of natural scene images;
a color space converter (106), operating on received color density signals and producing a
luminance signal describing image intensity;
a processing controller (106) generating a histogram signal from the luminance signals,
describing the population of luminance signals at each possible intensity level and directing

the histogram to an information channel) (108);
an exposure processing module (112), operatively connected to said information channel
to receive said histogram signals, and generating a first tone reproduction curve reflecting

exposure processing of the image at the exposure processing module, and returning tone
reproduction curve information to said processing controller;
said processing controller operating on the histogram signal with the returned tone
reproduction curve to produce a first modified histogram signal, operating on the first

modified histogram to produce a blurred modified histogram signal and directing the
histogram to an information channel (108); 
a contrast processing module (132), operatively connected to said information channel (108) to
receive said blurred modified histogram signals, and generating a second tone reproduction

curve reflecting exposure processing of the image at the contrast processing module;
a tone reproduction curve combiner (140), operatively connected to each processing
module (112,132) and combining each tone reproduction curve generated thereat, and directing the

combined curves to a tone reproduction curve controller (150), applying the combined curve to the received color image-describing
signals electronic color density signals.
The apparatus as defined in claim 6, wherein each original electronic signal is
defined in terms of red-green-blue color space.
The apparatus as defined in claim 6, including a subsampling processor sampling the
electronic signals at a resolution less than the resolution of the electronic signals.
The apparatus as defined in claim 6, including at least one image processing module
that do not use a luminance histogram to derive their processing operations, operatively

interposed between the contrast processing module and the exposure processing module.
</CLAIMS>
</TEXT>
</DOC>
