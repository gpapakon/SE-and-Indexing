<DOC>
<DOCNO>EP-0653645</DOCNO> 
<TEXT>
<INVENTION-TITLE>
Method for measuring a distance
</INVENTION-TITLE>
<CLASSIFICATIONS>A01B63114	G01S7539	A01B63111	A01B63111	G01S1510	G01S7539	G01S1588	G01S1500	G01S7526	G01S7523	G01S7527	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>A01B	G01S	A01B	A01B	G01S	G01S	G01S	G01S	G01S	G01S	G01S	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>A01B63	G01S7	A01B63	A01B63	G01S15	G01S7	G01S15	G01S15	G01S7	G01S7	G01S7	</CLASSIFICATIONS-FOURTH>
<ABSTRACT>
A distance sensing system (10) includes an ultrasonic transducer 
(XM1), a transceiver (12) and a microcontroller-based signal 

processing unit (14). The transducer (12) periodically generates 
and directs towards the terrain a dual frequency ultrasonic 

signal. Echo signals from the ground and/or any intervening crop 
or trash are reflected back to the transducer (12) and are 

processed. The system generates amplified and filtered echo 
envelope signals. Leading and trailing edge times are determined 

as the times the echo signals cross a threshold value which is a 
certain proportion of a maximum echo amplitude value. A near 

distance value is derived from the leading edge time of the first 
echo which exceeds a minimum amplitude. A far distance value is 

determined as the trailing edge time of the last echo signal which 
has an amplitude which exceeds a certain value. Multiple echo 

time and amplitude values are derived from the maximum amplitude 
echo. These values are used to prevent echoes which occur after 

the multiple echo time with less than a certain amplitude from 
being used in the determination of the far distance value. This 

far distance value represents the distance to ground and weaker, 
earlier echoes from trash or crop and later, multiple echoes may 

be ignored. 

</ABSTRACT>
<APPLICANTS>
<APPLICANT-NAME>
DEERE 
&
 CO
</APPLICANT-NAME>
<APPLICANT-NAME>
DEERE 
&
 COMPANY
</APPLICANT-NAME>
</APPLICANTS>
<INVENTORS>
<INVENTOR-NAME>
PHELAN JAMES J
</INVENTOR-NAME>
<INVENTOR-NAME>
PHELAN, JAMES J.
</INVENTOR-NAME>
</INVENTORS>
<DESCRIPTION>
The present invention relates to a method for measuring a distance
between a transducer and a surface, comprising the following steps
a) transmitting at a transmit time an acoustic signal from the
transducer so that the transducer receives reflected echo signals,
including an echo signal reflected from the surface, and b)
determining amplitude and time data for a maximum echo signal
having a peak amplitude which is larger than the peak amplitude of
all the other echo signals received by the transducer.Various systems and methods have been proposed for measuring the
distance between a vehicle or machine part and the ground over
which it moves. This is desired in order to adjust the position
of working tools or implements with respect to the terrain or soil
surface. One such system is described in Australian Petty Patent
Abridgement No. AU-A-78449/87, published 10 March 1988 wherein
distance to the soil is measured by reflecting an ultrasonic
signal off the soil surface. Variations in soil condition and
type are compensated for by deriving the distance to the soil
surface by averaging the leading and trailing edge times of an
amplitude envelope of an echo signal reflected by the soil
surface. However, this and other similar systems have not been
able to function accurately in conditions where crops or trash lie
on top of the ground surface. Accordingly, a distance or height
sensing system which can distinguish between crop or trash and
soil surface is desired.An object of the present invention as disclosed in Claim 1 is to provide a method for
measuring a distance which can distinguish between ground level
and trash or crop which may be lying on top of the ground.These and other objects are achieved by the present invention
which include an ultrasonic transducer, a transceiver and a
microcontroller-based signal processing unit. The transducer
periodically generates and directs towards the terrain a dual
frequency ultrasonic signal. Echo signals from the ground and/or
any intervening crop or trash are reflected back to the transducer
and are analyzed by the signal processing unit. According to this method amplified and filtered echo envelope
signals are generated. The digitally measured amplitudes of these
signals are adjusted by time dependent gain factors in software to
compensate for distance related echo attenuation. Leading and
trailing edge times are determined from the times the echo signals
cross a threshold value which is a certain proportion of a maximum
echo amplitude value. A near distance
</DESCRIPTION>
<CLAIMS>
A method for measuring a distance between a transducer (XM1)
and a surface, comprising the following steps:


a) transmitting at a transmit time an acoustic signal from
the transducer (XM1) so that the transducer (XM1) receives

reflected echo signals, including an echo signal reflected
from the surface, and
b) determining amplitude and time data for a maximum echo
signal having a peak amplitude (ADMX) which is larger than

the peak amplitude of all the other echo signals received by
the transducer (XM1), characterized by:
c) from the amplitude and time data for the maximum echo
signal, determining an estimated multiple echo amplitude

(ADREQ) and an estimated multiple echo time (cteme) for an
echo signal which could result from multiple reflections of

the transmit pulse;
d) determining whether the amplitude of a particular echo
signal exceeds a certain minimum amplitude (AREQ);
e) if the amplitude of said particular echo exceeds said

certain minimum amplitude (AREQ) and the particular echo
signal was received before the estimated multiple echo time

(cteme) determining the distance value from the transmit time
and a time of said particular echo signal; and
f) if the amplitude of said particular echo signal exceeds
the certain minimum amplitude (AREQ) and said particular echo

signal was received not before the multiple echo time (cteme)
and the amplitude of said particular echo signal exceeds the

estimated multiple echo amplitude (ADREQ), determining the
distance value from the transmit time and a time of said

particular echo signal.
The method of claim 1, wherein the distance value is
determined from the transmit time and from a trailing edge

time (CTE[i]) of the particular echo signal.
The method of claim 1 or 2, wherein the multiple echo
amplitude (ADREQ) differs from the certain minimum amplitude

(AREQ).
The method of any of the claims 1, 2 or 3, wherein minimum
amplitude is derived as a certain proportion of a largest

amplitude of all echo signals received by the transducer
(XM1).
The method of any of the preceding claims 1 to 4, wherein the
estimated multiple echo amplitude (ADREQ) is derived as a

certain proportion of a largest amplitude (ADMX) of all echo
signals received by the transducer.
The method of any of the preceding claims 1 to 5, wherein if
the particular echo signal was received before the multiple

echo time (cteme), the distance value is determined from the
transmit time and from a trailing edge time (CTE[i]
) of said
particular echo if said particular echo has a distance

corrected amplitude (EA[i]) which exceeds a certain minimum

amplitude.
The method of any of the preceding claims 1 to 6, wherein the
distance value is determined from the transmit time and from

a trailing edge time (CTE[i]) of tee particular echo signal,

the trailing edge time of an echo signal corresponding to a
time at which a distance corrected amplitude (EA[i]
) of the
echo signal crosses a threshold value (AMPTH).
The method of any of the preceding claims 1 to 7, wherein the
distance value is determined from the transmit time and from

a trailing edge time of the particular echo signal, the
trailing edge time of an echo signal corresponding to a time

at which an amplitude of the echo signal is decreasing and 
crosses a threshold value (AMPTH).
The method of any of the preceding claims 1 to 8, wherein at
a transmit time a transmit pulse is generated towards a

surface the distance to which is to be measured and a
plurality of echo signals reflected from the surface and from

other surfaces exposed to the transmit pulse is received by
a transducer (XM1); amplitude and time data for a maximum

echo signal having a peak amplitude (ADMX) which is larger
than the peak amplitude of all the other echo signals is

determined by appropriate means; from the amplitude and time
data for the maximum echo signal, an estimated multiple echo

amplitude (ADREQ) and an estimated multiple echo time (cteme)
for an echo signal which would result from multiple

reflections of the transmit pulse is determined; a trailing
edge time (CTE[i]
) for each echo signal is determined, the
trailing edge time being defined as the time at which an

amplitude of an echo signal crosses a threshold (AMPTH) with
a negative slope; and a distance value (Xf) is determined

from the transmit time and the trailing edge time of the last
of said plurality of echo signals which has an amplitude

which exceeds a minimum amplitude (AREQ) and which exceeds
the estimated multiple echo amplitude (ADREQ) if said last

echo signal occurs after the estimated multiple echo time
(cteme).
</CLAIMS>
</TEXT>
</DOC>
