<DOC>
<DOCNO>EP-0613575</DOCNO> 
<TEXT>
<INVENTION-TITLE>
SCANNING DEVICE FOR RECONSTRUCTING A COMPLETE CODE FROM SCANNED SEGMENTS
</INVENTION-TITLE>
<CLASSIFICATIONS>G06K710	G06K710	G06K714	G06K714	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>G06K	G06K	G06K	G06K	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>G06K7	G06K7	G06K7	G06K7	</CLASSIFICATIONS-FOURTH>
<ABSTRACT>
This invention features both a device and method for reading machine readable code. The device includes a scanning apparatus (100), a signal processor (152) and a data processor (150). The scanning apparatus (100) scans the code and outputs a signal representative of at least a portion of the code. The signal processing means (152) processes each of the signals outputted by the scanning means and further provides signal identification data, including a width and position associated with each of the signals, for each successive scan of the code. The data processing means (150) reconstructs the code from the signal identification data for each successive scan of the code, provided by the signal processing means. The data processing means (150) includes a position aligning means for both selecting an element in a previous scan and calculating the position of that element in a successive scan based upon a calculated offset, and means for aligning the successive scan with the previous scan by means of the calculated offset.
</ABSTRACT>
<APPLICANTS>
<APPLICANT-NAME>
LAZERDATA CORP
</APPLICANT-NAME>
<APPLICANT-NAME>
LAZERDATA CORPORATION
</APPLICANT-NAME>
</APPLICANTS>
<INVENTORS>
<INVENTOR-NAME>
KENNEY DANIEL A
</INVENTOR-NAME>
<INVENTOR-NAME>
NORDSTROM LARRY A
</INVENTOR-NAME>
<INVENTOR-NAME>
WALDRON JAMES R
</INVENTOR-NAME>
<INVENTOR-NAME>
KENNEY, DANIEL, A.
</INVENTOR-NAME>
<INVENTOR-NAME>
NORDSTROM, LARRY, A.
</INVENTOR-NAME>
<INVENTOR-NAME>
WALDRON, JAMES, R.
</INVENTOR-NAME>
</INVENTORS>
<DESCRIPTION>
This invention relates to devices for scanning bar codes and
more particularly to omni-directional scanning devices which
reconstruct a complete code by combining scanned code segments.Bar codes are used in a number of applications to uniquely
identify an item or group of items. The bar code is typically a
combination of black bars and white spaces representing the unique
identification code and is affixed to the item in any of a number
of ways (e.g., a label). The reading and decoding of a bar code
can be used to yield additional information concerning the item,
such as a description of the item and its price. The bar code has
also been used for inventory control, manufacturing parts control,
and employee identification. Failure to properly read the bar code
usually requires manual intervention, such as manual entry of the
data (e.g., the identification number represented by the bar code).
Manual intervention, however, can cause problems because of human
error as well as causing delays and increasing costs.Bar code scanners are the devices used to read the bar code
affixed to an item so the desired information can be retrieved. In
the case of a supermarket, one example of this would be the price
associated with goods. The scanner reads the bar code by detecting 
the light reflected from the bar code and determining the light
contrasts between the bars, typically the dark or black areas, and
the spaces, typically the light or white areas. In most scanners
the code is illuminated by a beam of coherent light (i.e., a laser)
that moves or sweeps across the bar code. A rotating wheel with a
number of mirror facets is typically used to sweep the coherent
light across the bar code.There is shown in FIG. 1, a typical omni-directional overhead
scanner 10 for detecting a bar code 22 affixed to package 12
traveling on a conveyer belt 14 in direction 20. The scanner 10
illuminates the package top surface, where the bar code 22 is
located, with pattern 16 of coherent light. In this way, the
scanner 10 can read a bar code 22 that approaches the scanner 10 in
any orientation. In this illustration, the bar code 22 is read so
the package 12 can be sorted and sent along different paths 18a-c.
For one scanning technique, the bar code is read by sweeping
a beam of coherent light across the entire bar code. In actual
practice redundant passes or sweeps are made across the entire bar
code to assure a good reading of the bar code, however, no
reconstruction of the bar code is done. The redundant scanning is
done to address
</DESCRIPTION>
<CLAIMS>
A device for reading machine readable code having a plurality of code elements, comprising:

(a) scanning means (120) for successively scanning the code and for
outputting a signal representative of at least a portion of the

code, for each successive scan of the code;
(b) signal processing means (152) for processing each of said
signals outputted by said scanning means, said signal processing

means further providing signal identification data, including a
width and position of each code element in each of said signals, for each

successive scan of the code; and
(c) data processing means (150) for reconstructing the code from
said signal identification data for each successive scan of the

code provided by said signal processing means, said data processing
means also comprising,


(i) position aligning means (222-229, 238) for positionally aligning
succeeding scans, wherein said position aligning means comprises


means (222) for selecting a code element in a previous scan,
means (222, 224) for calculating the expected position of that code element
in a successive scan based upon a calculated offset, said

calculated offset being determined by an offset calculating means (256, 230) which
calculates the difference in position of corresponding features in previous

scans, and
means for aligning said successive scan with said
previous scan by means of said calculated offset by placing said

selected code element in said successive scan in alignment with said
selected code element in said previous scan, and
(ii) alignment verification means (226, 228) for verifying the
alignment between said previous scan and said successive scan

performed as a result of said means for aligning, wherein said
alignment verification means further comprises means (229a-c, 238) for attempting

a predetermined number of additional alignments between said
previous scan and said successive scan when said previous scan and

said successive scan are not aligned by said means for aligning.
The device according to claim 1, in which said data processing
means (150) further comprises means for both combining and accumulating

said signal identification data.
The device according to claim 2, in which said offset
calculating means further comprises a first offset calculating

means (256) for calculating a positional difference between the position
of a selected code element in a first scan of a code, from said

combining and accumulating means, and the position of the selected
code element in a second scan of the code to provide said

calculated offset for determining the expected position of the
selected code element in the successive scan.
The device according to claim 3, wherein said alignment
verification means further comprises a first verifying means (238) for

verifying the alignment between the first scan and the second scan
based upon an occurrence of a limited number of mismatches 

when an alignment of leading edge margins of both the first and
second scans is performed.
The device according to claim 4, wherein said means for
attempting a predetermined number of additional alignments of said

alignment verification means (238) comprises a first attempt means for
attempting to align the first scan with said second scan by

comparing trailing edge margins of both the first and second scans.
The device according to claim 5 in which said offset
calculating means further comprises:


a second offset calculating means (230) for calculating a positional
difference between the position of a selected code element from a

previous scan from said combining and accumulating means and the
position of said selected code element from a successive scan to

provide said calculated offset for determining the expected
position of the selected code element in the successive scan.
The device according to claim 6 in which said position aligning
means further comprises an offset averaging means (230), for averaging

said calculated offsets for previous scans with the calculated
offset determined by said second offset calculating means to

provide a refined calculated offset for determining the expected
position of the selected code element in the successive scan.
The device according to claim 7 in which said position aligning 
means (222) further comprises means for locating a code element in a scan

which most closely matches the expected position of the selected
code element in said scan by means of said calculated offset

determined by said first offset calculating means, said second
offset calculating means or said offset averaging means.
The device according to claim 8, in which said data processing
means further comprises means for determining the number of scans

in which a code element has been seen.
The device according to claim 9, wherein said alignment
verification means further comprises a second verifying means for

verifying the alignment between a previous scan and said successive
scan by comparing width data of a predetermined number of

transitions in said previous scan and corresponding transitions in
said successive scan.
The device according to claim 10, wherein said code is a bar code and said selected code
element is an alignment bar, and wherein said means for

attempting additional alignments of said alignment verification
means comprises a second attempt means (229)for attempting to align a

previous scan with a successive scan by comparing a bar proximate
to the alignment bar of said successive scan with said alignment bar

of said previous scan, and repeating this step for a predetermined
number of additional bars proximate to said alignment bar of said

successive scan provided said previous scan and said successive
scan are not aligned. 
The device according to claim 11, in which said data
processing means further comprises:


means for positionally aligning said signal identification
data in said combining and accumulating means with the signal

identification data of a successive scan by means of said
calculated offset by placing said selected code element in said

successive scan in alignment with said selected code element in said
previous scan;
means (234) for identifying width mismatches between aligned signal
identification data, where said combining and accumulating means

cooperates with said mismatch identifying means such that
mismatched signal identification data is not combined and

accumulated; and
means for retaining said signal identification data, from said
signal processing means, identified as having width mismatches.
The device according to claim 12, in which said data
processing means further comprises means (232) for resolving identified

width mismatches, identified by said mismatch identifying means, by
comparing width data from three 
scans of signal identification
data.
The device according to claim 13, wherein said mismatch
resolving means compares the width data for corresponding code

elements in the first scan with width data from the third scan to 
determine if the corresponding widths are consistent and compares

the width data for corresponding code elements in the second and
third scans to determine if the corresponding widths are

consistent.
The device according to claim 14, in which said mismatch
resolving means further comprises means for indicating that the

signal identification data for the scans having consistent widths
is to be combined in the combining and accumulating means and that

signal identification data for the other scan is to be ignored.
The device according to claim 15 in which said data processing
means further comprises:


scan direction means (250) for determining the direction of a scan;
and
data reversing means (252), responsive to said scan direction means,
for reversing the signal identification data for each code element

in each scan for a bar code such that the signal identification
data for all scans of the bar code is maintained in a predetermined

direction.
The device according to claim 16, in which said data
processing means further comprises:


means (212) for identifying a first area for which signal
identification data is to be accumulated; and
means (210) for identifying a second area for which signal 
identification data is not to be accumulated.
The device according to claim 17 in which said data processing
means further comprises a first means for comparing the signal

identification data for each scan, from said signal processing
means, to determine if the signal identification data overlaps said

first area.
The device according to claim 18 in which said data processing
means further comprises a second means for comparing the signal

identification data for each scan, from said signal processing
means, to determine if the data overlaps said second area.
The device according to claim 19, wherein said means for
identifying a second area identifies areas containing machine

readable code that is not to be decoded.
The device according to claim 20 wherein said elements
comprise a plurality of intervals including bars and spaces of

either narrow or wide interval widths and in which said data
processing means further comprises:


means for measuring the interval widths of said signal
identification data, from said combining and accumulating means,

and for normalizing the interval widths to 1,2,3, and 4 wide bars
and spaces to provide a reconstructed bar code; and
means (266, 268) for decoding the reconstructed bar code to provide the 
encoded information.
The device according to claim 1, in which said scanning means
further includes at least one light source (124) and sensing means (146) for

successively illuminating a bar code with a predetermined pattern
of light and successively sensing light reflected from the bar

code.
The device according to claim 1, in which said scanning means
further includes a plurality of light source and sensing means for

successively illuminating a bar code with a predetermined pattern
of light and successively sensing light reflected from the bar

code.
The device according to claim 23, in which said light source
and sensing means further includes a coherent light source.
The device according to claim 24, in which said scanning means
further includes a light directing means (122) for directing the light

from said coherent light source to create the predetermined pattern
of light.
A method for reading machine readable code having a plurality of code elements,
comprising the

steps of:

scanning the code to provide a signal representative of at
least a portion of the code, and repeating scanning to obtain 

signals for additional portions of the code;
successively processing each signal representative of the
portion of the code obtained from each scan to provide signal

identification data, including a width and position of each code element in
each of said signals, for each successive scan of the code; and
reconstructing the code from said signal identification data
for each successive scan of the code, said reconstructing including

the steps of:

selecting (222) a code element in a previous scan;
calculating (222, 224) the expected position of said code element in a successive
scan based upon a calculated offset, said calculated offset

being determined by the step of:

calculating (256, 230) the difference in position of corresponding features
in previous scans; and
aligning said successive scan with said previous scan by
means of said calculated offset by the step of:


placing said selected code element in said successive
scan in alignment with said selected code element in said previous scan;
verifying (226, 228) the alignment between said previous scan and
said successive scan performed as a result of the step of aligning,

wherein said step of verifying further comprises the step of:

attempting (229a-c, 238) a predetermined number of additional
alignments between said previous scan and said successive scan when

said previous scan and said successive scan are not aligned by said
step of aligning.
The method according to claim 26, further comprising the steps
of combining and accumulating said signal identification data.
The method according to claim 27, in which said step of
calculating the difference in position further comprises the step of:


calculating a first positional difference between the
position of a selected code element in a first scan of a code, from

said step of combining and accumulating, and the position of said
selected code element in a second scan of the code to provide said

calculated offset for determining the expected position of the
selected code element in the successive scan.
The method according to claim 28, wherein said step of
verifying further comprises the step of:


comparing (238) leading edge margins of both the first and
second scans to verify the alignment of the first and second scans

based upon an occurrence of a limited amount of mismatches.
The method according to claim 29, wherein said step of
attempting additional alignments of said step of verifying the

alignment comprises the step of:

comparing a trailing edge margins of both the first and
second scans to attempt to align the first scan with said second

scan.
The method according to claim 30, in which said step of 
calculating the difference in position of a selected code element further

comprises the step of:

calculating (230) a second positional difference between the

position of a selected code element from a previous scan, from said
step of combining and accumulating, and the position of said

selected code element from a successive scan to provide said
calculated offset for determining the expected position of the

selected code element in the successive scan.
The method according to claim 31, in which said step of
selecting and aligning further comprises the step of:


averaging (230) said calculated offsets for previous scans with
the calculated offset from said step of calculating a positional

difference to provide a refined calculated offset for determining
the expected position of the selected code element in the

successive scan.
The method according to claim 32, in which said reconstructing
further comprises the step of:


locating (222, 224) a code element in a scan which most closely
matches the expected position of the selected code element in said

scan by means of said first positional difference, said second
positional difference or said refined calculated offset.
The method according to claim 33, in which said reconstructing
further comprises the step of determining the number of scans in 

which a code element has been seen.
The method according to claim 34, in which said step of
selecting further comprises the step of selecting a code element,

from said combining and accumulating means, which has been seen in
at least two scans.
The method according to claim 35, wherein said step of
verifying the alignment further comprises the step of:


comparing a second alignment of the width data of a
predetermined number of transitions in said previous scan and

corresponding transitions in said successive scan to verify the
alignment between the previous scan and said successive scan.
The method according to claim 36, wherein said code is a bar code and said selected code
element is an alignment bar, and wherein said step of

attempting additional alignments of said step of verifying the
alignment comprises the step of:


comparing a bar proximate to the alignment bar of said
successive scan with said alignment bar of said previous scan to

attempt to align said previous scan with said successive scan; and
repeating said step of comparing for a predetermined
number of additional bars proximate to said alignment bar of said

successive scan when said previous scan and said successive scan
are not aligned by said step of aligning.
The method according to claim 37, in which said 
reconstructing further comprises the steps of:


positionally aligning said signal identification data in said
step of combining and accumulating with the signal identification

data of a successive scan by means of said calculated offset by
placing said selected element in said successive scan in alignment

with said selected element in said previous scan;
identifying, (234) mismatches of code element widths between aligned
signal identification data, where said step of combining and

accumulating cooperates with said identifying mismatches such that
mismatched signal identification data is not combined and

accumulated;
retaining said signal identification data which has been
identified, from said identifying mismatches, as having width

mismatches.
The method according to claim 38, in which said reconstructing
further comprises the step (232) of resolving identified width mismatches

from said identifying mismatches identifying means, by comparing
width data from three scans of signal identification data.
The method according to claim 39, wherein said resolving
mismatches further compares the width data for corresponding code

elements in the first scan with width data from the third scan to
determine if the corresponding widths are consistent and compares

the width data for corresponding code elements in the second and
third scans to determine if the corresponding widths are 

consistent.
The method according to claim 40, in which said resolving
mismatches further comprises the step of indicating that the signal

identification data for the scans having consistent widths is to be
combined in the combining and accumulating means and that signal

identification data for the other scan is to be ignored.
The method according to claim 41, in which said reconstructing
further comprises the steps of:


determining (250) the direction of a scan; and
reversing (252) the signal identification data for each code element
in each scan for a bar code in response to said determining the

scan direction, such that the signal identification data for all
scans of the bar code is maintained in a predetermined direction.
The method according to claim 42, in which said reconstructing
further comprises the steps of:


identifying (212) a first area for which signal identification data
is to be accumulated; and
identifying (210) a second area for which signal identification data
is not to be accumulated.
The method according to claim 43, in which said reconstructing
further comprises the step of comparing the first area with the

signal identification data for each scan, from said signal 
processing, to determine if the signal identification data overlaps

said first area.
The method according to claim 44, in which said reconstructing
further comprises the step of comparing the second area with the

signal identification data for each scan, from said signal
processing, to determine if the data overlaps said second area.
The method according to claim 45, wherein said step of
comparing the second area further comprises identifying areas

containing machine readable code that is not to be decoded.
The method according to claim 46, wherein the code elements
comprise a plurality of intervals including bars and spaces of

either narrow or wide interval widths and in which said
reconstructing further comprises the steps of:


measuring the interval widths of said signal identification
data, from said combining and accumulating means;
normalizing the interval widths from said measuring to 1,2,3,
and 4 wide bars and spaces to provide a reconstructed bar code; and
decoding the reconstructed bar code to provide the encoded
information.
</CLAIMS>
</TEXT>
</DOC>
