<DOC>
<DOCNO>EP-0627825</DOCNO> 
<TEXT>
<INVENTION-TITLE>
Multi-channel echo cancelling method and a device thereof
</INVENTION-TITLE>
<CLASSIFICATIONS>G10K11178	H04B323	H04M908	H04M908	G10K1100	H04B323	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>G10K	H04B	H04M	H04M	G10K	H04B	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>G10K11	H04B3	H04M9	H04M9	G10K11	H04B3	</CLASSIFICATIONS-FOURTH>
<ABSTRACT>
The present invention relates to a multi-channel echo
cancelling art enabling proper operation even if using a

microphone not generating propagation delay difference
between channels.
The present invention comprises: a step of
calculating a power of reception signal in each

reception channel and selecting a reception channel of a
reception signal having the biggest power; a step of

generating an echo replica corresponding to an echo in
each mixed signal generated by propagation of reception

signals of the reception channels based on a reception
signal of the reception channel selected in the previous

step; and a step of cancelling the echoes from mixed
signals in which the echoes are mixed by subtracting the

echo replicas from the mixed signals.

</ABSTRACT>
<APPLICANTS>
<APPLICANT-NAME>
NIPPON ELECTRIC CO
</APPLICANT-NAME>
<APPLICANT-NAME>
NEC CORPORATION
</APPLICANT-NAME>
</APPLICANTS>
<INVENTORS>
<INVENTOR-NAME>
HIRANO AKIHIRO
</INVENTOR-NAME>
<INVENTOR-NAME>
HIRANO, AKIHIRO
</INVENTOR-NAME>
</INVENTORS>
<DESCRIPTION>
The present invention relates to a multi-channel echo
cancelling method and a device thereof.For a multi-channel echo cancelling method and a device
thereof for cancelling an echo generated by propagation of
reception signals in spatial acoustic paths, in a system
having a plurality of reception signals and at least one
transmission signal, a cascade connection type and a linear
connection type are proposed in CS-84-178 (hereinafter
referred to as Paper 1), pp.7-4, No.330, Vol.84 of the
technical report of the Institute of Electronics and
Communication Engineers.The following problems, however, are pointed out in A5-3
(hereinafter referred to as Paper 2), pp.144-149, of
proceedings of the 6-th digital signal processing
symposium, that is, the cascade connection type and the
linear connection type have following defects:
(1) its hardware size becomes large because its hardware
size is in proportion to square of the number of channels;(2) convergence of adaptive filters becomes slow when
reception signals have strong cross-correlation; and(3) coefficients of the adaptive filters may not converge 
to optimal values when reception signals have strong
cross-correlation.To solve these problems, a multi-channel echo
canceller comprising an adaptive filter for each channel
is proposed in A-202 (hereinafter referred to as Paper
3), pp.202, volume 1 of proceedings of the 1991
Institute of Electronics, Information and Communication
Engineers spring conference.Next, according to Paper 3, the case of applying this
multi-channel echo canceller to a teleconference system,
in which both of the reception signals and the
transmission signals have two channels respectively, is
explained.Fig.10 shows a block diagram of voice section of a
two-channel teleconference system connecting two
teleconference rooms 20 and 21.An acoustic echo cancelling method in the first
teleconference room 20 is explained here for an example.Let us suppose that the second talker 9 is in the
second teleconference room 21. The voice 101 of the
second talker 9 passes through the spatial acoustic path
is recorded by the third microphone 111, and is supplied
to the second echo canceller 1202.The voice recorded by the third microphone 111 is
sent to the first teleconference room 20 as the first 
reception signal 11. Similarly to this, the voice 102 of
the second talker 9 passes through the spatial acoustic
path and is recorded by the fourth microphone 112, and is
supplied to the second echo canceller 1202. The voice
recorded by the fourth microphone
</DESCRIPTION>
<CLAIMS>
A multi-channel echo cancelling method comprising:

a step of calculating the power (102) of the received signal (1) in
each reception channel and selecting the reception channel

having the biggest power;
a step of generating a replica of the
echo in each channel using the received signal of the selected

channel; and
a step of cancelling echoes in each channel by subtracting
each so generated echo replica from the respective signal in each

channel.
The multi-channel echo cancelling method of claim 1,
wherein said step of calculating the power of the received

signal (1) in each reception channel and selecting the
reception channel having the

biggest power calculates the square value of the received
signal in each reception channel and selects the reception

channel having the biggest square value.
The multi-channel echo cancelling method of claim 1,
wherein said step of calculating the power of the received

signal (1) in each reception channel and selecting the
reception channel having the

biggest power calculates the instantaneous power of 
the received signal in each reception channel and selects the

reception channel having the biggest instantaneous
power.
The multi-channel echo cancelling method of claim 1,
wherein said step of calculating the power of the received

signal in each reception channel and selecting the

reception channel having the
biggest power calculates the mean value of the powers of the

received signals in each reception channel and selects
the reception channel having the biggest mean value of

powers.
The multi-channel echo cancelling method of claim 1,
wherein said step of calculating the power of the received

signal in each reception channel and selecting the
reception channel having the

biggest power calculates the powers of the received signals in
each reception channel, sorts the results and selects the

reception channel having the biggest median value of powers.
The mufti-channel echo cancelling method of claim 1,
wherein said step of calculating the power of the received

signal in each reception channel and selecting the
reception channel having the

biggest power calculates the mode of the powers of the received
signals in each reception channel and selects the

reception channel having the biggest mode of powers. 
The method as claimed in any one of claims 1 to 6,
wherein said step of generating an echo replica

of the echo in each channel using the received signal of the
selected channel

supplies said received signal of the selected
reception channel to adaptive filters that are in one-to-one

correspondence with said channels and generates
said echo replicas using said adaptive filters.
A multi-channel echo cancelling method comprising:

a step of calculating the absolute value of the received
signal in each reception channel and selecting the

reception channel having the
biggest absolute value;
a step of generating a replica of the
echo in each channel using the received signal of the

selected channel; and
a step of cancelling echoes in each channel by subtracting
each so generated echo replica from the respective signal in

each channel.
The multi-channel echo cancelling method of claim 8,
wherein said step of calculating the absolute value of 

the received signal in each reception channel and selecting
the reception channel having the

biggest absolute value calculates the mean value of the
absolute values of the received signals in each reception

channel and selects the reception channel having the
biggest mean value.
The multi-channel echo cancelling method of claim
8, wherein said step of calculating the absolute value of

the received signal in each reception channel and selecting
the reception channel having the

biggest absolute value calculates the absolute values of the
received signals in each reception channel, sorts the

results and selects the reception channel having the
biggest median value.
The multi-channel echo cancelling method of claim
8, wherein said step of calculating the absolute value of

the received signal in each reception channel and
selecting the reception channel

having the biggest absolute value calculates the mode of the
absolute values of the received signals in each reception

channel and selects the reception channel having the
biggest mode.
The method as claimed in any one of claims 8 to 11,

   wherein said step of generating an echo replica
of the echo in each channel using the received signal of the 

selected channel
supplies said received signal of the selected

reception channel to adaptive filters (107) that are in one-to-one
correspondence with said channels and generates

said echo replicas using said adaptive filters (107).
A multi-channel echo cancelling device (100) comprising:

a reception signal selection means (103) for calculating the
power of the received signal in each reception channel and

selecting the reception channel
having the biggest power;
a means for generating a replica (108) of the
echo in each channel using the received signal of

the channel selected by said reception signal selection
means

; and
a means for cancelling echoes in each channel by
substracting each so generated echo replica (108) from the

respective signal in each channel.
The multi-channel echo cancelling device of claim
13, wherein said means for calculating the power of the

received signal (1) in each reception channel and selecting
the reception channel having the 

biggest power comprises:

a plurality of power calculation means (101), in one-to-one
correspondence with each received signal, for calculating

the power of the received signal of said reception channel;
a reception channel selection means (103) for selecting the
reception channel having the biggest power

based on the calculation result (104) from said power
calculation means; and
a selection means (105) for receiving the signals of the
reception channels and outputting the received signal having the biggest power based on the selection.
The multi-channel echo cancelling device of claim
14, wherein said power calculation means (101) comprises a

multiplication means (307) for receiving the received signal (1) of
said reception channel, squaring this received

signal (1) and outputting a result.
The multi-channel echo cancelling device of claim
14, wherein said power calculation means (101) comprises:


a multiplication means (307) for receiving a received
signal (1) of said reception channel, squaring this

received signal and outputting a result; and
a mean calculation means for storing square values
calculated by said multiplication means (307) and calculating

a mean power of the received signal from said square 
values.
The multi-channel echo cancelling device (100) of claim
14, wherein said power calculation means comprises:


a multiplication means (307) for receiving the received
signal of said reception channel, squaring this

received signal and outputting a result;
a register means for storing square values calculated
by said multiplication means; and
a sorting means for sorting square values stored in
said register means and outputting the median value of

the sorted square values.
The multi-channel echo cancelling device (100) of claim
14, wherein said power calculation means (101) comprises:


a multiplication means (307) for receiving the received
signal of said reception channel, squaring this

received signal and outputting a result;
a register means for storing square values calculated
by said multiplication means;
a histogram means for calculating a histogram from
square values stored in said register means; and
a maximum value detection means for outputting a
representative value of a zone having maximum value in

said histogram.
The device as claimed in any one of claims 13 to 18,

   wherein said means for generating an echo replica (108) 
of the echo in each channel using the

received signal of the channel
selected by said reception signal

selection means, comprises a plurality of adaptive
filters in one-to-one correspondence with said channels.
The multi-channel echo cancelling device (100) of claim
19, wherein said adaptive filter is an adaptive

transversal filter based on the LMS algorism.
The multi-channel echo cancelling device (100) of claim
19, wherein said adaptive filter (107) is an adaptive

transversal filter based on the learning identification
method.
The device as claimed in any one of claims 14 to 21,

   wherein said means for cancelling echoes in each
channel by substracting each so generated echo replica from

the respective signal in each channel
comprises a

plurality of subtraction means (101), in one-to-one correspondence
with said channels, for subtracting said echo replica

from the respective signal in each channel.
A multi-channel echo cancelling device (100) comprising:

a means for calculating the absolute value of the
received signal in each reception channel and selecting

the reception channel having the
biggest absolute value; 
a means for generating a replica of the
echo in each channel using the received signal of

the channel
selected

by said reception signal selection means
; and
a means for cancelling echoes in each channel by
subtracting each so generated echo replica from the

respective signal in each channel.
The multi-channel echo cancelling device of claim
23, wherein said means for calculating the absolute value

of the received signal in each reception channel and
selecting the reception channel

having the biggest absolute value comprises:

a plurality of absolute value calculation means, in one-to-one
correspondence with each received signal, for

calculating the absolute value of the received signal of
said reception channel;
a reception channel selection means (103) for selecting the
reception channel having the biggest absolute value

based on the calculation result from
said absolute value calculation means; and
a selection means (105) for receiving the signals of
reception channels and outputting the received signal

having the biggest absolute value based on the selection.
The multi-channel echo cancelling device of claim
24, wherein said absolute value calculation means

comprises:

an absolute value calculation means for calculating
the absolute value of the received signal of said

reception channel for each reception channel; and
a mean calculation means for storing absolute values
calculated by said absolute value calculation means and

calculating the mean value of absolute values of the
received signals.
The multi-channel echo cancelling device of claim
24, wherein said absolute value calculation means

comprises:

an absolute value calculation means for calculating
the absolute value of the received signal of said

reception channel for each reception channel;
a register means for storing absolute values
calculated by said absolute value calculation means; and
a sorting means for sorting absolute values stored in
said register means and outputting the median value of

the sorted square values.
The multi-channel echo cancelling device of claim
23, wherein said absolute value calculation means

comprises: 

an absolute value calculation means for calculating
the absolute value of the received signal of said

reception channel for each reception channel;
a register means for storing absolute values
calculated by said absolute value calculation means;
a histogram means for calculating a histogram from
absolute values stored in said register means; and
a maximum value detection means for outputting a
representative value of a zone having maximum value in

said histogram.
The device as claimed in any one of claims 23 to 27,

   wherein said means for generating replica
of the echo in each channel using the

received signal of the channel
selected by said reception signal selection

means comprises a plurality of adaptive filters (107) in one-to-one
correspondence with said channels.
The multi-channel echo cancelling device of claim
28, wherein said adaptive filter (107) is an adaptive

transversal filter based on the LMS algorithm.
The multi-channel echo cancelling device of claim
28, wherein said adaptive filter (107) is an adaptive

transversal filter based on the learning identification
method. 
The device as claimed in any one of claims 23 to 30,

   wherein said means for cancelling echoes in each
channel by substracting each so generated echo replica from the

respective signal in each channel comprises a
plurality of subtraction means, in one-to-one correspondence

with said channels, for subtracting said echo replica
from the respective signal in each channel.
</CLAIMS>
</TEXT>
</DOC>
