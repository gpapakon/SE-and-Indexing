<DOC>
<DOCNO>EP-0638875</DOCNO> 
<TEXT>
<INVENTION-TITLE>
A 3-dimensional animation generating apparatus and a method for generating a 3-dimensional animation
</INVENTION-TITLE>
<CLASSIFICATIONS>G06T1740	G06T1740	G06T1570	G06T1570	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>G06T	G06T	G06T	G06T	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>G06T17	G06T17	G06T15	G06T15	</CLASSIFICATIONS-FOURTH>
<ABSTRACT>
A 3-dimensional animation generating apparatus 
includes an image data storing section, a view 

point information input section, an image supervising 
section, an image data selecting section, a view point 

coordinate transforming section, an output image drawing 
section, a motion addressing section, a shadow area 

detecting section, and a shadow area supervising section. 
The image data storing section stores part image 

data and background image data in association with 3-dimensional 
coordinates of vertexes included in the 

image. The image data selecting section searches the 
image data by a unit of part. The apparatus further 

comprises a mechanism which, when information related 
to an observing view point is provided, determines 

which part image data exists in the visible area, 
transforms the visible part image data from the observing 

view point by view point coordinate transformation, 
and draws the resultant image data in a common drawing 

area. In addition, the apparatus further searches and 
supervises the part which can provide a shadow as a 

shadow area and the position of the light source related 
with the specific shadow area. When a new view 

point is selected, the shadow area transformed by view 
point coordinate transformation is drawn. Thus, the 

amount of both data and calculation for generating a 
scene with respect to a selected observing view point 

is effectively reduced. 
</ABSTRACT>
<APPLICANTS>
</APPLICANTS>
<INVENTORS>
</INVENTORS>
<DESCRIPTION>
The present invention relates to a 3-dimensional animation generating apparatus
and a method using such apparatus according to the technical field of claim 1
and claim 10 of the present invention.From document EP-A-0 315 051 a computer controlled digital imaging system
is known which operates to compose and construct a sequential stream of scenes
for a display from a library of images of objects. The system is suitable for two
dimensional applications such as a helicopter simulator where a perspective
mapping process is provided for mapping images of objects which appear in the
field of windshield-view from the corresponding images in the library to the
face of the monitor screen.Foley, van Dam, Feiner and Hughes disclose in their paper entitled "Computer
Graphics (Principles and Practice), Second Edition in C, Addison Wesley 1990
(reprinted with corrections Nov. 92, Nov. 93, July 95), pages 229 - 281, a
three-dimensional viewing as for example the construction of projections and the
use of truncated view volumes in order to limit the number of output primitives
projected onto a view plane. In order to obtain animation of high image quality, it is necessary to improve
the quality of image per frame (e.g., the spatial frequency, and the number of
gray-scale levels). Also, it is necessary to increase the resolution along a time
axis, i.e., the number of frames per unit time. Thirty frames or more per second
are required for realizing animation with an image quality equivalent to that of
the current NTSC-standard TV.In a conventional method for generating computer graphics (CG) animation,
known from the above cited references, it takes a considerably long time to
generate an image for each frame (hereinafter referred to a the frame image).
Then, respective frame images thus generated are sequentially recorded on a
video film, thereby obtaining animation. In such a conventional method, it is
difficult to generate animation in real time. However, the conventional method
is useful in a conventional CG application which requires animation 
with a high image quality.On the other hand, in the image processing
field, animation is often generated by a method called
key-frame interpolation. In this method, some reference
frames (hereinafter referred to as key frames)
along the time axis are selected, and frame images
between respective key frames are interpolated by
utilizing the similarities between the frame images in
the key frames. More specifically, the interpolation
is performed by detecting or estimating a
</DESCRIPTION>
<CLAIMS>
A 3-dimensional animation generating apparatus which draws a scene
including an object (10; O1 - O3) having a 3-dimensional shape, the

apparatus comprising:

a) an image data storing means (1) for:

a1) representing the object (10, O1 - O3) in approximation with
one or more parts (P1 - P3) and storing image data relating to

the respective parts (P1 - P3), the respective parts (P1 - P3)
being a group of polygons (11, 12, 13), the polygons (11, 12,

13) representing a surface of the object (10, O1 - O3); wherein
among the polygons (11, 12, 13), the ones which are adjacent

to each other and of which the directions of normal vectors fall
within a predetermined range are regarded as a group and

treated as one part.
a2) storing background image data; and
a3) storing 3-dimensional vertex coordinates used for generating
animation, wherein an image data storage section (1) stores 3-dimensional

vertex coordinates of each of the parts (P1 - P3)
which are viewed from a plurality of arbitrarily selected

reference view points (15, 16, 17);
b) an image supervising means (3) for supervising and searching the
image data while treating each of the parts (P1 - P3) as a minimum

unit;
c) a view point information input means (2) for providing information
on an observing view point (15, 16, 17) from which the object (10,

O1 - O3) is observed;
d) an image data selecting means (4) for selecting a visible image data
which is visible from the observing view point (15, 16, 17) among

the stored image data by using the information on the observing
view point (15, 16, 17) provided from the view point information

input means (2);
e) a view point coordinate transforming means (5) for performing a
coordinate transformation of the image data with respect to

coordinates of the observing view point (15, 16, 17) by using the
information on the observing view point (15, 16, 17); and
f) an output image drawing means (6) for drawing the transformed
image data on a drawing area.
A 3-dimensional animation generating apparatus according to claim 1,
wherein the image data storing means (1) stores the image data in a

hierarchical structure, the image data being stored and associated with an
identification code.
A 3-dimensional animation generating apparatus according to claim 2,
wherein the image data selecting means (4) judges whether each of the

image data is included in a view volume of the observing view point (15,
16, 17) by calculation using the 3-dimensional coordinates of the vertexes

and 3-dimensional coordinates of the observing view point (15, 16, 17)
and searches the image data which is judged to be included in the view

volume as the visible image data. 
A 3-dimensional animation generating apparatus according to claim 3,
wherein the image data selecting means (4) uses the identification code

associated with the stored image data for searching.
A 3-dimensional animation generating apparatus according to claim 2,
wherein the view point coordinate transforming means (5) determines one

vertex of a specific part (P1 - P3) included in the selected visible image
data as a reference vertex, and the coordinate transformation is performed

with respect to vectors connecting the reference vertex and other vertexes
of the specific part (P1 - P3).
A 3-dimensional animation generating apparatus according to claim 5,
wherein the view point coordinate transforming means (5) removes a

hidden surface formed by overlapping a plurality of transformed part
image data while treating a plane produced by the vertexes of the part

image data as a minimum unit for removal and performs interpolation
calculation with respect to pixels included in the part image data excluding

the vertexes thereof based on the originally image data obtained before the
coordinate transformation.
A 3-dimensional animation generating apparatus according to claim 2,
further comprising a motion addressing means (7) for providing motion

data on a motion of the object (10, O1 - O3), wherein

the image data selecting means (4) searches a specific part image data
among the part image data stored in the image data storing means (1), the

specific part image data corresponding to a specific part (P1 - P3) to be
moved in relation to the motion of the object, and 
the view point coordinate transforming means (5) transforms the searched
part image data into a transformed part image data in a moved condition,

the transformed part image data being drawn on the drawing area.
A 3-dimensional animation generating apparatus according to claim 2,
further comprising:


a shadow area detecting means (8) for detecting one of more areas each to
be a shadow area by using the 3-dimensional coordinates of the vertexes of

the parts in the stored part image data and the 3-dimensional coordinates
of a light source; and
a shadow area supervising means (9) for supervising image data of each of
the shadow areas,
wherein a movement of a specific shadow area selected from the detected
one or more shadow areas corresponding a movement of the observing

view point (15, 16, 17) is calculated by view point coordinate
transformation of the part image data which provides the specific shadow

area, the specific shadow area being drawn in the drawing area by
decreasing luminance values of pixels included in the specific shadow area

from originally luminance values thereof.
A 3-dimensional animation generating apparatus according to claim 1,
wherein the image data storing means (1) stores the image data in a

plurality of hierarchical structures arranged sequentially along a time axis.
A method for generating a 3-dimensional animation in which a scene
including an object having a 3-dimensional shape is drawn, the method

comprising the steps of:

representing the object in approximation with one or more parts (P1 - P3)
and storing image data relating to the respective parts (P1 - P3), the

respective parts (P1 - P3) being a group of polygons (11, 12, 13), the 
polygons representing a surface of the object (10, O1 - O3), wherein

among the polygons (11, 12, 13), the ones which are adjacent to each
other and of which the directions of normal vectors fall within a

predetermined range are regarded as a group and treated as one part.
using 3-dimensional vertex coordinates for generating animation,
storing 3-dimensional vertex coordinates of each of the parts (P1 - P3)
which are viewed from a plurality of arbitrarily selected reference view

points (15, 16, 17) in an image data storage section (1),
supervising and searching the image data for each part as a minimum unit;
providing information on an observing view point (15, 16, 17) from which

the object (10, O1 - O3) is observed;
selecting a visible image data which is visible from the observing view
point (15, 16, 17) among the stored image data by using the information

on the observing view point (15, 16, 17) provided;
performing a coordinate transformation of the image data with respect to
coordinates of the observing view point (15, 16, 17) by using the

information on the observing view point (15, 16, 17); and
drawing the transformed image data on a drawing area.
A method for generating a 3-dimensional animation according to claim 10,
wherein image data are stored in a hierarchical structure and associated

with an identification code.
A method for generating a 3-dimensional animation according to claim 11,
wherein the steps of selecting the visible image data further include the

steps of judging whether or not each of the image data is included in the
view volume of the observing view point (15, 16, 17) by calculation using

the 3-dimensional coordinates of the vertexes and 3-dimensional
coordinates of the observing view point (15, 16, 17) and searching the 

image data which is judged to be included in the view volume of the
visible image data.
A method for generating a 3-dimensional animation according to claim 12,
wherein in the steps of searching the image data the identification code

associated with the stored image data is used for searching.
A method for generating a 3-dimensional animation according to claim 11,
wherein the steps of performing the coordinate transformation further

comprising the step of determination one vertex of a specific part (11, 12,
13) included in the selected visible image data as a reference vertex,

wherein the coordinate transformation is performed with respect to vectors
connecting the reference vertex and other vertexes of the specific part (11,

12, 13).
A method for generating a 3-dimensional animation according to claim 14,
further comprising the steps of


removing a hidden surface formed by overlapping a plurality of
transformed part image data, while treating a plane produced by the

vertexes of the part image data as a minimum unit for removal; and
performing interpolation calculation with respect to pixels included in the
part image data excluding the vertexes in the part image data based on the

original image data obtained before the coordinate transformation.
A method for generating a 3-dimensional animation according to claim 11,
further comprising the steps of:


providing a motion data on a motion of the object;
searching a specific part image data among the stored part image data, the
specific part image data corresponding to a specific part (P1 - P3) to be

moved in relation to the motion of the object (10, O1 - O3); 
transforming the searched part image data into a transformed part image
data in a moved condition; and
drawing the transformed part image data being drawn on the drawing area.
A method for generating a 3-dimensional animation according to claim 11,
further comprising the steps of:


detecting one ore more areas each to be a shadow area by using the 3-dimensional
coordinates of the vertexes of the parts (P1 - P3) in the stored

part image data and the 3-dimensional coordinates of a light source;
supervising image data of each of the shadow areas;
calculating a movement of a specific shadow selected from the detected
one or more shadow areas corresponding a movement of a specific

observing view point by view point coordinate transformation of the part
image data which provides the specific shadow area; and
drawing the specific shadow area in the drawing area by decreasing
luminance values of pixels included in the specific shadow area from the

original luminance values thereof.
A method for generating a 3-dimensional animation according to claim 10,
wherein the image data is stored in a plurality of hierarchical structures

arranged in a sequential manner along a time axis.
</CLAIMS>
</TEXT>
</DOC>
