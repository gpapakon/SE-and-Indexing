<DOC>
<DOCNO>EP-0620664</DOCNO> 
<TEXT>
<INVENTION-TITLE>
Local area network system
</INVENTION-TITLE>
<CLASSIFICATIONS>H04L1228	H04L1228	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>H04L	H04L	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>H04L12	H04L12	</CLASSIFICATIONS-FOURTH>
<ABSTRACT>
A local area network line system having a bus line and a plurality of 
devices is disclosed. Each of the devices comprises a data receiver circuit 

coupled to the bus line for detecting a communication start request from a 
signal applied on the bus line and being in a sleep mode when the data 

receiver circuit receives a sleep command signal and a transmitting circuit 
coupled to the bus line for outputting a transmitting signal in response to a 

transmit control signal. Each of the devices further comprises an edge 
detection circuit coupled to the bus line for detecting a level variation of the 

signal applied on the bus line and outputting a detection signal in response 
to the detected level variation and a communication control circuit coupled to 

the data receiver circuit, the transmitting circuit and the edge detection circuit 
for outputting the transmit control signal to the transmitting circuit. The 

transmitting circuit includes a sleep/wake-up control circuit for outputting the 
sleep command signal to the data receiver circuit. 


</ABSTRACT>
<APPLICANTS>
<APPLICANT-NAME>
OKI ELECTRIC IND CO LTD
</APPLICANT-NAME>
<APPLICANT-NAME>
OKI ELECTRIC INDUSTRY CO., LTD.
</APPLICANT-NAME>
</APPLICANTS>
<INVENTORS>
<INVENTOR-NAME>
OHIE MITSUYA
</INVENTOR-NAME>
<INVENTOR-NAME>
OHIE, MITSUYA
</INVENTOR-NAME>
</INVENTORS>
<DESCRIPTION>
This invention relates to a local area network (hereinafter called
"LAN") line system having a plurality of devices (nodes) spaced away from
each other so as to exchange information therebetween, and particularly to
a sleep/wake up (hereinafter called a "SLEEP/WAKE-UP") control circuit
incorporated into each of nodes which are electrically connected to LAN
lines.Each of nodes respectively electrically connected to LAN lines has
such a function (hereinafter called a "WAKE-UP function") that each node
enters into a mode (hereinafter called a "SLEEP mode") for reducing current
to be consumed when each LAN line is not in use and is reset to a
communication enable state when it is detected from which node a signal
would be output to each of the LAN lines.Since, however, each node monitors and detects a communication
start request to one of nodes even after having been brought to the SLEEP
mode, it is necessary to monitor the state of the signal transmitted over each
BUS. Accordingly, a power source used for a differential comparator
corresponding to a receiving circuit included in each node cannot be turned
off. Further, a current of the order of at least several tens of µAmps to several
hundreds of µAmps needs to be used up even during the SLEEP mode.
Therefore, the more the number of the nodes electrically connected to the 
BUS lines increases, the more the current consumption of a LAN line system
becomes greater, with the result that less power consumption cannot be
achieved. When the supply of current to the differential comparator is
stopped to realize the less power consumption, a variation in the signal
which appears on each of the BUS lines, i.e., the communication start
request to one of nodes cannot be monitored and detected.EP-A-0,515,042 discloses a system for data communication for use in an
automobile. It includes at least one master unit and a plurality of slave units which
are connected to a communication bus. The master unit has an operation detector
for detecting when an operation switch of the data communication system is turned
on or off, and outputting a detected operation signal corresponding to the turn-on
or turn-off of the operation switch, an operation mode controller for outputting an
operation mode control signal through the communication bus to control operation
of the data communication system based on the detected operation signal, and a
first operation mode changer controlled by the operation mode control signal for
switching the data commmunication system into a normal
</DESCRIPTION>
<CLAIMS>
A local area network line system having a pair of bus lines (21, 22) and
a plurality of devices (30-1 to 30-3) coupled to the bus lines (21, 22), each of the

devices comprising:

a data receiver (40) having a pair of input terminals (41, 42) respectively

coupled to the bus lines (21, 22) and an output terminal (43);
a transmitting circuit (81, 82) coupled to the bus lines (21, 22) for outputting
a transmitting signal to the bus lines (21, 22) in response to a transmit control

signal; and
a communication control circuit (60) coupled to the output terminal (43) of
said data receiver (40) and said transmitting circuit (81, 82) for outputting the

transmit control signal to said transmitting circuit (81, 82),
characterized in that

each of the devices further comprises an edge detection circuit (70) coupled to
the bus lines (21, 22) for detecting a message from the bus lines (21, 22) and

outputting a wake-up signal (S73) in response to the detected message;
said communication control circuit (60) includes a sleep/wake-up control circuit

(61) coupled to said edge detection circuit (70) for outputting a sleep command
signal (S60a) in response to a sleep control signal (CS) and for outputting a

wake-up command signal (S60a) in response to the wake-up signal (S73);
said data receiver (40) further has a sleep terminal (44), and said data receiver

(40) is in a sleep mode when it receives the sleep command signal (S60a)
through the sleep terminal thereof and is in an active mode when it receives the

wake-up command signal (S60a) through the sleep terminal thereof.
A local area network line system according to claim 1, wherein said data
receiver (40) cuts off its internal current path in response to the sleep command

signal (S60a).
A local area network line system according to claim 1, wherein said
communication control circuit (60) further includes a data generator (93) coupled

to said transmitting circuit (81, 82) for outputting the transmit control signal to said
transmitting circuit (81, 82), an arbiter (91) coupled to the data generator (93) for

controlling a possessor right to the bus line, a decoder (92) coupled to the arbiter
(91) for decoding an output of said data receiver (40), an oscillator (95) for

outputting a clock signal and a sample clock generator (94) coupled to the
oscillator (95) for sampling digital data on the bus line in response to the clock

signal. 
A local area network line system according to claim 1, wherein said
edge detection circuit (70) includes a schmitt circuit (75, 76) for detecting the

level variation of the signal applied on the bus line and a flip flop circuit (77, 78)
coupled to the schmitt circuit (75, 76) for outputting the detection signal in

response to the detected level variation.
A local area network line system according to claim 4, wherein
said edge detection circuit (70) includes a reset terminal (74) and is initialized

when an initializing signal is input to the reset terminal thereof.
A local area network line system according to claim 5, wherein
said edge detection circuit (70) includes: 


a schmitt inverter (75) having an input (71) coupled to one of the bus
lines and an output;
a first flip flop circuit (77) having a clock terminal coupled to the output of
the schmitt inverter (75), a data terminal (D) coupled to a voltage supply (VDD),

a Q output (Q) and a reset terminal (R) coupled to the reset terminal(74) of said
edge detection circuit (70);
a schmitt buffer (76) having an input (72) coupled to the other bus lines
and an output;
a second flip flop circuit (78) having a clock terminal coupled to the
output of the schmitt buffer (76), a data terminal (D) coupled to the voltage

supply (VDD), a Q output (Q) and a reset terminal (R) coupled to the reset
terminal (R) of the first flip flop circuit (77); and
a gate circuit (79) having first and second inputs each coupled to the Q
outputs (Q) of the first and second flip flop circuits (77, 78) and an output (73).
A local area network line system according to claim 5, wherein
said communication control circuit (60) outputs the initializing signal to the reset

terminal (74) of said edge detection circuit (70). 
A local area network line system according to claim 1, wherein said data
receiver (40) comprises: 


a differential circuit (62) coupled to the input terminals (41, 42) of said data
receiver (40) for comparing level of the signals appeared on the input terminals

(41, 42) and outputting a comparing signal in response to the comparison;
a current source circuit (63) coupled to the sleep terminal (44) of said data
receiver (40), a power supply (VDD) and the differential circuit (62) for generating

a cut-off signal when the sleep command signal is received thereto; and
an output circuit (64) coupled to the output terminal (43) of said differential
comparator (40) and the current source circuit (62), the output circuit (43) enabled

in response to the cut-off signal.
A local area network line system according to claim 8, wherein the
differential circuit (62) comprises:


a first MOS transistor (45 or 46) having a gate coupled to one of the input
terminals of said data receiver (40) and first and second terminals;
a second MOS transistor (46 or 45) having a gate coupled to the other
input terminals of said data receiver (40), a first terminal and a second terminal

coupled to the second terminal of the first MOS transistor (45 or 46);
a third MOS transistor (47 or 48) having a gate, a first terminal coupled to
the first terminal of the first MOS transistor (45 or 46) and the gate thereof and a

second terminal coupled to a first potential source; and
a fourth MOS transistor (48 or 47) having a gate coupled to the gate of the
third MOS transistor (47 or 48), a first terminal coupled to the first terminal of the

second MOS transistor (46 or 45) and a second terminal coupled to the first
potential source.
A local area network line system according to claim 8, wherein the
current source circuit (63) comprises:


a first MOS transistor (53) having a gate coupled to the sleep terminal (44)
of said data receiver (40), a first terminal and a second terminal coupled to the

power supply (VDD);
a second MOS transistor (51) having a gate, a first terminal coupled to the
first terminal of the first MOS transistor (53) and the gate thereof and a second

terminal coupled to the power supply (VDD);
a resistive element (55) having a first terminal coupled to the first terminal
of the first MOS transistor (53) and a second terminal; and
a third MOS transistor (54) having a gate coupled to the sleep terminal (44)
of said data receiver (40), a first terminal coupled to the second terminal of the

resistive element (55) and a second terminal coupled to a first potential source
(GND), the current source circuit outputting the cut-off signal from the first terminal

of the first MOS transistor (53).
A local area network line system according to claim 10, wherein the
current source circuit (63) further comprises a fourth MOS transistor (49) having

a gate coupled to the gate of the second MOS transistor (51), a first terminal and
a second terminal coupled to the power supply (VDD). 
A local area network line system according to claim 8, wherein the
output circuit (64) comprises:


a first MOS transistor (50) having a gate coupled for receiving the cut-off
signal, a first terminal coupled to the output terminal (43) of said data receiver

(40) and a second terminal coupled to the power supply (VDD); and 
a second MOS transistor (52) having a gate coupled for receiving the
comparing signal, a first terminal coupled to the output terminal (43) of said data

receiver (40) and a second terminal coupled to the first potential source.
</CLAIMS>
</TEXT>
</DOC>
