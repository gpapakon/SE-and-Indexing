<DOC>
<DOCNO>EP-0635804</DOCNO> 
<TEXT>
<INVENTION-TITLE>
Image processing method and device for performing that method
</INVENTION-TITLE>
<CLASSIFICATIONS>G06T500	G06T500	H04N532	H04N532	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>G06T	G06T	H04N	H04N	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>G06T5	G06T5	H04N5	H04N5	</CLASSIFICATIONS-FOURTH>
<ABSTRACT>
An image processing method is provided according to the invention to 
remove areas from an image made by x-irradiation, said areas corresponding to 

absorption filters in the x-ray beam. Because such filters, also known as x-ray shutters, 
are inserted into the x-ray beam from the outside of the x-ray beam, x-ray shutter-areas 

extend from the periphery of the image. Therefore, once the edge of an x-ray shutter-areas 
has been determined, the part of the image located between the periphery and the 

x-ray shutter-edge is removed. X-ray shutter-edges are determined by locating 
transition-points in the image having brightness-transitions having maxima of both the 

first and second spatial derivatives of the brightness-value. An x-ray shutter-edge is then 

determined by fitting a curve through the transition-points. The curve fitting is 
performed with the use of weight-factors that a re representative for the likelihood of an 

transition-point to be on an actual x-ray shutter-edge. This likelihood is larger for an 
transition-points which is closer to the periphery of the image, for transition-points 

having low image roughness towards the periphery of the image. Furthermore, an 
transition-point having a large height of its brightness-transition is more likely to be on 

an actual x-ray shutter-edge. 

</ABSTRACT>
<APPLICANTS>
</APPLICANTS>
<INVENTORS>
</INVENTORS>
<DESCRIPTION>
The invention relates to an image processing method formed by x-ray imaging, and
containing a portion corresponding to an x-ray absorption filter. The invention also relates to an
image processor to process an image formed by x-ray imaging, which contains a portion
corresponding to an x-ray absorption filter. The invention further relates to an x-ray examination
apparatus comprising an x-ray absorption filter between an x-ray detector and an x-ray source for
irradiating an object to form an x-ray image on the x-ray detector.An image processing method of said kind is known from EP 0309813. According to the
disclosure of this document, an X-ray diagnostic installation has an X-ray source, an X-ray image
intensifier video-chain and a control circuit connected to the output of the video chain which includes
a circuit for image processing. In particular the image is divided into a number of individual regions
and mean intensity values are estimated in said regions. A threshold circuit for contour recognition
compares the measured mean brightness values of the individual image regions to a brightness
threshold and transmits through those measured signals corresponding to darker regions which are
referred to as regions of relevance, blanking the other regions referred to as irrelevant regions. The x-ray
diagnostic installation also comprises a collimator having movable plates to adjust the size of said
x-ray beam and includes means for generating a signal for positioning plates of said collimator based
on means for identifying the irrelevant regions.An other image processing method and an apparatus for detecting colinear edge points and
measuring the distance between two edges is already known from WO92/11609. According to the
disclosure of said document, in a digital image, the pixels corresponding to edge points are identified.
Then a straight line is determined as the line passing through the maximum number of said point. The
search for this line is performed by varying test slope values.An image processing method of said kind is also known from the US patent US 4 670 896;
therein are disclosed an x-ray examination apparatus and the use thereof to form on the x-ray
detector the x-ray image containing a portion corresponding to the x-ray absorption filter. The cited
reference teaches that a substantial difference in image-contrast can occur between parts of an x-ray
image formed due to irradiation of the object by x-rays. Brightness differences forming image contrast
arise e.g. in peripheral angiography
</DESCRIPTION>
<CLAIMS>
An image processing method to process an image formed by x-ray
imaging, the image containing a portion corresponding to an x-ray absorption filter,

said image processing method comprising :

determining an edge of said portion,
modifying the image by selectively processing said portion,
characterized in that
 the detection of the edge comprises :

a grouping step to select a group of transition-points (3) in the image having a
higher brightness towards the center of the image and a lower brightness towards the

periphery of the image, said transition-points being assigned weights and a weight for
a transition-point depending decreasingly on a distance between said transition-point

and the image periphery and
a curve-fitting step (21) to fit a curve (60) through said group of transition-points,
said curve forming a representation of said edge.
An image processing method as claimed in Claim 1, 
characterized in that
 the
grouping step comprises :


a region-selection step (11) to select a region of interest (1) extending from a
periphery of the image and
a division-step (12) to divide said region of interest (1) into sections (2) and
a weight-assignment step (18) to assign the weights to said transition-points (3), a

weight for a transition-point depending on image features around said transition-point.
An image processing method as claimed in claim 1 or 2, 
characterized in that

the grouping step comprises a first-estimate step to determine a first-estimate for a
position of a transition-point in a section and an accurating step to determine a

transition-point from said first-estimate.
An image processing method as claimed in Claim 2 or 3, 
characterized in that

the weight-assignment step comprises :

computation (20) of image roughness, and
computation (19) of transition-height, and
computation (18) of said weights depending on image roughness and transition
height for respective transition-points.
An image processing method as claimed in any one of Claims 1 to 4,

characterized in that
 the weight-assignment step comprises :

computation (15,16) of first and second spatial derivatives of brightness-values
near respective transition-points and 
employing substantial concurrence of a maximum of said first derivative with a
brightness-variation and with a maximum of said second derivative at the peripheral

side of said brightness-variation for selecting the position of said brightness-variation
as a transition-point and assigning said weight on the basis of said concurrence.
An image processing method as claimed in any one of Claims 1 to 4,

characterized in that
 the weight-assignment step comprises :

computation of first spatial derivatives of brightness-values peripheral to
respective transition-points, computation (13) of respective average brightness-value

of pixels towards the center to said transition-points, computation of respective ratios
of said respective first spatial derivatives and said respective average brightness-values

and assigning said weights on the basis of said ratios.
An image processing method as claimed in any one of Claims 1 to 6,

characterized in that
 the weight assignment step is followed by a point-selection step
for selecting a transition-point having the highest weight in a section and retaining

only said selected transition-points in said selected group.
An image processing method as claimed in any one of Claims 1 to 7,

characterized in that
 the curve-fitting step (21) is followed by a reassigning step for
reassigning a value to a weight of a transition-point in dependence on a distance

between said transition-point and a curve fitted through the group whereto said
transition-point belongs, and 
in that
 the curve-fitting step is re-iterated employing said
re-assigned weight.
An image processing method as claimed in any one of Claims 1 to 8,

characterized in that
 determining the edge (60) is followed by an edge-verification
step (22) comprising computation of a reliability-parameter for an edge being

determined and comparison of said reliability-parameter with a predetermined

threshold level.
An image processing method as claimed in claim 9, 
characterized in that
 for a
plurality of transition-points said reliability parameter is computed and in a situation

where comparison of said reliability parameter to said predetermined reference level
indicates the presence of said portion corresponding to an x-ray absorption filter for

less transition-points than a predetermined reference number the edge-verification
step is supplemented by comparison of pixel-values of collections of pixels on different

sides of the curve.
An image processing method as claimed in Claim 10, 
characterized in that

plurality of transition-points said reliability parameter is computed and in a situation
where comparison of said reliability parameter to said predetermined reference level

indicated the presence of said portion corresponding to an x-ray absorption filter for 
less transition-points than a predetermined reference number the edge-verification

step is supplemented by determining a magnitude of a first spatial derivatives of
brightness-values of pixels in the image between the curve and the periphery of the

image, said derivative being negative in the direction from the curve to the periphery
of the image and comparing said magnitude to a predetermined reference value.
An image processing method as claimed in one of Claims 1 to 11, 
characterized
in that
 the processing comprises :

selecting the portion corresponding to the X-ray absorption filter as a part of
the image between the edge and a periphery of the image.
An image processing method as claimed in Claim 12, 
characterized in that
 the
processing comprises :


removing at least a part of said portion from the image.
An image processing method as claimed in Claim 12, 
characterized in that
 the
processing comprises :


assigning substantially uniform values to pixels in said portion in the image.
An image processor to process an image formed by x-ray imaging, which
contains a portion corresponding to an x-ray absorption filter, 
characterized in that
 the
processor comprises :


a device for determining an edge of the portion according a method as claimed
in one of Claims 1 to 11,
and a device for modifying the image by selectively processing the portion.
An x-ray examination apparatus comprising an x-ray absorption filter between
an x-ray detector and an x-ray source for irradiating an object to form an x-ray image

on the x-ray detector, 
characterized in that
 the apparatus comprises an image
processor according to Claim 15 and having an input port coupled to the x-ray

detector.
</CLAIMS>
</TEXT>
</DOC>
