<DOC>
<DOCNO>EP-0634034</DOCNO> 
<TEXT>
<INVENTION-TITLE>
METHOD OF OPERATING A DISK STORAGE SYSTEM
</INVENTION-TITLE>
<CLASSIFICATIONS>G06F1730	H04N7173	H04N500	G11B2710	H04N724	G11B2710	G06F306	H04N7173	G06F1730	H04N500	G06F306	H04N724	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>G06F	H04N	H04N	G11B	H04N	G11B	G06F	H04N	G06F	H04N	G06F	H04N	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>G06F17	H04N7	H04N5	G11B27	H04N7	G11B27	G06F3	H04N7	G06F17	H04N5	G06F3	H04N7	</CLASSIFICATIONS-FOURTH>
<ABSTRACT>
A method for operating a disk storage system, comprising a disk and forming part of a communications network, simultaneously maintains the continuity of a plurality of data streams. Typically, each stream transfers video data to or from the disk storage system. Illustratively, each of the data streams is produced in the network at a rate of Wbase bits/sec and consumed by the disk storage system or produced by said disk storage system and consumed inthe network at a rate of Wbase bits/sec. One I/O transaction is performed for each stream in each of a plurality of I/O cycles of duration S/Wbase, wherein in each I/O transaction a segment of S bits is retrieved from or stored in the disk. The number of streams whose continuity can be maintained in this manner is limited by the number of I/O's which can be performed in a cycle of duration S/Wbase. More generally, when a stream has a bit rate (A/B)Wbase bits/sec where A and B are integers chosen independently for each stream, then for this stream A I/O transactions are performed in B cycles of duration S/Wbase. If the number of disks is Nd,Nd
>
/=1, then the I/O cycles have a duration NdS/Wbase and then A I/O transactions are performed in each disk for each stream in B I/O cycles.
</ABSTRACT>
<APPLICANTS>
<APPLICANT-NAME>
STARLIGHT NETWORKS INC
</APPLICANT-NAME>
<APPLICANT-NAME>
STARLIGHT NETWORKS, INC.
</APPLICANT-NAME>
</APPLICANTS>
<INVENTORS>
<INVENTOR-NAME>
BAIRD RANDALL B
</INVENTOR-NAME>
<INVENTOR-NAME>
GANG JOSEPH M
</INVENTOR-NAME>
<INVENTOR-NAME>
MCFADDEN MARTIN J
</INVENTOR-NAME>
<INVENTOR-NAME>
PANG JOSEPH W M
</INVENTOR-NAME>
<INVENTOR-NAME>
TOBAGI FOUAD A
</INVENTOR-NAME>
<INVENTOR-NAME>
BAIRD, RANDALL, B.
</INVENTOR-NAME>
<INVENTOR-NAME>
GANG, JOSEPH, M.
</INVENTOR-NAME>
<INVENTOR-NAME>
MCFADDEN, MARTIN, J.
</INVENTOR-NAME>
<INVENTOR-NAME>
PANG, JOSEPH, W., M.
</INVENTOR-NAME>
<INVENTOR-NAME>
TOBAGI, FOUAD, A.
</INVENTOR-NAME>
</INVENTORS>
<DESCRIPTION>
The present invention relates to a method for operating a
storage system such as a disk storage system. In accordance
with the invention, I/O transactions for the disk storage
system are scheduled so that the continuity of a plurality of
streams is simultaneously maintained. In a network, the
inventive method allows a plurality of users to independently
and simultaneously access the disk storage system to store and
retrieve stream oriented data such as that found in digital
video and audio applications. The invention is also
applicable to a stand-alone system wherein a disk storage
system is accessed to retrieve or store data belonging to a
plurality of streams. The streams, for example, are retrieved
from the disk storage system for display locally on a monitor
or received from an external source for storage in the disk
storage system.One application of the inventive method for operating a
disk storage system is in a network such as a local area
network.A Local Area network (LAN) for handling video data is
illustrated in FIG 1. The network 10 comprises a shared
transmission medium 12 and a plurality of stations 14
connected to the shared transmission medium. In addition, a
server 16 is connected to the shared transmission medium. A
disk storage system 20 for storing a plurality of video files
is connected to server 16. A plurality of the stations 14 
typically wish to access the disk storage system
simultaneously to retrieve video files stored in the disk
storage system or to write video files into the disk storage
system. As indicated above, the invention is also applicable
to a stand-alone system wherein a disk storage system is
accessed to retrieve streams for display on a local monitor or
a disk storage system is accessed to store streams received
from an external source.Streaming data differs from transactional data as
follows. With transactional data applications, the data rate
associated with the traffic source is highly variable, i.e, it
exhibits a high peak-to-average ratio. In contrast, the data
rate associated with the transmission of a stream is
relatively constant and is generally higher than the average
rate associated with a transactional source.In stream oriented applications such as video, the
process according to which data is produced by a source (e.g.,
a disk storage system) and consumed by a destination (e.g., a
decoder at an end-user station) is relatively continuous and
steady. As far as the storage system is concerned, two
distinct but similar operations are of interest: (i)

</DESCRIPTION>
<CLAIMS>
A method for operating a disk storage system
comprising an array of N
d
 (N
d
 ≥ 1) disks comprising the
steps of:

maintaining simultaneously the continuity of a plurality
of data streams, each of which is produced at a rate of

(A/B)W
base
 bits/sec and consumed by said disk storage
system or produced by the disk storage system and

consumed at a rate of (A/B)W
base
 bits/sec, where A and B
are integers, chosen independently for each stream, by

performing for each stream A I/O transactions in B I/O
cycles of duration T
play
= N
d
S/W
base
 in each of said N
d
 disks,
wherein in each I/O transaction, a segment of S bits is

retrieved from or stored in a particular disk,
characterized in that
 a consumption cycle in which data
segments of the stream are consumed is scheduled after

the end of the I/O cycle in which data is retrieved, and

in that
 the order of the I/O transactions within each I/O
cylce is determined individually for each I/O cycle.
The method of claim 1, wherein said disk storage
system is located in a network and each of said streams

is either produced or consumed in said network.
The method of claim 1, wherein the network produces
or consumers W
base
 bits/sec for each of the streams wherein
said streams are divided into G groups, wherein the

production or consumption cycles of the streams within
each group are aligned with each other, but the

production and consumption cycles of successive groups
are offset from the production and consumption cycles of

the previous group by (1/G)
th
 of an I/O cycle, and wherein 
each I/O cycle is divided into G I/O subcycles of

duration N
d
S/W
base
G.
The method of claim 3 wherein in each I/O subcycle
there is one I/O transaction performed in each disk for

each stream in the group whose production or consumption
cycle begins immediately after the subcycle.
The method of claim 4 wherein in each subcycle, one
I/O transaction is performed for each stream in each of N
d

groups.
The method of claim 1 wherein the disk storage
system is a Redundant Array of Inexpensive Disks.
The method of claims 1 wherein B has a fixed value
for all streams N
super
, where N
super
 is an integer.
The method of claim 7 wherein N
super
 I/O cycles form a
supercycle, wherein in each I/O cycle of a supercycle,

for each stream L stripes are fetched from or written
into said disk storage system, wherein each stripe

comprises one segment of S bits fetched from or written
into each of said N
d
 disks, and wherein for each stream
the variance of the number L over the cycles of

supercycle is minimized.
The method of claim 8 wherein the variance of the
total number of stripes fetched from or written into said

disk storage system, for all of said streams in each
cycle of a supercycle is minimized.
The method of claim 1 wherein for A=B and N
d
=1
production and the consumption cycles of said streams are 

aligned with said I/O cycles and further comprising the
steps of:

   during the i
th
 cycle of duration T
play
, storing in
said disk storage system segments of S bits belonging to

particular streams and produced by said network in the
(i/l)
th
 cycle and retrieving from said disk storage system
segments of S bits belonging to particular streams and

consumed by said network in the (i+l)
th
 cycle.
The method of claim 1 wherein for A=B and N
d
=1 each
of said disk is organized into areas of size S bits and

segments are allocated to areas randomly.
The method of claim 1 wherein for A=B and N
d
=1
segments belonging to often-accessed files are located in

outer zones in said disks and segments belonging to
rarely-accessed files are located in inner zones of said

disk.
The method of claim 1 wherein for A=B and N
d
=1
segments are stored in the outer zones of said disks when

said disks are not full.
The method of claim 1 wherein for A=B and N
d
=1
segments belonging to particular files are stored

contiguously on said disks.
The method of claim 1 wherein for A=B segments are
grouped into data stripes of N
d
 consecutive segments,
wherein said array is organized into striped areas

comprising corresponding locations in each of said N
d

disks and wherein data stripes are allocated to said
striped areas randomly. 
The method of claim 1 wherein for A=B the N
d
 I/O
transactions for a stream in each I/O cycle of duration

N
d
S/W
base
, comprises retrieving or storing some segments
from a first striped area and some segments from a second

striped area.
</CLAIMS>
</TEXT>
</DOC>
