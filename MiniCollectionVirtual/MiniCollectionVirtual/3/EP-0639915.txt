<DOC>
<DOCNO>EP-0639915</DOCNO> 
<TEXT>
<INVENTION-TITLE>
Technique and apparatus for automatically detecting the constellation size of a quadrature amplitude modulated (QAM) signal
</INVENTION-TITLE>
<CLASSIFICATIONS>H04L2738	H04L2738	H04L2700	H04L2700	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>H04L	H04L	H04L	H04L	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>H04L27	H04L27	H04L27	H04L27	</CLASSIFICATIONS-FOURTH>
<ABSTRACT>
A technique for determining the constellation size 
of a QAM signal received by a QAM receiver. In general, the 

implementation of my technique has, as an input signal, a 
QAM signal having one of a plurality of constellation sizes 

and determines of constellation size, e.g., 4, 16, 32-ary, 
by analyzing the probability density function (pdf) of the 

QAM signal over a pre-established time period. To properly 
analyze the QAM signal, the signal is first squared and then 

normalized to a preset value, e.g., 2.0. As such, the 
signal power in any of the various constellations is 

normalized to a fixed level. By generating a histogram of 
the squared and normalized QAM signal, the technique 

determines the number of levels of modulation contained in 
the QAM signal. Each constellation size has a unique number 

of modulation levels and thus forms unique histogram. From 
the histogram, a particular constellation size can be 

determined. Thus, by generating a histogram, the technique 
determines the constellation size of a QAM signal without 

requiring a priori carrier lock before accomplishing such a 
determination. 


</ABSTRACT>
<APPLICANTS>
<APPLICANT-NAME>
HITACHI LTD
</APPLICANT-NAME>
<APPLICANT-NAME>
HITACHI, LTD.
</APPLICANT-NAME>
</APPLICANTS>
<INVENTORS>
<INVENTOR-NAME>
LANE FRANK ANTON
</INVENTOR-NAME>
<INVENTOR-NAME>
LANE, FRANK ANTON
</INVENTOR-NAME>
</INVENTORS>
<DESCRIPTION>
The invention relates to communications receivers, 
and particularly, the invention relates to apparatus for use 
in such a receiver for automatically detecting the 
constellation size of a received quadrature amplitude 
modulated (QAM) signal. Various communications systems utilize quadrature 
amplitude modulation (QAM) for transmission of relatively 
high data rate information within a limited transmission 
bandwidth. Typically, QAM communications systems use a 
fixed symbol constellation for all transmissions, e.g., 
sixteen positions or points within a constellation. 
Conventional QAM receivers are capable of receiving 
transmissions of only a single symbol constellation size. However, recently, sophisticated QAM 
communications systems are capable of transmitting variable 
symbol rate transmissions using two or more symbol 
constellations. For example, such a QAM system could vary 
its symbol rate between a 32-ary constellation and a 16-ary 
constellation depending upon the presence of atmospheric 
noise. Specifically, during periods of low atmospheric  
 
noise, such a QAM system can use 32-ary transmissions. When 
atmospheric noise, as measured at the transmitter, has 
increased above a pre-established noise threshold, the 
constellation size is then decreased to a 16-ary 
constellation. During periods of extremely low noise, the 
constellation size could be increased to transmissions of 
32-ary, 64-ary or even 128-ary constellations. 
Alternatively, a QAM system may be required to transmit one 
constellation size over-the-air and a second constellation 
size over a cable broadcast system. As such, a "cable 
ready" receiver must be able to receive both constellation 
sizes. One such variable constellation size communication 
system is being considered by the Federal Communications 
Commission (FCC) as a standard transmission format for high 
definition television (HDTV). The particular standard would 
permit HDTV broadcasters to use either 16-ary or 32-ary QAM 
symbol constellations for broadcasting HDTV signals. As 
such, a given HDTV receiver may receive a 16-ary 
transmission when viewing one particular channel and a 
32-ary transmission when viewing a second channel. 
Additionally, a given HDTV broadcaster may change its 
transmitted symbol constellation from 16- to 32-ary, or vice 
versa, whenever noise conditions permit the higher (lower) 
rate of transmission to a majority of the broadcast 
audience. Thus, an HDTV receiver must be capable of 
automatically determining whether a received
</DESCRIPTION>
<CLAIMS>
Apparatus for determining the constellation size of a quadrature amplitude 
modulated signal, hereinafter referred to as QAM signal, wherein said QAM signal contains one 

of a plurality of constellation sizes, comprising: 

means for squaring (502) a magnitude of said QAM signal and for 
producing a magnitude squared QAM signal; 
means, connected to said squaring means, for analyzing (506) a 
probability density function of said QAM signal by examining the 

magnitude squared QAM signal to determine the constellation size of 
the QAM signal being received; 
means, connected to said analyzing means, for establishing (508) 
a duration during which said analyzing means analyzes said QAM 

signal; 
means, connected to said analyzing means and said duration establishing 
means, for producing (510) a signal indicative of the constellation 

size of said QAM signal being received; 
characterized
 in that 

said analyzing means comprises means for accumulating symbols 
(511, 513, 520, 522) of said magnitude squared QAM signal during 

said duration; the accumulating means further comprising 
a plurality of bins (511, 513) each having a position and width 

such that each bin is positioned to accumulate symbols occurring near 
at least one peak in said probability density function; and 
a plurality of counters (520, 522), each one connected to a bin, that are incremented 
whenever said magnitude squared QAM signal exceeds a lower threshold 

signal and does not exceed an upper threshold signal, whereby  
 

a difference in magnitudes between said upper and lower threshold 
signals establishes said bin width, and whereby said accumulating means 

produces a count of said symbols that occur within the bin width of said 
plurality of bins; and 
means, connected to each of said counters, for comparing 
(524), to one another, said counts accumulated by each counter during 

said established duration and wherein said producing means, in response 
to said count comparison, produces the signal indicative of the constella- 

tion size of said QAM signal being received. 
The apparatus of claim 1, wherein said bin width for each of said bins 
is established by first and second comparators (512, 514, 516, 518), 

wherein said magnitude squared QAM signal forms an input to a 
positive terminal of said first comparator and an upper threshold signal 

forms an input to a negative terminal of said first comparator, and 
wherein said magnitude squared QAM signal forms an input to a 

negative terminal of said second comparator and a lower threshold 
signal forms an input to a positive terminal of said second comparator. 
Apparatus for determining the constellation size of a quadrature amplitude 
modulated signal, hereinafter referred to as QAM signal, wherein said QAM signal contains one 

of a plurality of constellation sizes, comprising: 

means for squaring (502) a magnitude of said QAM signal and for 
producing a magnitude squared QAM signal; 
means, connected to said squaring means, for analyzing (506) a 
probability density function of said QAM signal by examining the 

magnitude squared QAM signal to determine the constellation size of 
the QAM signal being received;  

 
means, connected to said analyzing means, for establishing (508) 
a duration during which said analyzing means analyzes said QAM 

signal; 
means, connected to said analyzing means and said duration establishing 
means, for producing (510) a signal indicative of the constellation 

size of said QAM signal being received;
characterized
 in that 

said analyzing means comprises means for accumulating symbols 
(511, 513, 520, 522) of said magnitude squared QAM signal during 

said duration; the accumulating means further comprising 
a plurality of bins (511, 513) each having a position and width such 

that each bin is positioned to accumulate symbols occurring near at 
least one peak in said probability density function; and 
a plurality of counters (520,522), each one connected to a bin, that are incremented 
whenever said magnitude squared QAM signal exceeds a lower 

threshold signal and does not exceed an upper threshold signal, 
whereby a difference in magnitudes between said upper and lower 

threshold signals establishes said bin width and whereby said accumulating 
means produces a count of said symbols that occur within the bin 

width of said plurality of bins; and 
means, connected to each of said counters, for comparing said 
count accumulated by each counter during said established duration to 

an expected count value for each of said bins and wherein said producing 
means, in response to said count comparison, produces the signal 

indicative of the constellation size of said QAM signal being received. 
The apparatus of claim 3, wherein said comparing means further 
comprises means (524), connected to each of said counters, for comparing, 

to one another, said counts accumulated by each counter during 
said established duration.  

 
The apparatus of claim 3 or 4, wherein said QAM signal is either a 
16-ary or 32-ary QAM signal and wherein said accumulating means 

contains two bins (511, 513) having a counter (520, 522) connected to 
each bin. 
The apparatus of claim 5, wherein said comparing means determines 
which of the two counters counts to the largest count during the 

established duration, and wherein said producing means produces a 
signal indicative of which counter has the largest count. 
The apparatus of claim 3, wherein said QAM signal is either a 16-ary, 
32-ary or 64-ary QAM signal and wherein said accumulating means 

contains three bins having a counter connected to each bin. 
The apparatus of claim 7, wherein said comparing means determines 
which of the three counters counts to the largest count during the 

established duration, and wherein said producing means produces a 
signal indicative of which counter has the largest count. 
Method for determining the constellation size of a quadrature amplitude 
modulated signal, hereinafter referred to as QAM signal, wherein said QAM signal contains one of a 

plurality of constellation sizes, comprising the steps of: 

receiving a QAM signal having a constellation size; 
squaring a magnitude of said QAM signal to produce a magnitude 
squared QAM signal; 
analyzing a probability density function of said QAM signal by 
examining the magnitude squared QAM signal to determine the constellation 

size of the QAM signal being received; 
establishing a duration during which said analyzing step is accomplished;  
 
producing a signal indicative of the constellation size of the QAM 
signal being received; characterised in that said analyzing step further comprises the steps of 

establishing a plurality of bins each having a position and width and 
positioning each of said bins to accumulate symbols occurring near at 

least one peak in said probability density function. 
whereby a difference in magnitudes of an upper and a lower threshold 

signal establishes the bin width. 
accumulating symbols of said magnitude squared QAM signal 
during said established duration; 
counting a number of symbols of said magnitude squared QAM 
signal that occur within said plurality of bins during the established 

duration; 
comparing to one another the number of symbols counted in each 
bin during the established duration and producing, in response to said 

count comparison, the signal indicative of the constellation size of the 
QAM signal being received. 
The method of claim 9, wherein said accumulating step further comprises 
the step of establishing each of said bins by comparing said 

magnitude squared QAM signal to upper and lower threshold signals. 
Method for determining the constellation size of a quadrature amplitude 
modulated signal, hereinafter referred to as QAM signal, wherein said QAM signal contains one of a 

plurality of constellation sizes, comprising the steps of: 

receiving a QAM signal having a constellation size; 
squaring a magnitude of said QAM signal to produce a magnitude 
squared QAM signal; 
analyzing a probability density function of said QAM signal by 
examining the magnitude squared QAM signal to determine the constellation 

size of the QAM signal being received;  
 
establishing a duration during which said analyzing step is accomplished; 
producing a signal indicative of the constellation size of the QAM 
signal being received; characterised in that said analyzing step further comprises the steps of 
establishing a plurality of bins each having a position and width 
and positioning each of said bins to accumulate symbols occurring near 

at least one peak in said probability density function. 
whereby a difference in magnitudes of an upper and a lower threshold 

signals establishes the bin width. 
accumulating symbols of said magnitude squared QAM signal 
during said established duration; 
counting a number of symbols of said magnitude squared QAM 
signal that occur within said plurality of bins during the established 

duration; 
comparing 
the number of symbols counted in each bin during the established 

duration to an expected count value for each of said bins and producing, 
in response to said count comparison, the signal indicative of the 

constellation size of the QAM signal being received. 
The method of claim 11, wherein said comparing step further comprises 
the step of comparing, to one another, the number of symbols 

counted in each bin during the established period. 
The method of claim 11 or 12, wherein said QAM signal is either a 
16-ary or 32-ary QAM signal and wherein said accumulating step 

establishes two bins. 
The method of claim 13, wherein said comparing step further comprises 
the steps of counting, during the established duration, the number  

 
of symbols that occur in each of the two bins, determining which bin 

had the largest number of symbols occur therein, and producing, in 
response to the bin with the largest number of symbols, a signal 

indicative of which type of QAM signal is being received. 
The method of claim 11, wherein said QAM signal is either a 16-ary, 
32-ary QAM signal and wherein said accumulating step establishes three 

bins. 
The method of claim 15, wherein said comparing step further comprises 
the steps of counting, during the established duration, the number 

of symbols that occur in each of the three bins, determining which bin 
had the largest number of symbols, a signal indicative of which type 

of QAM signal is being received. 
</CLAIMS>
</TEXT>
</DOC>
