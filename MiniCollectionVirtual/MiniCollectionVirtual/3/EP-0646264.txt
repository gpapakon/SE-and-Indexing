<DOC>
<DOCNO>EP-0646264</DOCNO> 
<TEXT>
<INVENTION-TITLE>
ROUTE GUIDANCE ON/OFF-ROUTE STATE FILTER
</INVENTION-TITLE>
<CLASSIFICATIONS>G01C2130	G06F1730	G01C2100	G01C2128	G06F1730	G01C2100	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>G01C	G06F	G01C	G01C	G06F	G01C	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>G01C21	G06F17	G01C21	G01C21	G06F17	G01C21	</CLASSIFICATIONS-FOURTH>
<ABSTRACT>
The invention provides a route state filter (74) for a vehicle route guidance system for improved tracking of vehicle position with respect to a preselected route. A set of position possibilities are derived by comparing a measured vehicle position (28) to a database (30) containing data representing a map of roads, the possibilities corresponding to possible positions on the roads within an error region around the measured position. A route guidance module receives the position possibilities (70), checks their validity (72) and applies a filter to remove less likely possibilities (74). A current position is then selected from the remaining possibilities (76). An ON/OFF ROUTE status of the vehicle is determined by comparing the selected position with the selected route information in the database (35, 78). A distance-based filter is utilized to provide improved continuity in the route status determination. The route status is then used to set the system operating mode, and warnings are communicated to the driver (32, 86).
</ABSTRACT>
<APPLICANTS>
<APPLICANT-NAME>
ZEXEL CORP
</APPLICANT-NAME>
<APPLICANT-NAME>
ZEXEL CORPORATION
</APPLICANT-NAME>
</APPLICANTS>
<INVENTORS>
<INVENTOR-NAME>
SNIDER PETER
</INVENTOR-NAME>
<INVENTOR-NAME>
SNIDER, PETER
</INVENTOR-NAME>
</INVENTORS>
<DESCRIPTION>
The present invention relates generally to route guidance
systems for use in automobiles, and more specifically to methods and
apparatus for determining vehicle position relative to a preselected
route in such route guidance systems.A route guidance system is known from US 5046011 which
indicates to the driver the current position of the vehicle by
estimating the vehicle position on the basis of the travel direction and
travel distance and matching the current vehicle position thus
estimated to map information stored previously. This system has a
limited capacity for tracking the position of the vehicle relative to the
map stored in a database. Frequently, systems of the this type
calculate the vehicle position using dead-reckoning, wherein the
vehicle's current position is determined by considering a known
previous position of the vehicle and the direction and distance
travelled since the previous position. In such dead-reckoning
systems, it is necessary to measure the heading of the vehicle
relative to a reference direction, as well as the distance travelled from
a particular point. In order to measure vehicle heading, such route
guidance systems typically utilize a magnetic compass, as well as a
gyroscope or other relative heading sensor. An odometer is typically
used to measure distance travelled.US-A-4796191 describes the elimination of candidate roads,
if they do not fall within the contour of equal probability area or,
alternatively, the candidates are ranked according to the distance
between the candidate (line segment) and the estimate of the
accuracy, the best candidate being with the smallest separation. US 4999783 describes a process in which correlation
coefficients are calculated for each candidate and those exceeding a
predetermined limit being eliminated, that with smallest being
selected as the present location.IEEE Plans 90 Position Location and Navigation Symposium
Record, Las Vegas, 20-23 March 1990, pp 359-363, W. Clay Collier.
"In-vehicle Route Guidance Systems Using Map Matched Dead
Reckoning" describes vehicle positioning by matching dead reckoned
position with map data base and set route.It has been found, however, that, for a variety of reasons,
such dead reckoning systems suffer from significant error in
determining vehicle position. This positioning error has been found
to accumulate as the vehicle progresses. Factors contributing to this
error include the measurement error associated with the heading and
distance sensors, as well as erroneous measurements caused by, for
examp
</DESCRIPTION>
<CLAIMS>
A method for determining whether a vehicle is following a
predetermined route on a map of roadways (30), said route comprising

a selected portion of said roadways, the method comprising the steps
of:


receiving (70) a set of position possibilities (64) corresponding
to possible positions of said vehicle on said roadways of said map (30)

said position possibilities being determined by comparing an
empirically determined vehicle position (28) with said map of

roadways (30);
verifying (72) that the set of position possibilities (64) are valid
possibilities with reference to a distance from a previously known

vehicle position, thereby generating a first subset of position
possibilities;
filtering (74) the first subset of position possibilities with
reference to a measured vehicle heading (16) and without reference

to said predetermined route by comparing at least one parameter of
the first subset of position possibilities to the measured vehicle

heading (16), thereby removing (96) those least likely to correspond
to said measured vehicle heading (16), thereby generating a second

subset of position possibilities;
filtering (26) the second subset of position possibilities with
reference to said predetermined route, thereby generating a set of

remaining position possibilities each of the remaining position
possibilities being on said predetermined route;
selecting a current position (106, 112, 114) from the remaining
position possibilities based at least in part on the relative positions of

the remaining position possibilities; and
determining a route status (78) of the vehicle based on said
current position (106, 112, 114) and said predetermined route, said

route status indicating whether said current position corresponds to 
said predetermined route.
The method according to claim 1 wherein said step of filtering
(74) the first subset
 of position possibilities comprises:

eliminating (96) each position possibility (64) having a heading
outside of an expected heading range, the expected heading range

including said measured vehicle heading plus an angular error region.
The method according to claim 1 or claim 2, wherein said step
of selecting a current position (106, 112, 114) comprises:


comparing the remaining position possibilities with a set of
positions on the route (108);
classifying each remaining position possibility by route state
(110), 
the route state being selected from the group consisting of ON
ROUTE and OFF ROUTE, ON ROUTE being associated with remaining

position possibilities corresponding to positions on the route, and OFF
ROUTE being position possibilities corresponding to positions not on

the route;
calculating the distance from a known location on said map to
each ON ROUTE position possibility; and
selecting the current position, the current position being the
ON ROUTE position possibility furthest along the route toward the

destination (114).
The method according to claim 3 further comprising, where no
ON ROUTE position possibilities exist, selecting as said current

position the OFF ROUTE position possibility most likely to correspond
with vehicle position according to criteria selected from the group

consisting of proximity to the dead-reckoned position and
correspondence of heading at said position possibility with heading

of the roadway on which a dead-reckoned position lies (112).
The method according to claim 3 or 4 further comprising
assigning the route state of the current position to an OFF ROAD

state if no current position has been selected, said OFF ROAD state
indicating that no position possibilities (64) corresponding to

roadways on said map were received.
The method according to any one of claims 3 to 5 wherein the
step of determining (78) a route status of said vehicle comprises:


comparing the route state of the current position with a stored
distance-based route state;
increasing a stored distance filter value where the route state
of the current position is different than the stored distance-based

route state; 
decreasing the stored distance filter value where the route
state of the current position is the same as the stored distance-based

route state;
comparing the stored distance filter value to a predefined
threshold value after said increasing or decreasing;
setting the stored distance-based route state to the route state
of the current position if the stored distance filter value exceeds the

threshold value; and
assigning the route status the value of the stored distance-based
route state.
The method according to any one of the preceding claims
further comprising the step of determining whether a maneuver of the

vehicle is required, the maneuver being selected from the group
consisting of left turn, right turn, U-turn, hard left, hard right, easy

left, easy right, and combinations thereof.
The method according to claim 7 further comprising
communicating the required maneuver to a user (132).
The method according to any one of the preceding claims
further comprising comparing the current position to an intended

destination to determine whether arrival has occurred (84).
The method according to any one of the preceding claims
further comprising communicating the route status to a user (86). 
The method according to any one of the preceding claims
further comprising:


reading a heading sensor (16) and a distance sensor (12);
calculating (26) a dead-reckoned position (62) using heading
and distance readings;
comparing said dead-reckoned position (62) to said map of
roadways (30); and
deriving said position possibilities (64), wherein said position 
possibilities (64) comprise positions on said roadways within an error

region (60) having said dead-reckoned position (62) as its center.
An apparatus for determining whether a vehicle is following a
predetermined route on a map of roadways (30), said route

comprising a selected portion of said roadways,
comprising:


means for receiving (70) a set of position possibilities (64) corresponding
to possible positions of said vehicle on said roadways of said map

(30) said position possibilities being determined by comparing an
empirically determined vehicle position (28) with said map of

roadways (30);
means for verifying (72) that the set of position possibilities (64) are valid
possibilities with reference to a distance from a previously known

vehicle position, thereby generating a first subset of position
possibilities;
means for filtering (74) the first subset of position possibilities with
reference to a measured vehicle heading (28) and without reference

to said predetermined route by comparing at least one parameter of
the first subset of position possibilities to the measured vehicle

heading (28), thereby removing (96) those least likely to correspond
to said measured vehicle heading (28), thereby generating a second

subset of position possibilities;
means for filtering (26) the second subset of
position possibilities with reference to said predetermined route,

thereby generating a set of remaining position possibilities each of the
remaining position possibilities, being on said predetermined route;
means for selecting a current position (106, 112, 114) from the remaining
position possibilities based at least in part on the relative position of

the remaining position possibilities; and
means for determining a route status (78) of the vehicle based on said
current position (106, 112, 114) and said predetermined route, said

route status indicating whether said current position corresponds to
said predetermined route.
</CLAIMS>
</TEXT>
</DOC>
