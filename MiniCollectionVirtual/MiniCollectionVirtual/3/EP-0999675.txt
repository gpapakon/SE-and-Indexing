<DOC>
<DOCNO>EP-0999675</DOCNO> 
<TEXT>
<INVENTION-TITLE>
Line fault detecting circuit for electrical data transmission system
</INVENTION-TITLE>
<CLASSIFICATIONS>H04L2508	H04L2508	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>H04L	H04L	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>H04L25	H04L25	</CLASSIFICATIONS-FOURTH>
<ABSTRACT>
The circuit comprises a differential circuit for generating a differential signal (VcA) for the first line (A) and a second one (VtB) for the second line (B), corresponding to a time derivation of a potential course of the respective line. A reference signal source provides a reference signal (Vet) which, together with the two differential signals, can form a summation signal (Vres) by a summation circuit (SM,RA,RB,Rt). A line defect free signal is generated by the summation circuit when the summation signal equals the reference signal within a preset region on either side of reference signal. Specified signals indicate defects of both lines and their short circuit. Independent claims are included for a data reception circuit and a testing method.
</ABSTRACT>
<APPLICANTS>
<APPLICANT-NAME>
ST MICROELECTRONICS GMBH
</APPLICANT-NAME>
<APPLICANT-NAME>
STMICROELECTRONICS GMBH
</APPLICANT-NAME>
</APPLICANTS>
<INVENTORS>
<INVENTOR-NAME>
HEINRICH PETER
</INVENTOR-NAME>
<INVENTOR-NAME>
HEINRICH, PETER
</INVENTOR-NAME>
</INVENTORS>
<CLAIMS>
A line error checking circuit for an electric data transmission system having a first line (A) and a second line (B) for differentially transmitting binary data pulses in such a manner that a first logic value ("1") of the data pulses has a high potential (5 V) on the first line (A) and a low potential (0 V) on the second line (B) associated therewith and a second logic value ("0") of the data pulses has a low potential (0 V) on the first line (A) and a high potential (5 V) on the second line (B) associated therewith,

said error checking circuit comprising:

a) a differentiating circuit (CA, CB) by means of which a first differential signal (VtA) can be generated for the first line (A) and a second differential signal (VtB) can be generated for the second line (B), which correspond to a time derivation of the potential curve of the respective line (A, B);
b) a reference signal source (REF) by means of which a reference signal (Vct) can be provided;
c) a summing circuit (SM, RA, RB, Rt) by means of which a sum signal (Vres) can be generated representing the sum of the two differential signals (VtA, VtB) and the reference signal (Vct);
d) an assessment circuit (K1 - K6, OA, OB, OF, OT, A1 - A5, FFI - FFIII) by means of which:
e) a no-error signal signalling a situation free from line errors is generated if the sum signal (Vres) is equal to the reference signal (Vct) or is within a predetermined range (-Voffset to +Voffset) on both sides of the reference signal;
f) and, when the no-error signal does not appear,
g) a first error signal (FI) signalling a line error of the first line (A) is generated if the first differential signal (VtA) is equal to the sum signal (Vres),
h) a second error signal (FII) signalling a short-circuit between both lines is generated if both differential signals (VtA, VtB) are different from the sum signal (Vres), and
i) a third error signal (FIII) signalling a line error of the second line (B) is generated if the second differential signal (VtB) is equal to the sum signal (Vres).
The line error checking circuit of claim 1,

in which the differentiating circuit (CA, CB) thereof comprises a first differentiator in the form of a first capacitor (CA) connected into the first line (A) and a second differentiator in the form of a second capacitor (CB) connected into the second line (B).
The line error checking circuit of claim 1 or 2,

in which the reference signal source (REF) thereof comprises a reference voltage source.
The line error checking circuit of claim 3,

in which the summing circuit (SM, RA, RB, Rt) thereof comprises a resistance circuit (RA, RB, Rt) including a summing circuit node, a first resistor (RA) connected between summing circuit node (SM) and first differentiator (CA), a second resistor (RB) connected between summing circuit node (SM) and second differentiator (CB), and a third resistor (Rt) connected between summing circuit node (SM) and reference voltage source (REF).
The line error checking circuit of any of claims 1 to 4,

in which the assessment circuit thereof comprises a comparator circuit arrangement (K1 - K6) for assessing the sum signal (Vres) in relation to the reference signal (Vct) and for assessing the differential signals (VtA, BtB) in relation to the sum signal (Vres), and a logic circuit (OA, OB, OF, OT, A1 - A5, FFI - FFIII) for converting the signals delivered by the comparator
 circuit arrangement (K1 - K6) to the no-error signal and the respective error signal, respectively.
The line error checking circuit of claim 5,

in which the comparator circuit arrangement (K1 - K6) thereof comprises a first comparator circuit (K1, K2) by means of which the sum voltage (Vres) can be compared with the reference voltage (Vct).
The line error checking circuit of claim 6,

in which the first comparator circuit thereof comprises a first comparator (K1) and a second comparator (K2) each having an inverting comparator input (-), a non-inverting comparator input (+) and a comparator output, the non-inverting comparator input (+) of first comparator (K1) and the inverting comparator input (-) of second comparator (K2) being connected to the summing circuit node (SM) and the respective other comparator input being connected to a circuit node (SK) between third resistor (Rt) and reference voltage source (REF).
The line error checking circuit of claim 7,

in which a first offset voltage source (Voffset) is connected between the inverting comparator input (-) of first comparator (K1) and the reference voltage source (REF), and a second offset voltage source (Voffset) is connected between the non-inverting comparator input (+) of second comparator (K2) and the reference voltage source (REF).
The line error checking circuit of any of claims 5 to 8,

in which the comparator circuit arrangement (K1 - K6) thereof comprises a second comparator circuit (K3 - K6) for comparing the two differential signals (VtA, VtB) to the sum signal (Vres).
The line error checking circuit of claim 9,

in which the second comparator circuit thereof comprises third to sixth comparators (K3 - K6) each having an inverting comparator input (-), a non-inverting comparator input (+) and a comparator output, the non-inverting
 comparator input (+) of third comparator (K3) and the inverting comparator input (-) of fourth comparator (K4) being connected to a circuit node (PA) between first differentiator (CA) and first resistor (RA), the non-inverting comparator input (+) of fifth comparator (K5) and the inverting comparator input (-) of sixth comparator (K6) being connected to a circuit node (PB) between second differentiator (CB) and second resistor (RB) and the respective other comparator inputs of these four comparators (K3 - K6) being connected to summing circuit node (SM).
The line error checking circuit of any of claims 5 to 10,

in which the logic circuit (OA, OB, OF, OT, A1 - A5, FFI - FFIII) thereof comprises:

a first OR circuit (OF) linking the output signals of first and second comparators (K1, K2),
a second OR circuit (OA) linking the output signals of third and fourth comparator (K3, K6),
a third OR circuit (OB) linking the output signals of fifth and sixth comparators (K5, K6),
a fourth OR circuit (OT) linking the output signals of second and third OR circuit (OA, OB),
a first AND circuit (A1) linking the output signal of first and fourth OR circuits (OF, OT),
a second AND circuit (A2) linking the output signals of second OR circuit (OA), third OR circuit (OB) and first AND circuit (A1),
a third AND circuit (A3) linking the output signals of second OR circuit (OA) and first AND circuit (A1),
and a fourth AND circuit (A4) linking the output signals of third OR circuit (OB) and first AND circuit (A1).
The line error checking circuit of claim 11,

in which the logic circuit thereof comprises:

a fifth AND circuit (A5) linking the output signals of first OR circuit (OF) and fourth OR circuit (OT),
three RS flipflops (FFI - FFIII) each having a setting input (S), a resetting input (R) and an output (QI - QIII),
the setting input (S) of first flipflop (FFI) being connected to the output of fourth AND circuit (A4),
the setting input (S) of second flipflop (FFII) being connected to the output of second AND circuit (A2),
the setting input (S) of third flipflop (FFIII) being connected to the output of third AND circuit (A3),
and the resetting inputs (R) of the three flipflops (FFI - FFIII) being each connected to the output of fifth AND circuit (A5),
with the first error signal (FI) being available at the output of first flipflop (FFI), the second error signal (FII) being available at the output of second flipflop (FFII), and the third error signal (FIII) being available at the output of third flipflop (FFIII).
The line error checking circuit of any of claims 10 to 12,

comprising a bit assessment circuit (AA, AB, FF) including:

a first assessment AND circuit (AA) linking the output signals of fourth and fifth comparators (K4, K5),
a second assessment AND circuit (AB) linking the output signals of third and sixth comparators (K3, K6),
and an assessment flipflop (FF) having a setting input (S) connected to an output of the first assessment AND circuit (AA), a resetting input (R) connected to an output of the second assessment AND circuit (AB), and an assessment output (Q) from which decoded data are available.
A receiving circuit for an electric data transmission system having a first line (A) and a second line (B) for differentially transmitting binary data pulses in such a manner that a first logic value ("1") of the data pulses has a high potential (5 V) on the first line (A) and a low potential (0 V) on the second line (B) associated therewith and a second logic value ("0") of the data pulses has a low potential (0 V) on the first line (A) and a high potential (5 V) on the second line (B) associated therewith, said receiving circuit comprising:
a line error checking circuit according to any of claims 1 to 12;
a decoding circuit (KD, KA, KB) having a first decoding comparator (KD) comparing the potentials of the two lines (A, B), a second decoding comparator (KA) comparing the potential of the first line (A) to a mean, voltage (2.5 V) between the low potential (0 V) and high potential (5 V), and a third decoding comparator (KB) comparing the potential of the second line (B) to the mean potential (2.5 V);
and a multiplexer circuit (MUX) having three signal inputs (ED, EA, EB), of which a first one (ED) is connected to an output of first decoding comparator (KD), a second one (EA) is connected to an output of second decoding comparator (KA) and a third one (EB) is connected to an output of third decoding comparator (KB), and having three switching signal inputs (I I, I II, I III) of which a first one (I I) is adapted to have the first error signal (FI) applied thereto, a second one (I II) is adapted to have the second error signal (FII) applied thereto and a third one (I III) is adapted to have the third error signal (FIII) applied thereto, and having a data output (DAT) connected to the first signal input (ED) if none of the three error signals (FI - FIII) is present, connected to the second signal input (EA) if the first error signal (FI) appears at first signal input (I I), and connected to the third signal input (EB) if the second error signal (FII) appears at second switching signal input (I II) or the third error signal (FIII) appears at third switching signal input (I III).
A receiving circuit for an electric data transmission system having a first line (A) and a second line (B) for differentially transmitting binary data pulses in such a manner that a first logic value ("1") of the data pulses has a high potential (5 V) on the first line (A) and a low potential (0 V) on the second line (B) associated therewith and a second logic value ("0") of the data pulses has a low potential (0 V) on the first line (A) and a high potential (5 V) on the second line (B) associated therewith, said receiving circuit comprising:

a line error checking circuit according to claim 13, with the bit assessment circuit (AA, AN, FF) thereof constituting a first decoding means for decoding the data transmitted via the lines (A, B);
a second decoding means in the form of a first comparison means (KA) comparing the potential of the first line (A) with a mean potential (2.5 V) between the potential (0 V) and high potential (5 V);
a third decoding means in the form of a second comparison means (KB) comparing the potential of the second line (B) with the mean potential (2.5 V);
a multiplexer circuit (MUX) having three signal inputs (ED, EA, EB), of which a first one (ED) is connected to the assessment output (Q), a second one (EA) is connected to an output of the first comparison means (KA) and a third one (EB) is connected to an output of the second comparison means (KB), and having three switching signal inputs (I I, I II, I III) of which a first one (I I) is adapted to have the first error signal (FI) applied thereto, a second one (I II) is adapted to have the second error signal (FII) applied thereto and a third one (I III) is adapted to have the third error signal (FIII) applied thereto, and having a data output (DAT) connected to the first signal input (ED) if none of the three error signals (FI - FIII) is present, connected to the second signal input (EA) if the first error signal (FI) appears at first signal input (I I), and connected to the third signal input (EB) if the second error signal (FII) appears at second switching signal input (I II) or the third error signal (FIII) appears at third switching signal input (I III).
A method for line error checking in an electric data transmission system having a first line (A) and a second line (B) for differentially transmitting binary data pulses in such a manner that a first logic value ("1") of the data pulses has a high potential (5 V) on the first line (A) and a low potential (0 V) on the second line (B) associated therewith and a second logic value ("0") of the data pulses has a low potential (0 V) on the first line (A) and a high potential (5 V) on the second line (B) associated therewith,

said method comprising the following steps:

a) the signal on the first line (A) and the signal on the second line (B) are differentiated each;
b) the two differential signals (VtA, VtB) obtained by differentiating and a reference signal (Vct) are summed up;
c) a resulting sum signal (Vres) is examined with respect to its value in comparison with the reference signal (Vct);
d) it is assumed that no line error is present if the sum signal (Vres) is equal to the reference signal (Vct) or is within a predetermined range (Voffset) on both sides of the reference signal (Vct); and
e) it is assumed that a line error is present if the sum signal (Vres) differs from the reference signal (Vct) or is outside the predetermined range (Voffset) on both sides of the reference signal (Vct);
f) in the event that the sum signal (Vres) is not equal to the reference signal (Vct) or is not within the predetermined range (Voffset) on both sides of the reference signal (Vct), the two differential signals (VtA, VtB) are compared with the sum signal (Vres) and an evaluation of the comparison results is carried out, in which
g) a first error signal (FI) indicating a line error of the second line (B) is generated if the differential signal (VtA) belonging to the first line (A) is different from the sum signal (Vres) and the differential signal (VtB) belonging to the second line (B) is identical with the sum signal;
h) a second error signal (FII) indicating a short-circuit between the two lines (A, B) is generated if both differential signals (VtA, VtB) are greater or smaller than the sum signal (Vres);
i) and a third error signal (FIII) indicating a line error of the first line (A) is generated if the differential signal (VtA) belonging to the first line (A) is equal to the sum signal (Vres).
The method of claim 16, making use of the receiving circuit according to claim 15, said receiving circuit comprising receiving locations with a decoding means (Q, KA, KB) decoding the data pulses transmitted and being adapted to be switched over between decoding evaluation of the potentials on both lines (A, B) and decoding evaluation of the potential of only one of the two lines (A or B),

wherein switching to decoding evaluation of the potentials of both lines (A, B) is effected if no error signal has been detected, switching to decoding evaluation of the line potential of only the first line (A) is effected if the first error signal (FI) is detected, switching to potential evaluation of only the
 first line (A) or only the second line (B) is effected if the second error signal (FII) is detected, and switching to potential evaluation of only the second line (B) is effected if the third error signal (FIII) is detected.
</CLAIMS>
</TEXT>
</DOC>
