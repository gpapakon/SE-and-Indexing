<DOC>
<DOCNO>EP-0650615</DOCNO> 
<TEXT>
<INVENTION-TITLE>
A FAULT-TOLERANT COMPUTER SYSTEM
</INVENTION-TITLE>
<CLASSIFICATIONS>G06F1114	G06F1100	G06F1107	G06F1110	G06F1110	G06F1120	G06F1107	G06F1116	G06F1116	G06F1114	G06F1120	G06F1100	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>G06F	G06F	G06F	G06F	G06F	G06F	G06F	G06F	G06F	G06F	G06F	G06F	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>G06F11	G06F11	G06F11	G06F11	G06F11	G06F11	G06F11	G06F11	G06F11	G06F11	G06F11	G06F11	</CLASSIFICATIONS-FOURTH>
<ABSTRACT>
A fault-tolerant computer system comprises a main data bus (10) having a plurality of interface slots (18) for interconnecting a plurality of computer sub-systems (12, 14, 16...), one of which is a central processor sub-system (12) having three processor modules (20, 22, 24) operating in parallel in a substantially synchronised manner. One of the processor modules acts as master reading data from and writing data to the main data bus (10): each processor module compares data on the main data bus with data on a local bus of the module to determine any inconsistency indicating a hardware fault, and generates outputs reflecting the probability that a particular module is the source of the fault, which outputs are transmitted to the other modules over a synchronisation bus (26).
</ABSTRACT>
<APPLICANTS>
<APPLICANT-NAME>
SUN MICROSYSTEMS INC
</APPLICANT-NAME>
<APPLICANT-NAME>
SUN MICROSYSTEMS, INC.
</APPLICANT-NAME>
</APPLICANTS>
<INVENTORS>
<INVENTOR-NAME>
LIDDELL DAVID CHARLES
</INVENTOR-NAME>
<INVENTOR-NAME>
WILLIAMS EMRYS JOHN
</INVENTOR-NAME>
<INVENTOR-NAME>
LIDDELL, DAVID CHARLES
</INVENTOR-NAME>
<INVENTOR-NAME>
WILLIAMS, EMRYS JOHN
</INVENTOR-NAME>
</INVENTORS>
<DESCRIPTION>
This invention relates to a fault-tolerant computer
system.Traditional approaches to system reliability attempt to
prevent the occurrence of faults through improved design
methodologies, strict quality control, and various other
measures designed to shield system components from external
environmental effects (e.g., hardening, radiation shielding).
Fault tolerance methodologies assume that system faults will
occur and attempt to design systems which will continue to
operate in the presence of such faults. In other words, fault-tolerant
systems are designed to tolerate undesired changes in
their internal structure or their external environment without
resulting in system failure. Fault-tolerant systems utilize
a variety of schemes to achieve this goal. Once a fault is
detected, various combinations of structural and informational
redundancy, make it possible to mask it (e.g., through
replication of system elements), or correct it (e.g., by
dynamic system reconfiguration or some other recovery process).
By combining such fault tolerance techniques with traditional
fault prevention techniques, even greater increases in overall
system reliability may be realized.The document ELEKTRONIK, Vol. 39, No. 24, 23 November
1990, pages 54-60 at Figures 6 and 7 discloses a fault-tolerant
computer system which comprises a main data bus and a plurality
of processor modules, each including a central processing unit,
a local data bus and a data transfer interface interconnecting
the respective local data bus to the main data bus. Each data
transfer interface includes a comparator which compares data
present on the respective local data bus with data present on
the main data bus and, upon detecting a mismatch, providing an
indicating signal for controlling the processor modules. The
system further comprises a program memory storing instructions
for the central processing units and main read/write data
memory: these memories are connected to the main data bus.
The system is arranged so that the plurality of processor
modules operate substantially in synchronism with each other,
with any selected one of the processor modules acting as master
which transfers data to and from the main data bus, and the 
other processor module acting as checkers.In the system disclosed in the ELEKTRONIK article, the
program memory and main data memory are connected to the main
data bus and are shared by the processor modules. The problem
arises that faults may occur which corrupt the information held
in these memories: the ELEKTRONIK article
</DESCRIPTION>
<CLAIMS>
A fault-tolerant computer system, comprising a main
data bus (10),
 a plurality of processor modules (20,22,24) each
including a central processing unit (38), a local data bus

(28,30) and a data transfer interface (34) interconnecting the
respective local data bus (28,30) to the main data bus (10),

each data transfer interface comprising comparator means (106)
arranged to compare data present on the respective local data

bus (28,30) with data present on the main data bus (10) and,
upon detecting a mismatch, to provide an indicating signal for

controlling the processor modules (20,22,24), the system
further comprising memory means forming a program memory

storing instructions for the central processing units (38) and
main read/write data memory, and arranged so that the plurality

of processor modules (20,22,24) operate substantially in
synchronism with each other and with any selected one of the

processor modules acting as a master which transfers data to
and from said main data bus (10), characterised in that said

memory means comprises a plurality of program memories (42),
one in each said processor module, said program memories (42)

holding identical instructions and each being connected
directly to the local bus (28,30) of the respective processor

module, and in that said main read/write data memory comprises
a plurality of main memories (40), one in each said processor

module, said main memories (40) normally holding identical data
and each being connected directly to the local bus (28,30) of

the respective processor module.
A fault-tolerant computer system as claimed in claim 1,
characterised in that each processor module (20,22,24) further

comprises a first plurality of hardware elements connected to
its said local data bus, said comparator means (106) comparing

data on said main data bus (10) with data on said local data
bus and generating a plurality of state output signals in

response thereto.
A fault tolerant computer system as claimed in claim 2,
characterised in that each said processor module comprises a 

parity checking circuit (106) which is part of said data
transfer interface (34), said parity checking circuit (106)

monitoring data lines in said main data bus (10) and generating
a parity output signal (142) in response thereto, said parity

output signal (142) being used as an input signal to said
comparator means (106).
A fault-tolerant computer system as claimed in claim 3,
characterised in that the local data bus of each processor

module comprises a private bus (28) to which the central
processing unit (38) is connected, and a shared bus (30)

connected to said private bus (28) through a second bus
interface (32), a second plurality of hardware elements being

connected to said private data bus, and a control logic circuit
(36) being connected to and controlling said first and second

bus interfaces (34,32), said control logic circuit (36)
receiving as input signals said state output signals from every

other processor module and generating control logic output
signals in response thereto wherein said control logic output

signals indicate to said processor module whether a fault has
occurred.
A fault-tolerant computer system as claimed in claim 4,
characterised in that each said central processing unit (38)

comprises a 68040 integrated circuit.
A fault-tolerant computer system as claimed in any one
of claims 2 to 5, characterised in that said first plurality

of hardware elements comprises a read/write memory (46), an
asynchronous receiver/transmitter circuit (48), a timer circuit

(50), a plurality of control and status registers (52), and a
further read/write memory (54).
A fault-tolerant computer system as claimed in any one
of claims 4 to 6, characterised in that said second plurality

of hardware elements comprises said main read/write memory
(40), said read-only memory (42) and a yet further read/write

memory (44). 
A fault-tolerant computer system as claimed in claim 7,
characterised in that said yet further read/write memory (44)

is arranged for storing information corresponding to memory
locations in said main read/write memory (40) to which data has

been written, said yet further read/write memory (44)
facilitating copying of data from one processor module to

another.
A fault-tolerant computer system as claimed in claim 6,
characterised in that said further read/write memory (54) is

arranged to store information corresponding to interface slots
(18) of said main data bus (10) having defective or absent

computer sub-systems.
A fault-tolerant computer system as claimed in claim 6,
characterised in that said asynchronous receiver/transmitter

circuit comprises a 2692 integrated circuit (48) providing an
RS-232 interface.
A fault-tolerant computer system as claimed in claim 6,
characterised in that said timer circuit (50) comprises a 9513

integrated circuit.
A fault-tolerant computer system as claimed in claim 1,
characterised in that said main data bus (10) includes a line

(70) for carrying a data-transfer-acknowledgement signal from
data-handling hardware means of the system to the processor

module acting as master, said processor module being arranged
to terminate a data transfer attempt (a) upon receipt of a

data-transfer-acknowledgement signal, or (b) if it receives no
data-transfer-acknowledgement signal within a predetermined

interval, or (c) if its associated memory contains a
predetermined fault indication in respect of the hardware means

involved in the data transfer attempt.
A fault-tolerant computer system as claimed in claim 1,
characterised in that each processor module comprises an

address translation means (39) operative between the processor
module and its associated main memory (40), and a write-record 

memory (44) which records write-accesses to the main memory
(40) on the basis of the translated addresses provided by the

address translation means (39).
A fault-tolerant computer system as claimed in claim 1,
characterised in that the system is arranged to copy the

contents of the main data memory (40) of one processor module
to the main data memory (40) of a second processor module, said

one processor module having a write-record memory (44) which
records any write-accesses to its main data memory (40) whilst

copying is in progress, and the system being further arranged
then to copy data from those addresses of the main data memory

(40) for which the write-record memory (44) has recorded a
write access.
A fault-tolerant computer system as claimed in claim 1,
characterised in that the system is arranged to trigger the

processor modules simultaneously into a reset condition, prior
to which each processor module records in its main memory (40)

the status or contents of a plurality of clock-driven elements
of its hardware, each processor module being arranged upon

reset to restore the status or contents of said elements from
its memory.
A fault-tolerant computer system as claimed in claim 1,
characterised in that the system further comprises a clock

signal source (100), a clock signal line or respective clock
signal lines (184,186,188) connecting the clock signal source

to said processor modules and control lines (178,180,182)
connecting each processor module to the other processor

modules, each processor module, when powered up, applying a
signal to its said control line so that its clock signal line

has clock signals applied thereto by one said processor module.
A fault-tolerant computer system as claimed in claim 1,
charac
terised in that two logic lines (266,268) interconnect
the plurality of processor modules, the arrangement being such

that the processor module acting as master applies logic
signals to said logic lines preventing any of the other 

processor modules from acting as master.
A fault-tolerant computer system as claimed in claim 1,
characterised in that the system is arranged such that in the

event of an error condition affecting all processor modules
(20,22,24), each processor module carries out a self-assessment

to determine the probability that it has a fault and calculates
a time delay in accordance with that probability, at the expiry

of which time delay the processor module attempts to assume the
role of master.
A fault-tolerant computer system as claimed in claim 1,
characterised in that each processor module (20,22,24) is

removably received by a host apparatus, the module having an
electrical connector (302,304) which mates with power supply

lines of the apparatus when the module is installed in the
apparatus, the apparatus further comprising a mechanical

locking means (318,320) which is actuatable to a condition in
which it locks the module in position and enables a power

control to the module.
</CLAIMS>
</TEXT>
</DOC>
