<DOC>
<DOCNO>EP-0637004</DOCNO> 
<TEXT>
<INVENTION-TITLE>
Method for recording usage data of card operated devices
</INVENTION-TITLE>
<CLASSIFICATIONS>G07F708	G07F902	G07F902	G07F708	G07F710	G07F908	G07F710	G07F908	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>G07F	G07F	G07F	G07F	G07F	G07F	G07F	G07F	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>G07F7	G07F9	G07F9	G07F7	G07F7	G07F9	G07F7	G07F9	</CLASSIFICATIONS-FOURTH>
<ABSTRACT>
Method for recording usage data of a card operated device (2), such as a 
public telephone set or a vending machine, the method comprising the storage 

of the usage data in a storage unit (3) associated with the device. The usage 
data being stored in the storage unit have first been transferred from the 

device (2) to the card (1) and subsequently from the card (1) to the device 
(2). The security of the data transfers may be enhanced by cryptographic 

techniques. Preferably, transmission of the usage data from the card (1) to the 
storage unit (3) takes place during a verification procedure by means of which 

the authenticity of the card is checked. 

</ABSTRACT>
<APPLICANTS>
<APPLICANT-NAME>
NEDERLAND PTT
</APPLICANT-NAME>
<APPLICANT-NAME>
KONINKLIJKE KPN N.V.
</APPLICANT-NAME>
</APPLICANTS>
<INVENTORS>
<INVENTOR-NAME>
VAN DE PAVERT HENDRICUS JOHANN
</INVENTOR-NAME>
<INVENTOR-NAME>
VAN DE PAVERT, HENDRICUS JOHANNES WILHELMUS MARIA
</INVENTOR-NAME>
</INVENTORS>
<DESCRIPTION>
The invention relates to a method for recording usage data of a card 
operated device, the method comprising storing the usage data in a storage 
unit associated with the device. More in particular, the invention relates to the 
secure storage of cost data in counters of public telephone sets of the type 
where the caller pays by means of a card, such as a so-called chip card. The 
invention also relates to recording usage data in general and cost data in particular 
of (vending) machines where the purchaser pays by means of a card, 
such as vending machines for sweets or for soft drinks, certain types of 
parking meters and stamp vending machines. The term "card" should in this 
context be taken as referring to any type of card (or equivalent of a card) 
which enables the user to make use of the device in question. It is known in practice to equip telephone sets for public use with a payment 
mechanism which settles payment by means of a card (phone card) such as a 
magnetic card or a chip card. On the card, a balance is stored in a magnetic 
strip or in a semiconductor memory. With each telephone conversation, the 
balance stored on the card is lowered, for example with each metering pulse 
(billing pulse) of the telephone network or of the telephone set in question. 
Adjustment of the balance takes place, for a card having a semiconductor 
memory, by continually supplying to the card a pulse which causes a 
reduction of the balance, for example by subtracting an amount from a stored 
value or by lowering a counter content of an electronic counter. The number of telephone calls, the number of metering pulses and/or the 
amount of call charges can be recorded not only in the card, but also by a 
counter (or a different-type storage unit) associated with the telephone set.  
 
It is possible for such a counter to be present in the telephone set itself, but 
also to be accommodated in a separate counting or recording device which is 
common to a number of telephone sets but linked to the telephone sets in 
question. Incidentally, a count of the charges is also kept in the telephone 
exchange to which the telephone set in question is connected, but generally 
for other purposes. A counter, associated with a telephone set, of the type 
mentioned in the above may be used, for example, for statistical purposes or 
for checking card balances, but can also be used for settling call charges. Such settling of charges may be carried out for various reasons. Firstly, it 
may involve a settling of charges with the
</DESCRIPTION>
<CLAIMS>
Method of securely recording cost data of a transaction of a card 
operated device, the device (2) comprising a device memory (30) for 

storing cost data, a card (1) comprising a card memory (10) for 
storing a card balance, the method comprising the steps of: 


at the beginning of a transaction, the card (1) transferring an 
initial card balance to the device (2), the device temporarily 

storing the initial balance, 
during the transaction, sending at least one debiting 
instruction from the device to the card (1), the card decrementing the card 

balance accordingly, 
at the end of the transaction, the card (1) transferring a final 
card balance to the device (2), the device determining the 

difference between the final balance and the initial balance and 
storing said difference in the device memory (30). 
Method according to claim 1, wherein the step of transferring a 
card balance further comprises a verification of the authenticity of 

the card (1). 
Method according to claim 1 or 2, wherein the card balances are 
transferred to the device (2) in a cryptographically protected form. 
Method according to any of the preceding claims, wherein during 
the transaction the card (1) transfers at least one intermediate 

balance to the device, said intermediate balance being temporarily 
stored for use as final balance in case the transaction is prematurely 

terminated. 
Method according to any of the preceding claims, wherein the 
device memory (30) is accomodated in a protected module (3) in the 

device (2). 
Method according to any of the preceding claims, wherein the 
difference between the final balance and the initial balance is stored 

in the device memory (30) by incrementing a counter. 
Method according to claim 6, wherein said counter is non-resettable. 
Method according to claim 6 or 7, wherein said counter is 
periodically read out by an external apparatus. 
Method according to claim 8, wherein the device memory (30) 
stores the value of said counter at the most recent reading out 

thereof. 
</CLAIMS>
</TEXT>
</DOC>
