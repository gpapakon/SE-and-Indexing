<DOC>
<DOCNO>EP-0615115</DOCNO> 
<TEXT>
<INVENTION-TITLE>
Grouping of spectral bands for data acquisition in a spectrophotometer
</INVENTION-TITLE>
<CLASSIFICATIONS>G01J328	G01J328	G01J336	G01J330	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>G01J	G01J	G01J	G01J	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>G01J3	G01J3	G01J3	G01J3	</CLASSIFICATIONS-FOURTH>
<ABSTRACT>
Spectral bands are grouped for data acquisition in a 
spectrophotometer with a charge-coupled detector having a 

plurality of pixels. Preliminary data is generated on time-integrated 
radiation to the pixels for a sample. Maximum 

permitted exposure times for the pixels are calculated from the 
data and a predetermined maximum exposure. The maximum times are 

grouped so that for each group the ratio of the highest to the 
lowest maximum times is less than 100. A group run time is 

established for each group nominally less than the lowest maximum 
time in the group. Subgroups are created and ordered so that 

accumulated readout times for the pixels are less than wait times 
established to prevent readout contamination from subsequent 

charge buildup. The spectrophotometer is further operated on the 
sample for the run time of each group and subgroup to generate 

spectral data. 

</ABSTRACT>
<APPLICANTS>
<APPLICANT-NAME>
PERKIN ELMER CORP
</APPLICANT-NAME>
<APPLICANT-NAME>
THE PERKIN-ELMER CORPORATION
</APPLICANT-NAME>
</APPLICANTS>
<INVENTORS>
<INVENTOR-NAME>
CROCKETT MICHAEL I
</INVENTOR-NAME>
<INVENTOR-NAME>
LUNDBERG PETER L
</INVENTOR-NAME>
<INVENTOR-NAME>
TRACY DAVID H
</INVENTOR-NAME>
<INVENTOR-NAME>
CROCKETT, MICHAEL I.
</INVENTOR-NAME>
<INVENTOR-NAME>
LUNDBERG, PETER L.
</INVENTOR-NAME>
<INVENTOR-NAME>
TRACY, DAVID H.
</INVENTOR-NAME>
</INVENTORS>
<DESCRIPTION>
This invention relates to spectrophotometers, and particularly to
means and apparatus for organizing spectral bands for data
acquision in a spectrophotometer.Various types of optical spectrometers are in use for such
purposes as atomic emission spectroscopy, atomic absorption
spectroscopy and astronomy. A complete system generally consists
of a source of radiation, a spectrometer for separating and
detecting individual spectral components, and a data station for
processing the information from the spectrometer. The radiation
source, for example, may be a system for injecting a test sample
into an inductively coupled plasma where the atomic species in
the sample are excited to radiate characteristic atomic emission.
As another example, a sample is evaporated in a graphite furnance
where the gaseous sample absorbs certain frequencies of the
incident radiation to provide atomic absorption lines.
Similarly, astronomical sources provide atomic emission and
absorption lines for spectrographic analysis.Spectrometers generally are based on dispersion of radiation by
diffraction gratings, prisms and combinations of the two.
Electronic detection devices are taking over from photographic
film for accurate and timely measurements of the emission or
absorption lines.There are several types of detectors used for reading the
spectrum. The conventional type has been one or more
photomultiplier tubes or devices which receive directed radiation
to produce free electrons which are multiplied in number to
provide a real-time signal output proportional to the radiation
intensity. A newer type is based on the principles of charge 
generation upon the incidence of radiation on a surface such as
silicon. To provide resolution of spectral lines (or, more
broadly, image resolution) such a surface on a semi-conductor
chip is divided into pixel areas. The accumulation and handling
of signals from the pixels is effected through the transfer of
charges in the chip from the pixels. One type is a charge
coupled device (CCD). A related approach for such detectors is
charge injection device (CID) technology.A particular form of solid state detector is disclosed in U.S.
patent No. 4,820,048 (Barnard) of the present assignee, and U.S.
patent No. 4,940,325 (Becker-Ross et al). A solid state chip has
on the front surface thereof a two dimensional array of
photosensitive pixel sensors receptive of radiation of selected
spectral lines and proximate background radiation. The pixels
are arranged in a plurality of subarrays with each subarray
con
</DESCRIPTION>
<CLAIMS>
A method of grouping spectral bands (20) for data acquisition in a
spectrophotometer (16) that includes a detector (18) with a plurality of

photosensitive sensors (32) which are arranged at specific zones (30), for
reception of time-integrated radiation representative of spectral intensities in

selected spectral bands (20) associated with corresponding sensors (32),
comprising the steps:


predetermining a maximum amount (34) of time-integrated radiation permitted for
each corresponding sensor (32);
initially operating the spectrophotometer on a selected radiation source (12) for a
predetermined initial time (38) sufficient for the sensors (32) to collect time-integrated

radiation so as to generate preliminary data representative of time-integrated
radiation for all of the selected bands;
establishing from the preliminary data maximum exposure times (44) permitted for
corresponding sensors (32), so that each maximum exposure time effects the

maximum amount of time-integrated radiation for the corresponding sensor;
grouping the maximum exposure times (46) for the sensors (32) into at least one
group, each group including a highest maximum exposure time (102) and a

lowest maximum exposure time (90), wherein the ration of the highest to the
lowest is equal to or less than a predetermined range factor;
establishing a group run time (46) for each group equal to or nominally less than
the lowest maximum exposure time (90-100) in the group; and
further operating (54) the spectrophotometer (16) on a radiation source (12)
substantially the same as the selected radiation source, by operating on each

group for the group run time to generate functional data representative of spectral
intensities for associated spectral bands (20).
A method of grouping spectral bands (20) for data acquisition in a
spectrophotometer (10) that includes a detector (18) with a plurality of

photosensitive sensors (32) which are arranged at specific zones (30) for
reception of time-integrated radiation representative of spectral intensities in

selected spectral bands (20) associated with the corresponding sensors (32),
characterized in that
each sensor (32) being operable by storage of radiation-induced charges during a
run time, and by subsequent readout of the charges during a readout time

characteristic of the sensor, with storage of further such charges occurring during
the readout time such that spillover of the further charges occurs after a spillover

level characteristic of the sensor is reached, the method comprising:
initially operating (37) the spectrophotometer on a selected radiation source (12)
for a predetermined initial time (38) sufficient for the sensors (32) to collect time-integrated

radiation so as to generate preliminary data representative of time-integrated
radiation for all of the selected bands;
establishing wait times (120) for corresponding sensors from the preliminary data,
so that an exposure from the selected source for each wait time effects a

predetermined level of the time-integrated radiation that is less than the spillover
level;
ordering (120-150) the selected spectral bands into at least one group such that
each successive spectral band in each group has an accumulated readout time

from all preceding spectral bands in the group, the accumulated readout time
being less than the wait time (128) for the spectral band; and
further operating (54) the spectrophotometer (16) on a radiation source (12)
substantially the same as the selected radiation source, so as to expose the

selected sensors simultaneously for a selected run time for each group and, while
continuing such exposure, to immediately read out the associated sensors 

sequentially according to the ordering of the selected spectral bands in the group,
to thereby generate functional data representative of spectral intensities for

associated spectral bands (20).
The method of claim 1 or 2

wherein the detector (18) is a solid-state photodetector comprising a two-dimensional
array of photosensitiv
e sensors (32) arranged at specific zones on a
front surface.
The method of claim 3 wherein the sensors (32) are positioned at projection
locations on the surface so as to be receptive of selected spectral lines (20), the

sensors constituting substantially less than the surface.
The method of claim 4 wherein the detector (18) is a charge coupled device.
The method of claim 1 wherein the step (44) of establishing the maximum
exposure times comprises calculating the maximum exposure time T
M
 for each
corresponding sensor (32) according to a formula 
T
M
 = T
i
 * MA/PD
, where T
i
 is
the initial time, MA is the maximum amount of the time-integrated radiation for the

corresponding sensor (32), and PD is the preliminary data for the corresponding
sensor (32).
The method of claim 1 wherein the sensors (32) further have a saturation limit of
time-integrated radiation, and the method further comprises determining the

maximum amount of the time-integrated radiation by determining an optimal
fraction of the saturation limit (34), and multiplying the saturation limit for each

sensor (32) by the optimal fraction, the optimal fraction being the same for all
sensors.
The method of claim 7 wherein the initial time (38) is sufficient for the sensors
(32) to collect time-integrated radiation generally between a minimum operational

limit and the saturation limit.
The method of claim 1 wherein the functional data is obtained simultaneously for
the spectral bands (20) associated with each group. 
The method of claim 1 wherein the maximum exposure times for all groups
include an overall highest exposure time and an overall lowest exposure time,

and the step (46) of establishing each group run time comprises calculating a
subfactor (102) as being a selected fraction of the range factor, establishing a

maximum group run time as being nominally equal to the highest exposure time
divided by the subfactor (102), and establishing a minimum group run time as

being equal to or nominally less than the lowest exposure time (90-100), and the
step of grouping comprises assigning the selected spectral bands (20) to group

run time (118), by assigning all such bands with maximum exposure times greater
than the maximum group run time thereto, and assigning remaining such bands to

the minimum group run time.
The method of claim 10 wherein the step (46) of establishing each group run time
further comprises installing a predetermined list of allowed group run times (88),

equating the maximum group run time to an allowed group run time that is
nominally equal to the highest exposure time divided by the subfactor (102-116),

and equating the minimum group run time to an allowed group run time that is
next smaller than the lowest exposure time (90-100).
The method of claim 11 wherein each allowed group run time above a smallest
such time is approximately a factor of two larger than its next smaller such time.
A method of claim 1 or 12 wherein the range factor is 100.
The method of claim 10 wherein the step (46) of establishing each group run time
further comprises selecting at least one further group run time between the

maximum group run time and the minimum group run time so that each ratio of
each group run time to a next shorter group run time is less than the range factor,

and the step of grouping further comprises assigning all remaining such bands so
that all maximum exposure times for a group are longer than the group run time

and shorter than a next larger group run time.
The method of claim 14 wherein the step of establishing each group run time
further comprises installing a predetermined list of allowed group run times (88),

equating the maximum group run time to an allowed group run time that is 
nominally equal to the highest exposure time divided by the subfactor (102-116),

equating the minimum group run time to an allowed group run time that is next
smaller than the lowest exposure time (90-100), and equating each further group

run time to another allowed group run time.
The method of claim 1 wherein each sensor (32) is operable by storage of
radiation-induced charges during the group run time, and by subsequent readout

of the charges during a readout time characteristic of the sensor (32), with
storage of further such charges occurring during the readout time such that

spillover of the further charges occurs after a spillover level characteristic of the
sensor is reached, and the method further comprises, prior to the step of further

operating, and for the selected spectral bands (20) in a selected group:

establishing wait times (120) for corresponding sensors from the preliminary data,
so that an exposure from the selected source for each wait time effects a

predetermined level of the time-integrated radiation that is less than the spillover
level;
ordering (48) the selected spectral bands of the group into at least one subgroup
such that each successive spectral band in each subgroup has an accumulated

readout time from all preceding spectral bands in the subgroup, the accumulated
readout time being less than the wait time (128) for the spectral band (20); and
affecting the step of further operating (54) the spectrophotometer for the selected
group by operating the spectrometer for each subgroup so as to expose

associated sensors simultaneously for the group run time and, while continuing
such exposure, to immediately read out the associated sensors sequentially

according to the ordering of the spectral bands in the subgroup, to thereby
generate associated functional data.
The method of claim 16 wherein the sensors (32) further have a saturation limit of
time-integrated radiation, and the method further comprises determining the

maximum amount of the time-integrated radiation by determining an optimal
fraction of the saturation limit, and multiplying the saturation limit for each sensor

(32) by the optimal fraction, the optimal fraction being the same for all sensors, 
such that the predetermined level for each sensor equals the spillover level for

the sensor multiplied by the optimal fraction.
The method of claim 2 or 16 wherein the step of establishing wait times
comprises calculating each wait time T
w
 according to a formula 
T
w
 = T
i
 * PL/PD
,
where T
i
 is the initial time, PL is a predetermined level of the time-integrated
radiation for the corresponding sensor (32) less than the spillover level, and PD is

the preliminary data (38) for the corresponding sensor.
The method of claim 2 wherein the predetermined level for each sensor equals
the spillover level for the sensor multiplied by a predetermined optimal fraction of

the spillover level, the optimal fraction being the same for all sensors.
A spectrometric apparatus (10) comprising a spectral dispersion system (16, 18)
receptive of radiation for effecting spectral bands therefrom, a detector (18) with a

plurality of photosensitive sensors (32) which are arranged at specific zones (30)
for reception of time-integrated radiation 
representative of spectral intensities in
selected spectral bands associated with corresponding sensors, a data station

(22) receptive of signal data from the detector (18) representative of the time-integrated
radiation, and program means in the data station (22) for grouping the

selected spectral bands (20) for data acquisition,
characterized in that
the program means including stored predetermined maximum amounts (34) of the
time-integrated radiation permitted for each corresponding sensor, wherein:
the apparatus (10) further comprises means (37) for initially operating the
spectrophotometer for a predetermined initial time sufficient for the sensors to

collect time-integrated radiation so as to generate preliminary data representative
of time-integrated radiation for all of the selected bands;
the program means comprises:

means for establishing from the preliminary data maximum exposure times
(44) permitted for corresponding sensors, so that each maximum exposure 

time effects the maximum amount of time-integrated radiation for the
corresponding sensor;
means for grouping (48) the maximum exposures for the sensors into at
least one group, each group including a highest maximum exposure time

and a lowest maximum exposure time, wherein the ratio of the highest to
the lowest is equal to or less than a predetermined range factor; and
means (90-116) for establishing a group run time for each group equal to
or nominally less than the lowest maximum exposure time in the group;

and
the apparatus further comprises means for further operating (54) the
spectrophotometer on each group for the group run time to generate functional

data representative of spectral intensities for associated spectral bands (20).
The apparatus of claim 20 wherein the means for establishing the maximum
exposure times (44) comprises means for calculating the maximum exposure time

T
M
 for each corresponding sensor (32) according to a formula 
T
M
 = T
i
 * MA/PD
,
where T
i
 is the initial time, MA is the maximum amount of the time-integrated
radiation for the corresponding sensor, and PD is the preliminary data for the

corresponding sensor.
The apparatus of claim 20 wherein the functional data is obtained simultaneously
for the spectral bands (20) associated with each group.
The apparatus of claim 20 wherein the maximum exposure times for all groups
include an overall highest maximum exposure time and an overall lowest

maximum exposure time, and the means for establishing each group run time
comprises means for calculating a subfactor (102) as being a selected fraction of

the range factor, means for establishing a maximum group run time as being
nominally equal to the highest exposure time divided by the subfactor, and means

(90-100) for establishing a minimum group run time as being equal to or nominally
less than the lowest maximum exposure time, and the means for grouping (48)

comprises means for assigning the selected spectral bands to group run times, by
assigning all such bands with maximum exposure times greater than the 

maximum group run time thereto, and assigning remaining such bands to the
minimum group run time.
The apparatus of claim 23 wherein the means (46) for establishing each group
run time further comprises means (88) for installing a predetermined list of

allowed group run times, means for equating the maximum group run time to an
allowed group run time that is nominally equal to the highest exposure time

divided by the subfactor, and means (90-100) for equating the minimum group
run time to an allowed group run time that is next smaller than the lowest

exposure time.
The apparatus of claim 23 wherein each allowed group run time above a smallest
such time is approximately a factor of two larger than its next smaller such time.
The apparatus of claim 23 wherein the means (46) for establishing each group
run time further comprises means for selecting at least one further group run time

between the maximum group run time and the minimum group run time so that
each ratio of each group run time to a next shorter group run time is less than the

range factor, and the means for grouping further comprises means for assigning
all remaining such bands so that all maximum exposure times for a group are

longer than the group run time and shorter than a next larger group run time.
The apparatus of claim 26 wherein the means (46) for establishing each group
run time further comprises means for installing a predetermined list of allowed

group run times (88), means for equating the maximum group run time to an
allowed group run time that is nominally equal to the highest exposure time

divided by the subfactor, means for equating the minimum group run time to an
allowed group run time that is next smaller than the lowest exposure time, and

means for equating each further group run time to another allowed group run
time.
The apparatus of claim 20 wherein each sensor (32) is operable by storage of
radiation-induced charges during the group run time, and by subsequent readout

of the charges during a readout time characteristic of the sensor, with storage of
further such charges occurring during the readout time such that spillover of the 

further charges occurs after a spillover time characteristic of the sensor (32) is
reached, and wherein:


the program means further comprises, prior to further operating, and for the
selected spectral bands in a selected group, means (120) for establishing wait

times for corresponding sensors (32) from the preliminary data, so that an
exposure from the selected source for each wait time effects a predetermined

level of the time-integrated radiation that is less than the spillover level, and
means (124-149) for ordering the selected spectral bands of the group into at

least one subgroup such that each successive spectral band in each subgroup
has an accumulated readout time from all preceding spectral bands in the

subgroup, the accumulated readout time being less than the wait time for the
spectral band; and
the means (54) for further operating comprises means for operating the
spectrometer for each subgroup so as to expose associated sensors

simultaneously for the group run time and, while and continuing such exposure, to
immediately read out the associated sensors sequentially according to the

ordering of the spectral bands in the subgroup, to thereby generate associated
functional data.
The apparatus of claim 28 wherein the sensors (32) further have a saturation limit
of time-integrated radiation, and the program means further comprises means for

determining the maximum amount of the time-integrated radiation by determining
an optimal fraction of the saturation limit, and means for multiplying the saturation

limit for each sensor by the optimal fraction, the optimal fraction being the same
for all sensors (32), such that the predetermined level for each sensor (32) equals

the spillover level for the sensor (32) multiplied by the optimal fraction.
A spectrometric apparatus (10) comprising a spectral dispersion system (16, 18)
receptive of radiation for effecting spectral bands therefrom, a detector (18) with a

plurality of photosensitive sensors (38) which are arranged at specific zones (30)
for reception of time-integrated 
radiation representative of spectral intensities in
selected spectral bands associated with corresponding sensors, a data station

(22) receptive of signal data from the detector (18) representative of the time-integrated 
radiation, and program means in the data station (22) for grouping the

selected spectral bands (20) for data acquisition,
characterized in that
each sensor (32) being operable by storage of radiation-induced charges during
the group run time, and by subsequent readout of the charges during a readout

time characteristic of the sensor (32), with storage of further such charges
occurring during the readout time such that spillover of the further charges occurs

after a spillover time characteristic of the sensor, wherein:
the apparatus further comprises mean for initially (37) operating the
spectrophotometer (10) for a predetermined initial time sufficient for the sensors

to collect time-integrated radiation so as to generate preliminary data
representative of time-integrated radiation for all of the selected bands;
the program means comprises means for establishing wait times (120) for
corresponding sensors from the preliminary data, so that an exposure from the

selected source for each wait time effects a predetermined level of the time-integrated
radiation that is less than the spillover level, and means (124-149) for

ordering the selected spectral bands into at least one group such that each
successive spectral band in each group has an accumulated readout time from all

preceding spectral bands in the group, the accumulated readout time being less
than the wait time for the spectral band; and
the apparatus (10) further comprises means (54) for operating the spectrometer
for a selected run time for each group so as to expose the selected sensors

simultaneously for the selected run time for each group and, while continuing
such exposure, to immediately read out the associated sensors sequentially

according to the ordering of the spectral bands in the group, to thereby generate
functional data representative of spectral intensities for associated spectral

bands.
The apparatus of claim 30 wherein the predetermined level for each sensor
equals the spillover level for the sensor multiplied by a predetermined optimal

fraction of the spillover level, the optimal fraction being the same for all sensors. 
The apparatus of claim 28 or 30 wherein the means for establishing wait times
(120) comprises means for calculating each wait time T
w
 according to a formula

T
w
 = T
i
 * PL/PD
, where T
i
 is the initial time, PL is a predetermined level of the
time-integrated radiation for the corresponding sensor less than the spillover

level, an PD is the preliminary data for the corresponding sensor.
The apparatus of claim 20 or 30 wherein the detector (18) is a solid-state
photodetector comprising a two-dimensional array of sensors (32) on a front

surface, the sensors are arranged at specific zones (30).
The apparatus of claim 33 wherein the sensors (32) are positioned at projection
locations (30) on the surface so as to be receptive of selected spectral lines, the

sensors constituting substantially less than the surface.
The apparatus of claim 34 wherein the detector (18) is a charge coupled device.
</CLAIMS>
</TEXT>
</DOC>
