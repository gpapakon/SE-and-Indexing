<DOC>
<DOCNO>EP-0644475</DOCNO> 
<TEXT>
<INVENTION-TITLE>
Apparatus and method for controlling a peripheral bus clock signal
</INVENTION-TITLE>
<CLASSIFICATIONS>G06F13364	G06F104	G06F1336	G06F132	G06F104	G06F132	G06F1342	G06F1342	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>G06F	G06F	G06F	G06F	G06F	G06F	G06F	G06F	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>G06F13	G06F1	G06F13	G06F1	G06F1	G06F1	G06F13	G06F13	</CLASSIFICATIONS-FOURTH>
<ABSTRACT>
A system accommodates a power conservation technique wherein 
a peripheral bus clock signal may be stopped (or slowed) in 

response to, for example, a power management unit. Prior to 
stopping the peripheral bus clock signal, an indicator signal is 

generated at a clock request line by a clock control circuit. If 
a slave device continues to require the peripheral bus clock 

signal, the slave device responsively generates a clock request 
signal. The clock control circuit receives the clock request 

signal and accordingly prevents the peripheral bus clock signal 
from stopping. If an alternate bus master requires mastership of 

the peripheral bus when the peripheral bus clock signal is 
stopped, the alternate bus master may be configured to assert a 

clock request signal for re-starting the peripheral bus clock. 
The clock request signal is broadcasted on the peripheral bus and 

is accordingly received by a clock control circuit. The clock 
control circuit responsively causes the re-starting of the 

peripheral bus clock signal. Subsequently, the alternate bus 
master can generate a bus request signal that is synchronous to 

the peripheral bus clock signal to thereby obtain a grant signal 
from a bus arbiter unit. The system may further be configured to 

achieve backwards compatibility with conventional alternate bus 
masters that are incapable of internally generating a bus request 

signal. 

</ABSTRACT>
<APPLICANTS>
<APPLICANT-NAME>
ADVANCED MICRO DEVICES INC
</APPLICANT-NAME>
<APPLICANT-NAME>
ADVANCED MICRO DEVICES INC.
</APPLICANT-NAME>
</APPLICANTS>
<INVENTORS>
<INVENTOR-NAME>
GEPHARDT DOUGLAS D
</INVENTOR-NAME>
<INVENTOR-NAME>
HORTON KELLY M
</INVENTOR-NAME>
<INVENTOR-NAME>
MACDONALD JAMES R
</INVENTOR-NAME>
<INVENTOR-NAME>
O'BRIEN RITA
</INVENTOR-NAME>
<INVENTOR-NAME>
GEPHARDT, DOUGLAS D.
</INVENTOR-NAME>
<INVENTOR-NAME>
HORTON, KELLY M.
</INVENTOR-NAME>
<INVENTOR-NAME>
MACDONALD, JAMES R.
</INVENTOR-NAME>
<INVENTOR-NAME>
O'BRIEN, RITA
</INVENTOR-NAME>
</INVENTORS>
<DESCRIPTION>
This invention relates to power reduction within computer
systems and more particularly to a system and method for
controlling a peripheral bus clock signal.An on-going developmental goal of manufacturers has been to
reduce the power consumption of computer systems. Reducing power
consumption typically reduces heat generation of the system,
thereby increasing reliability and decreasing cost. In addition,
power reduction has been particularly important in maximizing the
operating life of battery-powered portable computer systems.Various techniques have been devised for reducing the power
consumption of computer systems. These techniques include
increasing the integration of circuitry and incorporation of
improved circuitry and power management units (PMU's). One
specific power reduction technique involves the capability of
stopping clock signals that drive inactive circuit portions. A
system employing such a technique typically includes a power
management unit that detects or predicts inactive circuit
portions and accordingly stops the clock signals associated with
the inactive circuit portions. By turning off "unused" clock
signals that drive inactive circuit portions, overall power
consumption of the system is decreased. A similar technique
involves the capability of reducing the frequency of clock
signals that drive circuit portions during operating modes which
are not time critical.Although the capability of stopping "unused" clock signals
has been generally successful in reducing power consumption, the 
technique has generally not been applied to clock signals that
drive peripheral buses having alternate bus masters connected
thereto. The reason for this limitation is best understood from
the following example.Figure 1 is a block diagram that illustrates a computer
system 10 including a microprocessor (CPU) 12, a system memory
14, a bridge/memory controller 16, and a bus interface and
arbiter unit 18. A CPU local bus 20 couples the microprocessor
12 to bridge/memory controller 16 and bus interface and arbiter
unit 18. A system memory bus 22 couples system memory 14 to
bridge/memory controller 16. An alternate bus master 26 labeled
"Master1" and a second alternate bus master 28 labeled "Master2"
are coupled to the bus interface and arbiter unit 18 through a
peripheral bus 30. A slave device 31 is similarly coupled to bus
interface and arbiter unit 18 through peripheral bus 30.When alternate bus master 26 requires mastership of
peripheral bus 30, a request signal labeled REQ1 is asserted by
the
</DESCRIPTION>
<CLAIMS>
A computer system comprising:

a microprocessor (119);
a local bus (104) coupled to said microprocessor;
a peripheral bus (102);
a bus interface and arbiter unit (106) coupled to said local bus and to
said peripheral bus for orchestrating the transfer of data and address signals

between said local bus and said peripheral bus and for arbitrating mastership
of said peripheral bus;

   
characterized in that
 the system further comprises:

a clock generator circuit (122) for providing a peripheral bus
clock signal on said peripheral bus, wherein said peripheral bus clock

signal is capable of being selectively stopped and re-started;
an alternate bus master (108) coupled to said peripheral bus
wherein said alternate bus master is capable of asserting a clock

request signal when said peripheral bus clock signal is stopped; and
a clock control circuit (120) coupled to said alternate bus
master for re-starting said peripheral bus clock signal in response to the

assertion of said clock request signal.
The computer system as recited in Claim 1 further comprising a
latching circuit (112) coupled to receive said clock request signal, wherein

said latching circuit provides a synchronous bus request signal to said bus
interface and arbiter unit in response to the peripheral bus clock signal.
The computer system as recited in Claim 1 wherein said alternate bus
master includes a state machine (500) that asserts said clock request signal

when said peripheral bus clock signal is stopped and that asserts a
synchronous bus request after said peripheral bus clock signal is re-started, 

wherein said synchronous bus request signal is provided to said bus interface
and arbiter unit for requesting mastership of said peripheral bus.
The computer system as recited in Claim 1 wherein said peripheral bus is a
PCI bus.
The computer system as recited in Claim 3 further comprising a power
management unit (111) coupled to said clock control circuit and to said clock

generator circuit, wherein said power management unit provides a control
signal to said clock generator for selectively stopping and re-starting said

peripheral bus clock signal, and wherein said clock control circuit provides a
command signal to said power management unit in response to said clock

request signal.
The computer system as recited in Claim 5 wherein said power
management unit stops said peripheral bus clock signal upon the occurrence of

a predetermined condition after said microprocessor has attained mastership of
said peripheral bus.
The computer system as recited in Claim 3 wherein said bus interface
and arbiter unit asserts a bus grant signal in response to said synchronous bus

request signal.
The computer system as recited in Claim 3 wherein said peripheral bus
includes a control line (128) for coupling said clock request signal from said alternate

bus master to said clock control circuit.
The computer system as recited in Claim 1 further comprising:

a power management unit (111) coupled to said clock generator circuit
for stopping said peripheral bus clock signal upon the occurrence of a

predetermined condition;
 
   wherein the clock control circuit is coupled to receive an asynchronous

clock request signal generated by the alternate bus master when said
peripheral bus clock signal is stopped, wherein said clock control circuit

generates a command signal in response to said asynchronous clock request
signal that causes said power management unit to re-start said peripheral bus

clock signal; and

   wherein the bus interface and arbiter unit is responsive to a bus request
signal generated by said alternate bus master, wherein said bus request signal

is synchronous to said peripheral bus clock signal, and wherein said bus
interface and arbiter unit generates a grant signal in response to said bus

request signal for indicating mastership of said peripheral bus to said alternate
bus.
The computer system as recited in Claim 9 wherein said alternate bus
master includes a state machine that asserts said asynchronous clock signal

when said peripheral bus clock signal is stopped and that asserts a
synchronous request signal after said peripheral bus clock 
signal is re-started.
The computer system as recited in Claim 9 wherein said clock control
circuit includes a state machine (300) that asserts said command signal in

response to said asynchronous clock signal.
The computer system as recited in Claim 9 wherein said peripheral bus
is a PCI standard bus.
The computer system as recited in Claim 9 further comprising a
control line (128) incorporated on said peripheral bus for coupling said

asynchronous clock request signal from said alternate bus master to said clock
control circuit. 
A method for re-starting a peripheral bus clock signal and requesting
mastership of a peripheral bus (102) comprising the steps of


stopping said peripheral bus clock signal upon the occurrence of a
predetermined condition;
generating an asynchronous clock request signal within an alternate
bus master (108);
re-starting said peripheral bus clock signal in response to said
asynchronous clock

request signal; and
generating a synchronous bus request signal within said alternate bus
master after said peripheral bus clock signal has been re-started, wherein said

synchronous bus request signal is synchronous to said peripheral bus clock
signal.
The method for re-starting a peripheral bus clock signal and requesting
mastership of a peripheral bus as recited in Claim 14 comprising the further

step of generating a bus grant signal in response to said synchronous bus
request signal.
The method for re-starting a peripheral bus clock signal and requesting
mastership of a peripheral bus as recited in Claim 14 wherein said step of

restarting said peripheral bus clock signal includes the step of coupling the
asynchronous clock request signal from said alternate bus master to a clock

control circuit through a control line (128) incorporated on said peripheral bus.
The method for re-starting a peripheral bus clock signal and requesting
mastership of a peripheral bus as recited in Claim 15 wherein said step of

generating a bus grant signal is performed by a bus arbiter unit (106).
</CLAIMS>
</TEXT>
</DOC>
