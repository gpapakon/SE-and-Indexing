<DOC>
<DOCNO>EP-0622711</DOCNO> 
<TEXT>
<INVENTION-TITLE>
Digital communication network data transmission method and apparatus
</INVENTION-TITLE>
<CLASSIFICATIONS>H04L2906	H04L710	H04L12407	H04L12417	H04L704	H04L710	H04L2906	H04L2549	H04L2549	H04L704	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>H04L	H04L	H04L	H04L	H04L	H04L	H04L	H04L	H04L	H04L	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>H04L29	H04L7	H04L12	H04L12	H04L7	H04L7	H04L29	H04L25	H04L25	H04L7	</CLASSIFICATIONS-FOURTH>
<ABSTRACT>
A node circuit is operative to couple Manchester encoded data between a 
transmission medium and an associated electrical device. A first mechanism 

detects a message frame preamble having a pattern of alternating signal level of 
substantially identical duration, and a second mechanism that detects a start 

delimiter in the message frame. The start delimiter has a plurality of binary 
signal levels.in a unique pattern that satisfies a defined set of criteria to optimize 

the probability that the pattern will be detected while minimizing the likelihood 
that random valid data will alias into the start delimiter pattern. A data decoder 

is provided to convert the Manchester encoded data into binary data which then 
is sent via a signal path to the associated electrical device. Another mechanism is 

included to detect a unique end delimiter that signals the termination of the 
message frame. 
</ABSTRACT>
<APPLICANTS>
<APPLICANT-NAME>
ALLEN BRADLEY CO
</APPLICANT-NAME>
<APPLICANT-NAME>
ALLEN-BRADLEY COMPANY
</APPLICANT-NAME>
</APPLICANTS>
<INVENTORS>
<INVENTOR-NAME>
BUSH MICHAEL A
</INVENTOR-NAME>
<INVENTOR-NAME>
ENGDAHL JONATHAN R
</INVENTOR-NAME>
<INVENTOR-NAME>
ESKER LAWRENCE W
</INVENTOR-NAME>
<INVENTOR-NAME>
GEE DAVID J
</INVENTOR-NAME>
<INVENTOR-NAME>
LUCAK MARK A
</INVENTOR-NAME>
<INVENTOR-NAME>
BUSH, MICHAEL A.
</INVENTOR-NAME>
<INVENTOR-NAME>
ENGDAHL, JONATHAN R.
</INVENTOR-NAME>
<INVENTOR-NAME>
ESKER, LAWRENCE W.
</INVENTOR-NAME>
<INVENTOR-NAME>
GEE, DAVID J.
</INVENTOR-NAME>
<INVENTOR-NAME>
LUCAK, MARK A.
</INVENTOR-NAME>
</INVENTORS>
<DESCRIPTION>
The field of the invention is communications networks, and more
particularly, the communication of digital data over serial communication links
in an industrial environment.Factories are automated by controllers that are programmed, or configured,
to operate specific machines or devices. Such controllers may be general purpose,
such as computers, numerical controls or programmable controllers; or they may
be special purpose controllers, such as robot controllers, weld controllers or motor
drives.Each controller connects to the various sensing devices and operating
devices on the machinery which it controls and it automates the operation of that
machinery by inputting data from the sensing devices and outputting the
appropriate data to the operating devices. This exchange of input and output
("I/O") data between the controller and the devices on the controlled machinery
is often accomplished by direct connections between ports on the controller and
each separate I/O device. However, when I/O devices are physically spread out
over a large area, the wiring costs associated with such separate connections can
become excessive.One way to reduce wiring in such applications is to multiplex I/O data
through a serial communications link. Such serial I/O links are commonly used
to connect the centrally located controller to separate remote racks, or chassis, that
are positioned adjacent to the I/O devices. Such "remote I/O systems" are
disclosed, for example, in U.S. Patent Nos. 4,404,651; 4,413,319; 4,809,217 and
4,750,150, where the controller carries out a continuous high speed scan of the I/O
data associated with each remote rack and that data is conveyed through the serial
communications link. It can be appreciated that such serial I/O links must
promptly and reliably convey the I/O data, since that data is directly controlling
operating devices on a machine that is operating in real time.While a single controller may automate a machine, or a small group of
machines, such "islands of automation" must be connected together to truly 
automate an entire factory. These latter connections are provided by industrial
local area networks that enable each controller to send messages to other similar
controllers in the factory over serial data links. There are a large number of such
"peer-to-peer" communications networks known in the art, some of which are
developed by standards committees like IEEE 802.3, IEEE 802.4, IEEE 802.5 and
MAP; and others are developed by manufacturers of the controller like those
disclosed
</DESCRIPTION>
<CLAIMS>
A communication network (10) which comprises:

a transmission medium (11); and
a plurality of node circuits (20) connected to said
transmission medium, each node circuit being operative to

transfer data sent in a message frame over the transmission
medium to an associated consumer device, and each node

circuit including:

(a) a first detector which is adapted to detect a
preamble (22) of a message frame in which the

preamble has a defined pattern of binary signal
levels;
characterized by
:
(b) a second detector (265) which is adapted to detect
a start delimiter (23) of the message frame in

which the start delimiter has a specified pattern
of a plurality of binary signal levels which

satisfies the following criteria;

(1) the start delimiter begins with a binary
signal level that is opposite to a last

binary signal level of the preamble,
(2) the start delimiter ends with two different
binary signal levels,
(3) a maximum number of consecutive identical
binary signal levels is two,
(4) a digital sum variance which falls in a
range of -1 to 2,
(5) assuming proper synchronization of signal
decoding, at least four binary signal levels

must be in error in order for random valid
data to alias into the specified pattern of

a delimiter,
(6) assuming improper synchronization of signal
decoding, at least two binary signal levels

must be in error in order for random valid
data to alias into the specified patterns of

a delimiter;
(c) a data decoder (250) which is responsive to said
second detector detecting a start delimiter by

decoding data in the message frame; and
(d) a signal path to carry decoded data from said data
decoder to the associated consumer device.
The communication network as recited in claim 1,

characterized in that
 said first detector in each node
circuit is adapted to detect a preamble having a pattern of

alternating high and low logic level pulses of substantially
equal duration.
The communication network as recited in claim 1,

characterized in that
 said second detector (265) in each node
circuit is adapted to detect a start delimiter having binary

signal levels in a pattern given by 1101001100100110, in
order left to right as transmitted over the medium, where a 1

is a high signal level and a 0 is a low signal level.
The communication network as recited in claim 1,

characterized in that
 each node circuit further includes a
third detector which is adapted to detect a message frame end

delimiter having a given pattern of a plurality of binary
signal levels which satisfies criteria (3) through (6) for

the start delimiter, and further the end delimiter begins
with a pair of different binary signal levels and ends with a

binary signal level that is substantially equal to a level
which occurs during silence on the network.
The communication network as recited in claim 1,

characterized in that
 each node circuit further includes a
third detector which is adapted to detect a message frame end

delimiter having a plurality of binary signal levels in a
pattern given by 1001011011001100, in order left to right as

transmitted over the medium, where a 1 is a high signal level
and a 0 is a low signal level. 
The communication network as recited in claim 1,

characterized in that
 said data decoder is adapted to convert
a Manchester encoded data signal received from said

transmission medium into binary data.
A node circuit (20) for connection to a transmission
medium (11) and being operative to couple encoded data

between the transmission medium and an associated consumer
device, wherein said data is sent through the transmission

medium in a message frame; the node circuit comprising:

a first detector which is adapted to detect a preamble
of a message frame in which the preamble has a plurality of

alternating high and low signal level pulses;

   
characterized by
 a second detector (245) which is
adapted to detect a start delimiter of the message frame in

which the start delimiter has a plurality of binary signal
levels in a pattern given by 1101001100100110, in order left

to right as transmitted over the medium, where a 1 is a high
signal level and a 0 is a low signal level;

   a data decoder (260) which is responsive to said a
second detector detecting a start delimiter by decoding data

in the message frame; and

   a signal path to carry decoded data from said data
decoder to the associated consumer device.
The node circuit as recited in claim 1, further

characterized by
 a third detector which is adapted to detect
a message frame end delimiter having a plurality of binary

signal levels in a pattern given by 1001011011001100, in
order left to right as transmitted over
 the medium, where a 1
is a high signal level and a 0 is a low signal level.
The node circuit as recited in claim 1, further

characterized by
 a circuit which is adapted to verify message
frame integrity using cyclical redundancy check data received

in a message frame. 
A method of transmitting digital data over a
communication network from an originating node to a recipient

node using Manchester data encoding in which the digital data
is sent as a series of a binary signal levels with each level

occurring in different symbol period, said method comprising
the steps of:


transmitting a preamble having a defined pattern of
alternating high and low logic level pulses of substantially

equal duration; and 
characterized by
:

transmitting a start delimiter that contains violations
of Manchester data encoding and which satisfies the following

criteria;

(a) the start delimiter begins with a binary signal
level that is opposite to a last binary signal

level of the preamble,
(b) the start delimiter ends with a pair of different
binary signal levels,
(c) a maximum number of consecutive symbol periods
having identical binary signal levels is two,
(d) a digital sum variance of the start delimiter
falls in a range -1 to 2,
(e) assuming proper synchronization of signal
decoding, at least four binary signal levels must

be in error in order for random valid data to
alias into the start delimiter pattern,
(f) assuming improper synchronization of signal
decoding, at least two binary signal levels must

be in error in order for random valid data to
alias into the start delimiter pattern, and
transmitting the digital data;
transmitting a cyclic redundancy code that was derived
from the digital data; and
transmitting an end delimiter.
The method as recited in claim 10, characterized that
the step of transmitting a start delimiter sends binary

signal levels in a pattern given by 1101001100100110, in
order left to right as transmitted, where a 1 is a high

signal level and a 0 is a low signal level. 
The method as recited in claim 10, 
characterized in that

said step of transmitting an end delimiter sends an end
delimiter which satisfies the following criteria:


(a) the end delimiter begins with a pair of symbol
periods containing different binary signal levels,
(b) a maximum number of consecutive symbol periods
having identical binary signal levels is two,
(c) a digital sum variance of the end delimiter falls
in a range of -1 to 2,
(d) assuming proper synchronization of signal
decoding, at least four binary signal levels must be in error

for random valid data to alias into the end delimiter,
(e) assuming improper synchronization of signal
decoding, at least two binary signal levels must be in error

for random valid data to alias into the end delimiter, and
(f) the end delimiter ends with a binary signal level
that is substantially equal to a level which occurs during

silence on the network.
The method as recited in claim 10, 
characterized in that

said step of transmitting an end delimiter sends binary
signal levels in a pattern given by 1001011011001100, in

order left to right as transmitted, where a 1 is a high
signal level and a 0 is a low signal level.
The method as recited in claim 10, 
characterized in that

said step of transmitting the digital data comprises
transmitting a plurality of packets of data in which each

packet contains a tag that identifies a type of data within
that packet.
The method as recited in claim 14, 
characterized in that

said step of transmitting transmits packets which further
contain information on a number of pad bytes that the

recipient node is required to insert in order to place the
tag on a data word boundary of the packet. 
The method as recited in claim 14, 
characterized in that

said step of transmitting transmits packets which further
contain a designation of one of several components that is to

process the tag within the recipient node.
The method as recited in claim 14, 
characterized in that

said step of transmitting transmits a packet which further
contains a designation of a size of the packet.
The method as recited in claim 14, 
characterized in that

said step of transmitting transmits packet which further
contains an indicator which can be used by the recipient node

to identify duplicate packets that are transmitted at
different times.
</CLAIMS>
</TEXT>
</DOC>
