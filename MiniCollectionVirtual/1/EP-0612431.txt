<DOC>
<DOCNO>EP-0612431</DOCNO> 
<TEXT>
<INVENTION-TITLE>
METHOD AND APPARATUS FOR RECORDING DATA ON MAGNETIC TAPE MEDIA.
</INVENTION-TITLE>
<CLASSIFICATIONS>G11B1500	G11B1500	G11B2010	G11B2010	G11B2012	G11B2012	G11B2018	G11B2018	G11B2728	G11B2728	G11B2732	G11B2732	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>G11B	G11B	G11B	G11B	G11B	G11B	G11B	G11B	G11B	G11B	G11B	G11B	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>G11B15	G11B15	G11B20	G11B20	G11B20	G11B20	G11B20	G11B20	G11B27	G11B27	G11B27	G11B27	</CLASSIFICATIONS-FOURTH>
<ABSTRACT>
The control software and hardware in the tape drive control unit (350) creates and manages a header segment (105) at the beginning of the magnetic tape (100). This header (105) is interposed between a leader portion (102-104) of the magnetic tape (100) and the remainder (106-109) of the magnetic tape (100). This header segment (105) contains two sections, a first of which is a data record directory (502) that is used by the control unit (350) to denote the location of each data record written on to the magnetic tape (100) as well as administrative information associated with the data record. The second section of the header (105) is an administrative information section (501) that contains data relating to the magnetic tape itself. At least one longitudinal track (201-203) is written on the magnetic tape (100) coextensive with the helical scan groups (700) to provide data to enable the tape drive (300) to quickly locate data records recorded on the magnetic tape (100).
</ABSTRACT>
<APPLICANTS>
<APPLICANT-NAME>
STORAGE TECHNOLOGY CORP
</APPLICANT-NAME>
<APPLICANT-NAME>
STORAGE TECHNOLOGY CORPORATION
</APPLICANT-NAME>
</APPLICANTS>
<INVENTORS>
<INVENTOR-NAME>
CLEVELAND BRIAN GRAHAM
</INVENTOR-NAME>
<INVENTOR-NAME>
DODT WILLIAM CARL
</INVENTOR-NAME>
<INVENTOR-NAME>
GOTTEHRER TERRY ROBERT
</INVENTOR-NAME>
<INVENTOR-NAME>
MCCARTHY DONALD FRANCIS
</INVENTOR-NAME>
<INVENTOR-NAME>
MILLIGAN CHARLES ALLEN
</INVENTOR-NAME>
<INVENTOR-NAME>
CLEVELAND, BRIAN, GRAHAM
</INVENTOR-NAME>
<INVENTOR-NAME>
DODT, WILLIAM, CARL
</INVENTOR-NAME>
<INVENTOR-NAME>
GOTTEHRER, TERRY, ROBERT
</INVENTOR-NAME>
<INVENTOR-NAME>
MCCARTHY, DONALD, FRANCIS
</INVENTOR-NAME>
<INVENTOR-NAME>
MILLIGAN, CHARLES, ALLEN
</INVENTOR-NAME>
</INVENTORS>
<DESCRIPTION>
 METHOD AND APPARATUS FOR RECORDING DATA ON MAGNETIC TAPE MEDIAFIELD OF THE INVENTIONThis invention relates to magnetic data storage media and, in particular, to a method and apparatus for recording data on a magnetic tape media.PROBLEMIt is a problem in the field of data storage systems to maximize the data storage capacity and efficiency of the data storage media while minimizing both the cost of the media and the data retrieval time. Magnetic tape has become the industry standard data storage media for the storage and retrieval of large amounts of data, where the media cost must be kept to a minimum and the data retrieval time is not a critical factor. The data storage capacity and media cost of magnetic tape have been reduced by the use of helical scan data recording techniques on magnetic tape media.Helical scan tape drive systems make use of the 3480-type magnetic tape cartridge which contains a single reel of half inch magnetic tape. The 3480-type magnetic tape cartridge is an industry standard media form factor used in the data processing industry for longitudinal recording of data on magnetic tape. Theâ€¢selection of this form factor is desirable due to the 

 fact that automated library systems, such as the 4400 Automated Cartridge System (ACS) manufactured by Storage Technology Corporation of Louisville, Colorado, are presently used to robotically store and retrieve a large number of 3480-type magnetic tape cartridges for an associated plurality of tape drives. The helical scan data recording format enables the user to store significantly more data on a 3480-type magnetic tape form factor cartridge than is presently available with longitudinal recording on magnetic tape.A significant problemwith magnetic tape media is to maximize the data storage capacity and efficiency of the magnetic tape. There are a number of factors that relate to data storage efficiency, including identification of the physical location of the data on the media, density of data on the media, speed of media movement, as well as error detection and correction systems to ensure the integrity of the data written on the rewriteable media. Existing rewriteable media systems encounter significant limitations in one or more of the above-listed factors. 
SOLUTION The above described problems are solved and a technical advance achieved in the field by the method and apparatus of the present invention for recording data on a magnetic tape media to increase the data storage capacity and efficiency of magnetic tape media. This is
</DESCRIPTION>
<CLAIMS>
WE CLAIM:
1. Apparatus in a drive element (300) which reads and writes a stream of data records, received from a host computer (1) , on a magnetic tape media (100) , comprising: means (1120, 1121) for generating administrative data specific to each of said data records and to said magnetic tape (100) ; means (1121, 321) for writing said administrative data in a predefined segment (105) of said magnetic tape (100) ; means (401-* - 409-*) for segmenting said received stream of data records into tracks (204) of predetermined length; means (410-*, 321) for writing said tracks (204) in helical stripe form on said magnetic tape (100) ; and means (332) for writing data, exclusive of said stream of data records, in at least one longitudinal track (201-203) on said magnetic tape (100) coextensive with said tracks (204) written in helical stripe form.
2. The apparatus of claim 1 wherein said segmenting means (401-* - 409-*) includes: means (403-*, 402-*) for generating a first error correction code specific to a plurality of bytes of said stream of data records; means (404-*, 405-*) for dividing said received stream of data records and said first error correcting codes into a series of data segments, each data segment containing a predetermined number of bytes; 


 means (406-*) for generating a second error correction code specific to each of said data segments; and means (407-* - 409-*) for concatenating a plurality of said data segments and their associated second error correction codes to form one of said tracks (204) .
3. The apparatus of claim 1 wherein said track writing means (410-*, 321) includes: means (804) for combining a predetermined number of sequentially generated ones of said tracks to form a scan group (700) ; and means (807) for writing each of said scan groups (700) on to said magnetic tape (100) in helical stripe form.
4. The apparatus of claim 3 further comprising: means (805) for computing a multiple scan group error correction code (ECC-3) across a predetermined number of said scan groups (700) ; and means (805) for writing said multiple scan group error correction code (ECC-3) on to said magnetic tape (100) in helical stripe form.
5. The apparatus of claim 4 wherein said multiple scan group error correction code writing means (807) writes said multiple scan group error correction code (ECC-3) as a scan group (700) on to said magnetic tape (100) .
6. The apparatus of claim 3 further comprising: means (1111) for reading each of said scan roups (700) immediately following its writing on to 


 said magnetic tape (100) ; and means (1116) , responsive to the detection of errors in a read scan group (SCAN GROUP 2) , for rewriting said read scan group (SCAN GROUP 2) on said magnetic tape (100) immediately following an end of a presently writing scan group (SCAN GROUP 4) .
7. The apparatus of claim 6 further comprising: means (408-*) , responsive to said rewriting means (1116) , for denoting a first instance of said read scan group (SCAN GROUP 2) as containing errors.
8. The apparatus of claim 6 further comprising: means for writing all successively generated ones (SCAN GROUP 3A, SCAN GROUP 4A) of said scan groups (700) on to said magnetic tape (100) following said rewritten scan group (SCAN GROUP 2A) .
9. The apparatus of claim 3 further comprising: means (1117) , responsive to the cessation of said stream of data records, for writing at least one scan group, containing a predetermined pattern of bytes, on to said magnetic tape (100) immediately following a last of said scan groups (700) written by said scan group writing means (410-*, 321).
10. The apparatus of claim 9 further comprising: means (1101-1110) , responsive to a reinitiation of said stream of data records subsequent to said cessation, for writing said reinitiated stream of data records on said magnetic tape (100) in helical form, beginning at an end of a first one of said scan groups (700) containing a predetermined pattern of bytes written immediately following said stream of 


 data records.
11. The apparatus of claim 1 wherein said administrative data writing means (1121, 321) writes said generated administrative data as a header (105) on said magnetic tape (100) , prepended to said stream of data records written in helical form on said magnetic tape (100) .
12. The apparatus of claim 1 wherein said administrative data generating means (1120, 1121) includes: means (2601-2604) for inserting data record location information into said administrative data and associated with a selected data record, substantially concurrently with said data record being accessed by said host computer (1) , to identify a physical location of said selected data record on said magnetic tape (100) .
13. The apparatus of claim 1 wherein said administrative data generating means (1120, 1121) includes: means (2101-2108) for inserting magnetic tape information into said administrative data to identify characteristics of said magnetic tape (100) .
14. A method in a drive element (300) which reads and writes a stream of data records, received from a host computer (1) , on a magnetic tape media
(100) , comprising the steps of: generating administrative data specific to each of said data records and to said magnetic tape (100) ; 


 writing said administrative data in a predefined segment (105) of said magnetic tape (100) ; segmenting said received stream of data records into tracks (204) of predetermined length; writing said tracks (204) in helical stripe form on said magnetic tape (100) ; and writing data, exclusive of said stream of data records, in at least one longitudinal track (201- 203) on said magnetic tape (100) coextensive with said tracks (204) written in helical stripe form.
15. The method of claim 14 wherein said step of segmenting includes: generating a first error correction code specific to a plurality of bytes of said stream of data records; dividing said received stream of data records and said first error correction codes into a series of data segments, each data segment containing a predetermined number of bytes; generating a second error correction code specific to each of said data segments; and concatenating a plurality of said data segments and their associated second error correction codes to form one of said tracks (204) .
16. The method of claim 14 wherein said step of writing said tracks (204) includes: combining a predetermined number of sequentially generated ones of said tracks (204) to form a scan group (700) ; and writing each of said scan groups (700) on to said magnetic tape (100) in helical stripe form. 


 17. The method of claim 16 further comprising the steps of: computing a multiple scan group error correction code (ECC-3) across a predetermined number of said scan groups (700) ; and writing said multiple scan group error correction code (ECC-3) on to said magnetic tape (100) in helical stripe form.
18. The method of claim 17 wherein said step of writing said multiple scan group error correction code writes said multiple scan group error correction code (ECC-3) as a scan group (700) on to said magnetic tape (100) .
19. The method of claim 16 further comprising the steps of: reading each of said scan groups (700) immediately following its writing on to said magnetic tape (100) ; and rewriting, in response to the detection of errors in a read scan group (SCAN GROUP 2) , said read scan group (SCAN GROUP 2A) on said magnetic tape (100) immediately following an end of a presently writing scan group (SCAN GROUP 4) .
20. The method of claim 19 further comprising the step of: denoting, in response to said step of rewriting, a first instance of said read scan group (SCAN GROUP 2) as containing errors.
21. The method of claim 19 further comprising -the step of: 


 means forwriting all successively generated ones of said scan groups (SCAN GROUP 3A, SCAN GROUP 4A) on to said magnetic tape (100) following said rewritten scan group (SCAN GROUP 2A) .
22. The method of claim 16 further comprising the step of: writing, in response to the cessation of said stream of data records, at least one scan group, containing a predetermined pattern of bytes, on to said magnetic tape (100) immediately following a last of said scan groups (100) written by said scan group writing means (410-*, 321).
23. The method of claim 22 further comprising the step of: writing, in response to a reinitiation of said stream of data records subsequent to said cessation, said reinitiated stream of data records on said magnetic tape (100) in helical form, beginning at an end of a first one of said scan groups (700) containing a predetermined pattern of bytes written immediately following said stream of data records.
24. The method of claim 14 wherein said step of writing said administrative data writes said generated administrative data as a header (105) on said magnetic tape (100) , prepended to said stream of data records written in helical form on said magnetic tape (100) .
25. The method of claim 14 wherein said step of generating said administrative data includes: inserting data record location information 


 into said administrative data and associated with a selected data record, substantially concurrently with said data record being accessed by said host computer (1) , to identify a physical location of said selected data record on said magnetic tape (100) .
26. The method of claim 14 wherein said step of generating said administrative data includes: inserting magnetic tape information into said administrative data to identify characteristics of said magnetic tape (100) . 

</CLAIMS>
</TEXT>
</DOC>
