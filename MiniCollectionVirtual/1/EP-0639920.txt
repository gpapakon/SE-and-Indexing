<DOC>
<DOCNO>EP-0639920</DOCNO> 
<TEXT>
<INVENTION-TITLE>
System and method for rendering a color image
</INVENTION-TITLE>
<CLASSIFICATIONS>H04N964	H04N964	H04N164	H04N164	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>H04N	H04N	H04N	H04N	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>H04N9	H04N9	H04N1	H04N1	</CLASSIFICATIONS-FOURTH>
<ABSTRACT>
An image rendering system renders a color image in which each pixel is 
associated with a respective aim color value. A quantizer selects a 

respective quantized 
value indicating a color from a palette of colors for each pixel, in 

dependence on the 
aim color value associated with that pixel. The pixels are rendered 

with the colors 
indicated by the respective quantized values. The palette consists of a 

proper subset of 
the set of all colors that the aim color values can represent, and 

contains at least one 
palette color (C₁) which does not lie on an RGB boundary, and is 

perceptually closer than 
any other of the palette color values (C₂ or C₃) to an RGB 

boundary color (C) belonging to said set. 
For pixels for which the aim color value represents said RGB 

boundary color (C) the 
quantizer means selects a quantized value indicating a further palette 

color (C₂ or C₃), that lies on the RGB boundary. 
The optimal palette from a set of palettes is the palette for which 
the maximum possible quantization error, expressed as the Euclidian 

distance, is mininmal. The invention can be combined both with ordered 
dither and error diffusion dithering. 


</ABSTRACT>
<APPLICANTS>
<APPLICANT-NAME>
PHILIPS ELECTRONICS NV
</APPLICANT-NAME>
<APPLICANT-NAME>
PHILIPS ELECTRONICS N.V.
</APPLICANT-NAME>
</APPLICANTS>
<INVENTORS>
<INVENTOR-NAME>
MEYERS PATRICK FRANCISCUS PAUL
</INVENTOR-NAME>
<INVENTOR-NAME>
POL EVERT JAN
</INVENTOR-NAME>
<INVENTOR-NAME>
VAN SPLUNTER MARINUS
</INVENTOR-NAME>
<INVENTOR-NAME>
MEYERS, PATRICK FRANCISCUS PAULUS
</INVENTOR-NAME>
<INVENTOR-NAME>
POL, EVERT JAN
</INVENTOR-NAME>
<INVENTOR-NAME>
VAN SPLUNTER, MARINUS
</INVENTOR-NAME>
</INVENTORS>
<DESCRIPTION>
The invention relates to a color image rendering system, for rendering a
color image in which each pixel is associated with a respective original color value and
each pixel is rendered by a combination of primary color intensities, the system
comprising
error diffusion means for deriving an aim color value from an original color
value,quantizing means for mapping each aim color value generally to a quantized
color value lying perceptually closest to that aim color value in a palette, the palette
consisting of a proper subset of the set of color values that the aim color values can
represent, the palette containing color values that do not lie on an RGB cube boundary
corresponding to color values in which at least one of the primary color intensities is
maximal or minimal, the error diffusion means deriving the aim color value from the
original color value of a pixel in combination with a compensation of a quantization
error of the quantized color value of a further pixel neighbouring that pixel in the color
image,a rendering device, for rendering the pixels each by a combination of the
primary color intensities determined by a quantized color value associated with the
pixel. The invention also relates to a quantization device for use in this system and the
method applied by this system.Such a system and method are known from an article titled "Improved
dithering methods for color quantized images", by Takshi Watanabe published in
Systems and Computers in Japan 21 (1990) No. 10 pages 68 to 77.A color image is conventionally represented by assigning a color value to
each pixel in the image (the word "color value" will be used to refer both to luminance
and chromaticity). To represent a full palette of colors, the color value should be a
three component vector, its components representing for example the intensities of the
three primary colors used to render the color value or YUV color coordinates. Because
three components have to be provided, a considerable amount of information is required
to represent the image with a full palette of colors. This is disadvantageous for the
transmission and storage of images, moreover many image display devices cannot
render this full palette. Because of this it has been found convenient to store and render the color
image using a reduced palette of colors containing fewer colors than the full palette of
colors. In this way, the image is represented by assigning to each pixel an indication
selecting the color value from the reduced palette. Because the reduced palette
</DESCRIPTION>
<CLAIMS>
A color image rendering system, for rendering a color image in which
each pixel is associated with a respective original color value and each pixel is rendered

by a combination of primary color intensities, the system comprising

error diffusion means (14, 16) for deriving an aim color value from an original
color value,
quantizing means (12) for mapping each aim color value generally to a
quantized color value lying perceptually closest to that aim color value in a palette, the

palette consisting of a proper subset of the set of color values that the aim color values
can represent, the palette containing color values that do not lie on an RGB cube

boundary corresponding to color values in which at least one of the primary color
intensities is maximal or minimal, the error diffusion means deriving the aim color

value from the original color value of a pixel in combination with a compensation of a
quantization error of the quantized color value of a further pixel neighbouring that pixel

in the color image,
a rendering device (19), for rendering the pixels each by a combination of the
primary color intensities determined by a quantized color value associated with the

pixel,

   characterized in that the quantizing means (12) map an aim color value lying on
the RGB cube boundary, instead of to the quantized color value lying perceptually

closest to the aim color value in the entire palette, to a quantized color value lying
perceptually closest to the aim color value among color values in the palette that lie on

the RGB cube boundary, when the quantized color value closest to the aim color value
in the palette does not lie on the RGB cube boundary.
The color image rendering system according to Claim 1, the quantizing
means (12) comprising


first and second sub-quantizing means (60,62) for mapping the aim color value
for aim color values lying on the RGB cube boundary and for mapping aim color values

away from the RGB cube boundary respectively, and 
boundary detection means (68), for detecting pixels whose aim color value lies
on the RGB cube boundary, and for in dependence upon said detecting selecting which

of the first and the second subquantizing means (60, 62) supplies the quantized color
value for the rendering device.
The color image rendering system according to Claim 2, the second
subquantizing means comprising a first and a second quantizing stage (50, 52), the first

quantizing stage (50) being arranged for determining quantized individual color
component values from respective color component values of the aim color value, the

second quantizing stage (52) being arranged for determining the quantized color value in
dependence on the quantized individual color component values.
The color image rendering system according to Claim 3, the first
quantizing stage (50) being arranged for quantizing color component values representing

relatively lower color intensities with lesser maximum quantization error in the color
value than color component values representing relatively higher color intensities.
The color image rendering system according to Cllaim 4, the second
subquantizing means comprising a further first and a further second quantizing stage,

the further first quantizing stage being arranged for determining quantized individual
color component values from respective color component values of the aim color value,

with a maximum quantization error which is substantially independent of intensity, the
second quantizing stage being arranged for determining the quantized value in

dependence on the quantized individual color component values.
The color image rendering system according to Claim 4 or 5, the first
quantizing stage (50) being arranged for replacing a most significant part of a bit pattern

representing the color component value with a label having a bit length which increases
as the value of the most significant part increases, and complementing the label with a

number of lesser significant bits of the bit pattern representing the color component
value so as to form a bit pattern having a predetermined bit length independent of the

label, representing the quantized individual component value.
The color image rendering system according to any one of Claims 1 to 6,
the quantizing means (12) comprising look up table means (52), storing indications of

quantized color values at respective locations that are addressable by means of the aim

color values, the lookup table means (52) also storing the quantization error at each
location. 
Quantization device for obtaining a quantized color value from an original
color value of a pixel, the quantization device comprising


error diffusion means (14, 16) for deriving an aim color value from an original
color value,
quantizing means for (12) mapping an aim color value generally to a quantized
color value lying perceptually closest to that aim color value in a palette, the palette

consisting of a proper subset of the set of color values that the aim color values can
represent, the palette containing color values that do not lie on an RGB cube boundary

corresponding to color values in which at least one of a combination of primary color
intensities to be used for rendering is maximal or minimal, the error diffusion means

deriving the aim color value from the original color value of a pixel in combination
with a compensation of a quantization error of the quantized color value of a further

pixel neighbouring that pixel in the color image,

   characterized in that the quantizing means (12) map an aim color value lying on
the RGB cube boundary, instead of to the quantized color value lying perceptually

closest to the aim color value in the entire palette, to a quantized color value lying
perceptually closest to the aim color value among color values in the palette that lie on

the RGB cube boundary, when the quantized color value closest to the aim color value
in the palette does not lie on the RGB cube boundary.
A method for rendering a color image in which each pixel is associated
with a respective aim color value, each pixel being rendered by a combination of

primary color intensities determined by a quantized color value associated with the
pixel, the method comprising the step of mapping each aim color value generally to a

quantized color value lying perceptiially closest to the aim color value in a palette, the
palette consisting of a proper subset of the set of color values that the aim color values

can represent, the palette containing color values that do not lie on an RGB cube
boundary which corresponds to color values in which at least one of the primary color

intensities is maximal or minimal, characterized in that the step of mapping maps an
aim color value lying on the RGB cube boundary, instead of to the quantized color

value lying perceptually closest to the aim color value in the entire palette, to a
quantized color value lying perceptually closest to the aim color value among color

values in the palette that lie on the RGB cube boundary, when the quantized color value
closest to the aim color value in the palette does not lie on the RGB cube boundary.
</CLAIMS>
</TEXT>
</DOC>
