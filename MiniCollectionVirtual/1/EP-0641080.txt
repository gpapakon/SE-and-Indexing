<DOC>
<DOCNO>EP-0641080</DOCNO> 
<TEXT>
<INVENTION-TITLE>
Method and apparatus for reducing jitter and improving testability of an oscillator.
</INVENTION-TITLE>
<CLASSIFICATIONS>G01R3128	G01R3128	H03K300	H03K30231	H03K303	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>G01R	G01R	H03K	H03K	H03K	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>G01R31	G01R31	H03K3	H03K3	H03K3	</CLASSIFICATIONS-FOURTH>
<ABSTRACT>
An oscillator such as a pulled-crystal oscillator (50) 
provides low clock jitter by converting a sinusoidal voltage on a 

crystal's (51) terminals into a digital square wave with a 
comparator (56). The oscillating frequency of the crystal (51) is 

pulled by selectively switching in extra capacitance through 
capacitor digital-to-analog converters (CDACs) (57, 58). The 

oscillator (50) has built-in testability which allows individual 
capacitors in the CDACs (57, 58) to be quickly tested for opens. A 

scan path is connected to the inputs of the CDACs (57, 58) for 
selecting individual capacitors. A first input terminal of the 

comparator (56) is precharged before a capacitor under test (171) 
is connected. A comparison voltage is provided to the second 

input terminal. The capacitor under test (171) is determined to 
be functional if, after being connected to the first input terminal 

of the comparator (56), it discharges the first input terminal to a 
voltage below the comparison voltage, causing the comparator 

(56) to switch. 

</ABSTRACT>
<APPLICANTS>
<APPLICANT-NAME>
MOTOROLA INC
</APPLICANT-NAME>
<APPLICANT-NAME>
MOTOROLA, INC.
</APPLICANT-NAME>
</APPLICANTS>
<INVENTORS>
<INVENTOR-NAME>
WESTWICK ALAN L
</INVENTOR-NAME>
<INVENTOR-NAME>
WESTWICK, ALAN L.
</INVENTOR-NAME>
</INVENTORS>
<DESCRIPTION>
This invention relates generally to electrical circuits, and 
more particularly, to oscillators and testing methods and circuits 
therefor. A basic phase locked loop (PLL) has a phase detector which 
provides a phase detect output signal indicative of the phase 
difference between a loop clock signal and a reference clock 
signal. The phase detector provides the phase detect output 
signal to an input of a loop filter. The loop filter is a lowpass 
filter which provides an output voltage level indicative of the 
length of time the phase detector detects the two clock signals 
are out of phase. The output of the loop filter drives an input of a 
voltage controlled oscillator (VCO). The VCO then provides a 
clock output signal having a desired frequency. The clock output 
signal is divided in a loop divider to provide the loop clock signal. 
Thus, the PLL is able to generate the clock output signal having a 
frequency that is many times greater than that of the reference 
clock signal, based on the value of the loop divider. A digital PLL uses an oscillator which responds to a digital 
code provided by a digital loop filter. This oscillator is variously 
referred to in the art as a VCO, a digital VCO (DVCO), a digitally-controlled 
oscillator (DXCO), or the like, although the term VCO 
will be used herein. One type of VCO used in digital PLLs is known 
as a pulled-crystal VCO. The pulled-crystal VCO is useful in 
applications in which the nominal clock output frequency is fixed 
but the actual frequency may vary by a relatively small amount. 
One case in which a pulled-crystal VCO is useful is a 
telecommunications system in which the far end provides data at 
a nominal rate which may vary by a certain amount, but does not 
provide a separate clock signal.  The pulled-crystal VCO uses not only a conventional 
resistor and inverter to bias a crystal, but also a variable 
capacitance. The pulled-crystal VCO changes the amount of load 
capacitance on the crystal's terminals to "pull" the frequency by 
relatively-small amounts. A capacitor digital-to-analog 
converter (CDAC) network provides the variable capacitance based 
on the loop filter's digital code. However, known CDACs present 
some problems, including testability, clock output signal jitter, 
and circuit design. For proper testability, it is desirable to determine whether 
the CDAC's capacitors have been fabricated properly. Fabrication 
problems may result in either open circuits into one of the 
capacitor's terminals, or short circuits between the
</DESCRIPTION>
<CLAIMS>
A method for reducing jitter and improving testability of an 
oscillator (50), comprising the steps of: 

   coupling a selected one of a first plurality of 
capacitors (57) between a first crystal terminal 

and a predetermined voltage terminal; 
   coupling a capacitor (58) between a second crystal 

terminal and said predetermined voltage 
terminal; 

   coupling said first crystal terminal to a first input 
terminal of a comparator (56); 

   coupling said second crystal terminal to a second 
input terminal of said comparator (56); and 

   providing a clock output signal at an output terminal 
of said comparator (56). 
The method of claim 1, wherein said step of coupling said 
capacitor (58) comprises the step of coupling a selected one 

of a second plurality of capacitors (58) between said second 
crystal terminal and said predetermined voltage terminal in 

response to a second digital input code. 
The method of claim 2 further comprising the steps of: 
   selecting one of said first plurality of capacitors (57) 

as a capacitor under test; 
   coupling a first test capacitor (91) between a first 

node and said predetermined voltage terminal; 
   precharging said first node and a second node to a 

precharge voltage at a beginning of a test period; 
   coupling said capacitor under test between said 

second node and said predetermined voltage 
terminal; 

   coupling a second test capacitor (96) between said 
first node and said predetermined voltage 

terminal; and 
   coupling said first and second nodes to said first and 

second input terminals of said comparator (56), 
respectively; 

   whereby said capacitor under test is determined to be 
functional if said output terminal of said 

comparator (56) is in a first logic state at an 
end of said test period, and said capacitor under 

test is determined to be open if said output 
terminal of said comparator (56) is in a second 

logic state at said end of said test period. 
A method for testing a pulled-crystal oscillator (50), the 
pulled-crystal oscillator (50) having a capacitor digital-to-analog 

converter (CDAC) (57) coupled to a first crystal 
terminal, and a capacitor (58) coupled to a second crystal 

terminal, comprising the steps of: 
   coupling a first terminal of a first test capacitor (91) 

to a first terminal of a comparator (56); 
   providing a first predetermined voltage to a second 

terminal of said first test capacitor (91); 
   precharging a voltage at said first t
erminal of said 
first test capacitor (91) to a second 

predetermined voltage during a first portion of a 
test period;

 
   providing a comparison voltage to a second terminal of 

said comparator (56), said comparison voltage 
characterized as being between said first and 

second predetermined voltages; 
   coupling a first terminal of a selected capacitor (171) 

of a plurality of capacitors of the CDAC (57) to 
said first terminal of said comparator (56) 

during a second portion of said test period; 
   coupling a second terminal of said selected capacitor 

(171) to said first predetermined voltage during 
said second portion of said test period; and 

   providing an output of said comparator (56) as a test 
result of said selected capacitor (171) at an end 

of said second portion of said test period; 
   whereby said selected capacitor (171) provides a 

voltage to said first terminal of said comparator 
(56) between said comparison voltage and said 

first predetermined voltage if said selected 
capacitor (171) is functional, and said selected 

capacitor (171) provides said voltage to said 
first terminal of said comparator (56) between 

said second predetermined voltage and said 
comparison voltage if said selected capacitor 

(171) is not functional. 
The method of claim 4 wherein said step of providing said 
comparison voltage comprises the steps of: 

   coupling a first terminal of a second test capacitor 
(91) to said second terminal of said comparator 

(56); 
   providing said first predetermined voltage to a second 

terminal of said second test capacitor (91); 
   precharging a voltage at said first terminal of said 

second test capacitor (91) to said second 
predetermined voltage during said first portion 

of said test period; 
   providing said first predetermined voltage to a first 

terminal of a third test capacitor (96) during 
said first portion of said test period; 

   providing said first predetermined voltage to a second 
terminal of said third test capacitor (96); and 

   coupling said first terminal of said second test 
capacitor (91) to said first terminal of said 

third test capacitor (96) during said second 
portion of said test period. 
A method for testing a pulled-crystal oscillator (50), the 
pulled-crystal oscillator (50) having a first capacitor 

digital-to-analog converter (CDAC) (57) coupled to a first 
crystal terminal, and a second CDAC (58) coupled to a 

second crystal terminal, comprising the steps of: 
   coupling a first test capacitor (91) between a first 

node and a predetermined voltage terminal; 
   coupling a second test capacitor (91) between a 

second node and said predetermined voltage 
terminal; 

   precharging said first and second nodes to a precharge 
voltage; 

   coupling a selected capacitor (171) in the first CDAC 
(57) between said first node and said 

predetermined voltage terminal;
 

   coupling a third test capacitor (96) between said 
second node and said predetermined voltage 

terminal; and 
   comparing a voltage on said first node to a voltage on 

said second node; 
   whereby said selected capacitor (171) is determined 

to be functional if said voltage on said first 
node is less than said voltage on said second 

node, and said selected capacitor (171) is 
determined to be open if said voltage on said 

first node is greater than said voltage on said 
second node. 
The method of claim 6 further comprising the step of 
scanning in data to select a capacitor in the first CDAC (57) 

through a scan path (63, 64, 65). 
The method of claim 7 further comprising the step of 
latching a voltage on said output terminal of said 

comparator (56) and scanning out said voltage on said 
output terminal of said comparator (56) through said scan 

path (63, 64, 65). 
An oscillator with low jitter (50), comprising: 
   a first node for being coupled to a first terminal of a 

crystal (51); 
   a second node for being coupled to a second terminal 

of said crystal (51); 
   a first capacitor (57) coupled to said first node, said 

first capacitor (57) comprising a first capacitor 
digital-to-analog converter (CDAC) switched by 

a first digital input code; 
   a second capacitor (58) coupled to said second node; 

and 
   a comparator (56) having a first input terminal 

coupled to said first node, a second input 
terminal coupled to said second node, and an 

 
output terminal for providing a clock output 

signal. 
A method for testing a capacitor digital-to-analog 
converter (CDAC) (57), comprising the steps of: 

   coupling a first terminal of a first test capacitor (91) 
to a first terminal of a comparator (56); 

   providing a first predetermined voltage to a second 
terminal of said first test capacitor (91); 

   precharging a voltage at said first terminal of said 
first test capacitor (91) to a second 

predetermined voltage during a first portion of a 
test period; 

   providing a comparison voltage to a second terminal of 
said comparator (56), said comparison voltage 

characterized as being between said first and 
second predetermined voltages; 

   coupling a first terminal of a selected capacitor (171) 
of a plurality of capacitors of the CDAC (57) to 

said first terminal of said comparator (56) 
during a second portion of said test period; 

   coupling a second terminal of said selected capacitor 
(171) to said first predetermined voltage during 

said second portion of said test period; and 
   providing an output of said comparator (56) as a test 

result of said selected capacitor (171) at an end 
of said second portion of said test period; 

   whereby said selected capacitor (171) provides a 
voltage to said first terminal of said comparator 

(56) between said comparison voltage and said 
first predetermined voltage if said selected 

capacitor (171) is functional, and said selected 
capacitor (171) provides said voltage to said 

first terminal of said comparator (56) between 
said second predetermined voltage and said 

comparison voltage if said selected capacitor 
(171) is not functional. 
</CLAIMS>
</TEXT>
</DOC>
