<DOC>
<DOCNO>EP-0618591</DOCNO> 
<TEXT>
<INVENTION-TITLE>
Integrated circuit for memory card and method for deducting units in a memory card
</INVENTION-TITLE>
<CLASSIFICATIONS>G11C1700	G11C1604	G11C1612	G11C1602	G11C1602	G11C1604	G06K1907	G11C1606	G11C1616	G11C1610	G11C1700	G06K1907	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>G11C	G11C	G11C	G11C	G11C	G11C	G06K	G11C	G11C	G11C	G11C	G06K	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>G11C17	G11C16	G11C16	G11C16	G11C16	G11C16	G06K19	G11C16	G11C16	G11C16	G11C17	G06K19	</CLASSIFICATIONS-FOURTH>
<ABSTRACT>
The invention relates to memory cards intended for deducting a number of units by successive programming of electrically programmable and electrically erasable non-volatile memory cells. The memory is organised into N rows of P cells, the weight of the cells of a row in the count being P times the weight of the row of following rank. The deduction procedure is recurrent and consists in searching, by sweeping through the memory in the order of ascending weights, for an erased cell, in programming this cell and an auxiliary cell (TGFA), then in erasing the whole of the row of immediately inferior rank, unless the erased cell is situated in the first row, and in restarting this recurrent procedure until an erased cell is found in the first row. The auxiliary cell makes it possible to detect an abnormal interruption to the recurrent procedure and to reestablish the exact memory count, which count may have been corrupted by this abnormal interruption. 
<
IMAGE
>
</ABSTRACT>
<APPLICANTS>
<APPLICANT-NAME>
GEMPLUS CARD INT
</APPLICANT-NAME>
<APPLICANT-NAME>
GEMPLUS CARD INTERNATIONAL
</APPLICANT-NAME>
</APPLICANTS>
<INVENTORS>
<INVENTOR-NAME>
KOWALSKI JACEK ANTONI
</INVENTOR-NAME>
<INVENTOR-NAME>
KOWALSKI, JACEK ANTONI
</INVENTOR-NAME>
</INVENTORS>
<CLAIMS>
Integrated circuit for a memory card comprising 

a non-volatile memory organised in a network of N 
zones of P cells (C(i,j,)) 
means for selectively programming a cell ranked i, 
j of the memory, where i denotes the rank of the zone and 

j the rank of the cell within the zone, 
means for selectively erasing all the cells of a 
selected zone, 
 
   characterised in that the memory has, associated with 

each zone of rank i, a single auxiliary non-volatile memory 
cell (TGFA2, TGFA3) which is programmed simultaneously with 

any cell of the zone of rank i and which is erased 
simultaneously with the cells in the zone of rank i-1. 
Integrated circuit as claimed in claim 1, which 
also has a cell address counter (CPT), the high weightings 

of which enable a zone of rank i to be selected and the low 
weightings a cell of rank j in the selected zone, 

characterised in that it has circuits (TCA2, TCA3, TC1, 
TC2, TC3) controlled by high weighting outlets of the 

counter so that when the zone of rank i is selected, the 
programming potentials of a cell of rank i of the zone and 

the auxiliary cell of rank i can be applied to these cells 
and so that, whilst the line i is still selected, the 

erasing potentials of the line i-1 (i
>
1) and the erasing 
potentials of the auxiliary cell of rank i can be applied. 
Integrated circuit as claimed in one of claims 1 
and 2, characterised in that 


the non-volatile memory cells of the network and the 
auxiliary cells each have a specific transistor (TS) and a 

floating gate transistor (TGF), 
the floating gate transistors of the cells of a zone 
of rank i-1 have a control gate linked to the control gate 

of the floating gate transistor of the auxiliary cell of  
 

the zone i, 
the sources of the auxiliary floating gate 
transistors of the network are linked to a first common 

conductor (AG1) and the sources of the auxiliary floating 
gate transistors are linked to a second common conductor 

(AG2) independent of the first. 
Integrated circuit as claimed in claim 3, 
characterised in that the control gates of the floating 

gate transistors of zone i are linked by a control 
transistor of rank i to a third common conductor (CG1) 

allowing a reading, erasing or programming potential to be 

applied to the cells of rank i and the control gate of the 
auxiliary floating gate transistor of rank i is linked by 

an auxiliary control transistor (TCA2, TCA3) of rank i to 
a fourth common conductor (CG2) allowing a reading, 

programming or erasing potential to be applied to the 
auxiliary cell of rank i. 
Integrated circuit as claimed in claim 4, 
characterised in that the control transistor of rank i and 

the auxiliary control transistor of rank i are controlled 
by a word line of rank i. 
Integrated circuit as claimed in one of claims 3 to 
5, characterised in that the specific transistors 

corresponding to a zone i of the network are controlled by 
a word line of rank i and link the drains of the floating 

gate transistors of a same rank j to a same bit line of 
rank j, the specific transistor of the auxiliary cell of 

rank i is controlled by the word line of rank i and links 
the floating gate transistor of this auxiliary cell to an 

auxiliary bit line (BLDEC) common to all the auxiliary 
cells, and the same potential is applied to this auxiliary 

bit line in programming or erasing mode as on a bit line 
corresponding to a cell to be programmed or erased in the 

network. 
Integrated circuit as claimed in claim 6,  
 

characterised in that the auxiliary bit line is linked to 
an output (S) of the circuit so as to read the status of 

the auxiliary cells. 
Method of deducting tally units from a memory card 
having a non-volatile memory organised in a network of N 

zones of P cells and a counter for the cell addresses in 
the network (CPT), each zone having a weighting which is P 

times the weighting of the zone of the rank immediately 
below, this method consisting of executing the following 

recurrent procedure in order to deduct a unit: 

incrementing the counter and reading the status of 
a designated cell until a first erased cell is found by 

searching the memory in the order of zones of increasing 
weighting, 
programming the first erased cell found without 
incrementing the counter and, if the first cell is not 

located in the zone of the lowest rank: 
programming a non-volatile auxiliary memory cell 
associated with the zone in which the first erased cell is 

located and simultaneously programming the first erased 
cell, 
erasing the zone of the rank immediately below that 
of the cell found, 
erasing this auxiliary cell at the same time as the 
zone of the rank immediately below is erased and 

recommencing the recurrent procedure, 
 
   characterised in that the erasing steps are performed 

after the programming steps if the first cell designated by 
the counter does not belong to the zone of the lowest 

weighting, without changing the status of the counter. 
Method as claimed in claim 8, characterised in that 
it consists of the following preliminary steps before any 

deduction procedure, once voltage has been applied to the 
memory card: 


searching for a programmed auxiliary cell and  
 
simultaneously erasing this cell and the zone of the 
rank immediately below. 
Memory card using an integrated circuit as claimed 
in one of claims 1 to 7. 
</CLAIMS>
</TEXT>
</DOC>
