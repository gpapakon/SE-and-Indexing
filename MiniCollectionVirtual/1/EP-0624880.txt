<DOC>
<DOCNO>EP-0624880</DOCNO> 
<TEXT>
<INVENTION-TITLE>
Method and circuit for counting down the value of a debit-card
</INVENTION-TITLE>
<CLASSIFICATIONS>G07F710	G07F710	G11C1606	G11C1622	G06K19073	G11C1610	G06K19073	G07F708	G07F708	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>G07F	G07F	G11C	G11C	G06K	G11C	G06K	G07F	G07F	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>G07F7	G07F7	G11C16	G11C16	G06K19	G11C16	G06K19	G07F7	G07F7	</CLASSIFICATIONS-FOURTH>
<ABSTRACT>
In a method and a circuit for carrying out the method of counting down the value of a debit card, the memory is used as a multi-stage counter. Each counter stage is assigned one bit of a control memory. To prevent the card value from being manipulated, it is provided that before writing a carry and erasing the lower-order counter stage, the carry bit and the check bit are read with various evaluation thresholds. Such a circuit can be realised with a high level of immunity to manipulations by uncomplicated circuitry. 
<
IMAGE
>
</ABSTRACT>
<APPLICANTS>
<APPLICANT-NAME>
SIEMENS AG
</APPLICANT-NAME>
<APPLICANT-NAME>
SIEMENS AKTIENGESELLSCHAFT
</APPLICANT-NAME>
</APPLICANTS>
<INVENTORS>
<INVENTOR-NAME>
SCHRENK HARTMUT DR RER NAT
</INVENTOR-NAME>
<INVENTOR-NAME>
SCHRENK, HARTMUT, DR. RER. NAT.
</INVENTOR-NAME>
</INVENTORS>
<CLAIMS>
Method for deducting money value units in an
integrable electronic circuit of a debit card which

contains a counting memory (1) comprising non-volatile
memory cells which can be cleared and written to

electrically and which can be operated as a multi-stage
counter, and which contains a check memory (2) comprising

non-volatile memory cells, which can be cleared and
written to electrically, and having check memory regions

which are assigned to the counter stages, characterized
in that an average evaluation threshold is used for

outputting the contents of a memory cell to an operator
in order to read the memory cell, and in that, before a

counting process which is defined by writing a memory
cell of the counting memory (1) and the associated memory

cell of the check memory (2), the contents of at least
the memory cell of the check memory (2) are read with an

evaluation threshold which is different from the average
evaluation threshold, in particular a more critical

evaluation threshold, and the counting process is
controlled as a function of the read result.
Method according to Claim 1, characterized in
that in memory cells of the n-channel type with floating

gate, the multiple evaluation threshold is higher than
the average evaluation threshold.
Method according to one of Claims 1 or 2, characterized
in that various evaluation thresholds are reached

by means of various read voltages which are applied to
the control gate of a non-volatile memory cell.
Method according to Claim 3, characterized in
that, before a writing phase for a transfer bit into a 

memory cell of a next higher-level counter stage of the
counting memory (1) and for an assigned check bit into a

memory cell of the check memory (2), reading is carried
out with a first read voltage, and before a clearing

phase of a lower-level counter stage and of the check
bit, reading is carried out with a second read voltage.
Method according to Claim 4, characterized in
that in memory cells of the n-channel type with floating

gate the first read voltage is higher than the second
read voltage.
Method according to one of Claims 3 to 5, characterized
in that the writing process for the transfer bit

and the check bit is suppressed during the writing phase
if the transfer bit and the check bit are detected by the

evaluation before the writing phase as having been
written.
Method according to one of Claims 3 to 6, characterized
in that the writing process for the check bit is

suppressed during a writing phase if either the transfer
bit or the check bit are detected as having been written.
Method according to one of Claims 3 to 7, characterized
in that the writing process for the check bit is

suppressed during a writing phase and the check bit is
cleared if either the transfer bit or the check bit are

detected as having been written.
Method according to one of Claims 3 to 7, characterized
in that the writing process for the check bit is

suppressed during a writing phase and the transfer bit is
written if the transfer bit is cleared and the check bit

is written.
Circuit arrangement for carrying out the method
according to one of Claims 1 to 9, in which the counting

memory (1) is divided into subregions with different
significance and in which control is carried out by means

of circuit means, and in that each subregion is cleared
only if a transfer bit is written into a previously

unwritten memory cell of the subregion of the next higher
significance, and in which a bit of the check memory (2) 

is assigned in each case to a subregion, and the check
memory (2) is controlled by circuit means, in that a

memory cell of the check memory (2) is written to if a
memory cell of the assigned subregion of the counting

memory (1) is written to, and is cleared if the next
lowest-level subregion of the counting memory (1) is

cleared, characterized in that control means (15) are
provided by means of which at least two different control

gate voltages are generated for the memory cells, in that
a decoding device (12) is provided which is connected to

data signal lines of the memory cells and by means of
which memory states of an addressed memory cell of the

counting memory (1) and of the check memory (2) are
evaluated, and in that a sequence control device (16) is

provided by means of which control means (9) are controlled,
with which the control gate of a memory cell of

the check memory and the control gates of the next
lower-level subregion of the counting memory (1) can be

connected or separated.
Circuit arrangement according to Claim 10,
characterized in that each subregion of the memory (1) is

assigned only a single memory cell of the check memory
(2).
</CLAIMS>
</TEXT>
</DOC>
