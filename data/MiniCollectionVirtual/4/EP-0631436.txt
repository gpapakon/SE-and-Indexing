<DOC>
<DOCNO>EP-0631436</DOCNO> 
<TEXT>
<INVENTION-TITLE>
Apparatus for recording and reproducing compressed or non-compressed digital video data
</INVENTION-TITLE>
<CLASSIFICATIONS>H04N592	H04N5926	H04N5937	H04N5926	H04N979	H04N594	H04N592	H04N5937	H04N979	H04N5945	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>H04N	H04N	H04N	H04N	H04N	H04N	H04N	H04N	H04N	H04N	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>H04N5	H04N5	H04N5	H04N5	H04N9	H04N5	H04N5	H04N5	H04N9	H04N5	</CLASSIFICATIONS-FOURTH>
<ABSTRACT>
In an apparatus for recording digital video data 
including a memory, a first memory controller generates a 

write address and a read address of the memory so that an 
order of the digital video data read out from the memory is 

different from that of the digital video data written into 
the memory, and a second memory controller generates a 

write address and a read address of the memory so that an 
order of the digital video data read out from the memory is 

the same as that of the digital video data written into the 
memory. Further, a switch, responsive to a control sign
al, 
selectively switches over between a first state that the 

first memory controller is connected to the memory and a 
second state that the second memory controller is connected 

to the memory, and then the digital video data read out 
from the memory is recorded onto a recording medium. 


</ABSTRACT>
<APPLICANTS>
<APPLICANT-NAME>
MATSUSHITA ELECTRIC IND CO LTD
</APPLICANT-NAME>
<APPLICANT-NAME>
MATSUSHITA ELECTRIC INDUSTRIAL CO., LTD.
</APPLICANT-NAME>
</APPLICANTS>
<INVENTORS>
<INVENTOR-NAME>
BANNAI TATSUSHI
</INVENTOR-NAME>
<INVENTOR-NAME>
HIRATSUKA SACHIO
</INVENTOR-NAME>
<INVENTOR-NAME>
OOTSUKA TAKESHI
</INVENTOR-NAME>
<INVENTOR-NAME>
BANNAI, TATSUSHI
</INVENTOR-NAME>
<INVENTOR-NAME>
HIRATSUKA, SACHIO
</INVENTOR-NAME>
<INVENTOR-NAME>
OOTSUKA, TAKESHI
</INVENTOR-NAME>
</INVENTORS>
<DESCRIPTION>
The present invention relates to an apparatus for
recording and reproducing compressed or non-compressed
digital video data, in particular, to an apparatus for
recording and reproducing compressed or non-compressed
digital video data.As video tape recording and reproducing
apparatuses (referred to as VTRs hereinafter) each for
encoding a video signal into digital video signal,
recording the digital video signal onto a magnetic tape and
reproducing the recorded digital video signal from the
magnetic tape, the following VTRs have been put into
practical use:
(a) D1-VTR which uses a component signal as a
signal to be recorded;(b) D2-VTR which uses a composite signal as a 
signal to be recorded; and(c) D3-VTR.The details of the D1-VTR are disclosed in, for
example, "SMPTE 227M 19-mm type D1 cassette-helical data
and control record", SMPTE Journal, March 1992. In the D1-VTR,
a video signal is sampled according to the so-called
4:2:2 method, and then the sampled signal is quantized into
eight-bit digital video data, which is recorded onto a
magnetic tape having a width of 1,905 cm. In the 4:2:2
method, the luminance signal is sampled at 13.5 MHz, and
the two color difference signals are sampled at 6.75 MHz,
respectively.In the D2-VTR, the composite video signal is
sampled at the frequency which is four times the frequency
of the subcarrier signal, and then the sampled signal is
quantized into eight-bit video data, which is recorded onto
a magnetic tape having a width of 1,905 cm. However,
since the magnetic tape has the width of 1,905 cm, the
D2-VTR can not be reduced in the size and weight thereof,
and this is requested for a camera integrally incorporated
type VTR. According to these needs in the markets, the D3-VTR
was manufactured as a product. In the D3-VTR, the
composite video signal is quantized into eight-bit video
data, and the video data is recorded onto a magnetic tape
having a width of 1,27 cm. In these digital VTRs, in order to deal with the
transmission error caused in the recording and reproducing
processes, a shuffling process is used in which the order
of the data to be recorded onto a magnetic tape is changed
so as to be different from that of the data as sampled.
Executing the shuffling process can prevent errors from
being caused in sequentially continuous sampled data, and
can prevent errors from being caused in a plurality of data
included in the same code sequence. This results in
substantial improvement in the performance of the error
concealment and in the performance of the error
</DESCRIPTION>
<CLAIMS>
An apparatus for recording digital video data, comprising:

memory means (2) for storing digital video data inputted to said apparatus; and
recording means (7, 8) for recording the digital video data read out from said first
memory means onto a recording medium;

characterized by

first memory controlling means (3) for generating a write address and a read
address of said memory means (2) so that an order of the digital video data read

out from said memory means (2) is different from that of the digital video data
written into said memory means (2);
second memory controlling means (4) for generating a write address and a read
address of said memory means (2) so that an order of the digital video data read

out from said memory means (2) is the same as that of the digital video data
written into said memory means (2); and
switching means (5), responsive to a control signal from a switching controller
(19), for selectively switching over between a first switched state in which said

first memory controlling means (3) is connected to said memory means (2) when
non-compressed digital video data are written into said memory means (2), and a

second switched state in which said second memory controlling means (4) is
connected to said memory means (2) when compressed digital video data are

written into said memory means (2).
The apparatus as claimed in claim 1,

wherein said first memory controlling means (3) generates the write address and
the read address of said first memory means (2) so as to perform a shuffling

process for the digital video data to change the order of the digital video data by
writing the digital video data using the write address in said first memory means

(2) and reading out the digital video data using the read address from said first
memory means (2); and
wherein said second memory controlling means (4) generates the write address
and the read address of said first memory means (2) so as to perform a delay

process for the digital video data without the shuffling process by writing the
digital video data using the write address in said first memory means (2) and

reading out the digital video data using the read address from said first memory
means (2).
An apparatus for reproducing digital video data, comprising:

reproducing means (9, 10) for reproducing digital video data from a recording
medium; and
memory means (12) for storing digital video data reproduced by said reproducing
means (9, 10);

characterized by

first memory controlling means (13) for generating a write address and a read
address of said memory means (12) so that an order of the digital video data read

out from said memory means (12) is different from that of the digital video data
written into said memory means (12);
second memory controlling means (14) for generating a write address and a read
address of said memory means (12) so that an order of the digital video data read

out from said memory means (12) is the same as that of the digital video data
written into said memory means (12); and
switching means (15), responsive to a control signal from a switching controller
(20), for selectively switching over between a first switched state in which said

first memory controlling means (13) is connected to said memory means (12) when
non-compressed digital video data are written into said memory means (12), and

a second switched state in which said second memory controlling means (14) is
connected to said memory means (12) when compressed digital video data are

written into said memory means (12).
The apparatus as claimed in claim 3,

wherein said first memory controlling means (13) generates the write address and 
the read address of said memory means (12) so as to perform a deshuffling process

for the digital video data to recover the original order of the digital video data
by writing the digital video data using the write address in said second memory

means and reading out the digital video data using the read address from said
memory means (12); and
wherein said second memory controlling means (14) generates the write address
and the read address of said memory means (12) so as to perform a delay process

for the digital video data without the deshuffling process by writing the digital
video data using the write address in said memory means (12) and reading out the

digital video data using the read address from said memory means (12).
The apparatus as claimed in claim 1 or 2,

error correction parity data adding means (6) for adding error correction parity data to the digital video data
read out from said memory means (2) and outputting the digital video data

together with the error correction parity data.
The apparatus as claimed in claim 3 or 4,

wherein said digital video data includes error correction parity data, further comprising error
correction means (11) for correcting errors in the digital video data reproduced by

said reproducing means (9, 10) on the basis of the error correction parity data reproduced by said
reproducing means (9, 10), generating an error flag when the digital video data can

not be corrected by said error correction means (11), and outputting the digital
video data together with the error flag representing the digital video data which

can not be corrected, wherein said memory means (12) stores said digital video
data together with the error flag outputted from said error correction means (11);

and error concealment means (16) for concealing the error in the digital video data
represented by the error flag read out from said memory means (12) by predictively

interpolating the digital video data which could not be corrected by said error
correction means (11) in the first switched state, and for not performing a process

for concealing the error and outputting the compressed digital video data and the
error flag outputted from said error correction means (11) in the second switched

state.
An apparatus for recording and reproducing digital video data, comprising:

first memory means (2) for storing digital video data inputted to said apparatus;
error correction parity data adding means (6) for adding error correction parity data to the digital video data 

read out from said first memory means (2) and outputting the digital video data
together with the error correction parity data,
recording means (7, 8) for recording the digital video data and the error parity onto
a recording medium;
reproducing means (9, 10) for reproducing digital video data and the error parity
from said recording medium; and
second memory means (12) for storing digital video data;

characterized by

first memory controlling means (3) for generating a write address and a read
address of said first memory means (2) so that an order of the digital video data

read out from said first memory means (2) is different from that of the digital video
data written into said first memory means (2), and for thus performing a shuffling

process for the digital video data to change the order of the digital video data by
writing the digital video data using the write address in said first memory means

(2) and reading out the digital video data using the read address from said first

memory means (2);
second memory controlling means (4) for generating a write address and a read
address of said first memory means (2) so that the order of the digital video data

read out from said first memory means (2) is the same as that of the digital video
data written into said first memory means (2) and for thus performing a delay process

for the digital video data without the shuffling process by writing the digital video
data using the write address in said first memory means (2) and reading out the

digital video data using the read address from said first memory means (2);
first switching means (5), responsive to a control signal from a first switching
controller (19), for selectively switching over between a first switched state in

which said first memory controlling means (3) is connected to said first memory
means (2) when non-compressed digital video data are written into said first

memory means (2), and a second switched state in which said second memory
controlling means (4) is connected to said first memory means (2) when compressed

digital video data are written into said first memory means (2);
error correction means (11) for correcting errors in the digital video data reproduced
by said reproducing means (9, 10) on the basis of the error correction parity data reproduced

by said reproducing means (9, 10), generating an error flag when the digital
video data can not be corrected by said error correction means (11), and

outputting the digital video data together with the error flag representing the digital 
video data which can not be corrected to said second memory means (12);

third memory controlling means (13) for generating a write address and a read
address of said second memory means (12) so as to perform a deshuffling

process opposite to the shuffling process for the digital video data with the error
flag to recover the original order of the digital video data by writing the digital

video data using the write address in said second memory means (12) and reading
out the digital video data using the read address from said second memory means

(12);
fourth memory controlling means (14) for generating a write address and a read
address of said second memory means (12) so as to perform a delay process for

the digital video data with the error flag without the deshuffling process by writing
the digital video data using the write address in said second memory means (12)

and reading out the digital video data using the read address from said second
memory means (12);
second switching means (15), responsive to a further control signal from a second
switching controller (20), for selectively switching over between a first switched

state in which said third memory controlling means (13) is connected to said
second memory means (12) when non-compressed digital video data are written

into said second memory means (12), and a second switched state in which said
fourth memory controlling means (14) is connected to said second memory means

(12) when compressed digital video data are written into said second memory
means (12); and
error concealment means (16) for concealing the errors in the digital video data
represented by the error flag read out from said second memory means (12) by

predictively interpolating the digital video data which could not be corrected by
said error correction means (11) in the first switched state, and for not performing

a process for concealing the error and outputting the compressed digital video data
and the error flag outputted from said error correction means (11) in the second

switched state.
The apparatus as claimed in claim 7, further comprising:

compression flag adding means (31) for adding a compression flag
indicating whether the digital video data are compressed or not so that said first memory

means (2) is connected to said second memory controlling means (4) or said first
memory controlling means (3), respectively,
wherein said second switching means (15) switches over so that said second
memory means (12) is connected to said third memory controlling means (13)

when the compression flag indicates that the digital video data are 
not compressed, whereas said second switching means (15) switches over so that

said second memory means (12) is connected to said fourth memory controlling
means (14) when the compression flag indicates that the digital

video data are compressed.
</CLAIMS>
</TEXT>
</DOC>
