<DOC>
<DOCNO>EP-0615187</DOCNO> 
<TEXT>
<INVENTION-TITLE>
One-chip microcomputer system having function for substantially correcting contents of program
</INVENTION-TITLE>
<CLASSIFICATIONS>G03B7091	G06F1100	G06F1100	G06F9445	G03B7091	G06F9445	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>G03B	G06F	G06F	G06F	G03B	G06F	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>G03B7	G06F11	G06F11	G06F9	G03B7	G06F9	</CLASSIFICATIONS-FOURTH>
<ABSTRACT>
A one-chip microcomputer system (4) includes a one-chip 
microcomputer (1), a nonvolatile memory (2) which 

can electrically rewritably store changing data of a 
program stored in a mask ROM (1a) of the one-chip microcomputer 

(1), an input unit (connection unit) (3) for 
receiving data to be written in the nonvolatile memory 

from an external device (6), and an object (5) to be 
controlled by the one-chip microcomputer (1). In one 

aspect, the mask ROM (1a) stores ROM version data, and 
the nonvolatile memory (2) stores board version data. 

Upon writing of the data via the input unit (3), bug 
correction data is selected based on the ROM version 

data and the board version data, and the selected data 
is written in the nonvolatile memory (2). 


</ABSTRACT>
<APPLICANTS>
<APPLICANT-NAME>
OLYMPUS OPTICAL CO
</APPLICANT-NAME>
<APPLICANT-NAME>
OLYMPUS OPTICAL CO., LTD.
</APPLICANT-NAME>
</APPLICANTS>
<INVENTORS>
<INVENTOR-NAME>
FUJIBAYASHI KENJI
</INVENTOR-NAME>
<INVENTOR-NAME>
HARA MINORU
</INVENTOR-NAME>
<INVENTOR-NAME>
IMAI YUJI
</INVENTOR-NAME>
<INVENTOR-NAME>
ITOH JUNICHI
</INVENTOR-NAME>
<INVENTOR-NAME>
KAWAMURA SHOJI
</INVENTOR-NAME>
<INVENTOR-NAME>
KOBAYASHI KAZUTADA
</INVENTOR-NAME>
<INVENTOR-NAME>
MIYAZAWA AZUMA
</INVENTOR-NAME>
<INVENTOR-NAME>
OKUMURA YOICHIRO
</INVENTOR-NAME>
<INVENTOR-NAME>
SAITO YUICHI
</INVENTOR-NAME>
<INVENTOR-NAME>
FUJIBAYASHI, KENJI
</INVENTOR-NAME>
<INVENTOR-NAME>
HARA, MINORU
</INVENTOR-NAME>
<INVENTOR-NAME>
IMAI, YUJI
</INVENTOR-NAME>
<INVENTOR-NAME>
ITOH, JUNICHI
</INVENTOR-NAME>
<INVENTOR-NAME>
KAWAMURA, SHOJI
</INVENTOR-NAME>
<INVENTOR-NAME>
KOBAYASHI, KAZUTADA
</INVENTOR-NAME>
<INVENTOR-NAME>
MIYAZAWA, AZUMA
</INVENTOR-NAME>
<INVENTOR-NAME>
OKUMURA, YOICHIRO
</INVENTOR-NAME>
<INVENTOR-NAME>
SAITO, YUICHI
</INVENTOR-NAME>
</INVENTORS>
<DESCRIPTION>
The present invention generally relates to a
one-chip microcomputer system
as defined in the preamble of claim 1
and, more particularly,
to a one-chip microcomputer system having a function of
substantially correcting the contents of a program written
in a mask type read-only memory (mask ROM) incorporated
in a one-chip microcomputer used as a controller
for controlling an object to be controlled such as a
camera. A respective microcomputer system is disclosed in EP-A-514 806.Recent cameras are designed to operate according to
a program written in mask type read-only memory (mask
ROM) incorporated in a one-chip microcomputer (one-chip
CPU). Such a program is created to achieve optimal
operations in combinations with various accessaries,
which are conceivable at the stage of system design of
a camera.A camera of this type sequentially processes a
program from the initial address of the mask ROM upon
power-ON reset, and finally stops in a low power consumption
mode. In a series of processing operations,
the program cannot be stopped at a desired address by
an external apparatus, or the state of progress in
processing, i.e., the value of a program counter, the
value of a random-access memory (RAM), and the like,
which are incorporated in the one-chip CPU, cannot be
checked by an external apparatus. In above-mentioned conventional camera system
having the one-chip CPU, the program of the camera
system includes programs corresponding to all
accessaries available at the time of system design.
However, some customers may request to rewrite the
program created upon system design of the camera.The mask ROM comprises a correction area for
erroneous operation prevention, and an optional correction
area. Upon rewriting of the program, the correction
area for erroneous operation prevention may be
erroneously deleted.For this reason,
JP 3-186927 discloses a technique associated with
program correction of a system comprising a CPU which
allows program correction so as to prevent a correction
area for erroneous operation prevention from being erroneously
deleted.However, according to the technique of this prior
art, although the correction area for erroneous operation
prevention can be prevented from being deleted, it
is not easy to delete only an optional correction area
which is used for changing specifications.When a countermeasure against a drawback, which
is not expected upon system design, is taken in the
manufacturing process of a product as a camera system,
the specifications of an electric circuit board which
m
</DESCRIPTION>
<CLAIMS>
A one-chip microcomputer system (4) comprising

a one-chip microcomputer (1) comprising a one-chip
microcomputer main body,
data input means (3) for receiving correction data;
a mask ROM (1a) for storing program contents for control
by said one-chip microcomputer main body (1); and
substantial changing means (1) for substantially
changing the program contents stored in said mask ROM (1a)

on the basis of the correction data received via said data
input means (3), wherein
an electrically rewritable nonvolatile memory (2) is

arranged outside said one-chip microcomputer (1), said system
being characterized in that
said mask ROM (1a) stores ROM version data, and
said electrically rewritable nonvolatile memory (2)
stores the correction data for changing the program contents

stored in said mask ROM (1a), and matches correction
data with the ROM version data stored in said mask ROM (1a)

being written in said electrically rewritable nonvolatile
memory (2).
A system according to claim 1, characterized in that
said electrically rewritable nonvolatile memory (2) stores

board number data indicating a version of an electrical
circuit board on which said one-chip microcomputer system

(4) is mounted.
A system according to claim 2, characterized in that
correction data is written in said electrically rewritable

nonvolatile memory (2) in accordance with the ROM version
data and the board number data. 
A system according to claim 3, characterized in that
said system (4) can be connected to an external device (6)

via said data input means (3), and said external device (6)
stores a plurality of the correction data, selects proper

correction data, and inputs the selected data to said system
(4).
A system according to any of claims 1 to 4,
characterized in that said nonvolatile memory (2) has an

area for storing data associated with a capacity of a
program to be substantially changed.
A camera system comprising:

a camera main body (5) and
a one-chip microcomputer system according to any of
claims 1 to 5.
A method of writing correction data to a system (4) according
to claims 1 to 5 or a camera according to claim 6

comprising the steps of :

reading ROM version data stored in said mask ROM (1a);
determining on the basis of the ROM version data
whether or not program correction is required; and
writing a correction program in said nonvolatile memory
(2) when it is determined that the correction is required.
</CLAIMS>
</TEXT>
</DOC>
