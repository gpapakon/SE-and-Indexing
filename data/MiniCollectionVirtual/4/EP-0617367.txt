<DOC>
<DOCNO>EP-0617367</DOCNO> 
<TEXT>
<INVENTION-TITLE>
System management interrupt address bit correction circuit
</INVENTION-TITLE>
<CLASSIFICATIONS>G06F1202	G06F946	G06F1206	G06F1206	G06F1320	G06F948	G06F1202	G06F946	G06F1324	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>G06F	G06F	G06F	G06F	G06F	G06F	G06F	G06F	G06F	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>G06F12	G06F9	G06F12	G06F12	G06F13	G06F9	G06F12	G06F9	G06F13	</CLASSIFICATIONS-FOURTH>
<ABSTRACT>
A system management mode address correction system 
for a computer provides correct address values on the 

address bus when the computer is in system management 
mode. Conventionally, bit 20 of the microprocessor's 

address outputs may be masked by asserting the FORCE 
A20 signal. The computer system also operates in a 

system management mode, which requires all of the 
address bits to be available for proper access to the 

system management interrupt vector. When the computer 
is in system management mode, the computer's 

microprocessor asserts a system management interrupt 
active (SMIACT*) signal. This signal is provided to a 

circuit which also receives the FORCE A20 signal. 
While the SMIACT signal is deactivated, the control 

circuit provides the true FORCE A20 signal to the 
computer system. When an SMI occurs, the SMIACT signal 

is activated and the FORCE A20 signal is disabled. As 
a result, the address generated by the microprocessor 

is asserted on the address bus. 

</ABSTRACT>
<APPLICANTS>
<APPLICANT-NAME>
COMPAQ COMPUTER CORP
</APPLICANT-NAME>
<APPLICANT-NAME>
COMPAQ COMPUTER CORPORATION
</APPLICANT-NAME>
</APPLICANTS>
<INVENTORS>
<INVENTOR-NAME>
AYASH BASEM ABU
</INVENTOR-NAME>
<INVENTOR-NAME>
THOME GARY W
</INVENTOR-NAME>
<INVENTOR-NAME>
AYASH, BASEM ABU
</INVENTOR-NAME>
<INVENTOR-NAME>
THOME, GARY W.
</INVENTOR-NAME>
</INVENTORS>
<DESCRIPTION>
The invention relates to interrupt routines in
computer systems, and more particularly, to assertion
of the proper interrupt starting address on an address
bus when a system management interrupt is asserted.In the early years of personal computers, the
International Business Machines (IBM) PC computer
dominated the field. The IBM PC enjoyed sensational
success, for it was one of the first affordable yet
reasonably powerful desktop computers. Eventually, the
domination of the IBM PC became so widespread that the
IBM PC set the standards for personal computer
architecture, system design, and software.The IBM PC used the Intel Corporation's 8088
microprocessor in its central processing unit (CPU),
which employs a 20-bit address bus for accessing system
memory and I/O devices. Because the IBM PC so
thoroughly dominated the personal computer market,
software vendors created an array of software for the
20-bit bus of the 8088 microprocessor and the 8086
microprocessor. Much of this software forms the
foundation of modern software. Consequently, due to
the early dominance of the 20-bit bus in the IBM PC and
the ground-breaking software created for it, many basic
applications in use today are based on a 20-bit address
bus.The next generation of extremely successful IBM
personal computers was the IBM PC/AT. To provide 
access to a wider range of memory and I/O devices, the
IBM PC/AT architecture incorporated a 24-bit bus. At
the heart of the IBM PC/AT was the Intel Corporation
80286 microprocessor, which utilizes a 24-bit address
bus. Although the 24-bit addressing capability of the
286 microprocessor could drive the PC/AT's 24-bit bus,
a standard 24-bit configuration was incompatible with
certain of the software that had been developed for the
20-bit 8088 microprocessor. This was partially because
the 8088 instruction register, when it reaches its
limit of FFFFFh, rolls over to an initial value of
00000h. Thus, the memory space for an 8088 system can
be viewed as continuous from the upper limit (FFFFFh)
of the 20-bit address bus to the initial value
(00000h). A 24-bit counter, however, generates a value
of 100000h after 0FFFFFh, and does not roll over.
Because some programs rely on the rollover
characteristic, these programs are not compatible with
a 24-bit address bus which continues to increment.To maintain compatibility, an address bit 20 mask
signal was incorporated into the computer system to
simulate the rollover of the 8088 counter. Although
several names and logic senses are used to designate
the
</DESCRIPTION>
<CLAIMS>
A computer system (C) comprising:

a host bus (H);
a microprocessor (152) coupled to said host bus H and
capable of operating in a system management mode, said

microprocessor including:
a set of n address output lines for collectively
providing an address to said host bus (H);
an address mask input for receiving a masking signal;
an address mask responsive to said masking signal and
operable to mask at least one of the address output lines

before said address is provided to said host bus (H); and
a masking control signal generator operable to
selectively provide the masking signal; characterised by
the microprocessor (152) providing a system management
mode indication signal (SMIACT*) indicating that the

microprocessor (152) is operating in a system management
mode;
an address correction circuit (162) responsive to the
system management mode indication signal (SMIACT*) for

passing the masking signal from said masking control signal
generator to said microprocessor (152) based on the system

management mode indication signal (SMIACT*), said address
correction circuit (162) being operable to disable passage

of the masking signal if the system management mode
indication signal (SMIACT*) is provided and being operable

to enable passage of the masking signal if the system
management mode indication signal (SMIACT*) is not

provided.
The computer system (C) of claim 1, wherein said
microprocessor (152) includes a system management interrupt

active signal for indicating that said microprocessor (152)
is operating in system management mode, and wherein said

system management mode indication signal (SMIACT*) is the
system management interrupt active signal. 
The computer system (C) of claim 1, wherein said
microprocessor (152) is further capable of operating in a

real mode and when said microprocessor (152) is operating
in the real mode said n address output lines are

characterized by having a wraparound effect at a 1 megabyte
address.
The computer system (C) of claim 1, wherein said
microprocessor (152) is an Intel Corporation Pentium

microprocessor, and wherein said system management
interrupt active signal includes the system management

interrupt active signal generated by the Pentium
microprocessor.
The computer (C) of claim 1, wherein n is 36.
The computer system (C) of claim 5, wherein the
masking control signal generator masks bit 20 of the

microprocessor output lines so that the incremental address
output simulates the rollover of a set of address outputs

having 20 bits when said masking signal is asserted.
The computer system (C) of claim 1, wherein the
microprocessor (152) is a Pentium microprocessor, and

wherein the masking control signal generator is connected
to the address bit 20 mask signal input of the Pentium

microprocessor.
The computer system (C) of claim 1, wherein the
address correction circuit (162) includes an OR gate having

its output connected to the microprocessor (152), a first
input connected to the masking control signal generator for

receiving the masking control signal, and a second input
connected to the microprocessor for receiving the system

management mode indication signal. 
The computer system (C) of claim 1, wherein said
address correction circuit (162) is further responsive to

a system reset signal (RSTSYS), and wherein said address
correction circuit (162) is operable to disable passage of

the masking signal if the system reset signal (RSTSYS) is
provided and is operable to enable passage of the masking

signal (RSTSYS) if the system reset signal is not provided.
The computer system (C) of claim 1, further comprising
a register having n bits for providing va
lues to the
address output lines and wherein said address correction

circuit (162) marks at least one of the microprocessor
address output lines such that the register values at the

output lines simulate the rollover of a register having
less than n bits and wherein the microprocessor (152) may

operate in a system management mode which utilizes all n
bits of the microprocessor output lines.
The computer system (C) of claim 1, further
comprising:


an input/output system controller coupled to said host
bus (H); and one or more mass storage devices coupled to

said input/output system controller and addressable by said
microprocessor (152).
The computer system (C) of claim 1, further
comprising:


a main memory (170) coupled to said microprocessor
(152); and
a floppy disk drive (130) coupled to said
microprocessor (152).
The computer system of claim 12, further comprising an
audio system (148).
</CLAIMS>
</TEXT>
</DOC>
