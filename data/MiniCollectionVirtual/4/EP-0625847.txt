<DOC>
<DOCNO>EP-0625847</DOCNO> 
<TEXT>
<INVENTION-TITLE>
Self calibrating color printer
</INVENTION-TITLE>
<CLASSIFICATIONS>B41J221	B41J2525	H04N123	B41J221	H04N160	H04N160	B41M114	B41M114	H04N1034	H04N1032	H04N123	B41J2525	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>B41J	B41J	H04N	B41J	H04N	H04N	B41M	B41M	H04N	H04N	H04N	B41J	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>B41J2	B41J2	H04N1	B41J2	H04N1	H04N1	B41M1	B41M1	H04N1	H04N1	H04N1	B41J2	</CLASSIFICATIONS-FOURTH>
<ABSTRACT>
A self calibrating color printer comprising a movable optical sensor 
assembly which first calibrates itself by measuring an 

included known color gamut located within the movement 
range of the sensor assembly. Once calibrated, the sensor 

assembly measures a color print test pattern newly printed 
by a movable color print head of the printer. An 

analog-to-digital converter transforms electrical signals 
from the sensor assembly to sensor values in digital form, 

enabling a printer control processor to process the 
measured data, thereby producing two look-up tables stored 

in memory: first, a color correction look-up table which 
adjusts image color values to account for the ink/paper 

variations, and second, an error diffusion look-up table 
which spreads color value errors at a given pixel to its 

neighbors. Once the printer control processor creates 
these two look-up tables and, the printer is able 
to 
process image data, and control the print head via its 

associated print head electronics to faithfully reproduce 
the image onto paper. The moveable sensor and associated 

gamut and print test pattern of the present invention 
provide an accurate, inexpensive and durable apparatus for 

calibrating any digital color printer. 

</ABSTRACT>
<APPLICANTS>
<APPLICANT-NAME>
HEWLETT PACKARD CO
</APPLICANT-NAME>
<APPLICANT-NAME>
HEWLETT-PACKARD COMPANY
</APPLICANT-NAME>
</APPLICANTS>
<INVENTORS>
<INVENTOR-NAME>
LLOYD WILLIAM J
</INVENTOR-NAME>
<INVENTOR-NAME>
MEYER JOHN D
</INVENTOR-NAME>
<INVENTOR-NAME>
YEUNG KING-WAH W
</INVENTOR-NAME>
<INVENTOR-NAME>
LLOYD, WILLIAM J.
</INVENTOR-NAME>
<INVENTOR-NAME>
MEYER, JOHN D.
</INVENTOR-NAME>
<INVENTOR-NAME>
YEUNG, KING-WAH W.
</INVENTOR-NAME>
</INVENTORS>
<DESCRIPTION>
The present invention relates to digital printing,
and more particularly to field calibration of digital
color printers. A large share of personal computers now
sold include high resolution color displays for viewing
color images. Using thermal inkjet technology, personal
color printers are capable of approximating the color
images viewed on such displays. By precisely controlling
ink dot size and ink dot color placement, color halftone
images may be printed. However, variability in inks,
papers and drop volume cause problems in exactly
reproducing desired shades and color tones. Similar
problems occur in other printing schemes which use
pigmented inks or pigmented dry toners, such as color
laser printers. These variations in pixel color, density
and dot size result in poor reproduction and color
distortions.Aside from ink and paper variations, the very nature
of digital printing creates other problems. Because only
a limited number of discrete dot sizes of a given color
ink are used, some technique for tonal averaging or
smoothing is required to yield proper tones for those "in
between" colors not ordinarily printable. A system using
such averaging techniques trades spatial resolution for
tonal veracity. These techniques are generally called
digital half toning methods. Following the algorithm of
any of these methods, dots are distributed upon the paper
in patterns or populations so as to create the visual
impression of an intensity between that of white paper
and full ink coverage. One such technique for smoothing
color variations is the error diffusion method, where the
difference between a desired color density at a pixel and 
its actual printed density, the error, is distributed to
adjacent pixels. Floyd, R. W., and Steinberg, L., "An
Adaptive Algorithm for Spatial Gray Scale, Pro. SAID,
Vol. 17/2 (Second Quarter 1976), pp. 75-77. The
distributed error is incorporated in calculating the
neighboring pixel's printed dot size and then a similar
process of diffusing any error in the next computation is
undergone. However, to correctly implement error
diffusion, one requires precise knowledge of available
pixel densities. Other methods make use of groups of
dots, for example Clustered Dot Dither or Super-pixel
algorithms. Here the pattern of dot that most closely
approximates the desired print density is chosen and no
error processing occurs. For all these methods and
approaches for approximating colors on paper, the applied
color densities are influenced by the choice of ink and
paper and vary with the
</DESCRIPTION>
<CLAIMS>
A digital printing method comprising the steps of:

providing a known colour gamut (217), an optical sensor
assembly (210), a computer and a printing mechanism (212);
measuring colour density of the gamut using a standard
densitometer and storing resulting colour density standard

values in the computer;
sensing the gamut using the optical sensor assembly and
storing a resulting first set of sensor values in the

computer;
calibrating the optical sensor assembly by means of the
known colour gamut based upon the colour density standard

values (224) and the first set of sensor values to produce
optical sensor assembly calibration information (230);
printing a print test pattern (214) on a printing
substrate (216);
optically sensing the print test pattern using the
optical sensor assembly and storing a resulting second set

of sensor values in the computer;
using the computer and the optical sensor assembly
calibration information to transform the second set of sensor

values into a set of calibrated colour density values of the
test pattern;
using the computer to generate a set of correction
parameters based upon the set of calibrated colour density

values;
processing a digital image using the computer and the
set of correction parameters; and
printing the processed digital image; the method being
characterised in that said set of correction parameters is

in the form of a colour-correction look-up table which takes
into account the difference in ink dot sizes and densities

caused by ink/paper variability and an error diffusion look-up
table which allows ink densities to be decomposed into

discrete ink dot sizes and spreadable ink density errors.
A method as claimed in claim 1 wherein the production
of the optical sensor assembly calibration information is

effected by the computer constructing an at least four by
four transformation matrix (230).
A method as claimed in claim 1 or 2, wherein the optical
sensor assembly (210) includes:


a light source (104) for illuminating an object (112)
being sensed;
a plurality of spectral filters comprising:

a red spectral filter (118) for transmitting red
light therethrough;
a green spectral filter (120) for transmitting
green light therethrough;
a blue spectral filter (122) for transmitting blue
light therethrough;
a neutral spectral filter (119) for transmitting
light therethrough; and
photo-electric sensing means (132) for optically sensing
the gamut and the print test pattern through respective ones

of the filters.
An apparatus for calibrated digital printing comprising:

a printing mechanism (212) adapted for printing upon a
substrate (216);
an optical sensor assembly (210) adapted for sensing
colours of a known colour gamut (217) and colours of a colour

print test pattern (214) printed by the printing mechanism
onto the substrate, and output means (220) coupled to the

optical sensor assembly to generate a first set of sensor
values in response to the sensor assembly sensing the colour

gamut;
a sensor calibration means coupled to the optical sensor
assembly for calibrating the optical sensor assembly based

upon the known colour gamut, the sensor calibration means
comprising a memory device (223) for storing a set of colour

density standard values (224) corresponding to colour density 
of the known gamut, and computation means coupled to the

output means (220) and the memory device for calibrating the
sensor assembly based upon the first set of sensor values and

the colour density standard values; and
a printing calibration means coupled to the printing
mechanism and the optical sensor assembly for calibrating the

printing mechanism based upon the calibrated sensor sensing
the colour print test pattern; the apparatus being

characterised in that the printing calibration means
comprises a colour-correction look-up table which takes into

account the difference in ink dot sizes and densities caused
by ink/paper variability and an error diffusion look-up table

which allows ink densities to be decomposed into discrete ink
dot sizes and spreadable ink density errors.
An apparatus as claimed in claim 4, wherein the
computation means generates an at least four by four

transformation matrix (230).
An apparatus as claimed in claim 4 or 5, wherein:

the set of colour density standard values (224) have
been generated by means of a standard densitometer (100)

measuring colour density of the gamut (217), the standard
densitometer including a densitometer light source (104)

having a standard spectral energy distribution; and
the sensor assembly light source has a spectral energy
distribution that is substantially different from that of the

densitometer light source.
An apparatus as claimed in claim 4 or 5 wherein:

the set of colour density standard values (224) have
been generated by means of a standard densitometer (100)

measuring colour density of the gamut (217), the standard
densitometer including a plurality of densitometer spectral

filters (118-120, 122) each having a respective standard
transmittance characteristic; and
the sensor filter has a transmittance characteristic 
that is substantially different from that of any of the

densitometer filters.
An apparatus as claimed in any of claims 4 to 7, wherein
the optical sensor assembly (210) includes;


a light source (104) for illuminating an object (112)
being sensed;
a plurality of spectral filters comprising:

a red spectral filter (118) for transmitting red
light therethrough;
a green spectral filter (120) for transmitting
green light therethrough;
a blue spectral filter (122) for transmitting blue
light therethrough;
a neutral spectral filter (119) for transmitting

light therethrough; and
photo-electric sensing means (132) for optically sensing
the gamut and the print test pattern through respective ones

of the filters.
</CLAIMS>
</TEXT>
</DOC>
