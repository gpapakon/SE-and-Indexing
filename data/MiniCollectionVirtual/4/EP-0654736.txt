<DOC>
<DOCNO>EP-0654736</DOCNO> 
<TEXT>
<INVENTION-TITLE>
Dynamically expandable storage unit array system
</INVENTION-TITLE>
<CLASSIFICATIONS>G06F1110	G06F1110	G06F306	G06F306	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>G06F	G06F	G06F	G06F	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>G06F11	G06F11	G06F3	G06F3	</CLASSIFICATIONS-FOURTH>
<ABSTRACT>
A storage unit system includes a control apparatus 
(1010) having a unit for reading memory data from a plurality 

of storage units (1021 to 1024) before increase into a memory 
(1012) of the control apparatus, a preparing unit for 

preparing parity data newly from the memory data read in the 
memory, a rearrangement unit for dispersing transfer data 

from a processor (1001) read in the memory and the newly 
prepared parity data to be written into a plurality of 

storage units (1021 to 1025) after the increase to perform 
arrangement of data, a memory unit (1035) for storing a write 

position on the way of the rearrangement of data, a 
comparison unit for comparing an access position for an 

access request from the processor with the write position, 
and a determining unit for determining a data dispersed 

pattern used in a data access from the processor on the basis 
of a comparison result of the comparison means, whereby the 

storage unit can be increased individually with a unit of one 
storage unit and dynamically without stop of the system. 


</ABSTRACT>
<APPLICANTS>
<APPLICANT-NAME>
HITACHI LTD
</APPLICANT-NAME>
<APPLICANT-NAME>
HITACHI, LTD.
</APPLICANT-NAME>
</APPLICANTS>
<INVENTORS>
<INVENTOR-NAME>
ARAI KOUJI
</INVENTOR-NAME>
<INVENTOR-NAME>
SATOH TAKAO
</INVENTOR-NAME>
<INVENTOR-NAME>
YAMAMOTO AKIRA
</INVENTOR-NAME>
<INVENTOR-NAME>
ARAI, KOUJI
</INVENTOR-NAME>
<INVENTOR-NAME>
SATOH, TAKAO
</INVENTOR-NAME>
<INVENTOR-NAME>
YAMAMOTO, AKIRA
</INVENTOR-NAME>
</INVENTORS>
<DESCRIPTION>
The present invention relates to an array type
storage unit system constituting an external storage unit
system of a computer system in which collected data such as
a file are dispersed to be stored in a plurality of storage
units, and more particularly to an array type storage unit
system in which increase of the storage units for the purpose
of improvement of the data transfer speed, increase of a
storage capacity or increase of redundancy is performed
dynamically without stop of the system.Heretofore, as an array type storage unit system,
a disk array system is known.The disk array system is to attain a high-speed
data transfer between a control processor and an external
storage apparatus by performing input/output operation of a
large number of magnetic disk units in parallel in a computer
system.A configuration of the disk array system is
described in, for example, a paper of D. Paterson, G. Gibson
and R. Katz, "A Case for Redundant Arrays of Inexpensive
Disks (RAID)", ACM SIGMOD Conference Proceedings, 1988, pp.
109-116.The paper proposes a disk array configuration
named RAID (Redundant Array of Inexpensive Disks). The RAID disperses normal input/output data to be
stored in a plurality of drives and stores parity data
therein.The parity data is set in order to restore or
reconstitute missing data by using the parity data together
with a data reconstitution function when the data is lost.Drives in the disk array system are not increased
with a unit of one drive and are increased with a unit of a
plurality of drives in which data are dispersed.In this system, the increased storage area can be
treated as a lump of continuous area, so that the mapping
information of addresses is merely rewritten and movement of
data is not required, to thereby facilitate the adding
operation after increase of the storage unit.That is, the increased storage unit can be added
behind the maximum address of the memory area.In the above paper, however, it seems that
increase of drives for changing a width of dispersed data for
increase with a unit of one drive and particularly dynamic
increase without stop of the system are not described. In EP-A-0 485 110 the logical partitioning of a redundant
array storage system which can be configured as a RAID
system is described. The system comprises a set of physical
storage units configurable as logical storage units, one or
more of which are defined as logical volumes, one or more of
those being defined as redundancy groups. The logical volumes
are addressed by a host CPU which
</DESCRIPTION>
<CLAIMS>
An array type storage unit system comprising a
plurality of storage units (1021 to 1024) and a control

apparatus (1010) including means for dispersing parity data
and transfer data from a processor (1001) to be stored in

said plurality of storage units, means for reading necessary
data from said plurality of storage units in response to a

data read request from said processor to transfer the read
data to said processor and means for reconstituting

inaccessible data by using parity data when the data in said
storage unit cannot be accessed due to a failure, characterised

in that said control apparatus (1010) comprises:

reading means (2090) for reading a predetermined
number of storage data from said plurality of storage units

before increase of another storage unit into a memory (1012)
of said control apparatus;
preparing means (2030) for preparing parity data
newly from the predetermined number of storage data read in

said memory of said control apparatus on the basis of a
redundancy of said storage unit system;
rearrangement means (2020) for dispersing the
transfer data from said processor read in said memory of said

control apparatus and said newly prepared parity data to be
written in said plurality of storage units after the

increase including a storage unit increased newly under
control of said control apparatus to perform rearrangement

of data; 
write position storing means for storing said
write position on the way of said rearrangement of data;
means for comparing an access position of an
access request from said processor with said write position;

and
means (2010) for determining a data dispersed
pattern used in the data access from said processor on the

basis of a comparison result of said comparing means.
An array type storage unit system according to
Claim 1, wherein said reading means of said control

apparatus reads a predetermined number of storage data
except parity data from said plurality of storage units

before the increase into said memory of said control
apparatus.
An array type storage unit system according to
Claim 2, wherein when the number of said storage units before

the increase is n (n≥1), the redundancy of parity data stored
in said storage units before the increase is r (n
>
r≥1) and
the number of said storage units after the increase is (n+k)

(k≥1), said reading means of said control apparatus reads
(n+k-r) data except parity data from said n storage units

before the increase into said memory of said control
apparatus, and said preparing means of said control

apparatus prepares r parity data newly from the (n+k-r) data
read in said memory of said control apparatus in accordance

with the redundancy of said storage unit system, said
rearrangement means of said control apparatus dispersing

said (n+k-r) data read in said memory of said control 
apparatus and said newly prepared r parity data to be written

in said (n+k) storage units after the increase to perform the
rearrangement of data.
An array type storage unit system according to
Claim 2, wherein when the number of said storage units before

the increase is n (n≥1), the redundancy of parity data stored
in said storage units before the increase is r (n
>
r≥1), the
number of said storage units after the increase is (n+k)

(k≥1) and the redundancy of parity data stored in said
storage units after increase is (r+k), said reading means of

said control apparatus reads (n-r) data except parity data
from said n storage units before the increase into said

memory of said control apparatus, and said preparing means
of said control apparatus prepares (r+k) parity data newly

from the (n-r) data read in said memory of said control
apparatus in accordance with the redundancy of said storage

unit system, said rearrangement means of said control
apparatus writing said (n-r) data read in said memory of said

control apparatus and said newly prepared (r+k) parity data
into said (n+k) storage units after the increase to perform

the rearrangement of data.
An array type storage unit system according to
Claim 2, wherein when the number of said storage units before

the increase is n (n≥1), the redundancy of parity data stored
in said storage units before the increase is r (n
>
r≥1), the
number of said storage units after the increase is (n+k)

(k≥1) and the redundancy of parity data stored in said 
storage units after increase is (r+s) (0≤s≤k), said reading

means of said control apparatus reads (n+k-(r+s)) data
except parity data from said n storage units before the

increase into said memory of said control apparatus, and
said preparing means of said control apparatus prepares

(r+s) parity data newly from the (n+k-(r+s)) data read in
said memory of said control apparatus in accordance with the

redundancy of said storage unit system, said rearrangement
means of said control apparatus writing said (n+k-(r+s))

data read in said memory of said control apparatus and said
newly prepared (r+s) parity data into said (n+k) storage

units after the increase to perform the rearrangement of
data.
An array type storage unit system according to
Claim 1, wherein when the number of said storage units before

the increase is n (n≥1), the redundancy of parity data stored
in said storage units before the increase is r (n
>
r≥1) and
the number of said storage units after the increase is (n+k)

(k≥1), said reading means of said control apparatus reads
(n+k) data from said n storage units before the increase into

said memory of said control apparatus, and said preparing
means of said control apparatus prepares r parity data newly

from the (n+k-r) data except former parity data of said (n+k)
data read in said memory of said control apparatus in

accordance with the redundancy of said storage unit system,
said rearrangement means of said control apparatus

dispersing said (n+k-r) data except the former parity data
of said (n+k) data read in said memory of said control 

apparatus and said newly prepared r parity data to be written
into said (n+k) storage units after the increase to perform

the rearrangement of data.
</CLAIMS>
</TEXT>
</DOC>
