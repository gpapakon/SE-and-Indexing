<DOC>
<DOCNO>EP-0649096</DOCNO> 
<TEXT>
<INVENTION-TITLE>
Shared memory system and arbitration method and system therefor.
</INVENTION-TITLE>
<CLASSIFICATIONS>G06F1316	G06F1318	G06F1516	G06F1516	G06F15177	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>G06F	G06F	G06F	G06F	G06F	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>G06F13	G06F13	G06F15	G06F15	G06F15	</CLASSIFICATIONS-FOURTH>
<ABSTRACT>
When the processing is distributed over a plurality 
of CPUs (e.g. CPUA and CPUB) and if it is desired that a 

shared memory (28) is used to transfer data between the 
CPUs, a clock CKG indicating the CPUA access timing clock 

is generated. A gate signal G indicating the access right 
to the shared memory (28) is generated in synchronism 

with the clock CKG. When either of the CPUs requests the 
access to the shared memory (28), it makes the corresponding 

chip select signal CSA⁻ or CSB⁻ L-level. The 
access right is always directed to the CPUA and switched 

to the CPUB in response to the access demand from the 
CPUB. After one access has completed, the CPUB makes CSB⁻ 

H-level. Thus, the access right is switched to the CPUA. 
After one access has terminated, the CPUA makes CSA⁻ H-level. 

If the CPUB requests the access at this time, the 
access right is switched to the CPUB. If the CPUB does 

not request the access, the access right is maintained at 
the CPUA. The CPUA and CPUB are synchronized with each 

other through a wait signal WAITA⁻. When the shared 
memory (28) is to be accessed, no software is required. 

The speed of data transfer can be increased and the loads 
on the CPUs will not influence each other. 


</ABSTRACT>
<APPLICANTS>
<APPLICANT-NAME>
SHARP KK
</APPLICANT-NAME>
<APPLICANT-NAME>
TOYOTA MOTOR CO LTD
</APPLICANT-NAME>
<APPLICANT-NAME>
SHARP KABUSHIKI KAISHA
</APPLICANT-NAME>
<APPLICANT-NAME>
TOYOTA JIDOSHA KABUSHIKI KAISHA
</APPLICANT-NAME>
</APPLICANTS>
<INVENTORS>
<INVENTOR-NAME>
TAKANO HIDETOSHI
</INVENTOR-NAME>
<INVENTOR-NAME>
TAKAO NORIYUKI C O TOYOTA JIDO
</INVENTOR-NAME>
<INVENTOR-NAME>
YAMAKI NORIHIRO
</INVENTOR-NAME>
<INVENTOR-NAME>
TAKANO, HIDETOSHI
</INVENTOR-NAME>
<INVENTOR-NAME>
TAKAO, NORIYUKI, C/O TOYOTA JIDOSHA KAISHA
</INVENTOR-NAME>
<INVENTOR-NAME>
YAMAKI, NORIHIRO
</INVENTOR-NAME>
</INVENTORS>
<DESCRIPTION>
The present invention relates to a memory system 
shared by a plurality of processors, e.g. CPUs (central 
processing units) and particularly to a control of changing 
access rights. Fig. 7 shows a system in which a main CPU 10 is 
connected to a plurality of functional modules 12 through 
a main system bus 14. Each of the functional modules 12 
functions to process information from the main CPU 10 
through the main system bus 14 or to supply information 
to the main CPU 10 through of the main system bus 14. It 
is now assumed that one of the functional modules 12 is a 
communication module, for example. On transmission, the 
functional module 12 processes data from the main CPU 10 
through the main system bus 14, the processed data being 
then transmitted to an external instrument. On reception, 
the functional module 12 processes data from the external 
instrument, the processed data being then transferred to 
the main CPU 10 through the main system bus 14. To increase the processing speed in the functional 
modules 12, for example, distributed processing may be  
 
used. As shown in Fig. 8, various functions of the functional 
modules 12 are distributed over a plurality of 
CPUs, rather than being borne by a single CPU. In the 
illustrated example, among the processes to be executed 
by one functional module 12, the data transmission/reception 
through the main system bus 14 between the functional 
module 12 and the main CPU 10 is borne by a system bus 
interface CPU 16. The communication and other function 
processings are borne by a function processing CPU 18. 
Data is transferred between the system bus interface CPU 
16 and the function processing CPU 18, if required. Thus, 
the burden per CPU can be relieved to provide high-speed 
processing. To provide a preferred distribution of processing, 
the speed of data transfer between the CPUs 16 and 18 
must be improved. Since the CPUs are generally operating 
asynchronously, the high-speed data transfer therebetween 
is very difficult. Even if the distribution of processing 
over the functional modules 12 is performed, the high-speed 
operation in the functional module 12 could not be 
attained when the speed of data transfer between the CPUs 
is low. To overcome such a problem, there may be provided 
a memory shared by a plurality of CPUs relating to the 
distribution of processing. Figs. 9 and 10 show the general forms of such shared 
memories. Referring first to Fig. 9, a shared memory is a  
 
dual-port RAM (random access memory) 20. The dual-port
</DESCRIPTION>
<CLAIMS>
A system for arbitrating access requests from a 
plurality of processors (A, B) to give an access right to 

a shared memory (28) to any one of said plurality of 
processors (A, B) which generates its access request, 

said arbitration device comprising: 
   means (e.g. 98, 102) for causing the giving up of 

the access right each time one access to the shared 
memory (28) terminates; 

   means (e.g. 98, 100) for giving the access right to 
another one (e.g. B) of the plurality of processors (A, 

B) when it is holding the access request at a point of 
time wherein the access right has been given up; and 

   means (e.g. 98, 102) for giving the access right to 
said one (e.g. A) of the plurality of processors (A, B) 

when no other ones (e.g. B) of said plurality of processors 
(A, B) are holding the access request and said one 

(e.g. A) of said plurality of processors (A, B) is holding 
the access request at the point of time wherein the 

access right has been given up. 
A system as defined in claim 1, 
   wherein each of said plurality of processors (A, B) 

comprises a data bus (38, 42) for transferring data to 
and from said shared memory (28) and an address bus (48, 

50) for specifying an address to be accessed on said 
 

shared memory (28); and 
   wherein said shared memory (28) comprises: 

   a memory (28) including a data bus (46) for transferring 
data (28) to and from the processor (e.g. A) 

having the access right and an address bus (52) for being 
specified the address by said processor (e.g. A) having 

the access right; 
   data bus switching means (40) for selectively connecting 

the data bus (46) of said memory (28) to the data 
bus (e.g. 38) of the processor (e.g. A) having the access 

right and 
   address bus switching means (70) for selectively 

connecting the address bus (52) of said memory (28) to 
the address bus (e.g. 48) of the processor (e.g. A) 

having the access right. 
A system as defined in claim 2 wherein respective 
ones of said plurality of processors (A, B) are operative 

to output read/write signals each for indicating whether 
the access to the shared memory (28) is for reading or 

writing data and chip select signals each for indicating 
the access request to the shared memory (28) and wh
erein 
said system is operative to output a gate signal for 

specifying a processor (e.g. A) having the access right. 
A system as defined in claim 3 wherein said data bus 
switching means (40) comprises:

 
   means (72, 74, 82) responsive to said gate signal 

and chip select signals for generating a plurality of 
different processor gate signals one for each of said 

plurality of processors to specify said one (e.g. A) of 
said plurality of processors (A, B) which holds the 

access request and has the access right; 
   means (66) responsive to said read/write signals for 

generating a direction indicating signal for indicating 
whether the direction of access is for read or write; and 

   a plurality of bidirectional bus buffers (40) provided 
one for each of said plurality of processors (A, 

B), each of said plurality of bidirectional bus buffers 
(40) for causing the corresponding one (e.g. A) of said 

plurality of processors (A, B) to access said memory (28) 
depending on the direction of access indicated by said 

direction indicating signal when the corresponding one of 
said plurality of different processor gate signals specifies 

that said one (e.g. A) of said plurality of processors 
(A, B) which holds the access request and has the 

access right is said corresponding one (e.g. A) of said 
plurality of processors (A, B). 
A system as defined in claim 3 wherein said system 
further comprises: 

   means (96) for generating an access timing clock 
based on the operational timing of a predetermined one 

(A) of said plurality of processors (A, B);
 

   means (e.g. 98) for generating wait signals provided 
one for each of said plurality of processors (A, B) and 

supplying the wait signals to corresponding ones (e.g. B) 
of said plurality of processors (A, B) in synchronism 

with the access timing clock, said wait signals each 
indicating whether or not said corresponding one (e.g. B) 

of said plurality of processors (A, B) should be given 
the access right; and 

   means (102) for generating the gate signal in synchronism 
with the access timing clock. 
</CLAIMS>
</TEXT>
</DOC>
