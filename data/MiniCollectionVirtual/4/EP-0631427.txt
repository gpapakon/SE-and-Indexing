<DOC>
<DOCNO>EP-0631427</DOCNO> 
<TEXT>
<INVENTION-TITLE>
Image processing apparatus
</INVENTION-TITLE>
<CLASSIFICATIONS>G09G500	G09G500	H04N1405	H04N1405	G06T500	H04N1403	G06T500	H04N1403	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>G09G	G09G	H04N	H04N	G06T	H04N	G06T	H04N	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>G09G5	G09G5	H04N1	H04N1	G06T5	H04N1	G06T5	H04N1	</CLASSIFICATIONS-FOURTH>
<ABSTRACT>
An image processing apparatus (30), which can solve the 
problems of delay in dot generating in beginning portions of 

areas of low or high density and/or tailing after finishing 
areas of low or high density and carry out speedy binary 

coding image processing without accompanying side effects of 
quality depletion and without the need to utilise a 

complicated processing circuit. It includes error correction 
means (34) which corrects multigradation image data (200) and 

outputs it, threshold error setting means (32) which sets a 
binary coding threshold value based on the gradation value of 

said target pixel multigradation image data (200) and binary 
coding means (36) which, based on the set threshold value, 

converts the previously mentioned corrected pixel data into 
the previously mentioned bigradation image data and outputs 

it; the gradation value of the previously mentioned target 
pixel multigradation image data being data, the median value 

of the previously mentioned first gradation value and second 
gradation value being m and the previously mentioned 

threshold value being slsh, the previously mentioned 
threshold setting means (36), when the gradation value of the 

previously mentioned target pixel multigradation image data 
is in the neighbourhood of the previously mentioned first and 

second gradation values, the binary coding threshold value is 
set within the tolerance range shown in the following 

equations:


when data 
<
 m, data ≦ slsh ≦ (m + data) / 2, 
when data 
>
 m, (m + data) / 2 ≦ slsh ≦ data. 
</ABSTRACT>
<APPLICANTS>
<APPLICANT-NAME>
SEIKO EPSON CORP
</APPLICANT-NAME>
<APPLICANT-NAME>
SEIKO EPSON CORPORATION
</APPLICANT-NAME>
</APPLICANTS>
<INVENTORS>
<INVENTOR-NAME>
KAKUTANI TOSHIAKI
</INVENTOR-NAME>
<INVENTOR-NAME>
KAKUTANI, TOSHIAKI
</INVENTOR-NAME>
</INVENTORS>
<DESCRIPTION>
The invention relates to an image processing apparatus.In the past, multigradation image data read using image
input from a scanner or multigradation graphic image data
computed using a computer was reproductively displayed by, for
example, a display or printer etc.; or such as a facsimile machine or
copier. At this time, as an image output apparatus, in the
case of being used to reproductively display multigradation
image data there was no problem, but, for example, in the case
of using a printer apparatus or a display apparatus which did
not control the gradation of dot units, it was necessary to
perform binary coding processing to reduce the number of
gradations of each pixel to 2 gradations.Furthermore, in the case where the volume of the
afore-mentioned multigradation image data was reduced in order
to store or transfer it, binary coding processing was performed
in the same way to reduce the number of gradations of each
pixel to 2.There are many types of techniques of binary coding,
but among them, one with an error diffusion method or an
equivalent minimum average error method is widely used as the 
one with superior picture quality. An error diffusion method or
a minimum average error method, having high resolution, has the
superior characteristic of the possibility of continuous
gradation reproduction.In the above-mentioned error diffusion method, a
quantization error occurring during binary coding of a pixel is
diffused and added to the adjacent non binary-coded pixels. On
the other hand, the minimum average error method is a method
whereby the weighted average value of a quantization error
occurring in already binary-coded pixels amends the pixel data
value of the following target pixel. The error diffusion method
and the minimum average error method are different only with
respect to when the error diffusion operation is carried out,
so logically they are the same. Unexamined Japanese Patent
Publication No. Hei. 1-284173 is an example employing the error
diffusion method.However, in the previous image processing apparatus
utilizing the error diffusion method and the minimum average
error method, when converting multigradation image data to
bigradation image data there were the following problems:First, black dot generation in the initial part of an
area of low density (an area with few black dots), and white
dot generation in the initial part of an area of high density
(an area with few white dots), was substantially delayed, with
the result that, in the worst case, the image was
</DESCRIPTION>
<CLAIMS>
An image processing apparatus for converting multigradation
image data into bigradation image data,

the bigradation data being made from only two
gradations, namely a first gradation value and a second, different

gradation value, comprising

an error correction means (34) for outputting corrected
pixel data which are corrected by adding an error

diffused from the adjacent already binary-coded pixels to
the gradation value of the multigradation image data of a

target pixel;
a threshold value setting means (32) for setting a binary
threshold value slsh based on the gradation value of the

multigradation image data of said target pixel; and
a binary coding means (36) for comparing said corrected
pixel data and said value slsh and for outputting said

bigradation image data as the result of said comparison;

   characterized in that

   said value slsh is set in such a manner that the average

binary coding error is generally close to zero.
The image processing apparatus according to claim 1,
wherein said first gradation value is smaller than said

second gradation value, said value slsh is set to satisfy
the tolerance range shown in the following equation, when

the gradation value of the multigradation image data is
close to the first gradation value: 


data ≤ slsh ≤ (m + data)/2

wherein m is the median of the first and second gradation
values.
The image processing apparatus according to claim 1 or 2,
wherein said first gradation value is smaller than said

second gradation value, said value slsh is set to satisfy
the tolerance range shown in the following equation, when

the gradation value of the multigradation image data is
close to the second gradation value:


(m + data)/2 ≤ slsh ≤ data

wherein m is the median of the first and second gradation
values.
An image processing apparatus according to any of claims 1
to 3, wherein said threshold value setting means (32),

based on said target pixel multigradation image data
gradation value data, sets said binary coding threshold

value slsh according to the following equation:

slsh = (data· (K - 1) + m) / K,

wherein m is the median of the first and second gradation
values, and K is a constant expressed by an integer greater

than 2.
An image processing apparatus according to any of claims 1
to 3, wherein said threshold value setting means (32),

corresponding to said target pixel multigradation image
data gradation value data, sets said binary coding

threshold value slsh step by step. 
An image processing apparatus according to any of claims 1
to 3, wherein said threshold value setting means (32),

based on said target pixel multigradation image data
gradation value data, sets said binary coding threshold

value slsh according to the following equations:

when data 
<
 m-L1, slsh = data + L1,
when m - L1 
<
 data 
<
 m + L2, slsh = m,
when m + L2 
<
 data, slsh = data - L2

provided that L1, L2 are constants expressed by integers
between 0 - m.
An image processing apparatus according to any one of
claims 1 to 6, wherein said binary coding means (36) adds

random noise to the set threshold value of said corrected
pixel data and performs said binary coding processing on

said corrected pixel data.
An image processing apparatus according to any one of
claims 1 to 7, further comprising:

   a diffused error storage portion (42) to store the diffused
error total value of each pixel; an error diffusion portion

(40) which calculates the binary coding error of the
corrected pixel data and binary coding result, diffuses

that binary coding error to the non binary-coded pixels
adjacent to the target pixels using an error diffusion

method, finds a new diffused error total value for each
pixel by adding the diffusion error from said target pixels

to the diffused error total value of each pixel stored in
said diffused error storage portion and updates the

diffused error total value of each pixel stored in said
diffused error storage portion; and a data correction

portion (38) which calculates said corrected pixel data by 
adding the target pixel multigradation image data and the

target pixel diffused error total value stored in said
diffused error storage portion, corrects the multigradation

image data of the target pixels using an error diffusion
method and outputs it as corrected pixel data. 
An image processing apparatus according to any one of claims
1 to 7, further comprising:

an error storage portion (46) which stores each pixel
error; an error diffusion portion which calculates the

binary coding error of the corrected pixel data and binary
coding result and stores that binary coding error in said

error storage portion; and a data correction portion (38)
which calculates said corrected pixel data by finding an

average error by reading the binary coding error of the
adjacent pixels to the target pixels stored in said error

storage portion and applying a predetermined weighting and
adding this average error to the target pixel

multigradation data, corrects target pixel multigradation
image data using a minimum average error method and outputs

it as corrected pixel data.
</CLAIMS>
</TEXT>
</DOC>
