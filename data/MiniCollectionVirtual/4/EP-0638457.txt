<DOC>
<DOCNO>EP-0638457</DOCNO> 
<TEXT>
<INVENTION-TITLE>
Apparatus for driving and controlling synchronous motor using permanent magnets as its field system
</INVENTION-TITLE>
<CLASSIFICATIONS>B60L1502	B60L1118	B60L1500	B60L1118	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>B60L	B60L	B60L	B60L	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>B60L15	B60L11	B60L15	B60L11	</CLASSIFICATIONS-FOURTH>
<ABSTRACT>
When a rotational speed (N) of a synchronous motor (14) 
using permanent magnets as its field system is equal to or 

higher than a base rotational speed (N
B
), a current condition 
computing section (16) computes a field weakening reference 

current (I
d
*) in accordance with a battery voltage (V
dc
), 
reference torque (T*), and the rotational speed (N). An 

inverter (12) performs the field weakening control of the 
synchronous motor (14) in accordance with the field weakening 

reference current (I
d
*) sent from the current condition 
computing section (16) to prevent the deterioration of 

efficiency and the deficiency of output due to excessive or 
insufficient field weakening current (I
d
). The current 
condition computing section (16) determines an optimum 

reference current (I
d
*, I
q
*) by using a converged battery 
voltage (V
S
) when the battery voltage (V
dc
) is converged after 
initial control. 


</ABSTRACT>
<APPLICANTS>
<APPLICANT-NAME>
TOYOTA MOTOR CO LTD
</APPLICANT-NAME>
<APPLICANT-NAME>
TOYOTA JIDOSHA KABUSHIKI KAISHA
</APPLICANT-NAME>
</APPLICANTS>
<INVENTORS>
<INVENTOR-NAME>
KAWABATA YASUTOMO
</INVENTOR-NAME>
<INVENTOR-NAME>
KUSAKA YASUSHI
</INVENTOR-NAME>
<INVENTOR-NAME>
YAMADA EIJI
</INVENTOR-NAME>
<INVENTOR-NAME>
KAWABATA, YASUTOMO
</INVENTOR-NAME>
<INVENTOR-NAME>
KUSAKA, YASUSHI
</INVENTOR-NAME>
<INVENTOR-NAME>
YAMADA, EIJI
</INVENTOR-NAME>
</INVENTORS>
<DESCRIPTION>
The present invention relates to a driving and
controlling apparatus for controlling the output torque of a
synchronous motor using permanent magnets as its field system
(hereafter referred to as PM motor) so as to attain a
reference torque by controlling the vector of a motor current.
Particularly, it relates to the control of a PM motor which
can be suitably mounted on an electric vehicle and can execute
field weakening control.A PM motor is a synchronous motor using permanent magnets
as its field system. Therefore, it is characterized by having
a large magnetomotive force per unit volume. This
characteristic is effective for increasing the output of a
motor and reducing the size of a motor. Particularly, the PM
motor is preferable as the drive motor of an electric vehicle.FIG. 20 shows an equivalent circuit per phase of a PM
motor. In FIG. 20, the magnetomotive force of permanent
magnets used as a field system, that is, the main magnetic 
flux of the PM motor, is shown by the symbol E0. When
assuming the axial angular velocity of the PM motor as ω
(=2πN, N: rotational speed of the motor), the counter
electromotive force generated during operation of the PM motor
can be expressed as ωEo. When the PM motor is driven by
converting the discharge output of a battery into alternating
current by an inverter and using the AC power, the terminal
voltage V of the PM motor is obtained by multiplying a battery
voltage Vdc by the voltage conversion ratio of the inverter.
In FIG. 20, symbol R represents the primary resistance per
phase of the PM motor, L represents the inductance per phase,
and I represents the primary current (phase current).The motor current I of the PM motor can be decomposed
into the vector components, i.e., the field current Id and the
torque current Iq. The field current Id is a component for
generating a field flux in the PM motor and the torque current
Iq is a component for generating torque by intersecting with
the field flux of permanent magnets, that is, the main
magnetic flux E0. When the PM motor is provided with
saliency, the field current Id also generates torque. The
torque generated when the torque current Iq intersects with
the main magnetic flux E0 is known as magnetic torque and the
torque caused by the saliency is known as reluctance torque.
The following equation (1) is an expression showing the torque 
T of the PM motor, in which the first term at the right side
shows magnetic torque and the second term shows reluctance
torque. Therefore, the second term does not appear when
</DESCRIPTION>
<CLAIMS>
A driving and controlling apparatus for use in a drive
unit having a synchronous motor (14) using permanent magnets as

its field system which can be excited by a field flux (E
0
)
generated by the permanent magnets and a field flux generated by

a field current component (I
d
) in a primary current (I); a
battery (10) as a source of power; and power conversion means

(12) for converting power discharged from the battery (10) into
alternating current and feeding the alternating current as the

primary current (I) to the synchronous motor (14); said
apparatus comprising:


current control means (18) for controlling the primary
current (I) of the synchronous motor (14) in accordance with a

reference current (I
d
*, I
q
*); and
current condition determination means (16) for carrying out
a field weakening
being characterized in that
said current condition determination means (16) is provided
for minimizing the reference current (I
d
*, I
q
*) in accordance
with a voltage (V
dc
) of the battery (10) under predetermined
conditions and at least partially cancelling the field flux (E
0
)
generated by the permanent magnet with the field flux generated

by the field current component (I
d
) so that a counter
electromotive force (ωE
0
) of the synchronous motor (14) does not
exceed the voltage (V
dc
) of the battery (10) and so that the
field flux generated by the field current component (I
d
) varies
as the voltage of the battery (10) varies.
The driving and controlling apparatus according to
Claim 1 wherein the current condition determination means (16)


judges whether or not the counter electromotive force
(ωE
0
) of the synchronous motor (14) exceeds the voltage (V
dc
)
of the battery (10) in accordance with an output state (T, N)

of the synchronous motor (14),
determines the reference current (I
d
*, I
q
*) so that the
field flux generated by the field current component (I
d
) is
fixed to 0 or a constant value, when it has been judged that

the counter electromotive force (ωE
0
) does not exceed the
voltage (V
dc
) of the battery (10), and
determines the reference current (I
d
*, I
q
*) so that the
counter electromotive force (ωE
0
) of the synchronous motor
(14) does not exceed the voltage (V
dc
) of the battery (10) and
so that the field flux generated by the field current

component (I
d
) has the intensity corresponding to the voltage
(V
dc
) of the battery (10), when it has been judged that the

counter electromotive force (ωE
0
) exceeds the voltage (V
dc
) of
the battery (10).
The driving and controlling apparatus according to
Claim 2 wherein 


the output state of the synchronous motor (14) used to
judge whether or not the counter electromotive force (ωE
0
) of
the synchronous motor (14) exceeds the voltage (V
dc
) of the
battery (10) is a rotational speed (N) of the synchronous

motor (14), and
the current condition determination means (16)
judges that the counter electromotive force (ωE
0
) of the
synchronous motor (14) exceeds the voltage (V
dc
) of the
battery (10), when the rotational speed (N) of the synchronous

motor (14) is higher than a predetermined value (N
B
), and
judges that the counter electromotive force (ωE
0
) does
not exceed the voltage (V
dc
) of the battery (10), when the
rotational speed (N) is not higher than the predetermined

value (N
B
).
The driving and controlling apparatus according to
any one of Claims 1 to 3 wherein


the reference current includes the reference field
current (I
d
*) showing a control target of the field current
component (I
d
) of the primary current (I) and the reference
torque current (I
q
*) showing a control target of a torque
current component (I
q
) of the primary current (I); and
the current condition determination means (16)
determines the reference field current (I
d
*) in 
accordance with at least the voltage (V
dc
) of the battery (10)
so that the counter electromotive force (ωE
0
) of the
synchronous motor (14) does not exceed the voltage (V
dc
) of
the battery (10) and so that the field flux generated by the

field current component (I
d
) has an intensity corresponding to
the voltage (V
dc
) of the battery (10), and
determines the reference torque current (I
q
*) in
accordance with at least the reference torque (T*) so that

torque corresponding to a reference torque (T*) is outputted
from the synchronous motor (14).
The driving and controlling apparatus according to
Claim 4 wherein the current condition determination means (16)


further refers to the reference torque (T*) in order to
determine the reference field current (I
d
*), and
further refers to the voltage (V
dc
) of the battery (10)
in order to determine the reference torque current (I
q
*).
The driving and controlling apparatus according to
Claim 5 wherein the current condition determination means (16)


converts the voltage (V
dc
) of the battery (10) into a
value (V
MAX
) comparable with a terminal voltage (V) of the
synchronous motor (14), and
derives information regarding the field current component 
(I
d
) and the torque current component (I
q
) from an equation or
a map showing a relationship among the terminal voltage (V),

the field current component (I
d
), the torque current component
(I
q
) and the torque (T) of the synchronous motor (14) when the
converted voltage (V
MAX
) of the battery (10) is used as the
terminal voltage (V) and the reference torque (T*) is used as

the torque (T), thereby determining the reference field
current (I
d
*) and the reference torque current (I
q
*).
The driving and controlling apparatus according to
Claim 6 wherein the current condition determination means (16)

converts the voltage (V
dc
) of the battery (10) into the value
(V
MAX
) comparable with the terminal voltage (V) on the
assumption that a power conversion rate of the power

conversion means (12) is maximum.
The driving and controlling apparatus according to
Claim 6 or 7 wherein the current condition determination means

(16) limits the value of the field current component (I
d
),
when the remaining capacity (SOC) of the battery (10) is not

more than a predetermined value (SOC
0
), thereby decreasing the
cancelled quantity of the field flux (E
0
) generated by the
permanent magnet which is cancelled with the field flux

generated by the field current component (I
d
). 
The driving and controlling apparatus according to
Claim 8 wherein the current condition determination means (16)

prohibits the limitation of the field current component (I
d
)
in accordance with a mode command showing an efficiency mode.
The driving and controlling apparatus according to
any one of Claims 1 to 5 wherein the current condition

determination means (16)

determines an initial reference current (I
dmin
, I
qmin
) in
accordance with the reference torque (T*), the output state

(N) and a reference minimum voltage (V
dcmin
) on the assumption
that the voltage (V
dc
) of the battery (10) is the reference
minimum voltage (V
dcmin
), when either of the reference torque
(T*) or the output state (N) of the synchronous motor (14)

change by as much as a predetermined value or more,
gives the determined initial reference current (I
dmin
,
I
qmin
) as the reference current (I
d
*, I
q
*) to the current
control means (18) and,
when the voltage (V
dc
) of the battery (10) is converged
to a constant value after the primary current (I) of the

synchronous motor (14) has been controlled in accordance with
the initial reference current (I
dmin
, I
qmin
), determines the
reference current (I
d
*, I
q
*) in accordance with the converged
voltage (V
s
) of the battery (10).
The driving and controlling apparatus according to
Claim 10 wherein the current condition determination means

(16) determines the reference minimum voltage (V
dcmin
) in
accordance with the remaining capacity (SOC) and voltage (V
dc
)
of the battery (10).
The driving and controlling apparatus according to
Claim 10 or 11 wherein


an optimum current (I
dp
, I
qp
) depends on the voltage
(V
dc
) of the battery (10) when the output state (T, N) of the
synchronous motor (14) is in a predetermined region and does

not depend on the voltage (V
dc
) of the battery (10) when the
output state (T, N) of the synchronous motor (14) is not in

the predetermined region, the optimum current (I
dp
, I
qp
)
representative of the reference current(I
d
*, I
q
*) where the
reference torque (T*) is realized as the torque (T) of the

synchronous motor (14) and the efficiency of the synchronous
motor (14) substantially becomes a maximum efficiency;
the current condition determination means (16),
in a region where the values of the optimum current (I
dp
,
I
qp
) depends on the voltage (V
dc
0 of the battaery (10),
computes first optimum reference current (I
d
*
1
, I
q
*
1
) by
referring to a relationship among the voltage (V
dc
) of the
battery (10), the optimum current (I
dp
, I
qp
) and the output 
state (T, N) of the synchronous motor (14), using the

converged voltage (V
s
) of the battery (10) and the output
state (T, N) of the synchronous motor (14),
determines second optimum reference current (I
d
*
2
, I
q
*
2
)
in accordance with the optimum current (I
d
*
2
, I
q
*
2
) in a
region where the optimum current (I
dp
, I
qp
) does not depend on
the voltage (V
dc
) of the battery (10),
selects either of the first optimum reference current
(I
d
*
1
, I
q
*
2
) or the second optimum reference current (I
d
*
2
,
I
q
*
2
) on the basis of a relationship between the magnitude of
the first optimum reference current (I
d
*
1
, I
q
*
1
,) and that of
the second optimum reference current (I
d
*
2
, I
q
*
2
), and
determines selected optimum reference current as the
reference current (I
d
*, I
q
*).
The driving and controlling apparatus according to
Claim 12 wherein the current condition determination means

(16)

approximately represents, with a mathematical equation, a
relationship between the voltage (V
dc
) of the battery (10) and
the optimum current (I
dp
, I
qp
) in a region where the values of
the optimum current (I
dp
, I
qp
) depends on the voltage (V
dc
) of
the battery (10), and stores a coefficient (k
d
, k
q
, I
dmin
,
I
qmin
) of the mathematical equation and the output state (T, 
N) of the synchronous motor (14) associated therewith;
stores the optimum current (I
dp
, I
qp
) in a region where
the optimum current (I
dp
, I
qp
) does not depend on the voltage
(V
dc
) of the battery (10),
reads the coefficient (k
d
, k
q
, I
dmin
, I
qmin
) of the
mathematical equation in accordance with the output state (T,

N) of the synchronous motor (14), and computes the first
optimum reference current (I
d
*
1
, I
q
*
1
) by the use of the read
coefficient (k
d
, k
q
, I
dmin
, I
qmin
), the converged voltage (V
s
)
of the battery (10) and the mathematical equation, and
determines the second optimum reference current (I
d
*
2
 and
I
q
*
2
) by reading the optimum current (I
d
*
2
, I
q
*
2
) in the
region where the optimum current (I
dp
, I
qp
) does not depend on
the voltage (V
dc
) of the battery (10).
The driving and controlling apparatus according to
Claim 13 wherein the mathematical equation is a predetermined

linear equation, and the current condition determination means
(16) stores at least one of an intercept (I
dmin
, I
qmin
) or
inclination (k
d
, k
q
) of the linear equation as the coefficient
associated with the motor output state (T, N).
The driving and controlling apparatus according to
Claim 14 wherein the intercept (I
dmin
, I
qmin
) of the linear 
equation is used as the reference current.
</CLAIMS>
</TEXT>
</DOC>
