<DOC>
<DOCNO>EP-0650286</DOCNO> 
<TEXT>
<INVENTION-TITLE>
Ringdown and ringback signalling for a computer-based multifunction personal communications system
</INVENTION-TITLE>
<CLASSIFICATIONS>H04M1253	H04M1106	H04M165	H04Q358	H04N100	H04M1274	H04M160	H04L1264	H04Q358	H04M1253	H04B1404	H04M1274	H04B1404	H04N100	H04M1106	H04L1264	H04M700	H04M1247	H04M1247	H04M3533	H04M350	H04M160	H04M700	H04M165	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>H04M	H04M	H04M	H04Q	H04N	H04M	H04M	H04L	H04Q	H04M	H04B	H04M	H04B	H04N	H04M	H04L	H04M	H04M	H04M	H04M	H04M	H04M	H04M	H04M	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>H04M1	H04M11	H04M1	H04Q3	H04N1	H04M1	H04M1	H04L12	H04Q3	H04M1	H04B14	H04M1	H04B14	H04N1	H04M11	H04L12	H04M7	H04M1	H04M1	H04M3	H04M3	H04M1	H04M7	H04M1	</CLASSIFICATIONS-FOURTH>
<ABSTRACT>
The voice over data component of a personal 
communications system enables the operator to 

simultaneously transmit voice and data communication 
to a remote site. This voice over data function 

dynamically allocates data bandwidth over the 
telephone line depending on the demands of the voice 

grade digitized signal. The user may enter voice over 
data mode from a data transfer mode by lifting the 

handset of the telephone connected to the modem. The 
off-hook condition is sensed and software sends a 

supervisory packet to the remote site to invoke voice-over-data 
mode. The remote telephone will simulate a 

ring to alert the remote user, and the local telephone 

will simulate a ringback to inform the caller that the 
remote unit is responding. 
</ABSTRACT>
<APPLICANTS>
</APPLICANTS>
<INVENTORS>
</INVENTORS>
<DESCRIPTION>
The present invention relates to communications systems
and in particular to computer assisted digital
communications have a data communications ability which
is interruptible for switching to a voice over data
communications ability.A wide variety of communications alternatives are
currently available to telecommunications users. For
example, facsimile transmission of printed matter is
available through what is commonly referred to as a
stand-alone fax machine. Alternatively, fax-modem
communication systems are currently available for
personal computer users which combine the operation of a
facsimile machine with the word processor of a computer
to transmit documents held on computer disk. Modem
communication over telephone lines in combination with a
personal computer is also known in the art where file
transfers can be accomplished from one computer to
another. Also, simultaneous voice and modem data
transmitted over the same telephone line has been
accomplished in several ways.The proceedings of the international conference on signal
processing applications and technology Vol 2, 28
September 1993, pages 1425 - 1429 discloses voice over
data technology using speech compression. This document 
describes that a voice over data capability can be added
to an existing V.32 bis data only modem with controller
software modifications and associated hardware.There is a need in the art, however, for a personal
communications system which combines a wide variety of
communication functions into an integrated hardware-software
product such that the user can conveniently
choose a mode of communication and have that
communication automatically invoked from a menu driven
selection system.There is a further need in the art for a personal
communications system which provide a data communications
mode and which allows for automatic 
interruption and switching between data communications
mode and a voice over data communications mode.In a first aspect of the invention there is provided:-A
method of switching from data communication to
voice-over-data communication in a multi-function
communications system, comprising the steps of:
(a) invoking a data communication connection between
a local site equipped with a local modem and a
remote site equipped with a remote modem;(b) alerting the local modem of a desire to switch
from data mode to voice-over-data mode;(c) sending a ringdown data packet from the local
modem to the remote modem;(d) receiving the ringdown data packet at the remote
modem and sending in response
</DESCRIPTION>
<CLAIMS>
A method of switching from data communication to voice-over-data
communication in a multi-function communications

system, comprising the steps of:

(a) invoking a data communication connection between a
local site equipped with a local modem (20)and a remote

site equipped with a remote modem;
(b) alerting the local modem (20)of a desire to switch
from data mode to voice-over-data mode;
(c) sending a ringdown data packet from the local modem
(20) to the remote modem;
(d) receiving the ringdown data packet at the remote
modem and sending in response thereto a ringback data

packet from the remote modem to the local modem (20); and
(e) enabling a voice-over-data connection between the
local modem (20)and the remote modem.
A method as claimed in claim 1, in which the step of
invoking a data communication connection includes the step of

sending CCITT V.42 standard modem data packets, and in which
the step of sending a ringdown data packet includes the step

of preparing a supervisory packet constructed as a CCITT V.42
standard modem standard data packet using a header undefined

by the CCITT V.42 standard.
A method as claimed in claim 1 or claim 2, in which the
step of enabling a voice-over-data connection further includes

the steps of: 

(a) creating an outgoing data packet containing
conventional digital data;
(b) creating a outgoing voice packet containing digital
voice data;
(c) detecting substantially silent periods having
absence of voice information in the digital voice data

and producing in response thereto a silence flag;
(d) transmitting only outgoing data packets when the
silence flag indicates the absence of voice information;

and
(e) transmitting both the outgoing voice packets and
the outgoing data packets when the silence flag indicates

the presence of voice information.
A method as claimed in claim 3, in which the step of
enabling a voice-over-data connection includes the steps of:


(a) receiving local voice signals from a local user;
(b) digitising the voice signals to produce the digital
voice data;
(c) compressing the digital voice data into compressed
digital voice data; and
(d) placing the compressed digital voice data into the
outgoing voice packet.
A method as claimed in any one of claims 1 to 3, in which
the step of invoking a data communication connection includes

the steps of invoking a cellular telephone link and 
periodically transmitting a cellular supervisory packet to

maintaining the connection.
A system for full-duplex transmission of voice and data
information for use with a personal computer (10) and for

switching between data transmission only and voice-over-data
transmission, comprising:


(a) data interface means (315) connected for transferring
data to and from the personal computer (10);
(b) telephone line interface means (309)for connection
to a telephone line (30);
(c) telephone handset means(301,302,303,304)for
receiving local voice signals from a local user and for

conveying remote voice signals from a remote user to the
local user;
(d) full-duplex conversion means (305)connected to the
telephone handset means (301, 302, 303, 304)for

converting the local voice signals into outgoing digital
voice data and for converting incoming digital voice data

into the remote voice signals;
(e) voice compression means (306)connected to the full-duplex
conversion means (305) for compressing the outgoing

digital voice data into compressed outgoing digital voice
data and for decompressing compressed incoming digital

voice data into the incoming digital voice data; and
(f) main control means (313)connected for:

receiving the compressed outgoing digital voice
data from the voice compression means (306), 
receiving outgoing conventional digital data from
the personal computer (10)through the data interface

means (315),
sending the outgoing conventional digital data to
the telephone line interface means (309)for transmission

to a remote site through the telephone line (30),
sending and receiving supervisory packets from the
remote site indicating the desire to switch between data

only transmission and voice-over-data transmission, and
multiplexing and transmitting compressed outgoing
digital voice data and outgoing conventional digital

data.
The system according to claim 6, in which the main
control means (313) is further operable for detecting silent

periods in the outgoing digital voice data and for producing
in response thereto a silence flag, and in which the main

control means (313) is further operable for transmitting
outgoing conventional digital data on the telephone line (30)

when the silence flag indicates the absence of voice
information, and in which the main control means (313) is

further operable for multiplexing and transmitting both the
compressed outgoing digital voice data and the outgoing

conventional digital data on the telephone line (30) when the
silence flag indicates the presence of voice information.
The system according to claim 6 or claim 7, in which the
telephone line (30) includes a cellular telephone link, and in

which the main control means (313) is further operable for
periodically transmitting a cellular supervisory packet on the

telephone line (30) and for maintaining the link to the remote
site over the telephone line (30) if the remote site

acknowledges receipt of the cellular supervisory packet within
a predetermined period of time and for dropping the link to the

remote site over the telephone line (30) if the remote site 
fails to acknowledge receipt of the cellular supervisory packet

within a predetermined period of time.
The system according to any one of claims 6 to 8, in
which a digital signal processor means is further operable for

compressing the outgoing digital voice data into compressed
outgoing digital voice data by performing the steps of:


(a) removing any DC bias in the outgoing digital voice
data to produce a normalized outgoing digital voice

signal;
(b) pre-emphasizing the normalized outgoing digital
voice signal to produce a pre-emphasized outgoing digital

voice signal;
(c) dividing the pre-emphasized outgoing digital voice
signal into segments to produce a current segment and a

past segment;
(d) predicting the pitch of the current speech segment
to form a pitch prediction;
(e) calculating the gain of the pitch of the current
speech segment to form a prediction gain;
(f) reconstructing the past speech segment from a
compressed past segment to produce a reconstructed past

segment;
(g) finding the innovation in the current speech
segment by comparing the pitch prediction to the

reconstructed past segment to produce an error signal; 
(h) determining the maximum amplitude in the current
speech segment;
(i) quantising the error signal using a code book
generated from a representative set of speakers and

environments to produce a minimum mean squared error
matching the form of an index into the code book; and
(j) recording the pitch prediction, the prediction
gain, the maximum amplitude and the index into the code

book in a packet as the compressed outgoing digital voice
data.
</CLAIMS>
</TEXT>
</DOC>
