<DOC>
<DOCNO>EP-0631706</DOCNO> 
<TEXT>
<INVENTION-TITLE>
METHODS AND DEVICES FOR PRIORITIZING IN HANDLING BUFFERS IN PACKET NETWORKS.
</INVENTION-TITLE>
<CLASSIFICATIONS>H04L1256	H04L1256	H04Q1104	H04Q1104	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>H04L	H04L	H04Q	H04Q	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>H04L12	H04L12	H04Q11	H04Q11	</CLASSIFICATIONS-FOURTH>
<ABSTRACT>
Methods and devices are proposed for handling a buffer (11) in packet networks are proposed, particularly in regard of loss and delay of packets. The packets are supposed to belong to predetermined or implicitly given loss priority classes and delay priority classes. When a packet arrives to the buffer (11) the class of the packet is determined, both for loss and delay. For each loss priority class there is a predetermined threshold value (T1, TBusy, TIdle, T3, TL) and the total filling level (M) of the buffer, i.e. the total number of packets stored, is compared to the threshold value of the loss priority class to which the received packet belongs. If said threshold value (T1, TBusy, TIdle, T3, TL) is larger than said filling level (M), the packet is buffered in order to be forwarded, and otherwise it is lost. In the determination if said packet is to be buffered or lost the delay priority of the packet is not taken into account. In the forwarding of packets from the buffer (11) those packets are chosen in the usual way, which belong to higher delay priority classes before packets belonging to lower delay priority classes, where this is performed in such a way that packets belonging to all delay priority classes can be warranted a specific minimum service level. It is achieved by associating each such class with a maximum time period, within which at least one packet of the delay class considered will be forwarded, if such a packet is available in the buffer (11).
</ABSTRACT>
<APPLICANTS>
<APPLICANT-NAME>
ERICSSON TELEFON AB L M
</APPLICANT-NAME>
<APPLICANT-NAME>
TELEFONAKTIEBOLAGET LM ERICSSON
</APPLICANT-NAME>
</APPLICANTS>
<INVENTORS>
<INVENTOR-NAME>
BLABJERG SOEREN
</INVENTOR-NAME>
<INVENTOR-NAME>
SAELLBERG HANS KRISTER MIKAEL
</INVENTOR-NAME>
<INVENTOR-NAME>
BLABJERG, SOEREN
</INVENTOR-NAME>
<INVENTOR-NAME>
SAELLBERG, HANS, KRISTER, MIKAEL
</INVENTOR-NAME>
</INVENTORS>
<DESCRIPTION>
 METHODS AND DEVICES FOR PRIORITIZING IN HANDLING BUFFERSIN PACKET NETWORKSTECHNICAL FIELDThe present invention is related to methods and devices for prioritizing procedures when handling buffers in packet networks, in particular methods and devices for loss prioritizing and delay prioritizing of data packets.BACKGROUND OF THE INVENTIONIn packet oriented networks, e.g. ATM (Asynchronous Transfer Mode) , data packets or message packets, also called cells, are forwarded between different stations and in particular they pass through switch units or other units, where the arrived packets are forwarded. These transferring stations (most often switches) contain memories or buffers which store the packets before they are forwarded. However the buffers have limited capacities and thus in such systems some method is provided for eliminating certain data package for which there is no space in the buffers.In order to determine the packets which can be discarded when there is no room in a buffer, the data packets can be assigned loss priorities having different sizes. They are principally a number value indicating the importance of the packet, such that packets having low loss priorities can be eliminated before packets having higher loss priorities.In such networks it would also be advantageous to have a method by means of which the different data packets are forwarded in such a way that data packets having a high degree of urgency are forwarded in the first place and that data packets having a low degree of urgency in the second place. The degree of urgency can be indicated by assigning to the data packets delay priorities having different values which like the loss priorities are suitably chosen number values. In certain cases several levels having different delay priorities may be provided. The simplest type of queue handling is that first packets are forwarded having the highest priorities and after that, if there is no data packets left in the buffer for the highest priority, data 

packets having lower priorities can be forwarded. A disadvantage in this procedure may be that messages having low priorities may be allowed to wait too long in the system before they are forwarded.Thus it would be desirable to have a method by means of which it can be safeguarded, that also for data packets having low degrees of priority a certain minimal capacity in the transfer thereof in the system is warranted.Further it is advantageous to separate the above mentioned concepts "loss priority" and "delay priority" from each
</DESCRIPTION>
<CLAIMS>
CLAIMS
1. A method for handling in a packet network a buffer, in which the packets are stored before they are forwarded, in particular in a switch device,
each packet belonging to a certain loss priority class and at least two loss priority classes being arranged and
each packet also belonging to a certain delay priority class and at least two delay priority classes being arranged, the delay priority classes being intended to give different delays for the packets belonging to said classes, such that longer delays are allowed for packets belonging to delay priority classes having a lower delay priority,
for each arrived packet the following steps being performed a) the loss priority class of the packet is determined, b) it is determined if the present total number of packets stored in the buffer is smaller than a threshold value associated with the loss priority class of the packet, c) if the determination in b) gives the answer yes, the packet is stored in the buffer and otherwise it is not stored and is discarded,
characterized in
that for each incoming packet also the delay priority class of the packet is determined and
that in the forwarding of packets from the buffer packets are chosen belonging to a higher delay priority class before packets belonging to a lower delay priority class.
2. A method for handling in a packet network a buffer, in which the packets are stored before they are forwarded, in particular in a switch device,
each packet belonging to a certain loss priority class and at 


least two loss priority classes being arranged and
each packet also belonging to a certain delay priority class and at least two delay priority classes being arranged, the delay priority classes being intended to give different delays for the packets belonging to said classes, such that longer delays are allowed for packets belonging to delay priority classes having a lower delay priority,
for each arrived packet the following steps being performed a) the loss priority class of the packet is determined, b) it is determined if the present total number of packets stored in the buffer is smaller than a threshold value associated with the loss priority class of the packet, c) if the determination in b) gives the answer yes, the packet is stored in the buffer and otherwise it is not stored and is discarded,
characterized in
that for each incoming packet also the delay priority class of the packet is determined and
that in the forwarding of packets from the buffer packets are chosen belonging to a higher delay priority class before packets belonging to a lower delay priority class with the further condition that with each lower delay priority class time intervals having predetermined length are associated, such that instead of a packet from a higher delay priority class a packet is chosen from a lower delay priority class, if no packet from the lower delay priority class has been sent during the time interval having the predetermined length associated with the delay priority class thereof and if such a packet is available.
3. A device for handling in a packet network a buffer, in which the packets are stored before they are forwarded, in particular in a switch device,
each packet belonging to a certain loss priority class, at least 


two loss priority classes being arranged and a threshold value being associated with each loss priority class,
each packet also belonging to a certain delay priority class and at least two delay priority classes being arranged, the delay priority classes being intended to allow different delays for the packets belonging to said classes, such that longer delays are allowed for packets belonging to delay priority classes having a lower delay priority,
the device comprising
- an input on which the packets arrive,
- a memory or a buffer,
- an output on which the packets are forwarded,
- a logic unit for determining those packets to be stored in the buffer comprising a) means for determining the loss priority class of an arrived packet, b) means for determining if the present total number of packets stored in the buffer is less than the threshold value associated with the loss priority class of the arrived packet and for forwarding, in the case that this condition is satisfied, a signal thereof to c) means for storing the arrived packet in the buffer,
characterized in
that the logic unit also comprises
d) means for determining for each arrived packet also the delay priority class of the packet and
that another logic unit is arranged for determining the packet which is to be sent from the buffer comprising
means for choosing packets belonging to a higher delay priority class before packets belonging to a lower delay priority class and for transferring the selected packet to the output for forwarding. 


4. A device for handling in a packet network a buffer, in which the packets are stored before they are forwarded, in particular in a switch device,
each packet belonging to a certain loss priority class, at least two loss priority classes being arranged and a threshold value being associated with each loss priority class,
each packet also belonging to a certain delay priority class and at least two delay priority classes being arranged, the delay priority classes being intended to allow different delays for the packets belonging to said classes, such that longer delays are allowed for packets belonging to delay priority classes having a lower delay priority,
the device comprising
- an input on which the packets arrive,
- a memory or a buffer,
- an output on which the packets are forwarded,
- a logic unit for determining those packets to be stored in the buffer comprising a) means for determining the loss priority class of an arrived packet, b) means for determining if the present total number of packets stored in the buffer is less than the threshold value associated with the loss priority class of the arrived packet and for forwarding, in the case that this condition is satisfied, a signal thereof to c) means for storing the arrived packet in the buffer,
characterized in
that the logic unit also comprises
d) means for determining for each arrived packet also the delay priority class of the packet and
that another logic unit is arranged for determining the packet which is to be sent from the buffer comprising 


means for choosing packets belonging to a higher delay priority class before packets belonging to a lower delay priority class with the further condition that each lower delay priority class is associated with time intervals having predetermined lengths, such that instead of a packet from a higher delay priority class a packet is chosen from a lower delay priority class if no packet from the low delay priority class has been forwarded during the time interval with the predetermined length associated with the delay priority class thereof and if such a packet is available, and
means for transferring a chosen packet to the output for forwarding.
5. A method for handling in a packet network a buffer, in which the data packets are stored before they are forwarded, each packet belonging to a certain one of at least two delay priority classes, characterized in that in the forwarding of packets from the buffer packets are chosen belonging to a higher delay priority class before packets belonging to a lower priority class with the further condition that each lower delay priority class is associated with time intervals having predetermined lengths, such that instead of a packet from a higher delay priority class a packet is chosen from a lower delay priority class, if no packet from the lower delay priority class has been sent during the time interval having the predetermined length associated with the delay priority class thereof and if such a packet is available.
6. A device for handling in a packet network a buffer, in which the packets are stored before they are forwarded, each packet belonging to a certain one of at least two delay priority classes, comprising
- an output on which the packets arrive,
- a memory or a buffer,
- an output on which the packets are forwarded from the buffer,
characterized by 


a logic unit for the determination of the packet, which is in turn to be forwarded from the buffer, comprising
means for choosing packets belonging to a higher delay priority class before packets belonging to a lower delay priority class with the further condition that each low delay priority class is associated with time intervals having predetermined lengths, such that instead of a packet from a higher delay priority class a packet is chosen from a lower delay priority class, if no packet from the low delay priority class has been sent during the time interval having the predetermined length associated with the delay priority class thereof and if such a packet is available, and
means for transferring the chosen data packet to the output for forwarding.
1. A device according to claim 6, characterized by memory means associated with each delay priority class for storing addresses to the data packets which belong to this delay priority class and which are stored in the buffer.
8. A device for handling in a packet network a buffer, in which the packets are stored before they are forwarded, each packet belonging to a certain one of at least two delay priority classes, comprising
- an output on which the packets arrive,
- a memory or a buffer,
- an output on which the packets are forwarded from the buffer,
characterized by
a logic unit for the determination of the packet, which is in turn to be forwarded from the buffer, comprising
means for selecting packets belonging to a higher delay priority class before packets belonging to a lower delay priority class by means of lists stored in memory means for each delay priority class, these lists each one accommodating addresses to the data 


packets, which belong to this delay priority class and which are stored in the buffer, and
means for transferring a chosen data packet to the output for forwarding.
9. A device according to one of claims 7 - 8, characterized by queue arranging means, which are arranged to store, for arrived data packets, which are stored in the buffer, the addresses to these data packets in corresponding memory means associated with the delay priority class, to which each data packet belongs, and for further placing the addresses to stored data packets belonging to a delay priority class in a definite order in the memory means associated with this delay priority class.
10. A device according to claim 9, characterized in that the queue arranging means are provided, in the placing of addresses, to use a sequential order, which corresponds to the time order, in which the data packets having these addresses have arrived. 

</CLAIMS>
</TEXT>
</DOC>
