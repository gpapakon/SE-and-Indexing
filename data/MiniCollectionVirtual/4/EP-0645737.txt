<DOC>
<DOCNO>EP-0645737</DOCNO> 
<TEXT>
<INVENTION-TITLE>
Spatial-filtering unit for performing adaptive edge-enhancement process
</INVENTION-TITLE>
<CLASSIFICATIONS>G06T520	H04N1409	G06T520	H04N1409	H04N140	H04N140	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>G06T	H04N	G06T	H04N	H04N	H04N	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>G06T5	H04N1	G06T5	H04N1	H04N1	H04N1	</CLASSIFICATIONS-FOURTH>
<ABSTRACT>
A spatial-filtering includes a first 
filtering unit (3) which performs a smoothing process 

on image data, the smoothing process being a process 
by which tone oscillations formed by tone levels are 

suppressed. A second filtering unit (4) performs an 
adaptive edge-enhancement process on the image data 

which has previously undergone the smoothing process. 
The adaptive edge-enhancement process is a process by 

which sharpness of edges is enhanced, the edges being 
parts having steep tone gradients in the image. A 

manner of the adaptive edge-enhancement process 
depends on edge amounts present in the input image 

data. The edge amounts are amounts indicating matters 
as to how steep tone gradients of the tone levels 

represented by the image data are. 

</ABSTRACT>
<APPLICANTS>
<APPLICANT-NAME>
RICOH KK
</APPLICANT-NAME>
<APPLICANT-NAME>
RICOH COMPANY, LTD
</APPLICANT-NAME>
</APPLICANTS>
<INVENTORS>
<INVENTOR-NAME>
OHUCHI SATOSHI
</INVENTOR-NAME>
<INVENTOR-NAME>
TAKAHASHI SADAO
</INVENTOR-NAME>
<INVENTOR-NAME>
OHUCHI, SATOSHI
</INVENTOR-NAME>
<INVENTOR-NAME>
TAKAHASHI, SADAO
</INVENTOR-NAME>
</INVENTORS>
<DESCRIPTION>
The present invention relates to a spatial-filtering
unit used in an image processing apparatus
and in particular to a spatial-filtering unit for
improving image quality.An original image to be processed through a
digital duplicator, a facsimile apparatus and so forth
may be generally classified into three categories of
images, character images, photograph images, and
halftone-printed images. These categories of images
have particular properties so that different manners
are required to be used in processing these categories
of images so as to improve image quality in copies
obtained from the categories of original images. For
the above purpose, if one original image includes at
least two of the above three categories of image
parts, an image-region classification process is first
performed so as to classify the original image into
regions consisting of the two categories of image
parts. After that, processes appropriate to the
categories of image parts are performed on the
classified regions. Various methods of such an image-region
classification process have been proposed in, for
example, the following papers: 'High Quality Digital
Image Processing Method using Moire Suppression and
Edge-Enhancement Filtering', 1992, Image-Electronics-Society
annual-meeting previous paper 40, pages 183-186,
FIG.1 (Paper 1); and 'Image-Region Classification
Method for Character/Picture(halftone, photograph)
Mixed Image', proposed by the present applicant,
Electronics Information Communication Society Paper
Journal Vol.J75-DI1 No.1, pages 39-47, January 1992
(Paper 2).Problems such as those described below are
present in the above conventional image-region
classification methods. That is, characters present
in a white background in the original image can be
classified to be character image parts in the image-region
classification methods and thus are processed
in a manner appropriate to character images. However,
it is technically difficult to classify, to be
character images, characters present in a halftone
background (the term 'characters present in a halftone
background' will be referred to as 'in-halftone
characters', hereinafter) and characters present in a
color background. As a result, such characters are 
not classified so that the characters are processed in
a manner as if the relevant image parts were not
character images but were mixed-category images or a
part of a picture image such as a halftone image or a
photograph image. Thus, the characters may not be
processed in a manner appropriate to character
</DESCRIPTION>
<CLAIMS>
A spatial-filtering unit for spatial-filtering image data, the image data
representing tone levels of an image;

   said spatial-filtering unit comprising:

first filtering means (3) for performing a smoothing process on the image
data;
said smoothing process being a process by which tone oscillations formed by
the tone levels are suppressed; and
second filtering means (4) for performing an adaptive edge-enhancement
process on the image data which has previously undergone said smoothing process;
said adaptive edge-enhancement process being a process by which sharpness
of edges is enhanced, the edges being parts having steep tone gradients in the

image;
a manner of said adaptive edge-enhancement process depending on edge
amounts present in the input image data; and
the edge amounts being degrees as to how steep tone gradients of tone levels
represented by said image data are;

   characterized in that:

said first filtering means (3) performs said smoothing process on the image
data in the form of a reflectance-linear signal;
the reflectance-linear signal representing tone levels linear to reflectance of
light reflected by an original image;
said spatial-filtering unit further comprises data-form converting means (6) 
for converting the form of the image data from the form of the reflectance-linear

signal into the form of a density-linear signal before said second filtering means
performs said adaptive edge-enhancement process on the image data; and
the density-linear signal representing tone levels linear to densities of the
original image.
The spatial-filtering unit according to claim 1,

   characterized in that:

said spatial-filtering unit further comprises image-region classification means
(1) for classifying the image into character regions and other regions;
the character regions being regions comprising characters in a white
background;
said smoothing process and said adaptive edge-enhancement process being
performed on said other regions.
The spatial-filtering unit according to claim 1,

   characterized in that:

said first filtering means (3) removes tone oscillations due to halftone dots
present in the image;
said second filtering means (4) enhances edges other than edges due to the
halftone dots.
The spatial-filtering unit according to claim 1,

   characterized in that:

   said second filtering means (4) comprises:

edge-detecting means (11 or 15) for detecting edges and boundaries of
characters present in the image; and
edge-enhancement means (12) for enhancing the edges detected by said edge-detecting
means.
The spatial-filtering unit according to claim 4,
 
   characterized in that:

   said edge-detecting means (11 or 15) comprises a spatial-frequency band-pass
filter for detecting edges of the image having spatial frequencies corresponding to

those of ordinary characters.
The spatial-filtering unit according to claim 4,

   characterized in that:

   said edge-enhancing means (12) enhances high spatial frequencies edges
have.
The spatial-filtering unit according to claim 1,

   characterized in that:

   said second filtering means (4) comprises:

an edge-amount calculating filter (11 or 15) for calculating the edge
amounts; and
an edge-enhancement filter (12) for enhancing the edges in a manner
depending on the edge amounts calculated by said edge-amount calculating filter;
said edge-amount calculating filter (11 or 15) having large output values
especially for image parts of the image having relatively low spatial frequencies,

while said edge-enhancement filter (12) has large output values especially for image
parts of the image having high spatial frequencies higher than said relatively low

spatial frequencies.
The spatial-filtering unit according to claim 7,

   characterized in that:

   said edge-amount calculating filter (11) obtains each of the edge amounts as
a result of obtaining a difference between the maximum tone level and the minimum

tone level of tone levels of a relevant image part of the image.
The spatial-filtering unit according to claim 7,

   characterized in that:
 
   said edge-amount calculating filter (15) obtains a first derivative of the image

data so as to obtain the edge amounts.
The spatial-filtering unit according to claim 7,

   characterized in that:

   said edge-enhancement filter (12) comprises a Laplacian for obtaining a
second derivative of the image data.
The spatial-filtering unit according to claim 7,

   characterized in that:

   said spatial-filtering unit further comprises fine-adjustment means for fine
adjustment of coefficient of the edge amounts to be taken into account of by said

edge-enhancement filter (12).
</CLAIMS>
</TEXT>
</DOC>
