<DOC>
<DOCNO>EP-0658026</DOCNO> 
<TEXT>
<INVENTION-TITLE>
A method and system for transmitting data packets in a distributed data processing system.
</INVENTION-TITLE>
<CLASSIFICATIONS>G06F1300	G06F1300	H04L1246	H04L1246	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>G06F	G06F	H04L	H04L	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>G06F13	G06F13	H04L12	H04L12	</CLASSIFICATIONS-FOURTH>
<ABSTRACT>
The present invention provides a method in a data
processing system for efficiently sending a data packet from

a source node to a destination node. The data processing
system includes a multi-segment network having at least two

segments, wherein the source node and the destination node
are located within in different segments. Communication of

a data packet from one segment to another segment is provided
by an agent node. The present invention generates a data

packet at the source node within a first segment on the
multi-segment node. The data packet includes a source

address, a destination address, and data. The data packet is
then transmitted within the first segment. Thereafter, the

data packet is received within the first segment at an agent
node. The data packet is examined to determine the

destination address and then transmit it to the destination
node within a second segment in the multi-segment network.

The data packet is thereafter received at the destination
node within the second segment and an echo packet is

automatically transmitted from the destination node to the
source node to indicate a successful reception of the data

packet.

</ABSTRACT>
<APPLICANTS>
<APPLICANT-NAME>
IBM
</APPLICANT-NAME>
<APPLICANT-NAME>
INTERNATIONAL BUSINESS MACHINES CORPORATION
</APPLICANT-NAME>
</APPLICANTS>
<INVENTORS>
<INVENTOR-NAME>
HAMMOND WILLIAM A
</INVENTOR-NAME>
<INVENTOR-NAME>
NATION GEORGE W
</INVENTOR-NAME>
<INVENTOR-NAME>
YOUNG DANIEL G
</INVENTOR-NAME>
<INVENTOR-NAME>
HAMMOND, WILLIAM A.
</INVENTOR-NAME>
<INVENTOR-NAME>
NATION, GEORGE W.
</INVENTOR-NAME>
<INVENTOR-NAME>
YOUNG, DANIEL G.
</INVENTOR-NAME>
</INVENTORS>
<DESCRIPTION>
The present invention relates generally to an improved 
distributed data processing system and method in particular 
to improved communication within a data processing system and 
method such as a multi-segment local area network. Still 
more particularly, the present invention relates to 
communication between nodes located in different segments in 
a multi-segment local area network. Data processing systems, such as computer networks are 
increasingly common in the modern workplace. Such networks 
typically include multiple workstations and host or server 
devices which may be distributed over a vast geographical 
distance. Such networks contains nodes; each node includes 
a communications control unit that is a unit that controls 
the transmission and reception of data in a network. The 
communications control unit may contain one or more ports. 
The node also may be a processing element, such as 
workstation or a personal computer. A processing element 
includes one or more processors, memory and a communications 
control unit. Simpler types of nodes such as, for example, 
a multiplexer, bridge, router, or terminal server may be 
used. Many different topologies exist for connecting multiple 
computers into a distributed data processing system. One 
common technique for interconnecting multiple computers 
within a data processing system is to arrange the nodes in a 
ring structure. One known ring system is the so-called Token 
Ring local area network. The Token Ring local area network 
is defined by the I.E.E.E. 802.5 standard and is well known  
 
to those of ordinary skill in the art. The SCI standard, I.E.E.E. std. 1596-1992, specifies 
that nodes in a network communicate via unidirectional rings. 
For larger systems, multiple interconnected rings may be 
employed such that the bandwidth function of a single ring 
does not create a bottleneck in communications within the 
network. As a result of such a system, packets may have to 
travel, from the source address, across several rings to 
reach a destination address. The "source address" is the 
node that originates the packet and the "destination address" 
is the node that is to receive the packet. In sending packets, special nodes, also called "agent 
nodes" or "bridges" are employed to take a packet from one 
ring in the network and place the packet on to another ring 
in the network. The communications units in these nodes 
typically have two or more ports including an agent function. 
Under the SCI standard, anytime a packet is successfully 
re
</DESCRIPTION>
<CLAIMS>
A method in a data processing system for efficiently 
sending a data packet from a source node to a destination 

node, wherein data processing system includes a multi-segment 
network having at least two segments, wherein said source 

node and said destination node are located within different 
segments and wherein communication of a data packet from one 

segment to another segment is provided by an agent node, said 
method comprising: 

   generating a data packet at said source node within a 
first segment on said multi-segment node wherein said data 

packet includes a source address, a destination address, and 
data; 

   transmitting said data packet within said first segment; 
   receiving said data packet within said first segment at 

an agent node, examining said data packet to determine said 

destination address, and transmitting said data packet to 
said destination node within a second segment in said multi-segment 

network; 
   receiving said data packet at said destination node 

within said second segment; and 
   automatically transmitting an echo packet from said 

destination node to said source node to indicate a successful 
reception of said data packet in response to receipt of said 

data packet at said destination node, wherein the occurrence 
of a lost packet is efficiently identified. 
The method of claim 1, wherein said step of generating 
a data packet includes generating a data packet having a 

command to transfer ownership of data or to manipulate data. 
The method of claim 1 or 2, wherein said step of 
 

transmitting said data packet to said destination node 
further includes: 

   transmitting said data packet to said destination node 
utilizing a first path; 

   in response to receipt of a busy echo packet originating 
from a second agent node on said first path a predetermined 

number of times, retransmitting said data packet to said 
destination node via a third agent on an alternate path; and 

   in response to receipt of a busy echo packet originating 
from said destination node, retransmitting said data packet 

to said destination node after a predetermined amount of 
time. 
A data processing system comprising: 
   a plurality of segments, each segment including a number 

of nodes, at least one agent node and being connected to 
another segment in said plurality of segments; 

   a source node located on a first of said plurality of 
segments, said source node including: 

      generation means for generating a packet, wherein 
said packet includes a source address and a 

destination address, and 
      transmission means for transmitting said packet 

onto said one of said plurality of segments; 
   an agent node connecting said first of said plurality of 

segments with a second of said plurality of segments wherein 
said agent node includes: 

      reception means for receiving said packet, 
examination means for examining said packet to 

determine said destination address, and
 

      routing means for routing said packet onto said 
second of said plurality of segments; and 

   a destination node, said destination node including: 
      reception means for receiving said packet, 

generation means for generating an echo packet 
including said source node as a destination 

address, and 
      transmission means for transmitting said echo 

packet onto said second segment. 
The data processing system of claim 4, wherein said 
segments are rings in an interconnected ring network. 
The data processing system of claim 5, wherein said 
rings are unidirectional rings. 
The data processing system of any one of claims 4 to 6, 
wherein said transmission means in said source node 

transmitted said packet towards said destination node on a 
first path and wherein said source node further includes: 

   first retransmission means for retransmitting said 
packet to said destination node utilizing said first path in 

response to receiving a busy echo packet; and 
   second retransmission means for retransmitting said 

packet to said destination node utilizing a second path in 
response to receiving an busy echo packet from an agent node 

a predetermined number of times. 
The data processing system of claim 7, wherein a busy 
echo packet includes data indicating said echo packet is a 

busy echo packet. 
The data processing system of claim 8, wherein a busy 
echo packet includes origination data indicating what type of 

node generated said busy echo packet. 
The data processing system of anyone of claims 4 to 9, 
wherein said agent node further includes: 

   determination means, responsive to receipt of a non-busy 
echo packet from a segment, for determining whether said 

agent node can accept said non-busy echo packet; 
   placement means for placing said non-busy echo packet 

back onto said segment to recirculate said non-busy echo 
packet in response to a determination of an inability of said 

agent node to accept said non-busy echo packet; 
   tracking means for tracking a number of times that a 

non-busy echo packet is placed back onto a segment for 
recirculation; 

   routing means, responsive to an ability of said agent 
node to accept said non-busy echo packet, for routing said 

non-busy echo packet; and 
   deletion means for deleting said non-busy echo packet in 

response to said number of times being equal to a 
predetermined number. 
</CLAIMS>
</TEXT>
</DOC>
