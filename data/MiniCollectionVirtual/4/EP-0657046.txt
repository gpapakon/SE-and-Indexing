<DOC>
<DOCNO>EP-0657046</DOCNO> 
<TEXT>
<INVENTION-TITLE>
FAULT TOLERANT THREE PORT COMMUNICATIONS MODULE
</INVENTION-TITLE>
<CLASSIFICATIONS>G06F1114	G06F1100	G06F1100	G06F1300	G06F1114	G06F1108	G06F1108	G06F1300	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>G06F	G06F	G06F	G06F	G06F	G06F	G06F	G06F	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>G06F11	G06F11	G06F11	G06F13	G06F11	G06F11	G06F11	G06F13	</CLASSIFICATIONS-FOURTH>
<ABSTRACT>
A fault tolerant three port (P1, P2, P3) communications module (CM1 of fig. 1) has two control ports (P1 and P2) for receiving commands from two computers (A and B), and a communications port (P3) for transferring data over a communications channel (CC1) in response to the commands. Each control port includes a select line (e.g. SEL1A) which carries a select signal with true and false states, mode lines (e.g. Mode (0-3)A) which carry codes that represent the commands, and a write line (e.g. WRA) which carries a rspective pulse in sync with each of the codes. The select line, mode lines, and write line of each control port are coupled in the module to a respective inter-processor command decoder (20 of fig. 3) having a lead stage (22) and a trail stage (23). The lead stage detects (22) when a predetermined code (e.g. 1001) occurs on the mode lines and the select signal is false during a first one of the pulses; and, the trail stage (23) generates an output signal (IPC) that indicates the receipt of an inter-processor command for the module if, during a second pulse that immediately folows the first pulse, the compliment (0110) of the predetermined code occurs on the mode lines and the select line is true.
</ABSTRACT>
<APPLICANTS>
</APPLICANTS>
<INVENTORS>
</INVENTORS>
<DESCRIPTION>
This invention relates to the structure and 
operation of communication modules which have two control 
ports that are coupled to respective computers, and one 
communications port that is coupled to a communications 
channel. With such a communications module, each of the 
computers can send an intra-processor command to a 
respective control port which initiates some action in the 
communication module that directly affects the computer 
which sent the intra-processor command. Also, each of the 
computers can send an inter-processor command to a 
respective control port which initiates some action in the 
communication module that directly affects the other 
computer which did not send the command. For example, one intra-processor command can 
initiate the passage of data from the communications 
channel through the module to the computer which sent the 
command. By comparison, an inter-processor command to the 
communication module can stop the passage of data between 
the communications channel and the computer which did not 
send the command.  
 Since an inter-processor command from one 
processor directly affects the other processor, it is very 
desirable to have some sort of security built into the 
communications module whereby any erroneously generated 
inter-processor commands are detected and the corresponding 
operations are inhibited from being carried out. 
Otherwise, if a processor has a certain fault which causes 
it to erroneously send bogus inter-processor commands, the 
effect on the other processor can be disastrous. GB-A-2 032 736 discloses a data transfer system of a data handling 
system provided with a data transfer accuracy check function. Two copies 
of the same data block, of which one is inverted, are transmitted and 
compared to each other. Accordingly, a primary object of the invention is 
to provide a three port communications module which is 
immune from inter-processor commands that are sent due to 
certain types of faults. With the present invention, as defined in detail in the appended claims, the above object and 
others, are achieved by a three port communications module 
which has the following structure: a) two control ports 
for receiving commands from two computers, and a 
communications port for transferring data over a 
communications channel in response to the commands; b) each 
control port includes a select line which carries a select 
signal with true and false states, mode lines which carry 
codes that represent the commands, and a write line which 
carries
</DESCRIPTION>
<CLAIMS>
A communications module (CM1-CM16), comprising: 

two control ports (P
1
,P
2
) for receiving commands from two 
computers (A,B) and a communication port (P
3
) for transferring data 
over a communication channel (CC1-CC16) in response to said commands; 
each of said control ports including a select 
line (L1A-L16A,L1B-L16B) which carries a select signal with true and false 

states, mode lines (L20A, L20B) which carry codes that represent said 
commands, and a write line (L30A, L30B) which carries a respective pulse 

in sync with each of said codes; 
each control port having its select line, mode lines, 
and write line coupled to a separate intra-processor 

command decode (23) and a separate inter-processor command 
decoder (22,23;42,43) for that port; 
each intra-processor command decoder having only a 
single stage (23) which generates an output signal that 

indicates the receipt of an intra-processor command for 
said module if, during any one of said pulses, a first 

multi-bit code occurs on said mode lines and said select 
line is true; 
each inter-processor command decoder having a lead 
stage (22;42) which signals when a second multi-bit code occurs on 

said mode lines and said select signal is false during a 
first one of said pulses; and, having a trail stage (23;43) coupled 

to said lead stage, which generates an output signal that 
indicates the receipt of an inter-processor command if, 

during a second pulse that immediately follows said lead 
stage signal, the compliment of said second code occurs on 

said mode lines and said select line is true. 
A module according to claim 1 wherein said lead 
stage (22;42) includes a single flip-flop (22D) which sets when said 

predetermined code occurs and said select signal is false 
during said first pulse, and said trail stage (23;43) includes a 

single flip-flop (23C) which sets when the compliment of said 
predetermined code occurs and said select signal is true 

during said second pulse. 
A module according to claim 1 wherein said lead 
stage (22;42) includes a single flip-flop (22D) which sets when said 

predetermined code occurs and said select signal is false 
during said first pulse, and said trail stage (23;43) includes 

multiple flip-flops (43B-43E) which set when the compliment of said 
predetermined code occurs and said select signal is true 

during said second pulse. 
A module according to claim 1 wherein said lead 
stage (22;42) includes multiple flip-flops (42C,42D) which set when said 

predetermined code occurs and said select signal is false 
during said first pulse, and said trail stage (23;43) includes a 

single flip-flop (23C) which sets when the compliment of said 
predetermined code occurs and said select signal is true 

during said second pulse. 
A module according to claim 1 wherein said lead 
stage (22;42) includes multiple flip-flops (42C,42D) which set when said 

predetermined code occurs and said select signal is false 
during said first pulse and said trail stage (23;43) includes 

multiple flip-flops (43B-43E) which set when the compliment df said 
predetermined code occurs and said select signal is true 

during said second pulse.  
 
A module according to one or more of claims 1-5 wherein each 
control port (P
1
,P
2
) exchanges data with said communication port (P
3
); 
and wherein said module further includes a microprocessor (30), 

coupled to one inter-processor command decoder (22,23;42,43) of one 
control port, that responds to the output signal from said 

one decoder by stopping the transfer of any data on the 
opposite control port. 
A module according to one or more of claims 1-5 which further 
includes a microprocessor (30), coupled to one inter-processor 

command decoder (22,23;42,43) of one control port (P
1
,P
2
), that responds to the 
output signal from said one decoder by signaling the 

computer (A,B) on the opposite control port to perform a 
predetermined action. 
A module according to one or more of claims 1-7 wherein at least 
one of said control ports (P
1
,P
2
) includes multiple inter-processor 
command decoders (22,23;42,43), each of which has a lead stage (22;42) that 

detects a different multi-bit code that differs by at least 
one bit, and a trail stage (23;43) that detects the compliment code 

wherein each bit is inverted.  
 
A command decoder module, comprising: 

a single stage decoder (22) and a dual stage decoder (22,23;42,43) 
both of which are coupled in parallel to 


a) a select line (L1A-L16A,L1B-L16B) which carries a select signal 
with true and false states, 
b) mode lines (L20A,L20B) which carry codes, and 
c) a write line (L30A,L30B) which carries a respective 
pulse in sync with each of said codes; 
said single stage decoder consisting of one stage (22) 
which generates an output signal that indicates the receipt 

of a first command if, during any one of said pulses, a 
first multi-bit code occurs on said mode lines and said 

select line is true; 
said dual stage decoder including a lead stage (22;42) 
which signals when a second multi-bit code occurs on said 

mode lines and said select signal is false during a first 
one of said pulses; and, 
said dual stage decoder further including a trail 
stage (23;43) coupled to said lead stage, which generates an output 

signal that indicates the receipt of a second command if, 
during a second pulse that immediately follows said lead 

stage signal, the compliment of said second code occurs on 
said mode lines and said select line is true. 
</CLAIMS>
</TEXT>
</DOC>
