<DOC>
<DOCNO>EP-0627137</DOCNO> 
<TEXT>
<INVENTION-TITLE>
DIGITALLY CONTROLLED PHASE SHIFTER
</INVENTION-TITLE>
<CLASSIFICATIONS>H03H720	H03L7081	H03L708	H03K513	H03K513	H03H700	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>H03H	H03L	H03L	H03K	H03K	H03H	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>H03H7	H03L7	H03L7	H03K5	H03K5	H03H7	</CLASSIFICATIONS-FOURTH>
<ABSTRACT>
A clock is phase shifted by an amount controlled by the value of a control signal by establishing at least several discrete delay times to be imposed on the clock. The control signal value controls selection of the imposed discrete delay time. An analog-to-digital converter of a phase locked loop responds to intelligence representing variable phase bits and the selected phase shifted clock to control the signal value. The selected replica is derived by at least several cascaded substantially equal time delay units. In one embodiment, a multiplexer responds to the clock, and the signal value, which is Gray coded, to control connections from one of the delay units to an output terminal. In another embodiment, the number of cascaded delay units interposed between the clock and an output terminal is controlled by the signal value.
</ABSTRACT>
<APPLICANTS>
<APPLICANT-NAME>
COMSTREAM CORP
</APPLICANT-NAME>
<APPLICANT-NAME>
COMSTREAM CORPORATION
</APPLICANT-NAME>
</APPLICANTS>
<INVENTORS>
<INVENTOR-NAME>
GOLDENBERG YOAV
</INVENTOR-NAME>
<INVENTOR-NAME>
GUR SHIMON
</INVENTOR-NAME>
<INVENTOR-NAME>
GOLDENBERG, YOAV
</INVENTOR-NAME>
<INVENTOR-NAME>
GUR, SHIMON
</INVENTOR-NAME>
</INVENTORS>
<DESCRIPTION>
The present invention relates generally to signal
controlled phase shifters and more particularly to a
phase shifter including at least several delay elements
having connections to an output terminal controlled in
response to the value of a control signal.The invention is also related to a signal
multiplexer responsive to at least several signals and
more particularly to such a multiplexer which is
responsive to a reflected coded signal.Signal controlled phase shifters are usually
analog devices including a variable reactance, such as
a varactor, having a value controlled by the amplitude
of a voltage. Such phase shifters are frequently
employed in voltage controlled variable frequency
oscillators, such as are employed in phase locked
loops. In such applications, a fixed clock is supplied
to the voltage controlled, variable frequency
oscillator to derive an output frequency that is fed
back to one input of a phase detector, having a second
input responsive to an input frequency. The phase
detector derives an error voltage that is fed to a loop
filter which supplies the voltage controlled oscillator
with a variable amplitude voltage for controlling the
oscillator output frequency. Phase locked loops are 
used to lock a receiver to an incoming frequency with
zero frequency or phase error. In receivers responsive
to variable phase signals representing digital data,
e.g. QPSK or BPSK signals, a demodulator of the
receiver is locked to a symbol frequency with zero
phase error. Such locking is usually performed with a
first or second order phase locked loop.The prior art analog phase shifters and analog
based phase locked loops have the usual disadvantages
associated with analog circuitry, i.e., lack of
repetitiveness in manufacturing and performance unless
"tweaking" procedures are used, low yield production,
inaccuracy and the need to adapt the analog circuitry
to the remaining parts of the equipment. To overcome
these problems, digitally based phase locked loops have
been developed. One digitally based phase locked loop
responsive to base band signals to be demodulated
includes an analog-to-digital converter having one
input responsive to such a signal. The converter has a
second input responsive to a sampling clock having a
variable frequency controlled by the digital phase
locked loop. The converter derives a multi-bit digital
output signal having a variable value dependent on the
amplitude of the base band signal when a sample derived
by the clock occurs. The base band signal is subject
to a full gamut
</DESCRIPTION>
<CLAIMS>
A method of shifting the phase of a first
periodic waveform (42) to a selected one of at least

several different discrete values (output of 36),
comprising imposing a delay (44.1, 44.2 ...44.N) on the

periodic waveform (4) for a time determined by the
selected discrete value to derive another periodic

waveform (46), that is phase shifted with respect to the
first periodic waveform so that as the selected discrete

value changes the imposed delay changes, characterized in
that the selected discrete value is reset (reset of 36)

to an initial value in response to the first periodic
waveform (42) being shifted by the imposed delay through

an integral multiple of about one cycle of the first
periodic waveform (42). 
The method of claim 1 wherein said initial value is equal
to zero.
The method of any of the preceding claims wherein the
selected discrete value is derived by


converting (36) a value representing a desired phase
delay (output of 32) of the periodic waveform (42) into a signal (output

of 36) having at least several discrete values that change as a
function of time, and
incrementing (output of 28) the discrete value of the
signal at a certain rate for every unit of desired phase delay

change in a cycle of the periodic waveform (42),
the imposed delay being established by establishing at
least several discrete delay times (44) for the periodic waveform (42), 
selecting (40) one of the at least several discrete delay
times of the periodic waveform (42) in response to the discrete value of

the signal so there is a correspondence between the discrete delay
times to which the periodic waveform (42) is subjected and the changing

values of the discrete signal,
delaying (44) the periodic waveform (42) by the selected
discrete delay time to derive a delay-subjected periodic waveform (46);

and
performing the resetting by resetting (36) the discrete
value of the signal to a predetermined value in response to the

phase of the delayed subjected periodic waveform changing over

approximately an integral multiple of 360째 of the phase of the
periodic waveform (42).
The method of any of the preceding claims wherein the
periodic waveform (42) is a clock wave having a predetermined fixed

frequency, the phase-shifted periodic waveform being an output wave
(output of 50),


deriving (16, 18, 22, 28) a digital control signal having
a value that varies in response to the relative phase of a constant

frequency input signal (12, 14) and the output wave (46),
subjecting the clock wave to the at least several
discrete delays (44) so there are derived at least several waves

having differing time positions that are replicas of the clock
wave,
the delay being imposed by selecting (40) one of the
waves having differing time positions in response to the values of 

the digital control signal (output of 36) to derive the output
wave, and
the resetting (output of 56) causing resetting of the
value of the digital control signal to a predetermined initial

value therefor each time the output wave (output of 50) changes
phase relative to the clock wave (42) by approximately 360째 due to

a lead/lag change in the phase relationship of the output wave and
clock wave.
The method of claim 4 wherein the output wave and input
signal are such that the digital control signal value (output of

36) changes monotonically between resets.
The method of any of the preceding claims wherein the
imposed delay is provided by applying the periodic waveform (208)

to at least several cascaded delay units (200) having discrete
delay times, the discrete values changing the number of the

cascaded delay units connected to the periodic waveform so that as
the signal value (output of 206) changes, the cascaded delay units

are connected to and disconnected (by 202 and 204) from the
periodic waveform (208).
The method of any of the preceding claims wherein the
periodic waveform is a clock and the method attains a phase lock

between a constant frequency input (12, 14) and the clock (42)
which has a frequency slightly different from the constant

frequency, further comprising sampling (16,18) the amplitude of the 
input at a sampling frequency (output of 50) resulting from the

phase shifted clock, responding to the sampled amplitude (output of
16, 18) to derive a first representation (output of 28) having a

value equal to a frequency error between the sampling frequency and
the constant frequency input, integrating (32) the first

representation to derive a second representation having a value
commensurate with the phase shift to be imposed on the clock, the

imposed phase shift (by 40, 44) shifting the frequency of the clock
(42), adjacent ones of said phase shift values being approximately

equally spaced from each other, the delay imposed on the clock (by
40, 44) being for a time directly proportional to a selected one of

the discrete values to derive the frequency shifted clock (output
of 50).
The method of claim 7 wherein the delay is imposed by
deriving (44) at least several replicas of the clock such that

adjacent replicas k (outputs of 44.1 and 44.2) are time delayed
from each other by approximately the same amount, and selecting (by

40) the replica that is phase shifted from the clock by an amount
determined by the value of the second representation (output of

32).
Apparatus for shifting the phase of a periodic waveform
(42) in response to a control signal (output of 36) representing a

phase change to be applied to the periodic waveform comprising a
circuit (44) responsive to the periodic waveform (42) for deriving

at least several replicas of the periodic waveform (outputs of 
44.1...44.(N-1)), the replicas having different time delays with

respect to each other, means (40) responsive to the phase change
representing signal (output of 36) for coupling a selected one of

the replicas to a first output terminal (46) as a function of the
value of the control signal, characterized by means (56) for

resetting the control signal (output of 36) to the predetermined
value when the replica, at the output terminal (46) has shifted

through an integral multiple of about one cycle of the periodic
waveform (42).
The apparatus of claim 9 wherein the phase change
representing signal is a phase correction signal (34) derived in

response to a signal representing a substantially constant
frequency error (30) between the replica at the output terminal and

a reference frequency (12), the predetermined value of the control
signal being set to a value associated with a phase delay of 0째 for

the periodic waveform (42) when the replica at the output terminal
has a phase that differs by approximately Px360째 from the phase of

the periodic waveform after being supplied to the first output
terminal (46), where P is an integer.
The apparatus of any of claims 9-10 wherein the means for
resetting has a finite propagation delay (58), the means for

resetting including means (56) for detecting the simultaneous
occurrence of like transitions in the selected replica at the

output terminal (46) and a replica of the clock (output of 58) as
delayed by the propagation delay. 
The apparatus of any of claims 9-11 wherein the circuit
includes at least several delay units (44) having discrete delay

times, and further including a controller (40) responsive to the
control signal (output of 36) for controlling connections of the

delay units (44) between an output terminal of a source of the
waveform (42) and the first output terminal (46) so that as the

value of the control signal changes there are corresponding changes
in the delay time interposed by the delay units on the periodic

waveform between the waveform source output terminal and the first
output terminal, the delay units (44) being cascaded with each

other, the controller (40) responding to the value of the control
signal for effectively controlling the number of the delay units

cascaded between the source output terminal and the another output
terminal so that as the value of the control signal changes there

are corresponding changes in the number of the delay units
effectively cascaded between the output terminals, the controller

selecting an output of one of the delay units and coupling to it
the first output terminal.
The apparatus of claim 12 wherein the controller includes
a multiplexer (40) having a first input terminal (38) responsive to

the control signal for selecting an output of one of the delay
units and coupling it to the another output terminal (46), the

multiplexer having 1,2 ... N signal input terminals (0 ... (N-1))
respectively responsive to 1,2 ... N delayed replicas of the wave

at output terminals of delay units 1,2 ... N, the delay time of the 
delayed replica at input terminal k exceeding the delay time of the

delayed replicas at input terminals 1,2 ... (k-1), where k is
respectively each of 2 ... N, the control signal to which the

multiplexer is responsive being an M bit digital reflected coded
signal (output of 36) having a value indicating the phase shift to

be introduced between the waveform source output terminal and the
another output terminal, the another output terminal being an

output terminal of the multiplexer, the multiplexer including (N-1)
gates (70) each having: (a) first and second signal inputs (A and

B), (b) a signal output and (c) a control input (S) responsive to
a bit of the reflected coded signal (output of 36) for routing the

signal at one of the two signal inputs (A and B) to the signal
output as a function of the bit value at the control input (S); the

signal inputs and signal outputs of the gates (70) being connected

to (a) each other, (b) the multiplexer (40) input terminals and (c)
the multiplexer output terminal (46) and the control inputs of the

gates being connected to be responsive to the M bits of the M bit
digital reflected coded signal so that, as the reflected signal

value changes from a reflected value representing the value in base
10 of i to (i+1), the signal at the multiplexer input terminal i

changes to the signal at multiplexer input terminal (i+1), where i
is selectively each of 0,1,2 ... (N-2).
The apparatus of any of claims 9-11 wherein the phase
shift is interposed between an output terminal (212) of a source

(208) of the waveform and the first output terminal (output of
200.1), the circuit including at least several delay units 1,2 ... 

N (200) having discrete delay times, a control means (202, 204,
206) responsive to the value of the control signal (output of 220)

for controlling connections of the delay units between the waveform
source output terminal and the another output terminal so that as

the value of the control signal changes there are corresponding
changes in the delay time interposed by the delay units (200) on

the periodic waveform between the source of the waveform output
terminal and the first output terminal, the delay units being

cascaded with each other, the control means (202, 204, 206)
responding to the value of the control signal for effectively

controlling the number of the delay units cascaded between the
source output terminal (212) and the first output terminal (output

of 200.1) so that as the value of the control signal changes there
are corresponding changes in the number of the units effectively

cascaded between the another output terminal and the output
terminals of said delay units 1,2 ... N, delay unit 1 (200.1) being

connected so an output thereof is connected to said first output
terminal without connections through any other of said N delay

units, the control means controlling connections (provided by 202,
204) between input and output terminals of the delay units and

between the source output terminal (212) and the input terminal of
said delay unit 1 so that in response to the control signal having

a value commanding k of said delay units to be cascaded between the
source output terminal (212) and the first output terminal the

input terminal of delay unit k is connected to the source output
terminal without connections through any other of said N delay

elements, and the output terminal of delay unit j is connected to 
the input terminal of delay unit (j-1), where k is selectively any

integer between 2 and N and j is selectively every integer between
2 and k.
The apparatus of claim 14 wherein the control means
establishes a connection (202.(k-1)) between delay units k and (k-1)

before breaking a connection between an input of delay unit (k-1)
and the waveform source terminal in response to the number of

delay units interposed between the source output terminal and the
another output terminal changing from k to (k-1).
The apparatus of any of claims 9-15 wherein the apparatus
is included in a phase locked loop (Fig. 1) including an analog-to-digital

converter (16,18) responsive to an intelligence
representing set of bits (12,14), at least a portion of the

intelligence having a tendency to be degraded, the converter
deriving a multibit digital signal representing an amplitude of the

intelligence in response to a sampling wave train (output of 50)
derived in response to the shifted periodic waveform at the first

output terminal, and means (22,28,32) responsive to the converter
for deriving signals representing frequency (output of 28) and

phase (output of 32) errors between the intelligence and the
shifted periodic waveform at the first output terminal; the signal

representing the phase error controlling the control signal.
The apparatus of any of claims 9-16 wherein the first
output terminal and the frequency of the periodic waveform and the 

value of the control signal and the apparatus are such that the
number of effective delay units between the source output terminal

and the first output terminal always changes monotonically as a
function of time.
The apparatus of any of claims 9-17 wherein the apparatus
is included in a variable frequency oscillator, the apparatus

further comprising: a command source (output of 28) for changing
the frequency of the oscillator, a signal value derived by the

command source being 0 for a constant frequency output of the
oscillator at the first output terminal and being other than 0 for

changes in the oscillator output frequency, and means for
integrating (32) the value derived by the command source to control

the amount of the delay time interposed by the delay units on the
periodic waveform.
The apparatus of claim 14 wherein the control means (205)
divides the N elements into plural groups (each group is associated

with one of 224.1-224.4), the control means monotonically changing
the value of k from 1 to P for a first group of P of the N elements

during a first time interval, and then monotonically changing the
value of k from 1 to Q for a second group of Q of the elements

during a second time interval, where P and Q are integers less than
N.
The apparatus of claim 19 wherein the control means
includes a counter (220) having P states that are sequenced from 1 

to P, and a coupler (224.1-224.4) for coupling control signals
indicative of which of the P states the counter is in from the

counter to the first group of P elements during the first time
interval and for coupling control signals indicative of which of

the Q states the counter is in from the counter to the second group
of Q elements during the second time interval, where Q is greater

than P.
The apparatus of any of claims 9-20 wherein the control
signal represents frequency corrections (output of 28) to be

applied to the periodic waveform and a controller (32, 36, 40)
responds to the value of the frequency correction signal for

coupling the periodic waveform as delayed by the discrete time
delays to the first output terminal (46) so that when the value of

the frequency correction is not zero there are corresponding
changes in the discrete time delays of the periodic waveform at the

first output terminal and when the value of the frequency
correction is zero the phase of the delayed periodic waveform at

the first output terminal does not change and is susceptible of
having all of the discrete time delays, the frequency correction

signal being very small to thereby change the phase of the delayed
periodic waveform at the first output terminal relative to the

periodic waveform as applied to the delay circuit after many cycles
of the periodic waveform have occurred.
The apparatus of any of claims 9-21 wherein the circuit
when switched in response to the phase change control signal has a 

tendency to derive a glitch at another output terminal (output of
50), and a circuit (48) coupled to the another output terminal for

preventing the coupling of the glitches to the another output
terminal.
The apparatus of any of claims 9-22 wherein the control
signal is set to the predetermined value therefor by sensing a

lead/lag change in the phase relationship of the selected replica
and the periodic waveform.
</CLAIMS>
</TEXT>
</DOC>
