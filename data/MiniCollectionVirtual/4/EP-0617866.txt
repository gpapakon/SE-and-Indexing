<DOC>
<DOCNO>EP-0617866</DOCNO> 
<TEXT>
<INVENTION-TITLE>
APPARATUS AND METHOD FOR FORMATTING VARIABLE LENGTH DATA PACKETS FOR A TRANSMISSION NETWORK
</INVENTION-TITLE>
<CLASSIFICATIONS>H04B1022	H04B1000	H04J316	H04B1000	H04L2908	H04B1022	H04L2906	H04L2908	H04J316	H04L2906	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>H04B	H04B	H04J	H04B	H04L	H04B	H04L	H04L	H04J	H04L	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>H04B10	H04B10	H04J3	H04B10	H04L29	H04B10	H04L29	H04L29	H04J3	H04L29	</CLASSIFICATIONS-FOURTH>
<APPLICANTS>
<APPLICANT-NAME>
ERICSSON RAYNET
</APPLICANT-NAME>
<APPLICANT-NAME>
ERICSSON RAYNET
</APPLICANT-NAME>
</APPLICANTS>
<INVENTORS>
<INVENTOR-NAME>
CHENG ERIC M
</INVENTOR-NAME>
<INVENTOR-NAME>
CHENG, ERIC, M.
</INVENTOR-NAME>
</INVENTORS>
<DESCRIPTION>
The present invention relates to control apparatus and methods
for controlling distribution of signal packets among nodes of an optical
fiber network. More particularly, the present invention relates to a
programmable transmit control store for controlling framing of
variable length data packets of information for transmission from a host
terminal over a network to a plurality of network units.In communications and data transmission it is known to assemble
and transmit recurrent data frames of information from a central
distribution location to a plurality of destination stations, the frames
each containing a plurality of packets, each packet or group of packets
having a unique destination identifier. The packets are assembled such
that data following an ID identifier are received by the identified
destination station, decoded and then delivered to a service subscriber's
instrument.One transmission signal format commonly encountered in
conventional telephone wire systems is known as T1, which is a 24
channel time division multiplexed signal format in which each frame
increment comprises a 125 microsecond interval (8 Kilohertz sampling
rate). The present invention has utility in both electrical and optical
transmission systems, and in systems which deliver only voice, only
data, or only video information, or combinations thereof. Since a
preferred embodiment of the invention is for use in optical fiber
transmission systems, reference to such networks will be made
throughout this description in explaining the invention though it should
be understood that the invention is not limited to that single application.
In modern optical fiber networks it has been decided to follow the 
conventional 125 microsecond frame interval for forming information
frames for transmission over an optical fiber network.Prior approaches for framing voice/data packets include
synchronous and asynchronous methods. For framing synchronous
transmissions, it is conventional for network units which are to receive
the information to include counters which are set to zero at a beginning
of a frame and count a preset number of units or bytes after the
beginning of the frame to determine when bytes or packets for that
particular units are to be received and decoded. With this approach,
each packet does not need to have a unique destination identifier
associated with it. This approach is disadvantageous since it is difficult
to remotely program the network units over time to change a number of
bytes each network unit is to receive. This
</DESCRIPTION>
<CLAIMS>
A method of forming and transmitting recurrent information
frames (24) from a host terminal (14) to a plurality of network

units (20) so that the frames (24) can programmably be
reformatted from frame (24) to frame (24) so as to allow a

number of packets (25) contained therein to change and so as to
allow a number of bytes contained within any packet (25) to

change, comprising the steps of:

storing user data bytes to be received by the network
units (20) in a user data buffer memory means;
storing packet ID identifiers for the network units (20)
in an overhead memory means (66) at first address storage

locations spaced apart within the overhead memory means
(66) so that each network unit packet identifier is stored

in a storage location which numerically coincides with its
corresponding numeric frame byte location where each

packet identifier is to be located in the frame (24), the
overhead memory means (66) having a number of storage

locations at least as large as a number of byte locations
in the information frame (24);
storing a control pattern for sequentially controlling a
format of the information frame (24) in a control memory

means (64) such that the resultant information frame (24)
includes the user data bytes and the packet identifiers in

a predetermined order, the control memory means (64)
having a number of addresses at least as large as a number

of byte locations in the information frame (24);
generating and simultaneously applying sequential address
values to the control memory means (64) and the overhead

memory means (66); and
sequentially outputting control bytes from the control
memory means (64) in accordance with each sequential 

address value to control selective data output of the user
data buffer memory means and the overhead memory means

(66) whereby each byte obtained from the overhead memory
means (66) is from a sequential address location

corresponding to the sequential address value which
generated its associated control byte so that a said

network unit packet identifier and data bytes for said
unit are arranged within each frame (24) in accordance

with the frame control pattern stored in the control
memory means (64).
The method set forth in claim 1, wherein the control
pattern in the control memory means (64) is sequentially

ordered and arranged so as to correspond with a sequential
order of bytes in the frame (24) such that when it is time for

a packet data byte to be arranged in the frame (24) one such
data byte is obtained from the data buffer memory means and

when it is time for a packet identifier to be arranged in the
frame (24) one such packet identifier byte is obtained from the

overhead memory means (66) from an address storage location
which numerically corresponds to where such packet identifier

byte is to be arranged in the frame (24).
The method set forth in claim 2, further comprising the
step of storing generic communication data bytes in the

overhead memory means (66) at second address storage locations
arranged within the overhead memory means (66) so that each

communication data byte is stored in a storage location which
numerically corresponds with its corresponding numeric frame

byte location where each communication data byte is to be
located in the frame (24) and its corresponding control byte.
The method set forth in claim 2, further comprising the
step of obtaining frame filler bytes and packet clock

acquisition bytes from a filler byte and clock acquisition byte
generator in response to control bytes generated by the control

memory means (64). 
The method set forth in claim 4 wherein the step of
generating and simultaneously applying address values to the

control memory means (64) and obtaining bytes from the overhead
memory means (66) is carried out by generating sequential byte

count values with a single byte counter means (60); the
overhead memory means (66), data buffer memory means, filler

byte and clock acquisition byte generator all being contolled
by output from the control memory means (64).
The method set forth in claim 5 wherein the frame (24)
comprises n bytes of information, and wherein the highest

number of sequential address values used in the control memory

means (64) and the overhead memory means (66) is n.
The method set forth in claim 1 wherein the packet
identifiers comprise optical network unit identifiers which are

generated by the host terminal (14) which is connected to the
optical network units (20) via optical fiber (16), the host

terminal (14) comprising a digital terminal.
A host terminal (14) for assembling recurrent packets (25)
within recurrent data frames (24) of information for

transmission over a network (10) from the host terminal (14) to
a variable number of network units (20), wherein each frame

(24) contains a programmed number of network unit packets (25)
which can vary from frame (24) to frame (24), wherein each

packet (25) has a varaible byte length which can change from
frame (24) to frame (24) related to an amount of bandwidth

required by each network unit (20), comprising:

user data buffer storage means for storing user data
bytes,
control memory means (64) for storing a control pattern
for controlling a format of the frames (24), the control

memory means (64) having a number of addresses at least as
large as a number of bytes in the information frame (24), 

overhead memory means (66) for storing frame overhead
information at predetermined storage locations therein,

the overhead memory means (66) having a number of
addresses at least as large as a number of bytes in the

information frame (24), at least some of the frame
overhead information comprising packet ID identifiers

which are stored at numeric address locations within the
overhead memory means (66) so as to be sequentially spaced

apart and so as to numerically coincide with frame address
locations where each such packet ID identifier is to be

located in the frame (24),
control byte counter means (60) for generating and
simultaneously applying sequential numeric address values

to the control memory means (64) and the overhead memory
means (66), and
decoding logic means for decoding control bytes put out by
the control memory means (64) to control selective data

output of the user data buffer storage means and the
overhead memory means (66) whereby each byte obtained from

the overhead memory means (66) is from a sequential
address location corresponding to the sequential address

value which generated its associated control byte so as to
construct frames (24) in accordance with the control

pattern stored in the control memory means (64).
The host terminal (14) set forth in claim 8, the control
pattern in the control memory means (64) being sequentially

orderd so as to numerically correspond with a sequential order
of bytes in the frame (24) such that when it is time for a user

data byte to be arranged in the frame (24) one such user data
byte is obtained from the data buffer memory means and when it

is time for a packet identifier to be arranged in the frame
(24) one such packet identifier byte is obtained from the

overhead memory means (66) from a storage location which
numerically equals its corresponding sequential address value. 
The host terminal set forth in claim 9, the overhead
memory means (66) including generic communication data bytes at

locations spaced apart in the overhead means (66) so that each
communication data byte is stored in a numeric storage location

which numerically corresponds with its corresponding numeric
frame byte location where each communication data byte is to be

located in the frame (24).
The host terminal (14) set forth in claim 9, further
comprising a filler byte and clock acquisition byte generator

for generating frame filler bytes and packet clock acquisition
bytes upon being instructed by control bytes put out by the

control memory means (64).
The host terminal set forth in claim 8 wherein the
overhead memory means (66) has the same number of addresses as

has the control memory means (64).
The host terminal (14) set forth in claim 8 wherein the
control memory means (64) and the overhead memory means (66)

comprise semiconductor static random access memory arrays each
arranged as a plurality of separately addressabel pages,

whereby one set of pages may be read while another set of pages
is being written.
The host terminal (14) set forth in claim 8 further
comprising writing means for writing the control pattern in the

control memory means (64), and for writing the overhead
information in the overhead memory means (66).
The host terminal (14) set forth in claim 14 wherein the
writing means is capable of writing to a selected one of the

control memory means (64) and the overhead memory means (66)
between successive counts put out by the control byte counter

means (60).
The host terminal (14) set forth in claim 15 wherein the
writing means includes a digital microcontroller means (68) 

selectively connectable to write values to the control memory
means (64) and to the overhead memory means (66) via an address

bus (72) for providing addresses and via a data bus (70) for
providing values to the control memory means (64) and to the

overhead memory means (66).
The host terminal means (14) set forth in claim 16 further
comprising address multiplexing means (62) for selecting

between the control byte counter means (60) and the address bus
(72) of the microcontroller means (68).
The host terminal (14) set forth in claim 8 wherein the
control byte counter means (60) comprises a counter arranged to

put out sequential count values corresponding in number to the
number of separate information bytes included within the frame

(24).
</CLAIMS>
</TEXT>
</DOC>
