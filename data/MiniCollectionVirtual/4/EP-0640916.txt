<DOC>
<DOCNO>EP-0640916</DOCNO> 
<TEXT>
<INVENTION-TITLE>
Microcomputer.
</INVENTION-TITLE>
<CLASSIFICATIONS>G06F906	G06F906	G06F9445	G06F9445	G06F1216	G06F1216	G06F1576	G06F1578	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>G06F	G06F	G06F	G06F	G06F	G06F	G06F	G06F	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>G06F9	G06F9	G06F9	G06F9	G06F12	G06F12	G06F15	G06F15	</CLASSIFICATIONS-FOURTH>
<ABSTRACT>
An instruction executing unit reads the address of a 
bug and a corrected program from an external memory 

through an interface, and stores the bug address and the 
corrected program in a register and a RAM, respectively. 

When the execution address of a program reaches the bug 
address, data of a program counter agree with the data in 

the register, whereupon a comparator outputs a selection 
signal to cause a selector to select a branch instruction 

generator, which supplies a branch instruction to the 
instruction executing unit. The instruction executing 

unit executes the branch instruction, thereby causing 
branching off to the corrected program stored in the RAM 

and execution of the corrected program. 

</ABSTRACT>
<APPLICANTS>
<APPLICANT-NAME>
NIPPON ELECTRIC CO
</APPLICANT-NAME>
<APPLICANT-NAME>
NEC CORPORATION
</APPLICANT-NAME>
</APPLICANTS>
<INVENTORS>
<INVENTOR-NAME>
SAKAMOTO HIDEKI
</INVENTOR-NAME>
<INVENTOR-NAME>
TAMURA TOSHINORI
</INVENTOR-NAME>
<INVENTOR-NAME>
SAKAMOTO, HIDEKI
</INVENTOR-NAME>
<INVENTOR-NAME>
TAMURA, TOSHINORI
</INVENTOR-NAME>
</INVENTORS>
<DESCRIPTION>
The present invention relates to an information 
processing apparatus, and more particularly to a microcomputer 
having at least an instruction executing unit for 
decoding and executing instructions, a program memory for 
storing a program, a program counter for successively 
indicating addresses in the program memory and outputting 
stored contents, and an interface means for obtaining data 
from an external source, all integrated on a single semi-conductor 
substrate. Microcomputers comprise a central processing unit 
(CPU) for carrying out arithmetic and control operations, 
a program memory, a data memory, and peripherals such as 
ports and a timer, all integrated in one chip. Microcomputers 
find use in various applications including electric 
appliances for home use, and video and audio devices. The program of a microcomputer is usually stored in a 
mask ROM which stores program data written at the time the 
microcomputer is manufactured, and hence the written 
program cannot be rewritten after the manufacture of the 
microcomputer. Microcomputer programs are generated at the time of  
 
development of the application devices which are 
controlled by the microcomputer. Therefore, it is common 
for a microcomputer program to be generated while the 
application device is still incomplete. Microcomputer 
programs are composed of a large volume of data, e.g., 32 
kilobytes of data. Consequently, bugs are frequently 
found in microcomputer programs before and after the 
corresponding application devices are perfected. If a microcomputer program bug is found after a 
microcomputer has been manufactured, the manufactured 
microcomputer is unusable because the program cannot be 
corrected by rewriting. Since new electric appliances for 
home use, for example, are manufactured in quantities of 
several tens of thousands of units for introduction into 
the market, a bug in the microcomputer program of a microcomputer 
costing about five hundred yen can result in a 
loss of several tens of millions yen. If microcomputers 
with program bugs have already been installed in application 
devices, the necessity of discarding the defective 
application devices results in even greater losses. Even 
bugs in a microcomputer program can be corrected, the need 
to reorder and manufacture the microcomputers entails high 
costs. Inasmuch as application devices cannot be manufactured 
until microcomputers with a corrected program are 
available, the sale of the application devices is delayed 
and the opportunity to sell
</DESCRIPTION>
<CLAIMS>
A microcomputer comprising: 
   instruction executing means for decoding and 

executing instructions; 
   a program memory for storing a program; 

   a program counter for successively indicating 
addresses in said program memory and making said program 

memory output stored contents; 
   interface means for obtaining data from an external 

source; 
   memory means for storing particular address 

information obtained from the external source through said 
interface means; 

   comparing means for comparing contents of said memory 
means with contents of said program counter, and outputting 

a selection signal when the compared contents agree 
with each other; 

   branch instruction generating means for generating a 
branch instruction which can be executed by said instruction 

executing means to change the execution address of 
the program stored in said program memory; and 

   selecting means for selecting and supplying said 
branch instruction to said instruction executing means 

when said selection signal is true, and selecting and 
supplying contents of said program memory to said 

 
instruction executing means when said selection signal is 

false; 
   said instruction executing means comprising 

means operable according to the program stored in said 
program memory for obtaining said particular address 

information from the external source through said interface 
means, storing said particular address information in 

said memory means, and executing said branch instruction 
to execute a program, which starts from an address different 

from said particular address information and which is 
stored in said program memory, when said selection signal 

is true. 
A microcomputer according to claim 1, further 
comprising an enable flag for determining whether the 

selection signal outputted from said comparing means is to 
be made valid or invalid. 
A microcomputer according to claim 2, wherein 
said instruction executing means comprises means for 

obtaining information to control said enable flag from the 
external source through said interface means, and making 

said enable flag true or false depending on the obtained 

information. 
A microcomputer comprising: 
   instruction executing means for decoding and 

executing instructions; 
   a program memory for storing a program; 

   a program counter for successively indicating 
addresses in said program memory and making said program 

memory output stored contents; 
   interface means for obtaining data from an external 

source; 
   a plurality of memory means for storing a plurality 

of items of particular address information obtained from 
the external source through said interface means; 

   one or a plurality of comparing means for comparing 
contents of said memory means with contents of said 

program counter, and outputting one or a plurality of 
detected address signals when the compared contents agree 

with each other; 
   one or a plurality of branch instruction generating 

means for generating one or a plurality of branch instructions 
which can be executed by said instruction executing 

means to change the execution address of the program 
stored in said program memory; 

   logic means responsive to said one or plurality of 
detected address signals for outputting one or a plurality 

of selection signals; and 
   selecting means for selecting and supplying any of 

 
said branch instructions to said instruction executing 

means when any of said detected address signal is true, 
and selecting and supplying contents of said program 

memory to said instruction executing means when all said 
detected address signals are false; 

   said instruction executing means comprising means 
operable according to the program stored in said program 

memory for obtaining said particular address information 
from the external source through said interface means, 

storing said particular address information in said memory 
means, and executing said branch instruction to execute a 

program, which starts from an address different from said 
particular address information and which is stored in said 

program memory, when said detected address signal is true. 
A microcomputer according to claim 4, further 
comprising one or a plurality of enable flags for 

determining whether the detected address signals outputted 
from said comparing means are to be made valid or invalid. 
A microcomputer according to claim 5, wherein said 
instruction executing means comprises means for obtaining 

information to control said enable flags from the external 
source through said interface means, and making said 

enable flags true or false depending on the obtained 
information. 
A microcomputer comprising: 
   instruction executing means for decoding and 

executing instructions; 
   a program memory for storing a program; 

   a program counter for successively indicating 
addresses in said program memory and making said program 

memory output stored contents; 
   interface means for obtaining data from an external 

source; 
   memory means for storing particular address 

information obtained from the external source through said 
interface means; 

   comparing means for comparing contents of said memory 
means with contents of said program counter, and outputting 

a selection signal when the compared contents agree 
with each other; 

   branch instruction generating means for generating a 
branch instruction which can be executed by said instruction 

executing means to change the execution address of 
the program stored in said program memory; and 

   selecting means for selecting and supplying said 
branch instruction to said instruction executing means 

when said selection signal is true, and selecting and 
supplying contents of said program memory to said instruction 

executing means when said selection signal is false; 
   said program memory comprising, in part or whole, a 

 
random-access memory; 

   said branch instruction comprising a branch 
instruction to branch off to a predetermined address in 

the random-access memory of said program memory; 
   said instruction executing means comprising means 

operable according to the program stored in said program 
memory for obtaining said particular address information 

from the external source through said interface means, 
storing said particular address information in said memory 

means, obtaining a particular program from the external 
source through said interface means, storing said particular 

program in an area starting with said predetermined 
address in said program memory, and executing said branch 

instruction to execute said particular program, which 
starts from said predetermined address and which is stored 

in said program memory, when said selection signal is 
true. 
A microcomputer according to claim 7, further 
comprising one or a plurality of enable flags for 

determining whether the selection signal outputted from 
said comparing means is to be made valid or invalid. 
A microcomputer according to claim 8, wherein 
said instruction executing means comprises means for 

obtaining information to control said enable flag from the 
 

external source through said interface means, and making 
said enable flag true or false depending on the obtained 

information. 
A microcomputer comprising: 
   instruction executing means for decoding and 

executing instructions; 
   a program memory for storing a program; 

   a program counter for successively indicating 
addresses in said program memory and making said program 

memory output stored contents; 
   interface means for obtaining data from an external 

source; 
   a plurality of memory means for storing a plurality 

of items of particular address information obtained from 
the external source through said interface means; 

   one or a plurality of comparing means for comparing 
contents of said memory means with contents of said 

program counter, and outputting one or a plurality of 
detected address signals when the compared contents agree 

with each other; 
   one or a plurality of branch instruction generating 

means for generating one or a plurality of branch instructions, 
which can be executed by said instruction executing 

means, to change the execution address of the program 
stored in said program memory;

 
   logic means responsive to said one or plurality of 

detected address signals for outputting one or a plurality 
of selection signals; and 

   selecting means for selecting and supplying any of 
said branch instructions to said instruction executing 

means when any of said detected address signal is true, 
and selecting and supplying contents of said program 

memory to said instruction executing means when all said 
detected address signals are false; 

   said program memory comprising, in part or whole, a 
random-access memory; 

   said branch instruction comprising a branch 
instruction to branch off to a predetermined address in 

the random-access memory of said program memory; 
   said instruction executing means comprising means 

operable according to the program stored in said program 
memory for obtaining said particular address information 

from the external source through said interface means, 
storing said particular address information in said memory 

means, obtaining a particular program from the external 
source through said interface means, storing said particular 

program in an area starting with said predetermined 
address in said program memory, and executing said branch 

instruction to execute said particular program, which 
starts from said predetermined address and which is stored 

in said program memory, when said detected address signal 
 

is true. 
A microcomputer according to claim 10, further 

comprising one or a plurality of enable flags for 
determining whether the detected address signals outputted 

from said comparing means are to be made valid or invalid. 
A microcomputer according to claim 11, wherein said 
instruction executing means comprises means for obtaining 

information to control said enable flags from the external 
source through said interface means, and making said 

enable flags true or false depending on the obtained 
information. 
</CLAIMS>
</TEXT>
</DOC>
