<DOC>
<DOCNO>EP-0650136</DOCNO> 
<TEXT>
<INVENTION-TITLE>
A comparison inequality function based method and apparatus for accelerated OCR correlation
</INVENTION-TITLE>
<CLASSIFICATIONS>G06K962	G06K964	G06K964	G06K968	G06K968	G06K962	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>G06K	G06K	G06K	G06K	G06K	G06K	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>G06K9	G06K9	G06K9	G06K9	G06K9	G06K9	</CLASSIFICATIONS-FOURTH>
<ABSTRACT>
A general method of accelerating the classification 
of an unclassified input symbol S into a library of pre-classified 

templates employs a comparison inequality 
function. The correlation calculation is initiated 

between the input symbol S and templates retrieved from 
the library of templates. Templates with a low degree of 

correlation are excluded prior to completion of the 
correlation calculation to accelerate the correlation. 

Sorting by template intensity permits the template foreground 
pixels to be correlated first, which also accelerates the 

correlation calculation. A second sort by discrimination 
power permits critical conflict pixels to be correlated 

first for further accelerating the correlation 
calculation. 


</ABSTRACT>
<APPLICANTS>
<APPLICANT-NAME>
CANON KK
</APPLICANT-NAME>
<APPLICANT-NAME>
CANON KABUSHIKI KAISHA
</APPLICANT-NAME>
</APPLICANTS>
<INVENTORS>
<INVENTOR-NAME>
AVI-ITZHAK HADAR
</INVENTOR-NAME>
<INVENTOR-NAME>
AVI-ITZHAK, HADAR
</INVENTOR-NAME>
</INVENTORS>
<DESCRIPTION>
This invention relates to the OCR classification of
input symbols, and more particularly to a method and apparatus based on
comparison inequality function which employs an exclusion
threshold for accelerating the correlation calculations,
"OCR" stands for Optical Character Recognition.Heretofore, comparison functions have been employed
to classify input symbol bit maps against a library of
character template bit maps. The summation of all of the
pixel comparisons in each of the input/template
correlations produced correlation values which revealed
the closest match. However, these prior correlation
techniques did not employ a comparison inequality
function and underlying "Exclusion Inequality Principle"
for excluding low correlation templates in order to
accelerate the classification process. Nor did these
prior art techniques employ pixel intensity sorting and
pixel discrimination sorting.European application EP-A-0586217
teaches the use of a
comparison function to enhance a library of character
templates with respect to a particular font or variation
range of the input symbols. European application EP-A-0608148
teaches enhancement of
library character templates with a provision for template
sub-classes to accommodate multiple representations of
each input symbol.European application EP-A-0625764
teaches
the use of the "Triangle of Inequality Principle" in
order to exclude distant templates and accelerate the
classification process.It is known from US-A-4,975,974 to provide a
comparison of an input pattern with dictionary patterns
in which data strings representing the patterns are
compared and mismatch signals generated for each mismatch
occurrence. The mismatch signals are summed to provide
mismatch distances in respect of each dictionary pattern
as a basis for comparison. The time taken for
calculation is reduced by interruption of the summing
process when the sum exceeds a threshold.According to the present invention there is
disclosed a method of and an apparatus for performing
symbol classification for use in
optical character recognition
as set out in claims 1 and 37. The method according to the
invention
comprising the steps of;
providing an input symbol S in the form of an input
vector defining an unclassified character having "q"
elements (S = s1, s2, s3, ... sk ... sj ... sq); providing a library of T templates (T1, T2, T3, ...
Ti ... TT) which are retrievable for correlation with the
input vector, each template being in the form of a
template vector respectively defining a pre-classified
cha
</DESCRIPTION>
<CLAIMS>
A method of symbol classification for use in optical
character recognition comprising the steps of;


providing an input symbol S in the form of an input
vector defining an unclassified character having "q"

elements (
S = s
1
, s
2
, s
3
, ... s
k
 ... s
j
 ...s
q
);
providing a library of T templates (T
1
, T
2
, T
3
, ...
T
i
 ... T
T
) which are retrievable for correlation with the
input vector, each template being in the form of a

template vector respectively defining a pre-classified
character having "q" elemen
ts (
T
i
 = t
1
, t
2
, t
3
, ... t
k
, ...
t
j
 ... t
q
) and forming "q" pairs of corresponding
elements with the "q" elements of the input vector;
correlating the input vector with the template
vectors by an element by element correlation calculation

(s, t
i
) which executes an element calculation cycle for
successive pairs of corresponding elements of the input

vector and each retrieved template vector to yield a
respective element term for each pair of corresponding

elements;
summing the element terms from previous calculation
cycles of the correlation calculation (s,t
i
) to yield a
cumulative bound after "k" calculation cycles and to

yield a final bound after the completion of "q"
calculation cycles;
determining an exclusion threshold for excluding the 
retrieved template if the cumulative bound crosses the

exclusion threshold and non-excluding the retrieved
template if the cumulative bound does not cross the

exclusion threshold ;
retrieving an initial template from the library of
templates;
initiating the element by element correlation
calculation (s,t
i
) for the "q" pairs of corresponding
elements to yield the cumulative bound;
excluding the retrieved template if the cumulative
bound crosses the exclusion threshold;
repeating the correlation calculation and excluding
steps until the retrieved template has been excluded or

until the correlation calculation (s,t
i
) for the
retrieved template has proceeded to completion to yield

the final bound;
saving non-excluded retrieved templates;
retrieving a next template from the library of
templates;
repeating the correlation calculation and excluding
and saving and retrieving steps until all of the template

vectors have been correlated with the input vector; and
classifying the unclassified input symbol against
the non-excluded pre-classified templates on the basis

of the numerical values of the final bound yielded by the
correlation calculations;

characterised in that the correlations and summing 
steps are provided by computing the cumulative bound to

be the value of a comparison inequality function (CIF;
16,36,46,56,66) comprising


a) a monotonically increasing Leading Partial
Correlation sum (12;32,42,52,62) representing the

cumulative sum of the first k element terms; and
b) a monotonically decreasing Residual Intensity
sum (14,34,44,54,64) representing the image intensity

data remaining after the kth calculation cycle.
A method as claimed in claim 1, wherein the
exclusion threshold is cumulative and is determined by

replacing an initial exclusion threshold with the final
bound of each non-excluded template during the

classification process of the input vector with the
template vectors.
A method as claimed in claim 2, wherein all of the
retrieved templates are excluded during the

classification process except for a single non-excluded
template.
A method as claimed in claim 3, wherein the
cumulative bound progresses monotonically toward the

final bound of the single non-excluded template.
A method as claimed in any of claims 3 and 4, 
wherein the initial cumulative bound for each correlation

calculation (s,t
i
) forms an upper bound which progresses
downward toward the final bound.
A method as claimed in any of claims 2 to 4, wherein
the initial exclusion threshold is zero.
A method as claimed in claim 6, wherein the
correlation calculation (s,t
i
) for the initial template
yields the first finite exclusion threshold.
A method as claimed in any of claims 2 to 4, wherein
the initial exclusion threshold is finite.
A method as claimed in any of claims 2 t 4, wherein
the initial exclusion threshold is greater than zero but

less than a minimum acceptable final bound.
A method as claimed in any preceding claim wherein
the correlation calculation (s,t
i
) is complete when the
Residual Intensity sum decreases to zero.
A method as claimed in any preceding claim, wherein
the comparison inequality function comprises the

relationship:

CIF(S,Ti) ≤ LPC + (SRI)(TRI)
 
where


CIF is the comparison inequality function,
LPC is a Leading Partial Correlation sum,
SRI is a Symbol Residual Intensity sum

   representing the symbol image intensity data
remaining in the CIF as the correlation calculation

proceeds, and
TRI is a Template Residual Intensity sum
representing the template image intensity data remaining

in the CIF as the correlation calculation proceeds.
A method as claimed in claim 11, wherein the
comparison inequality function is the relationship:


CIF(S,T
i
) ≤ 
j
=1
k
s
j
t
j
 + 
j
=
k
+1
q
s
2
j
j
=
k
+1
q
t
2
j
A method as claimed in any of claims 1 to 9, wherein
the comparison inequality function comprises the

relationship:

CIF (S,Ti) ≤ LPC + SRI

where 

CIF is the comparison inequality function,
LPC is a Leading Partial Correlation sum,

and
SRI is a Symbol Residual Intensity sum representing
the symbol image intensity data remaining in the CIF as

the correlation calculation proceeds.
A method as claimed in claim 13, wherein the
comparison inequality function is the relationship:


CIF(S,T
i
) ≤ 
j
=1
k
s
j
t
j
 + 
j
=
k
+1
q
s
2
j
A method as claimed in any of claims 1 to 9, wherein
the comparison inequality function comprises the

relationship:

CIF(S,Ti) ≤ LPC + TRI

where

CIF is the comparison inequality function,
LPC is a Leading Partial Correlation sum, and
TRI is a Template Residual Intensity sum

   representing the template image intensity data
remaining in the CIF as the correlation calculation

proceeds.
A method as claimed in claim 15 wherein the
comparison inequality function is the relationship:


CIF(S,T
i
) ≤ 
j
=1
k
s
j
t
j
 + 
j
=
k
+1
q
t
2
j
A method as claimed in claim 15, wherein the value
of the LPC sum is determined by the correlation

calculation (s,t
i
) each calculation cycle, and the value
of the TRI sum is pre-calculated based on the template

vectors in the template library and is retrieved from the
library.
A method as claimed in any preceding claim, further
comprising, before initiating the element by element

correlation calculation (s,t
i
) step, the additional step
of:


determining a series of sequential exclusion check
points (58) with intervals of element calculation cycles

therebetween for comparing the cumulative bound to the
exclusion threshold as the correlation calculation (s,t
i
)
proceeds.
A method as claimed in claim 18, wherein the
excluding step further comprising the additional steps 

of:

checking for exclusion of the retrieved template at
the first exclusion check point by comparing the

cumulative bound with the exclusion threshold;
excluding the retrieved template by terminating the
element by element correlation calculation (s,t
i
) if the
cumulative bound has crossed the exclusion threshold; and
continuing the element by element correlation
calculation (s,t
i
) to a next exclusion check point if the
cumulative bound has not crossed the exclusion threshold.
A method as claimed in any of claims 18 and 19,
wherein the number of element calculation cycles in each

interval of calculation cycles between the exclusion
check points is fixed.
A method as claimed in claim 20, wherein the fixed
number of element calculation cycles in each interval of

calculation cycles is one and the checking step occurs
after every calculation cycle.
A method as claimed in any of claims 18 and 19,
wherein the number of element calculation cycles in each

interval of calculation cycles between the exclusion
check points is variable.
A method as claimed in claim 22, wherein the number 
of element calculation cycles in each interval is

adaptive as the element by element correlation
calculation (s,t
i
) proceeds.
A method as claimed in any of claims 22 and 23,
wherein the number of element calculation cycles in each

interval of calculation cycles becomes smaller as the
element by element correlation calculation (s,t
i
)
proceeds.
A method as claimed in claim 18, wherein the change
in the cumulative bound during each interval of element

calculation cycles between the exclusion check points is
fixed.
A method as claimed in any preceding claim, wherein
the q pairs of corresponding elements in the input vector

and the template vector are unsorted and are correlated
by the correlation calculation (s,t
i
) in sequential order
of position within the input vector and the template

vector.
A method as claimed in any of claims 1 to 25,
wherein the q pairs of corresponding elements in the

input vector and the template vector are sorted and are
correlated by the correlation calculation (s,t
i
) in the 
order of the sort.
A method as claimed in claim 27,wherein the vector
elements in the input vector and the template vector have

numerical values, and the sort is by numerical value.
A method as claimed in claim 28, wherein the
numerical values are binary values.
A method as claimed in claim 28, wherein the
numerical values are representative of greyscale levels.
A method as claimed in claim 28, wherein the q pairs
of corresponding elements are sorted by the numerical

values of the elements forming the input vector.
A method as claimed in claim 28, wherein the q pairs
of corresponding elements are sorted by the numerical

values of the elements forming the template vector.
A method as claimed in claim 28, wherein elements
forming the foreground of the template vectors are

characterised by discrimination power, and the q pairs
of corresponding elements are double sorted;


first by the numerical values of the elements
forming the template vector; and
second by the discrimination power of the foreground 
elements forming the template vector.
A method as claimed in claim 33 wherein the elements
corresponding to a central area of a bit map defined by

the template vector have the highest discriminating
power.
A method as claimed in claim 28, wherein the q pairs
of corresponding elements are sorted by the numerical

values of the elements forming the foreground.
A method as claimed in claim 28, wherein the q pairs
of corresponding elements are sorted by the numerical

values of the elements forming the background.
Apparatus for performing symbol classification in
optical character recognition comprising;


input means for receiving an input symbol S in the
form of an input vector defining an unclassified

character having "q" elements (
S = s
1
, s
2
, s
3
, ... s
k
 ... s
j
 ...s
q
);
a library of T templates (T
1
, T
2
, T
3
, ... T
i
 ... T
T
)
which are retrievable for correlation with the input

vector, each template being in the form of a template
vector respectively defining a pre-classified charact
er
having "q" elements (
T
i
 = t
1
, t
2
, t
3
, ... t
k
, ... t
j
 ...
t
q
) and forming "q" pairs of corresponding elements with
the "q" elements of the input vector;
correlating means for correlating the input vector
with the template vectors by an element by element

correlation calculation (s, t
i
) which executes an element
calculation cycle for successive pairs of corresponding

elements of the input vector and each retrieved template
vector to yield a respective element term for each pair

of corresponding elements;
summing means for summing the element terms from
previous calculation cycles of the correlation

calculation (s,t
i
) to yield a cumulative bound after "k"
calculation cycles and to yield a final bound after the

completion of "q" calculation cycles;
determining means for determining an exclusion
threshold for excluding the retrieved template if the

cumulative bound crosses the exclusion threshold and non-excluding
the retrieved template if the cumulative bound

does not cross the exclusion threshold;
retrieving means for retrieving templates from the
library of templates;
saving means for saving non-excluded retrieved
templates;
control means operable to control the correlating
means, summing means, retrieving means and saving means

to retrieve an initial template, initiate the element by 
element correlation calculation (s,t
i
) for the "q pairs
of corresponding elements to yield the cumulative bound,

exclude the retrieved template if the cumulative bound
crosses the exclusion threshold, repeat the correlation

calculation and excluding steps until the retrieved
template has been excluded or until the correlation

calculation (s,t
i
) for the retrieved template has
proceeded to completion to yield the final bound, and

save non-excluded retrieved templates, retrieve a next
template from the library of templates, and repeat the

correlation calculation and excluding and saving and
retrieving steps until all of the template vectors have

been correlated with the input vector; and
classifying means for classifying the unclassified
input symbol against the non-excluded pre-classified

templates on the basis of the numerical values of the
final bound yielded by the correlation calculations;

characterised in that the correlation means and
summing means are operable to compute the cumulative

bound to be the value of a comparison inequality function
(CIF; 16,36,46,56,66) comprising


a) a monotonically increasing Leading Partial
Correlation sum (12;32,42,52,62) representing the

cumulative sum of the first k element terms; and
b) a monotonically decreasing Residual Intensity
sum (14,34,44,54,64) representing the image intensity

data remaining after the kth calculation cycle.
</CLAIMS>
</TEXT>
</DOC>
