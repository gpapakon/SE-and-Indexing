<DOC>
<DOCNO>EP-0635985</DOCNO> 
<TEXT>
<INVENTION-TITLE>
Improved decompression standard for ADCT-compressed document images
</INVENTION-TITLE>
<CLASSIFICATIONS>G06T900	H04N1411	G06T900	H03M730	H04N141	H04N726	H04N730	H04N726	H04N141	H04N730	H03M730	H04N1411	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>G06T	H04N	G06T	H03M	H04N	H04N	H04N	H04N	H04N	H04N	H03M	H04N	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>G06T9	H04N1	G06T9	H03M7	H04N1	H04N7	H04N7	H04N7	H04N1	H04N7	H03M7	H04N1	</CLASSIFICATIONS-FOURTH>
<ABSTRACT>
A method of improving the appearance of an ADCT decompressed document image 
while maintaining fidelity with an original document image from which it is derived, the 

method including the decompression steps of: a) receiving the encoded quantized transform 
coefficient blocks for the original image; b) removing any lossless encoding of the quantized 

transform coefficient blocks for the original image; c) multiplying each quantized transform 
coefficient in a block by a corresponding quantizing value from the quantization table to 

obtain a block of received transform coefficients; d) recovering the image by applying an 
inverse transform operation to the received transform coefficients; e) i) adaptively selecting on 

a block by block basis a filter threshold, ii) detecting edges within the block and forming a 
mapping of the edges occurring, and iii) iteratively filtering for a predetermined number of 

times the image with a smoothing filter, the filtering operation controlled by the derived edge 
map so as not to operate on image edges; f) comparing each block of new transform 

coefficients to a corresponding block of received transform coefficients and the selected 
quantization table, to determine whether the filtered recovered image is derivable from the 

original image; and g) upon the determination transferring the filtered recovered image to an 
output buffer. 


</ABSTRACT>
<APPLICANTS>
</APPLICANTS>
<INVENTORS>
</INVENTORS>
<DESCRIPTION>
The present invention is directed to a method of decompressing images compressed
in accordance with the currently proposed Joint Photographic Expert Group (JPEG) adaptive
discrete cosine transform (ADCT) standard, and more particularly, a method of reducing
decompression artifacts in document-type images resulting from decompression of standard
JPEG ADCT compressed images.Data compression is required in data handling processes, where too much data is
present for practical applications using the data. Commonly, compression is used in
communication links, where the time to transmit is long, or where bandwidth is limited.
Another use for compression is in data storage, where the amount of media space on which the
data is stored can be substantially reduced with compression. Yet another application is a
digital copier where an intermediate storage for collation, reprint or any other digital copier
functions. Generally speaking, scanned images, i.e., electronic representations of hard copy
documents, are commonly large, and thus are desirable candidates for compression.Many different compression techniques exist, and many are proprietary to individual
users. However, standards are desirable whenever intercommunication between devices will
be practiced. Particularly with the advent of multimedia communication, where formerly
dissimilar devices are required to communicate a common standard will be required. An
example is the current desirability of FAX machines to be able to communicate with printers.
Currently, compression standards are generally distinct for different devices.Three major schemes for image compression are currently being studied by
international standardization groups. A first, for facsimile type image transmission, which is
primarily binary, is under study by the JBIG (joint Binary Image Group) committee, a second for
TV and film, a standard is worked on by the MPEG (Motion Pictures Expert Group). For non-moving
general images, i.e., still images which are more general than the ones covered by JBIG,
the JPEG is seeking to develop a device independent compression standard, using an adaptive
discrete cosine transform scheme.ADCT (described for example, by W. H. Chen and C. H. Smith, in "Adaptive Coding of
Monochrome and Color Images", IEEE Trans Comm., Vol. COM-25, pp. 1285-1292, November
1977), as the method disseminated by the JPEG committee will be called in this application, is a
lossy system which reduces data redundancies based on pixel to pixel correlations. Generally, in
images, on a
</DESCRIPTION>
<CLAIMS>
A method of improving the appearance of a decompressed document image while
maintaining fidelity with an original document image from which it is derived, wherein for

compression, an original document image is divided into blocks of pixels (100-106), said blocks of

pixels are changed into blocks of transform coefficients (110-116) by a forward transform coding
operation (108) using a frequency space transform operation, said transform coefficients

subsequently quantized (118) with a lossy quantization process in which each transform coefficient
is quantized according to a quantizing value from a quantization table (119) and the result is used as

a quantized transform coefficient (120), the method including the decompression steps of:

a) receiving (300, 302) said quantized transform coefficient blocks for said original
image;
b) dequantizing (304) the transform coefficients in a block according to a
corresponding quantizing value from the quantization table to obtain a block of received transform

coefficients;
c) recovering the image by applying (306) an inverse transform operation to the
received transform coefficients and producing blocks of pixels;
d) filtering (308) the image with a non-linear filter, said filtering step including the
substeps of:


i. for each block of pixels, determining (400) the dynamic range of the pixel block,
ii. calculating (402), for each block of pixels, an edge threshold value, as a
function of the dynamic range determined for the pixel block;
iii. locating (406), using the edge threshold value, edges of the image within the
block and producing therefrom an edge map;
iv. filtering (408) the image with a sigma filter, averaging pixel values in the block
which are not identified as edges in the edge map;
e) changing (310) the filtered recovered image into blocks of new transform
coefficients by the forward transform coding operation using the frequency space transform

compression operation;
f) comparing (312. 314) each block of new transform coefficients to a corresponding
block of received transform coefficients and the selected quantization table, to determine whether

the filtered recovered image is derivable from the original image; and
g) only upon a positive determination in step (f), transferring the filtered recovered
image to an output buffer.
A method as described in claim 1, wherein step d) (308) includes the additional
substep of:

   v. repeating (410) the filtering step iv (408), for a predetermined number of
iterations.
A method as described in claim 1 or 2, wherein the forward transform coding
operation using the frequency space transform operation is a discrete cosine transform.
The method of claim 1, wherein the document image is an ADCT decompressed
document image, and step (d) alternatively comprises:


d) filtering the recovered image, the filtering step including the substeps of

i) adaptively selecting (400-402) on a block by block basis, a filter threshold,
ii) using the adaptively selected filter threshold, detecting edges within the block
and forming (406) a mapping of the edges therein occurring, and
iii) iteratively filtering (408, 410) for a predetermined number of times the image
with a smoothing filter, the filtering operation controlled by the derived edge

map so as not to operate on image edges.
A method as described in any of claims 1 to 4, wherein step f) (312, 314) includes
the additional steps of


1) determining (314) that the block of new transform coefficients is not derivable from
the original image; and
2) altering (322) individual new transform coefficients, so that a block of altered new
transform coefficients is derivable from the original image;
3) recovering (316) the image from the blocks of altered new transform coefficients.
A method as described in any of the preceding claims, wherein for compression,
the quantized transform coefficients are further encoded with a lossless encoding method, and the

additional step of removing any lossless encoding is provided prior to step b).
A programmable image decompression system when suitably programmed for
carrying out the method of any of the preceding claims, the system including:


means (210) for receiving said quantized transform coefficient blocks for said original
image;
means (220) for dequantising the transform coefficients in a block according to a
corresponding quantizing value from the quantization table to obtain a block of received transform

coefficients; 
means (230) for recovering the image by applying (306) an inverse transform operation to
the received transform coefficients and producing blocks of pixels;
means (250) for filtering the image with a non-linear filter, the filtering means including

means for each block of pixels, determining (400) the dynamic range of the
pixel block,
means for calculating(402), for each block of pixels, an edge threshold value,
as a function of the dynamic range determined for the pixel block;
means for locating (406), using the edge threshold value, edges of the image
within the block and producing therefrom an edge map;
means for filtering (408) the image with a sigma filter, averaging pixel values in
the block which are not identified as edges in the edge map;
means (260) for changing the filtered recovered image into blocks of new transform
coefficients by the forward transform coding operation using the frequency space transform

compression operation;
means (270) for comparing each block of new transform coefficients to a corresponding
block of received transform coefficients and the selected quantization table, to determine whether

the filtered recovered image is derivable from the original image; and
means for transferring the filtered recovered image to an output buffer only upon a positive
determination by the comparing means.
</CLAIMS>
</TEXT>
</DOC>
