<DOC>
<DOCNO>EP-0647375</DOCNO> 
<TEXT>
<INVENTION-TITLE>
METHOD AND APPARATUS FOR OBJECTIVE SPEECH QUALITY MEASUREMENTS OF TELECOMMUNICATION EQUIPMENT
</INVENTION-TITLE>
<CLASSIFICATIONS>H04B346	H04B346	H04M322	H04M124	H04M124	H04M322	H04B1700	H04B1700	H04B166	G10L1900	G10L1900	H04B166	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>H04B	H04B	H04M	H04M	H04M	H04M	H04B	H04B	H04B	G10L	G10L	H04B	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>H04B3	H04B3	H04M3	H04M1	H04M1	H04M3	H04B17	H04B17	H04B1	G10L19	G10L19	H04B1	</CLASSIFICATIONS-FOURTH>
<ABSTRACT>
A telecommunications testing apparatus comprising a signal generator (7) which generates a speech-like synthetic signal, which is supplied to the input of a telecommunication apparatus (1) to be tested. The distorted oupput of the telecommunications apparatus (1) is supplied to an analysis means (8), which derives, for both the undistorted test signal and the distorted signal from the telecommunications apparatus (1), a measure of the excitation of the human auditory system generated by both signals, taking into account both spectral masking and temporal masking phenomena. The difference between the two excitations is then calculated, and a measure of the loudness of the difference is derived which is found to indicate to a high degree of accuracy the human subjective response to the distortion introduced by the telecommunications system.
</ABSTRACT>
<APPLICANTS>
<APPLICANT-NAME>
BRITISH TELECOMM
</APPLICANT-NAME>
<APPLICANT-NAME>
BRITISH TELECOMMUNICATIONS PUBLIC LIMITED COMPANY
</APPLICANT-NAME>
</APPLICANTS>
<INVENTORS>
<INVENTOR-NAME>
HOLLIER MICHAEL PETER
</INVENTOR-NAME>
<INVENTOR-NAME>
HOLLIER, MICHAEL PETER
</INVENTOR-NAME>
</INVENTORS>
<DESCRIPTION>
This invention relates to a method and apparatus for testing equipment for
handling speech signals.In testing such apparatus (for example, a telephone line, a telephone
network, or other telecommunications apparatus such as a coder) a test signal is
introduced to the input of the telecommunications apparatus, and some test is
applied to the resulting output of the apparatus. It is known to derive "objective"
test measurements, such as the signal to noise ratio, which can be calculated by
automatic processing apparatus. It is also known to apply "subjective" tests, in
which a human listener listens to the output of the telecommunications apparatus,
and gives an opinion as to the quality of the output.Some elements of telecommunications systems are linear. Accordingly, it
is possible to apply simple artificial test signals, such as discrete frequency sine
waves, swept sine signals or chirp signals, random or pseudo random noise
signals, or impulses. The output signal can then be analyzed using, for example,
Fast Fourier Transform (FFT) or some other spectral analysis technique. One or
more such simple test signals are sufficient to characterise the behaviour of a
linear system.On the other hand, modern telecommunications systems include an
increasing number of elements which are non-linear and/or time variant. For
example, modern low bit-rate digital speech coders, forming part of mobile
telephone systems, have a non-linear response and automatic gain controls
(AGCs), voice activity detectors (VADs) and associated voice switches, and burst
5 errors contribute time variations to telecommunications systems of which they
form part. Accordingly, it is increasingly less possible to use simple test methods
developed for linear systems to derive objective measures of the distortion or
acceptability of telecommunications apparatus.On the other hand, subjective testing by using human listeners is
expensive, time-consuming, difficult to perform, and inconsistent. However,
despite these problems the low correlation between objective measures of system
performance or distortion and the subjective response of a human user of the 
system means that such subjective testing remains the way by which
telecommunications apparatus is normally tested.In the paper "Measuring the Quality of Audio Devices" by John G.
Beerends and Jan A. Stemerdink, presented at the 90th AES Convention, 1991
February 19-22, Paris, printed in AES Preprints as Preprint 3070 (L-8) by the Audio
Engineering Society, it has been proposed to measure the
</DESCRIPTION>
<CLAIMS>
Test apparatus for testing equipment for handling speech signals,
comprising means (7) for supplying a test signal, analysis means (8) for receiving a

distorted signal which corresponds to said test signal when distorted by equipment
(1) to be tested, and for analyzing said distorted signal to generate a distortion

perception measure which indicates the extent to which the distortion of said
signal will be perceptible to a human listener,

   characterised in that the analysis means (81 comprises means arranged to
filter the distorted signal to generate a plurality of band-limited time-domain

component signals having bandwidths which vary with frequency, and
means to generate, for each such component signal, a plurality of average signal amplitude values, each amplitude

value relating to a respective temporal portion of the signal.
Apparatus according to claim 1 in which the component signal bandwidths
are selected so they correspond to equal masking amplitudes for signals centred

within each band.
Apparatus according to claim 1 or claim 2, in which the component signal
bandwidths are, on a logarithmic frequency scale, approximately equal.
Apparatus according to claim 1 or claim 2 in which the component signal
bandwidths are, on a Bark scale, approximately equal.
Apparatus according to any of claims 1 to 4, in which the analysis means
(8) is arranged to estimate, for each component signal, the masking effect which

that component signal would produce on the human ear.
Apparatus according to any preceding claim, in which said analysis means
(8) is arranged to estimate the effect which said distortion would produce on the

human ear taking into account the temporal persistence of said effect. 
Apparatus according to claim 6, in which the analysis means (8) is
arranged to generate a time sequence of successive processed signal portions from

said test signal and/or said distorted signal, the value of at least some signal
portions being generated in dependence upon portion of said test signal and/or

distorted signal which precede and/or succeed said signal portions.
Apparatus according to any preceding claim, further comprising means to
calculate the temporal masking of the distorted signal by forming, for each of a

plurality of successive temporal portions of each band-limited time domain
component signal, the difference between the distorted signal and a

correspondingly calculated test signal component; and means to generate a
distortion perception measure (E
A
) which indicates the extent to which the
distortion of said signal will be perceptible to a human listener by measuring the

said differences over a plurality of said temporal portions of said component
signals.
Apparatus according to claim 8, wherein the spectral component bands
are approximately evenly spaced in pitch, and wherein the distortion perception

measurement means produces a measure E
E
 of the statistical distribution of said
differences over said temporal portions and spectral components.
Testing apparatus according to any of claims 1 to 9 wherein the time
interval represented by each portion is longer for lower frequency component

signals than for higher frequency component signals.
Apparatus according to any preceding claim, in which the analysis means
(8) is arranged to estimate the effect which would be produced on the human

auditory system by said test signal, and to estimate therefrom the effect which
would b
e produced on the human auditory system by said distortion. 
Apparatus according to claim 11, in which the analysis means (8) is
arranged to estimate the effect which would be produced on the human auditory

system by said distorted signal, and to determine the difference between the said
effect and that due to the test signal, and to generate said distortion perception

measure (E
A
) in dependence upon said difference.
Apparatus according to any preceding claim, in which the analysis means
(8) is arranged so as to generate said distortion perception measure (E
A
) to depend
upon perceptual loudness of said distortion, and to depend nonlinearly upon the

amplitude of said distortion.
Apparatus according to any one of claims 8 to 13 in which the analysis
means (8) is arranged to generate a measure (E
E
) of the statistical distribution of
the distortion perception measure (E
A
), over said temporal portions and spectral
component signals.
Apparatus according to any one of claims 8 to 14 in which the analysis
means (8) is arranged to form a weighted sum of the differences between the time

portions of the test signal components and the corresponding portions of the
distorted signal components, weighted in accordance with the relative loudness of

sounds of reference amplitude at pitches corresponding to said component signals,
and to generate said distortion perception measure (E
A
) in dependence upon said
weighted sum.
Apparatus according to any of claims 1 to 15 in which said analysis
means (8) is arranged to generate, for each component signal, a time sequence of

component values each representative of component signal values over a time
interval, the time interval for lower frequency component signals exceeding that

for higher frequency component signals.
Apparatus according to any preceding claim, in which the analysis means
(8) is arranged to filter said test signal and/or said distorted signal in accordance

with a filter calculated to correspond to the transfer function of portions of the 
human auditory system between the telecommunications apparatus and the inner

ear.
Apparatus according to claim 17, in which the analysis means is arranged
to be capable of selecting one of a plurality of different said transfer functions

corresponding. respectively, to different speech signal carrying equipment.
Apparatus according to any preceding claim further comprising an artificial
ear structure for receiving said distorted signal as an acoustic signal and for

acoustically processing said distorted signal prior to analysis by the analysis means
(8).
Apparatus according to any preceding claim, in which the signal generator
(7) further comprises an artificial mouth structure for receiving said test signal from

the signal generator in acoustic form and for acoustically processing said test
signal prior to supply to said equipment to be tested.
Apparatus according to any preceding claim, in which the signal generator
(7) comprises a digital store for storing speech data, and means (72) for

reconstituting a speech signal from the stored speech data.
Apparatus according to claim 21, in which the stored speech data
comprises digitised sound signals and the reconstituting means (72) comprises a

digital to analogue converter.
Apparatus according to claim 22, in which the store (71) is arranged to
store parameters for control of a voice synthesiser comprising said means for

reconstituting the speech signal.
Apparatus according to any preceding claim, in which the signal generator
(7) is arranged to generate a test signal which comprises a sequence formed of a

predetermined number of speech segments smaller than the number of commonly
occurring human speech phonemes, the speech signal comprising several different 

groups of said segments such that each segment is represented in several different
temporal contexts within said sequence, so as to vary the effect on each segment

of time varying distortions in the equipment under test.
Apparatus according to claim 25, in which the test signal generator (7) is
arranged to vary the context for different said speech segments by prefixing said

segments with predetermined signal portions of several different levels within a
sequence of said test signal.
Apparatus according to claim 26 in which said segments are present in a
plurality of different combinations within said sequence.
A method of testing speech signal handling equipment comprising the steps
of:


supplying a test signal to the speech signal handling equipment
analyzing the test signal as distorted by said speech signal handling
equipment;
determining the extent to which the distortion of said signal will be
perceptible to a human listener; and
generating a distortion perception measure indicative of said determined
extent,

   characterised in that the test signal has a spectral resemblance to human
speech, and in that the step of analysing comprises filtering said distorted

signal to generate a plurality of band-limited time-domain component signals having
bandwidths which vary with frequency, and

   for each band-limited time-domain component signal, generating, for each
such component signal, a plurality of average signal amplitude values, each amplitude value relating to a respective

temporal portion of the signal.
A method according to claim 27, comprising the steps of:

generating said test signal, 
passing said test signal through said equipment, and
analyzing the distorted signal produced at the output of said
equipment.
A method according to claim 27 or 28, further comprising steps of:

analyzing the extent to which said test signal would be perceptible to a
human listener,
deriving a measure of the difference between the perception of the test
signal and of the distorted signal, and
deriving said distortion perception measure (E
A
) in dependence upon said
difference.
A method according to any of claims 28 or 29, in which an estimation is
made, for each component signal, of the masking effect which that component

signal would produce on the human ear.
A method according to claim 27, 28, 29 or 30, comprising the steps of:

calculating the temporal masking of the distorted signal to form, for each of
the said temporal portions of each component signal, the difference between the

distorted signal and a corresponding portion and component of the test signal; and
deriving a measure (E
A
) of the said differences over said temporal portions
and said component signals.
A method according to claim 31, wherein the band-limited component
signals are approximately evenly spaced in pitch, and wherein the distortion

perception measurement means produces a measure (E
E
) of the statistical
distribution
 of said differences over said temporal portions and component signals.
A method according to any of claims 27 to 32, comprising the step of
generating a time sequence of successive values representative of component

signal levels at predetermined time intervals, the time intervals being longer for
lower frequency component signals than for higher frequency component signals.
</CLAIMS>
</TEXT>
</DOC>
