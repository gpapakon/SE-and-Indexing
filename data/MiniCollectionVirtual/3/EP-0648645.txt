<DOC>
<DOCNO>EP-0648645</DOCNO> 
<TEXT>
<INVENTION-TITLE>
An electronic control apparatus of an air-bag system and a method of diagnosing the status of a back-up capacitor in an electronic control apparatus of an air-bag system
</INVENTION-TITLE>
<CLASSIFICATIONS>H02J900	H02J900	B60R2116	B60R2101	H02J906	G01R3128	B60R2101	B60R2116	H02J906	G01R3128	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>H02J	H02J	B60R	B60R	H02J	G01R	B60R	B60R	H02J	G01R	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>H02J9	H02J9	B60R21	B60R21	H02J9	G01R31	B60R21	B60R21	H02J9	G01R31	</CLASSIFICATIONS-FOURTH>
<ABSTRACT>
An electrical control apparatus for an air-bag system 
capable of inhibiting the diagnosis of back-up capacitors 

(151,152) when a diagnosing routine is initiated by an 
extraneous noise. In a main routine executed by a 

microcomputer (132) provided in an electrical control 
apparatus for an air-bag system, data stored in a specific 

address of a volatile memory (135) is read out, and it is 
determined whether or not its value is the same as a fixed 

value. If the result is affirmative, it is determined that 
the main routine is started by an extraneous noise, an 

ignition flag IG is reset, and the diagnosis of the back-up 
capacitors is inhibited. On the other hand, if the data 

does not have the same value as the fixed value, it is 
determined that the ignition switch is turned on again 

after it has been turned off, the IG is set, and the 
diagnosis for back-up capacitors is carried out. 


</ABSTRACT>
<APPLICANTS>
<APPLICANT-NAME>
FUJITSU TEN LTD
</APPLICANT-NAME>
<APPLICANT-NAME>
FUJITSU TEN LIMITED
</APPLICANT-NAME>
</APPLICANTS>
<INVENTORS>
<INVENTOR-NAME>
KONISHI HIROYUKI
</INVENTOR-NAME>
<INVENTOR-NAME>
SUGIYAMA KOICHI
</INVENTOR-NAME>
<INVENTOR-NAME>
KONISHI, HIROYUKI
</INVENTOR-NAME>
<INVENTOR-NAME>
SUGIYAMA, KOICHI
</INVENTOR-NAME>
</INVENTORS>
<DESCRIPTION>
The present invention relates to an
electronic control apparatus of an air-bag system,
especially to an electronic control apparatus of an
air-bag system and a method with a capability of diagnosing
accurately whether or not a back-up power is normal.In recent years, air-bag systems have been
widely used for protecting passengers in a crash. As it
is necessary for an air-bag to definitely expand when a
crash occurs, but never to expand under normal
circumstances, an electronic control apparatus using a
microcomputer system is generally used as a control
apparatus for the air-bag system. In the system, a
capacitor having a large capacitance is provided to
function as a back-up power source in the event that a
battery that normally provides power has failed. The
back-up capacitor is normally charged by the battery,
and the electronic control apparatus is powered by the
back-up capacitor if the battery has failed.Fig. 6 shows a functional diagram of a conventional
electronic control apparatus for an air-bag system as disclosed in the
Japanese Utility Model Publication (Kokai) JP-U-4-127057. In the figure, a controller 63
is connected to the plus terminal of a battery 61 through an ignition
switch 62. A back-up capacitor 64 is connected in
parallel to the controller 63 through a diode 65 and
charging resistor 66 which are connected in parallel
with each other. When the battery 61 is operating
normally, it supplies electric power to the controller
63 through the ignition, switch 62, and charges the
back-up capacitor 64 through the charging resistor 66.
The direction of current flow is indicated by a solid 
arrow (a). If the terminal voltage Vb at the battery 61
drops or the connection is somehow broken, the charge
stored in the back-up capacitor 64 is used to supply
power to the controller 63 through the diode 65 to
ensure minimal functioning. The direction of this
current flow is indicated by a dotted arrow (b).The controller 63 incorporates a diagnosing
routine which diagnoses whether or not the back-up
capacitor 64 is normal. This routine is executed each
time the ignition switch 62 is turned on.The conventional diagnosing scheme is to
monitor the charge time of the capacitor to reach a
voltage Vc, and judge that the back-up capacitor 64 is
normal if the time required from the beginning of the
diagnosis when the capacitor voltage Vc is at minimum,
to the end of the diagnosis when Vc reaches its maximum
value, is within a predetermined time interval.If the back-up capacitor 64 becomes
open, for example, if
</DESCRIPTION>
<CLAIMS>
An electronic control apparatus of an air-bag system
including a power-supply by a battery (11) through an

ignition switch (12) and a back-up capacitor (141,142) in
parallel thereto, the electronic control apparatus

comprising a means (13; 371-378) diagnosing the status of
a back-up capacitor (141,142) to determine if it is normal;

characterised in that the electronic control apparatus
further comprises a means (13; 21-26) determining whether

or not a reset signal was initiated by the ignition switch
(12) being operated, before allowing said diagnosing means

(13; 371-378) to start the diagnosis of said back-up
capacitor (141,142); and a means (13; 31) controlling

execution of said diagnosing means (13; 371-378) so that
the diagnosis is carried out only when the reset signal is

initiated by the ignition switch (12), and is otherwise
inhibited.
An electronic control apparatus for an air-bag system
of claim 1, wherein said diagnosing means comprises:


a means (372,373) for storing a present time as an inspection
starting time when a terminal voltage of said back-up

capacitor (141,142) reaches a low threshold voltage;
a means (374,375) for storing a present time as an inspection
terminating time when the terminal voltage of said back-up

capacitor (141,142) reaches a mid threshold voltage which is higher
than said low threshold voltage;
a means (376) for determining a time interval from said
inspection starting time to said inspection terminating

time;
a means (377) for determining that said back-up capacitor (141,142)
is normal when said time interval is within a

predetermined time interval, and is otherwise abnormal.
An electronic control apparatus according to claim 1
or claim 2, wherein a determining means (22) determines

whether or not the value of data stored in a specific
address of a volatile memory (135) which is provided in said

electronic control apparatus for an air-bag system, is the
same as a predetermined fixed value. 
An electronic control apparatus according to any of
the preceding claims, wherein said controlling means

further comprises:

means (32) for inhibiting the diagnosis when a voltage of
an electric power bus (121) provided in said electronic control

apparatus for the air-bag system, is lower than a first
predetermined range.
An electronic control apparatus according to any of
the preceding claims, wherein said controlling means

further comprises:

means (33) for inhibiting the diagnosis when the voltage of
a battery (11) is lower than a second predetermined voltage.
An electronic control apparatus according to any of
the preceding claims, wherein said controlling means

further comprises:

means (34,35) for inhibiting the diagnosis when the terminal
voltage of said back-up capacitor (141,142) r
ises over a high
threshold voltage which is higher than said mid threshold

voltage, within a predetermined time.
A method of diagnosing the status of a back-up
capacitor (141,142) in an electronic control apparatus of

an air-bag system, including a power supply by a battery
(11) through an ignition switch (12), with the back-up

capacitor (141,142) in parallel thereto, and a diagnosing
means (13; 371-378) for the back-up capacitor (141-142),

the method comprising the steps of:

determining whether or not a reset signal was
initiated by the ignition switch being operated (21-26),

before allowing the diagnosing means (13; 371-378) to start
the diagnosis (371-378) of said back-up capacitor (141,142)

and
controlling the diagnosis so that it is carried out
only when a reset signal is initiated by the ignition

switch (12), and is otherwise inhibited (31).
A method according to claim 7, wherein said diagnosing
step comprises the steps of:


storing a present time as an inspection starting time
when a terminal voltage of said back-up 

capacitor (141,142) reaches a low threshold voltage (372,373);
storing a present time as an inspection
terminating time when the terminal voltage of said

back-up capacitor reaches a mid threshold voltage which
is higher than said low threshold voltage (374,375);
determing time interval from said
inspection starting time to said inspection terminating

time (376);
judging that said back-up capacitor (141,142) is
normal when said time interval is within a

predetermined time interval, and is otherwise abnormal.
A method according to claim 7 or claim 8,
wherein said determining

step comprises a step (22) of determining whether or not the
value of data stored in a specific address of a volatile

memory (135) which is provided in said electronic control
apparatus for the air-bag system is the same as a predetermined

fixed value.
A method according to any of claims 7
to 9, wherein said controlling

step further comprises a step (32) of inhibiting the
diagnosis when a voltage of an electric power bus (121)

provided in said electronic control apparatus for the
air-bag system is lower than a first predetermined

voltage.
A method according to any of claims 7
to 10, wherein said controlling

step further comprises a step (33) of inhibiting the
diagnosis when the voltage of a battery (11) is lower than a

second predetermined voltage.
A method according to any of claims 7
to 11, wherein said controlling

step further comprises a step (34,35) of inhibiting the
diagnosis when the terminal voltage of said back-up

capacitor (141,142) rises over a high threshold voltage which is
higher than said mid threshold voltage, within a

predetermined time.
</CLAIMS>
</TEXT>
</DOC>
