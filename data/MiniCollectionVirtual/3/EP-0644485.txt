<DOC>
<DOCNO>EP-0644485</DOCNO> 
<TEXT>
<INVENTION-TITLE>
Method for controlling virtual machine running time in a virtual machine system.
</INVENTION-TITLE>
<CLASSIFICATIONS>G06F946	G06F946	G06F948	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>G06F	G06F	G06F	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>G06F9	G06F9	G06F9	</CLASSIFICATIONS-FOURTH>
<ABSTRACT>
A virtual machine system capable of 
considerably improving its performance by preventing a 

variation of time slice values (515, 516, 525, 526) of 
logical processors (121, 122, 131, 132) and strictly 

ensuring the concurrent running of a plurality of 
logical processors belonging to the same virtual machine 

(112, 113), in the configuration and management of 
virtual machines of a multi-processor structure having a 

plurality of logical processors. A method of controlling 
a virtual machine running time in the virtual 

machine system includes collectively storing time slice 
values of logical processors in a virtual machine to 

which the logical processors belong, and making a 
virtual machine control program (111) for supervising 

and controlling the logical processors to store and 
manage the time slice values. 


</ABSTRACT>
<APPLICANTS>
</APPLICANTS>
<INVENTORS>
</INVENTORS>
<DESCRIPTION>
The present invention relates to an 
information processing system such as a virtual machine 
system, and more particularly to a method of controlling 
a running time of a virtual machine in a virtual machine 
system. An information processing system called a 
virtual machine system has been realized recently, and 
its operation mode is being generalized. A virtual 
machine system configures an information processing 
system by providing a plurality of virtual machines 
under a single real machine. A virtual machine control 
program (hereinafter called VMCP) runs on a real machine 
and an operating system (hereinafter called OS) runs 
under the control of VMCP. In general, as an operation 
mode of a computer constituting an information processing 
system, there are a method which runs a single OS 
on a single real machine and a method called a virtual 
machine (hereinafter called VM or LPAR (logically 
partitioning)) system which runs a plurality of OSs on a 
single real machine. A mode of running a single OS on a 
real machine is called a basic mode. Hardware resources 
of a real machine used by this mode include one or more  
 
central processing units (hereinafter called CPU or IP 
(instruction processor)), one shared main storage 
(hereinafter called MS), and one or more channel paths 
(hereinafter called CHP). These hardware resources of 
the real machine are used collectively as a unit 
resource. A mode by which a plurality of OSs run on a 
plurality of LPARs under a single real machine, is 
called an LPAR mode. In general, in order to realize a plurality of 
LPARs under a single real machine, a program called VMCP 
is executed on the real machine, a plurality of virtual 
machines LPARs are formed under the control of VMCP, and 
an independent OS is made to run on each LPAR. Therefore, 
VMCP has an additional function of causing each 
LPAR to share the hardware resources of a single real 
machine. As a method of causing each LPAR to share the 
hardware resources of a single real machine, there are a 
method which time divisionally assigns hardware 
resources under the control of VMCP, a method which 
logically divides hardware resources and exclusively 
assigns them to each LPAR, a combined method of the 
former two methods for assigning hardware resources, and 
other methods. For example, as a real CPU sharing 
method, a method which time divisionally assigns a real 
CPU to each LPAR has been used, and as a method of 
sharing input/output channels and MS to each LPAR, a 
method which logically
</DESCRIPTION>
<CLAIMS>
A method of controlling a virtual machine 
running time for a virtual machine system having two or 

more physical central processing units (102, 103), a 
main storage (101) shared by said physical central 

processing units, and a plurality of logical central 
processing units (121, 122, 131, 132) configured on said 

physical central processing units, comprising the steps 
of: 

   providing each of said plurality of said 
logical central processing units with a time slice value 

(515, 516, 525, 526) for controlling a running time, and 
   rendering a virtual machine control program 

(111) for supervising and controlling said logical 
central processing units to hold and manage said time 

slice value provided in each logical central processing 
unit, to operate said logical central processing unit 

time-divisionally. 
A method of controlling a virtual machine 
running time for a virtual machine system according to 

claim 1, wherein when said virtual machine control 
program (111) dispatches one of said logical central 

processing units (121, 122, 131, 132) configured on said 
physical central processing units (102, 103), a time 

slice value held by a virtual machine (112, 113) to 
which said one logical central processing unit belongs 

is used as a time slice value (515, 516, 525, 526) for 
said one logical central processing unit, said time 

 
slice value is set to a timer in said physical central 

processing unit corresponding to said one logical 

central processing unit, and thereafter said one logical 
central processing unit is activated. 
A method of controlling a virtual machine 
running time for a virtual machine system according to 

claim 1, wherein after said virtual machine control 
program (111) dispatches one of said logical central 

processing units (121, 122, 131, 132) configured on said 
physical central processing units (102, 103) and 

activates said one logical central processing unit by 
using a time slice value (515, 516, 525, 526) held by a 

virtual machine (112, 113) to which said one logical 
central processing unit belongs as a time slice value 

for said one logical central processing unit, if the 
operation of said one logical central processing unit is 

stopped and the control is transferred to said virtual 
machine control program, said time slice value held by 

said virtual machine is updated by using a timer value 
updated and set in a timer of said physical central 

processing unit corresponding to said one logical 
central processing unit, said timer value being 

corrected by the number of logical central processing 
units belonging to said virtual machine. 
A method of controlling a virtual machine 
running time for a virtual machine system according to 

claim 3, wherein said correction is a substraction. 
</CLAIMS>
</TEXT>
</DOC>
