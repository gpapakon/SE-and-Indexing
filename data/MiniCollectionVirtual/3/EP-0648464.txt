<DOC>
<DOCNO>EP-0648464</DOCNO> 
<TEXT>
<INVENTION-TITLE>
Ambulatory monitor ECG pulse calibration method
</INVENTION-TITLE>
<CLASSIFICATIONS>A61B50402	A61B50452	A61B50452	A61B50428	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>A61B	A61B	A61B	A61B	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>A61B5	A61B5	A61B5	A61B5	</CLASSIFICATIONS-FOURTH>
<ABSTRACT>
An ECG waveform calibration method combines ECG channel calibration pulses 
(CHANNEL1-CHANNEL3) to form combined calibration pulses (COMBINED). The 

combined channel pulses are filtered to select valid combined pulses. The selected 
combined pulses are correlated to the corresponding channel calibration pulses to 

determine valid channel calibration pulses from which a correlation scale factor is 
derived. A valid calibration pulse is determined where a correlation between a 

combined calibration pulse and a corresponding channel calibration pulse is greater 
than a predetermined correlation value. The valid channel calibration pulses are then 

characterized. A set of valid channel calibration pulses is selected for each channel 
based on the characterization to form an average calibration pulse. The average 

calibration pulse is used to determine a correction scale factor for each channel which 
is used to scale the actual channel ECG waveform data. The method also includes 

steps for adjusting for the interchannel skew. 

</ABSTRACT>
<APPLICANTS>
<APPLICANT-NAME>
HEWLETT PACKARD CO
</APPLICANT-NAME>
<APPLICANT-NAME>
HEWLETT-PACKARD COMPANY
</APPLICANT-NAME>
</APPLICANTS>
<INVENTORS>
<INVENTOR-NAME>
FELDHOUSEN EDWARD L
</INVENTOR-NAME>
<INVENTOR-NAME>
KWONG MANLIK
</INVENTOR-NAME>
<INVENTOR-NAME>
OCHS DENNIS E
</INVENTOR-NAME>
<INVENTOR-NAME>
FELDHOUSEN, EDWARD L.
</INVENTOR-NAME>
<INVENTOR-NAME>
KWONG, MANLIK
</INVENTOR-NAME>
<INVENTOR-NAME>
OCHS, DENNIS E.
</INVENTOR-NAME>
</INVENTORS>
<DESCRIPTION>
The present invention relates to methods for
recording and playing back ECG signals and more particularly to such
methods in which the ECG signals are processed to
compensate for variations in amplitude and phase of the ECG signals due
to the recording process.Prior art systems, known as Holter recorders and playback systems,
record ECG signals which are provided from a patient via electrodes to a
small recorder carried by the patient. The ECG signals are continuously
recorded on an analog tape typically over a 24 hour period. Several prior
art systems use a conventional C60 analog cassette tape of the type
typically used to record audio information. In order to do so, the tape
must be slowed down approximately 1/50th of normal audio speed.
Usually three channels of ECG data are recorded plus a fourth channel
which includes a timing signal that is generated by the recorder.After recording, the tape is played back on a device which runs the
tape at high speed and processes the analog signals derived from the
tape. Such processing typically includes filters which are intended to
compensate for dropoff at both the low and high frequencies and for phase
distortion which results from the magnetic recording and playback
process. The filtered signals are digitized and further processed into a
report for analysis by a physician. Typically, the digitized data is
transmitted to a personal computer connected to the playback system for
further analysis.The data transmitted to the personal computer, however, can
exhibit phase and magnitude distortion due to non-linearities in the 
recording and playback systems. Moreover, the phase and magnitude
distortion produced by a system for recording and playing back ECG
signals can vary over time. It can vary as a result of wear on the heads
for recording and playing back the signal. It can also vary in response to
misalignment of the mechanical components which affect the record and
playback head compliance with the tape. Independently of time,
distortion can vary as a result, e.g., of using an analog tape having a
different thickness or type of tape coating thereon.Prior art techniques for calibrating the ECG recorder include
recording a series of rectangular calibration pulses of known amplitude
on each of three channels used for recording ECG signals. Pulses are
played back through a playback deck and passed through analog
compensation filters to restore the pulse's original phase and frequency
content. The playback unit is calibrated by measuring the amplitude of
the
</DESCRIPTION>
<CLAIMS>
A method of calibrating an ECG ambulatory monitor from calibration
pulses recorded on a plurality of tape channels having ECG waveform data, the method

comprising:

loading the channel calibration pulses (CHANNEL 1 - CHANNEL 3);
combining the channel calibration pulses to form a series of combined calibration

pulses (COMBINED);
selecting combined calibration pulses (COMBINED) having certain
predetermined characteristics;
correlating the selected combined pulses to the corresponding channel
calibration pulses;
selecting channel calibration pulses having at least a predetermined correlation
to the corresponding selected combined pulses;
generating a calibration scale factor for each channel based on the selected
channel calibration pulses for the corresponding channel; and
calibrating each channel of the ECG monitor using the calibration scale factor.
A method of calibrating an ECG ambulatory monitor according to claim
1 wherein selecting combined calibration pulses having certain predetermined

characteristics comprises:

detecting transitions (44, 46, 48) of the combined calibration pulses; and
selecting a combined calibration pulse where a first detected transition (44) and
a second detected transition (46) exhibit a predetermined relationship.
A method of calibrating an ECG ambulatory monitor according to claim
2 further comprising removing, prior to the step

of selecting combined calibration pulses
, transitions whose

amplitudes are less than a predetermined threshold (42).
A method of calibrating an ECG ambulatory monitor according to claim
1 wherein the step of correlating the combined calibration pulses to the corresponding 

channel calibration pulses includes:

forming a calibration pulse template for each channel calibration pulse from a
corresponding combined calibration pulse, the calibration pulse template having an

onset, an offset, a baseline, and a peak;
correlating the calibration pulse template to the corresponding channel

calibration pulse;
adjusting the onset and the offset of the template to maximize the correlation
between the template and the corresponding channel calibration pulse;
forming an ideal calibration pulse having the adjusted onset, the adjusted offset,
the baseline, and the peak of the calibration pulse template;
correlating the ideal calibration pulse to the corresponding channel calibration
pulse; and
selecting the channel calibration pulse where the correlation between the ideal
calibration pulse and the corresponding channel calibration pulse exceeds a

predetermined correlation value.
A method of calibrating an ECG ambulatory monitor according to claim
4 wherein the step of forming a calibration pulse template includes forming an onset

template and an offset template and the template correlating step includes:

correlating the onset template to an onset portion of the corresponding channel
calibration pulse proximately located to the combined calibration pulse onset;
adjusting the onset template to maximize the correlation between the onset
template and the onset portion of the channel calibration pulse; identifying the onset

of the ideal calibration pulse as a point wherein the template correlation is at a
maximum if the template correlation is greater than a predetermined onset correlation

value; and
identifying the onset of the ideal calibration pulse as the onset of the
corresponding combined calibration pulse if the correlation is less than or equal to the

predetermined onset correlation value.
A method of calibrating an ECG ambulatory monitor according to claim 
5 wherein the step of forming a calibration pulse template includes forming an onset

template and an offset template and the template correlating step includes:

correlating the offset template to an offset portion of the channel calibration
pulse proximately located to the combined calibration pulse offset;
adjusting the offset template to maximize the correlation between the offset
template and the offset portion of the channel calibration pulse; identifying the offset

of the ideal calibration pulse as a point wherein the template correlation is at a
maximum if the template correlation is greater than a predetermined offset correlation

value; and
identifying the offset of the ideal calibration pulse as the offset of the
corresponding combined calibration pulse if the template correlation is less than or

equal to the predetermined offset correlation value.
A method of calibrating an ECG ambulatory monitor according to claim
1 wherein the step of generating a calibration scale factor for each channel based on

the selected channel calibration pulses for the corresponding channel includes:

generating an average calibration pulse for each channel from the selected
calibration pulses of the corresponding channel;
defining an onset and an offset on the average calibration pulse;
determining a mean baseline value of the average calibration pulse;
determining a mean peak value of the average calibration pulse; and
determining a correction scale factor equal to the difference between the mean
peak value and the mean baseline value.
A method of calibrating an ECG ambulatory monitor from calibration
pulses recorded on a plurality of tape channels having ECG waveform data, the method

comprising:

loading the calibration pulses (CHANNEL1-CHANNEL3);
combining the calibration pulses to form combined calibration pulses
(COMBINED);
correlating the combined calibration pulses to the corresponding calibration 
pulses;
selecting calibration pulses for each channel having at least a predetermined
correlation to the corresponding combined calibration pulses;
determining an onset and an offset for each selected calibration pulse;
comparing the onsets and offsets of different channels; and
determining an interchannel skew based on the comparison;
calibrating each channel of the ECG monitor according to the interchannel skew.
A method of calibrating an ECG ambulatory monitor according to claim
8 wherein the comparing step includes:


(a) selecting a reference channel;
(b) comparing, for each channel calibration pulse in the reference channel,
a reference channel calibration pulse to a corresponding channel calibration pulse in

another channel;
(c) determining the relative time difference between an onset ofthe reference
channel calibration pulse and an onset of the corresponding channel calibration pulse;

and
(d) determining an interchannel skew being an average time difference of all
the reference calibration pulses and the corresponding channel calibration pulses.
A method of calibrating an ECG ambulatory monitor according to claim
9 further comprising repeating steps (b) through (d) for each channel.
</CLAIMS>
</TEXT>
</DOC>
