<DOC>
<DOCNO>EP-0627844</DOCNO> 
<TEXT>
<INVENTION-TITLE>
Image processor
</INVENTION-TITLE>
<CLASSIFICATIONS>G06T100	G06K964	G06T340	G06K964	G06T700	G06T700	G06T340	G06T100	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>G06T	G06K	G06T	G06K	G06T	G06T	G06T	G06T	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>G06T1	G06K9	G06T3	G06K9	G06T7	G06T7	G06T3	G06T1	</CLASSIFICATIONS-FOURTH>
<ABSTRACT>
Input image data representing the image of a 
subject imaged by a video camera 9 is applied from an A/D 

converter circuit 11 to a dither-image generating circuit 
13, in which the image data is binarized in accordance 

with the error diffusion method, whereby dither image data 
represented by one bit per pixel is obtained. A plurality 

of small areas each comprising a plurality of pixels are 
set within a window caused to scan the dither image, and 

the dither image data is summed in each and every small 
area by an image restoration circuit 14, whereby gray-level 

image data, in which each small area serves as one 
pixel, is restored. Difference or correlation values 

between the restored image data and text data set in 
advance with regard to standard images which are different 

from one another are calculated, for the window at each 
and every position, by arithmetic circuits 15a ∼ 15k. The 

smallest difference or the largest correlation values and 
the positions of the windows in which this smallest 

difference or the largest correlation values are produced 
are respectively sensed by corresponding peak holding 

circuits 16a ∼ 16k. 

</ABSTRACT>
<APPLICANTS>
<APPLICANT-NAME>
OMRON TATEISI ELECTRONICS CO
</APPLICANT-NAME>
<APPLICANT-NAME>
OMRON CORPORATION
</APPLICANT-NAME>
</APPLICANTS>
<INVENTORS>
<INVENTOR-NAME>
MASAKI TOSHIMICHI
</INVENTOR-NAME>
<INVENTOR-NAME>
MASAKI, TOSHIMICHI
</INVENTOR-NAME>
</INVENTORS>
<DESCRIPTION>
This invention relates to an image processor
for performing patten-matching
processing and the like for the purpose of object
recognition, for judging whether a standard image of a
prescribed model exists in the image of a subject, and so
on.A technique available for pattern matching
involves setting a window on image data obtained by
imaging a subject, and calculating the degree of coincidence
or degree of similarity between partial image data within
the window and standard image data registered in advance.
By executing the above-described processing with regard to
the window at each position thereof while the window is
made to scan within a picture, a window containing partial
image data exhibiting the highest degree of coincidence or
similarity is detected, thereby making it possible to 
recognize a position at which an image identical or
similar to the standard image exists. Thus, measurement
processing of various types can be executed with regard to
image data within a specified window.Image data generally is represented by eight or
more bits per pixel. Line memories are used in order to
extract image data within a set window at a video rate.
The line memories, the number of which corresponds to the
number of pixels in the vertical direction of the window,
are connected in cascade, and image data is transferred
among the line memories in synchronism with a clock
signal. By extracting image data at a single stroke from
a prescribed position of each line memory, e.g., the
terminus of the line memory, one column of image data in
the vertical direction of the window is obtained.In an image processor having such a configuration,
a problem encoutered is that a large number line memories
of at least eight bits each must be provided, as a result
of which there is an increase in the scale of hardware.
Further, pattern-matching processing of eight bits per
pixel is required. When this is implemented by hardware,
the scale of circuitry is similarly increased. If it is
attempted to implement the foregoing by software, more
complicated processing results.Proceedings of The IEEE Computer Society Conference on Computer Vision and
Pattern Recongnition, Washington, DC, USA, 19-23 June 1983, ISBN 0-8186-0053-5,
1983, Silver Spring, MD, USA, IEEE, Comput. Soc. Press, USA, pages 432-441, Glazer
et al: 'Scene matching by hierarchical correlation' discloses pattern matching
by creating a pyramid of successively lower resolution versions of an image
using filters. A main object of the present invention is to
provide an
</DESCRIPTION>
<CLAIMS>
An image processor comprising:

first image converting means (13,
13A) for converting input image data, which is represented

by a first prescribed number of bits per pixel, into
image data represented by a second

prescribed number of bits, which is less than said first
prescribed number of bits;
image restoration circuit means (14, 14A) for
restoring the data converted by

said first image converting means for
each and every one of a plurality of small areas, each of

which comprises a plurality of pixels, with said each
small area forming one restored pixel, and outputting

restored image data; and
a plurality of similarity operating circuit means
(15a, 15b, 15k, 15Aa, 15Ab, 15Ak, 15Ba, 15Bb, 15Bk), which

operate in parallel, each for calculating an index value
representing a degree of similarity between the restored

image data outputted by said image restoration circuit
means and reference image data representing a standard

image set in advance, the standard images for the
plurality of similarity operating circuit means being

different from one another.
The image processor according to claim 1, further
comprising:


second converting means (120) for converting input image
data into image data representing images different in

rotational angle or in size from the image represented by
the input image data, the image data converted by said second

converting means being fed to said first image
converting means as the input image data thereof.
The image processor according to claim 1 or 2,
wherein the standard images are images of reference

subjects which are different from one another.
The image processor according to claim 1 or 2,
wherein the standard images are formed based on a single

reference subject and different in rotational angle or in
size from one another.
The image processor according to claim 1 or 2 further
comprising judging means (17) for determining whether a

subject image represented by the input image data
coincides with at least one of the standard images on the

basis of the index values calculated by the plurality of
said similarity operating circuit means.
The image processor according to claim 1 or 2,
wherein said first image converting

means (13) binarizes the input image data using an error 
diffusion method and generates binarized image data

represented by one bit per pixel.
The image processor according to claim 1 or 2,
wherein said first image converting

means (13A) subjects the input image data to a four-value
conversion using an error diffusion method and generates

pseudo-gray-scale image data represented by two bits per
pixel.
The image processor according to claim 1 or 2,
wherein


said image restoration circuit means restores the
image data converted by said first image converting means for each

and every one of a plurality of small areas (SA), each of which is
provided in a window (WN) that scans the image data converted by

said first image converting means, and outputs restored image data
at each and every position of the windows; and
each of said similarity operating circuit means
calculates the index value representing a degree of

similarity between the restored image data of each window
sequentially outputted by the image restoration circuit

means and the reference image data representing the
standard image set in advance.
The image processor according to claim 8, further
comprising a plurality of peak holding circuit means (16a,

16b, 16k, 16Aa, 16Ab, 16Ak) each for detecting an index
value, which represents the highest degree of similarity,

from among similarity index values regarding each of the
windows obtained from said corresponding similarity

operating circuit means, and position data indicative of
the window in which this index value is generated.
The image processor according to claim 9, further
comprising judging means (17) for determining whether a

subject image represented by the input image data has an
image portion which coincides with at least one of the

standard images on the basis of the index values detected
by the plurality of said peak holding circuit means.
The image processor according to claim 8, wherein the
index value representing said degree of similarity is a

difference value in lightness of the image, and said
similarity operating circuit means (15a, 15b, 15k, 15Aa,

15Ab, 15Ak) calculates absolute values of differences
between restored image data and corresponding reference

image data for each and every small area (SA), sums the
absolute values of these differences over all small areas

contained in one window (WN) and outputs the sum value as
said index value. 
The image processor according to claim 11, wherein
said peak holding circuit means (16a, 16b, 16k) detects a

smallest sum value from among sum values regarding each of
the windows obtained by said similarity operating circuit

means, as well as position data indicative of the window
in which the smallest sum value is produced.
The image processor according to claim 8, wherein
said similarity operating circuit means (15Ba, 15Bb, 15Bk)

calculates a cross-correlation value between restored
image data and reference image data for each and every

window (WN), and outputs this cross-correlation value as
the index value representing the degree of similarity.
The image processor according to claim 13, wherein
said peak holding circuit means (16Aa, 16Ab, 16Ak) detects

a largest cross-correlation value from among the cross-correlation
values regarding each of the windows obtained

by said similarity operating circuit means, as well as
position data indicative of the window in which the

largest cross-correlation value is produced.
</CLAIMS>
</TEXT>
</DOC>
