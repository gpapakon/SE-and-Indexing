<DOC>
<DOCNO>EP-0618551</DOCNO> 
<TEXT>
<INVENTION-TITLE>
Data storage apparatus having memory area having predetermined logic type
</INVENTION-TITLE>
<CLASSIFICATIONS>G06K1907	G07F710	G06F1200	G06F1200	G06F1204	G07F710	G06F1204	G06K1907	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>G06K	G07F	G06F	G06F	G06F	G07F	G06F	G06K	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>G06K19	G07F7	G06F12	G06F12	G06F12	G07F7	G06F12	G06K19	</CLASSIFICATIONS-FOURTH>
<ABSTRACT>
A data memory (12) of an IC card is divided into a 
plurality of areas, a logic type used when data is written 

in each area is set, and the logical AND between the 
written data and stored data in the memory (12) is 

calculated by an AND logic circuit (111) and written in 
the memory (12). In read access, output data can be 

directly obtained from the memory (12). 

</ABSTRACT>
<APPLICANTS>
</APPLICANTS>
<INVENTORS>
</INVENTORS>
<DESCRIPTION>
The present invention relates to a data storage
apparatus provided in an electronic apparatus such as an
IC card incorporating an IC chip having a nonvolatile
memory and a control element such as a CPU for
controlling the nonvolatile memory, which apparatus
serves to write/read data in a plurality of areas having
a predetermined type and divisionally set in the memory.
In recent years, as a portable data storage medium, an IC
card incorporating an IC chip having a nonvolatile data
memory and a control element such as CPU for controlling
the nonvolatile memory has received a great deal of
attraction.In an IC card of this type, an incorporated data
memory is divided into a plurality of areas, and data
processed in a predetermined application are stored in
the areas, respectively. As a method of accessing these
areas, a method of writing or reading binary data can be
considered.JP-A-62 60081 describes a system to enable a
microprocessor for an IC card to perform data processing
invariably with the same logic by providing a means which
converts the logic of data to be transmitted to a
terminal and data sent from the terminal in the card
body. Data sent from the IC card to the terminal is
supplied from the MPU to the OR gate of a logic
converting circuit. Data sent from the terminal, on the
other hand, is supplied from a serial interface to the OR
gate of the logic converting circuit. Further data for
logic conversion is supplied from the MPU to both OR 
gates. Consequently, the control data is set to `0' to
supply the data to the interface or MPU without changing
the logic. When the control data is set to `1', on the
other hand, the logic of the data is inverted and the
data is supplied to the interface or MPU. Therefore, the
data processing is carried out with the same logic at any
time.JP-A-2 144 644 describes a system to shorten check
time by writing optional data generated by a data
generating means and data obtained by inverting the bits
of the optional data in the whole space of a memory part
and discriminating whether a memory part is normal or not
based upon respective results of 1st and 2nd check means
for checking whether writing is normally executed or not.Optional data (a character) is inputted from outside
and written in the memory part to verify it. Data
obtained by inverting the bit of the optional data is
inputted from outside and written in the memory part to
verify it. When the data is not normally written as the
checked result, a control element outputs status meaning
memory abnormality
</DESCRIPTION>
<CLAIMS>
A data storage apparatus, having a memory (12) having
a predetermined logic type and divided into a

plurality of areas, for writing/reading data in/from
the divided areas,

characterized by:

write logic type setting means (115) for
selectively setting one of a plurality of write

logic types for each divided area of the memory,
the write logic type being used when data is

written in the areas;
first writing means (11) for directly writing
received write data
 in the areas;
second writing means (11,112) for inverting and
writing the received data in the areas;
first reading means (116a) for directly reading
and outputting the data from the areas;
second reading means (116b) for inverting,
reading, and outputting the data from the areas;

and 
selecting means (11) for selecting said first
writing means and said first reading means when

the write logic type of the areas set by said
write logic type setting means coincides with a

logic type of said memory, and for selecting said
second writing means and said second reading means

when the logic of the areas does not coincide with
the logic type of said memory.
A data storage apparatus according to claim 1, further
comprising:


a first read means (11) for reading out the data
from said memory;
a second read means (11) for reading out the data
from said memory (12) with a logic state thereof

being inverted; and
means (11) for selecting one of said first and
second read means based on the data stored in said

storing means.
A data storage apparatus according to claim 1, wherein
said memory (12) is divided into a plurality of areas,

and said storing means (121) stores data for
determining a type of logic operations used for

writing the data corresponding to said areas. 
A data storage apparatus according to claim 3, wherein
said data for determining the type of logic operations

represents whether the data is to be written into said
memory (12) with an AND logic or the data is to be

written into said memory (12) with an OR logic, and
said selecting means (11) selects said first writing

means when an initial logic state of said memory and
the type of the logic operation is identical, and

selects said second writing means when the initial
logic state of said memory and the type of the logic

operation is different.
A data storage apparatus according to claim 4, wherein
said selecting means (11) selects said first read

means when the initial logic state of said memory and
the type of the logic operation is identical, and

selects said second read means when the initial logic
state of said memory and the type of the logic

operation is different.
A method for storing data using a memory (12) divided
into a plurality of areas, for writing/reading data

in/from the divided areas,

characterized by:

selectively setting one of a plurality of logic
types for each divided area of the memory (12),

the logic type being used when data is written in
the areas; 
writing received write data in the areas;
inverting and writing the received data in the
areas;
directly reading and outputting the data from the
areas;
inverting, reading, outputting the data from the
areas;
selecting one of a first and second writing means
based on the logic type set by said logic type

setting means at a data writing time; and
selecting one of a first and second reading means
on the basis of the logic type set by said logic

type setting means at a data reading time.
A method according to claim 6, further comprising the
steps of:


discriminating the logic types set for the areas
by said logic type setting step;
performing predetermined logic calculation for the
data in accordance with the logic type

discriminated by said discriminating step;
performing predetermined logic calculation for the
data read by said reading step in accordance with 

the logic type discriminated by said
discriminating step; and
wherein said writing step includes a step of
writing data logically calculated by said first

logic calculating step in said memory.
A method according to claim 7, wherein said first
logic calculation step includes a step of calculating

logical AND between the data and storage data stored
in said memory.
A method according to claim 7, wherein said first
logic calculating step includes a step of inverting

the data, and a step of calculating logical AND
between the data inverted by said inverting step and

storage data stored in said memory, and

said second calculating step includes a step of
inverting and outputting data stored in said

memory.
A data storage apparatus according to claim 1, further
comprising:


discriminating means (11) for discriminating the
logic types set for the areas by said logic type

setting means;
first logic calculating means (115) for performing
predetermined logic calculation for the data in 

accordance with the set logic type of said memory
and the logic type of the areas discriminated by

said discriminating means;
writing means (11) for writing the data logically
calculated by said first logic calculating means

in the areas;
reading means (11) for reading the data written in
the areas; and
second logic calculating means (115) for
performing predetermined logic calculation for the

data read by said reading means in accordance with
the set logic type of said memory and the logic

type of the areas discriminated by said
discriminating means.
An apparatus according to claim 10, wherein said first
logic calculating means includes an AND circuit (111)

for calculating logical AND between the data and
storage data stored in said memory.
An apparatus according to claim 10, wherein

said first logic calculating means includes
inverting means (112) for inverting the data and

an AND circuit for calculating logical AND between
the data inverted by said inverting means and

storage data stored in said memory, and 
said second calculating means includes means (113)
for inverting and outputting data stored in said

memory.
</CLAIMS>
</TEXT>
</DOC>
