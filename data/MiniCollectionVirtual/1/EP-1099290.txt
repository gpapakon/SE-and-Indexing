<DOC>
<DOCNO>EP-1099290</DOCNO> 
<TEXT>
<INVENTION-TITLE>
INTEGRATED MODE CONTROL FOR MICROPOWER SYSTEMS
</INVENTION-TITLE>
<CLASSIFICATIONS>H02J340	H02J338	H02J340	H02J338	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>H02J	H02J	H02J	H02J	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>H02J3	H02J3	H02J3	H02J3	</CLASSIFICATIONS-FOURTH>
<ABSTRACT>
An integrated system for comprehensive control of an electric power generation system utilizes state machine control having particularly defined control states and permitted control state transitions. In this way, accurate, dependable and safe control of the electric power generation system is provided. Several of these control states may be utilized in conjunction with a utility outage ride-through technique that compensates for a utility outage by predictably controlling the system to bring the system off-line and to bring the system back on-line when the utility returns. Furthermore, a line synchronization technique synchronizes the generated power with the power on the grid when coming back on-line. The line synchronization technique limits the rate of synchronization to permit undesired transient voltages. The line synchronization technique operates in either a stand-alone mode wherein the line frequency is synthesized or in a connected mode which sensed the grid frequency and synchronizes the generated power to this senses grid frequency. The system also includes power factor control via the line synchronization technique or via an alternative power factor control technique. The result is an integrated system providing a high degree of control for an electric power generation system.
</ABSTRACT>
<APPLICANTS>
<APPLICANT-NAME>
SATCON TECHNOLOGY CORP
</APPLICANT-NAME>
<APPLICANT-NAME>
SATCON TECHNOLOGY CORPORATION
</APPLICANT-NAME>
</APPLICANTS>
<INVENTORS>
<INVENTOR-NAME>
HALL WILLIAM B
</INVENTOR-NAME>
<INVENTOR-NAME>
MATTY THOMAS C
</INVENTOR-NAME>
<INVENTOR-NAME>
UNDERWOOD THOMAS C
</INVENTOR-NAME>
<INVENTOR-NAME>
HALL, WILLIAM, B.
</INVENTOR-NAME>
<INVENTOR-NAME>
MATTY, THOMAS, C.
</INVENTOR-NAME>
<INVENTOR-NAME>
UNDERWOOD, THOMAS, C.
</INVENTOR-NAME>
</INVENTORS>
<DESCRIPTION>
This invention relates to control systems and
methods for controlling inverter based electrical
power generation and feeding of generated power to a
grid. This invention particularly relates to an
integrated control system and method that integrates a
variety of power control functions including state
machine control of distinct operational modes,
synchronization with the grid, power factor control and
utility outage ride-through.Various control devices for controlling inverter
based electrical power generation are known in the
art. Typical controllers utilize analog voltage or
current reference signals, synchronized with the grid
to control the generated wave form being fed to the
grid. Such controllers, however, lack distinct control
states and the capability of controlling transitions
between specifically defined control states. Various techniques for synchronizing the
frequency of generated power to the frequency of a
grid are also known in the art. Such conventional line
synchronizers typically sense the line frequency of
the grid and lock to the grid when the generated
frequency drifts into synchronization.Such conventional line synchronizers, however, do
not have the ability to control the rate of phase
shift of the generated power or the ability to
interface easily with both 50 Hz and 60 Hz grids.Various techniques for controlling the power
factor are also known in the art. In the context of
electrical power generation, for example, Erdman, U.S.
Patent No. 5,225,712, issued July 6, 1993, discloses a
variable wind speed turbine electrical power generator
having power factor control. The inverter can control
reactive power output as a power factor angle or
directly as a number of VARs independent of the real
power. To control the reactive power, Erdman utilizes
a voltage waveform as a reference to form a current
control waveform for each output phase. The current
control waveform for each phase is applied to a
current regulator which regulates the drive current
that controls the currents for each phase of the
inverter.Although the conventional art may individually
provide some of these features, the combination of
these features particularly when utilized in
conjunction with an integrated system utilizing state
machine control is not found in the art.Other applications distinct from electrical power
generation also utilize power factor control devices.
For example, Hall, U.S. Patent No. 5,773,955 issued 
June 30, 1998, discloses a battery charger apparatus
that controls the power factor by vector
</DESCRIPTION>
<CLAIMS>
A state machine having a plurality of
control states for electric power transformation in a

device having a full wave rectifier (60) connected to a
generator (15), a DC bus (61) connected to the output of the

full wave rectifier (60), an inverter (70) connected to the DC
bus (61), an inductor unit (72) connected to the output of the

inverter (70), a first contactor unit (K1) selectively
connecting and disconnecting the inductor unit (72) to and

from a grid (99), and a precharge circuit (78) connected to the
DC bus (61); the state machine comprising:


an initialization state (505) for initializing the
state machine;
a first neutral state (510) for idling the state
machine while monitoring commands and system

parameters;
a pre-charge state (515) for enabling and monitoring
the precharge circuit (78) to pre-charge the DC bus (61) to a

pre-charge DC voltage;
a second neutral state (520, 527) for disabling the pre-charge
circuit (78) and closing the first contactor (K1);
an engine start state (535) for verifying DC link
voltage, sending a speed command to a start inverter

unit (220), enabling a start inverter (80), updating the speed
command being sent to the start inverter unit (220), and

determining successful engine start;
a power on-line state (545) for enabling a current mode
in said inverter (70) and controlling the inverter (70) to

deliver power at a level determined by a power level
command; 
a power off-line state (555) for opening the first
contactor (K1), switching the inverter (70) to a voltage mode,

and setting the power level command to a nominal power
level;
a shutdown state (560) for disabling the inverter (70),
opening the first contactor (K1) after waiting for a cooldown

time period, and reinitializing the state
machine; and
a state controller (200) for controlling the following
permitted transitions between said control states:

said initialization state (505) → said first neutral state (510)

←→ said pre-charge state (515) → said second neutral state (520, 527)
←→ said start engine state (535) ←→ said power on-line

state (545) → said power off-line state (555) → said shutdown
state (560).
The state machine according to claim 1,
further comprising:


a third neutral state (560) for receiving a command
including the power level command and a shutdown

command;
said state controller (200) permitting the following
additional state transitions: said start engine state (535)

→ said third neutral state (560) ←→ said power on-line
state (545).
The state machine according to claim 1, said
state controller (200) permitting the following additional

state transitions:

neutral state (510) → pre-charge state (515) upon receiving
a pre-charge start command;
precharge state (515) → neutral state (510) when a pre-charge
rate at which said pre-charge circuit (78) charges 

the DC bus (61) is not within tolerance values or when the
DC bus voltage does not achieve the pre-charge DC

voltage or

said state controller (200) permitting the following additional
state transitions:


pre-charge state (515) → start engine state (535) upon
successfully achieving the precharge DC voltage on the

DC bus (61) and receipt of a start engine command or
said state controller (200) permitting the following additional
state transitions:


start engine state (535) → third neutral state (540) upon
receiving a zero power level command,
third neutral state (540) → power on-line state (545) upon
successful engine start and receiving a nonzero power

level command,
power on-line state (545) → power off-line state (555) upon
receipt of an off-line command or upon a failed

diagnostic test or a grid outage,
power off-line → third neutral state upon
successful diagnostic tests for a predetermined time

period,
third neutral state (540) → shutdown state (560) upon receiving a
shutdown command,
shutdown state (560) → said first neutral state (510) upon
receiving restart command, and
said second neutral state (520, 527) → shutdown state (560) upon a
fault condition or shutdown command or 
said device further including an emergency stop
input,
said state machine controller (200) opening the first
contactor unit (K1) and switching the control state to said

shutdown state (560) upon receipt of an emergency stop
signal (580) from the emergency stop input or
said pre-charge state (515) and said start engine state (535)
respectively returning to said first and second

neutral states (510; 520, 527) upon failure of a pre-charge cycle (515) and
a start engine cycle (535).
The state machine according to claim 2,

   said power on-line state (545) returning to said third
neutral step (540) when the power level command indicates

zero requested power.
The state machine according to claim 1,

   wherein said initialization (505), pre-charge (515), power
on-line (545), power off-line (555), and/or shutdown (560) states

perform diagnostic tests on said device,

   said state controller (200) controlling state
transitions based on results of the diagnostic tests.
The state machine according to claim 1, said
device further including an engine for driving said

generator (15), an engine control unit (12) connected to said
engine, and a start inverter (80) connected to the DC bus (61)

and to said generator (15), said engine control unit (12)
controlling said engine ignition and fuel for the

engine, said engine start state (535) controlling said start
inverter (80) to drive the generator (15) as a motor to thereby

spin the engine and permit starting thereof, said 
engine start state (535) also sending an engine start command

to the engine control unit (12).
The state machine according to claim 6,

   wherein said initialization (505), pre-charge (515), power
on-line (545), power off-line (555), and/or shutdown (560) states

monitor said engine,

   said state controller (200) controlling state
transitions based on results of the diagnostic tests.
The state machine according to claim 1,

   said pre-charge state (515) also diagnosing the
inverter (70),

   said state controller (200) controlling state
transitions based on results of the diagnostic tests or

   said engine start state (535) determining successful
engine start by monitoring current drawn from the DC

bus (61) by the start inverter (80) and engine speed wherein if
the current drawn falls below a current limit value

and an engine speed exceeds a speed limit then engine
start is successful.
</CLAIMS>
</TEXT>
</DOC>
