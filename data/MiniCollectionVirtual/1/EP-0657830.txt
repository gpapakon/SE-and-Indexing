<DOC>
<DOCNO>EP-0657830</DOCNO> 
<TEXT>
<INVENTION-TITLE>
Method and apparatus for data management
</INVENTION-TITLE>
<CLASSIFICATIONS>G06F1730	G06F1730	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>G06F	G06F	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>G06F17	G06F17	</CLASSIFICATIONS-FOURTH>
<ABSTRACT>
A hierarchical database reporting and updating system is 
disclosed. The invention makes unique use of bit vectors to 

represent the relationship between various data items to enable 
the system to provide powerful data analysis functions. The data 

intermediate or grand summary levels. Such changes are prorated 
across all lower level data items which make up the intermediate 

or grand summary level. The invention also allows for the 
graphical representation of data. Users may modify these 

graphical representations and the system will update the 
underlying data. 


</ABSTRACT>
<APPLICANTS>
<APPLICANT-NAME>
AT 
&
 T CORP
</APPLICANT-NAME>
<APPLICANT-NAME>
AT
&
T CORP.
</APPLICANT-NAME>
</APPLICANTS>
<INVENTORS>
<INVENTOR-NAME>
BISHOP DAVID CHARLES
</INVENTOR-NAME>
<INVENTOR-NAME>
ROBINSON BRUCE
</INVENTOR-NAME>
<INVENTOR-NAME>
BISHOP, DAVID CHARLES
</INVENTOR-NAME>
<INVENTOR-NAME>
ROBINSON, BRUCE
</INVENTOR-NAME>
</INVENTORS>
<DESCRIPTION>
This invention relates generally to an improved data
management system and method. More particularly, the present
invention relates to a hierarchical database reporting and
updating system.Current computer systems exist for the display and
manipulation of data in a spreadsheet-like format. These systems
generally display various column headings and row identifiers,
with the intersection of the rows and columns containing values.
In the presently existing systems, data in the spreadsheet can be
summarized. For example, the data for an entire column could be
summed and the sum would be displayed as a total in a summary
level. When various quantities are changed in a column, the
summary level can be automatically updated to reflect these
changes. In existing systems however, a change made to a summary
level cannot be prorated back through the data items which make
up that summary level.Many spreadsheet systems and database systems have graphics
capabilities. These capabilities allow the representation of the
data in graphical form. Some of these systems allow real-time
update of graphs as data is changed. Present systems however, do
not allow the underlying data to be changed by modifying the
graph.Database systems with graphical input capability are disclosed in EP-A-0477152,
WO-A-9216903 and EP-A-0491517.A system and method according to the present invention are as set out in
claims 1 and 14. Particular forms of the invention are set out in the dependent claims.The present invention provides an improved method and system
for data management. Data is organized in a hierarchical
structure, which allows users greater flexibility in data
reporting and updating. The invention makes unique use of bit
vectors to represent the relationship between various data items
to enable the system to provide powerful data analysis functions
not previously available.The data structures employed in the invention allow users
to change values which represent intermediate or grand summary  
levels. Such changes are prorated across all lower level data
items which make up the intermediate or grand summary level.The graphical abilities of the present invention allow for
various graphical presentations of the data. Various hierarchies
of data may be represented in graphical form. Additionally, the
invention has the ability to allow a user to make a change to a
graphical display and to change the underlying data which is
represented by the graphical display.Fig. 1 shows a schematic of the components of a system
according to the
</DESCRIPTION>
<CLAIMS>
A system (100) for managing data comprising:

a computer processor (110);
a display monitor (102) connected to the computer processor (110) for

the display of graphical and textual information;
textual data entry means (106) connected to the computer processor
(110);
graphical data entry means (106,108) connected to the computer
processor (110); and
a memory unit (112) connected to the computer processor (110) for the
storage of a plurality of data records (518),

   
CHARACTERISED IN THAT
each of said data records comprising at least two key fields
(502,504,506,508,510,512,514) and a quantity field (516), wherein a first set of said key

fields defines a first hierarchical relationship (200) and a second set of said key fields
defines a second hierarchical relationship (300); and 
IN THAT
 said system further
includes:


means for representing said first hierarchical relationship (200) on a first
dimension on said display screen (102) and said second hierarchical relationship (300)

on a second dimension on said display screen (102), wherein an intersection of said first
dimension and said second dimension on said display screen (102) defines a cell; and
means for displaying a value in said cell, wherein said value represents
the contents of the quantity fields (516) of the data records (518) which are represented

by said cell.
The system of claim 1 further comprising:

means for allowing a user to specify selection criteria; and
means for excluding from the display screen representation data records
which do not satisfy said selection criteria.
The system of claim 1 further comprising: 

means for allowing a user to specify key fields
(502,504,506,508,510,512,514) to be excluded from representation on the display

screen (102); and
means for omitting said user specified key fields
(502,504,506,508,510,512,514) from said representation of said first and second

hierarchical relationships (200,300) on said display screen (102).
The system of claim 1 further comprising: 

means for adding a value to a cell which is blank, wherein said blank cell does not
represent any data records; and
means for creating a plurality of new data records (518) which represent all
possible combinations of data records (518) at the intersection of hierarchies (200,300)

associated with the cell;
means for distributing said added value among the quantity fields (516) of said
plurality of new data records (518); and
means for storing said new data records (518) in said memory unit (112).
The system of claim 1,

   wherein each unique combination of values of said key fields
(502,504,506,508,510,512,514) defines a unique record and wherein each of said hierarchical

relationships (200,300,400) comprising:

a plurality of levels (202,208,214,302,304,402,404), said number of levels being
equal to the number of key fields in the set of key fields defining the hierarchical relationship,

wherein each key field in said set of key fields is associated with one level,
wherein each of said plurality of levels comprises a plurality of nodes, said
number of nodes being equal to the number of unique values present in the data records in the

key field associated with that level, wherein each of said nodes represents one of said unique
values;
at least one node list associated with each level of each of said hierarchical
relationship, each of said node lists comprising:


a bit vector associated with a node of the associated level, said bit vector
representing the data records which contain the unique value represented by the associated node;

and
a pointer associated with a node of the associated level, said pointer pointing to
the lower level node list associated with the nodes which subordinate the associated node, if such

subordinate nodes exist; and
means for storing said at least one node in said memory unit.
The system of claim 5 wherein each of said bit vectors has the same number of
bits as the number of data records, and wherein each bit positionally represents one data record. 
The system of claim 5 further comprising:

means for identifying a first bit vector associated with a first node in a first
hierarchical relationship;
means for identifying a second bit vector associated with a second node in a
second hierarchical relationship; and
means for performing a boolean AND operation on said first and second bit
vectors, wherein the resulting bit vector represents all data records associated with said first node

and said second node.
The system of claim 5 further comprising:

means for specifying a plurality of values for a first key field;
means for identifying the bit vectors associated with the nodes representative of
said values; and
means for performing a boolean OR operation on said associated bit vectors,

   wherein the resulting bit vector represents all data records which contain said specified values.
The system of claim 5 further comprising:

means for specifying a plurality of values for a first key field;
means for specifying a plurality of values for a second key field;
means for identifying the bit vectors associated with the nodes representative of
said values specified for the first key field;
means for identifying the bit vectors associated with the nodes representative of
said values specified for the second key field;
means for performing a boolean OR operation on said bit vectors associated with
the nodes representative of said values specified for the first key field, wherein the resulting bit

vector defines a first intermediate bit vector;
means for performing a boolean OR operation on said bit vectors associated with
the nodes representative of said values specified for said the second key field, wherein the

resulting bit vector defines a second intermediate bit vector,
means for performing a boolean AND operation on said first and second
intermediate bit vectors, wherein the resulting bit vector represents all data records which contain

said specified values for the first and second key fields.
The system of claim 1, further comprising:

a bit vector in each of said data records, and wherein a third set of said
key fields (502,504,506,508,510,512,514) defines a third hierarchical relationship

(400);
means for identifying all unique combinations of values in said third set
of key fields (502,504,506,508,510,512,514); and
means for generating a plurality of reports using said bit vectors, each of
said reports associated with one of said unique combinations of values, wherein each

report displays said first hierarchical relationship on a first dimension and said second
hierarchical relationship on a second dimension, and wherein each report displays

values at the intersections of said first and second dimensions, wherein said values

represent the contents of the quantity fields of the data records which are represented by
said intersections and which contain the unique combination of values associated with

the report and are obtained using said bit vectors.
The system of claim 10 further comprising:

means for generating a plurality of summary level reports, each of said
summary level reports associated with a summary level in said third hierarchical

relationship, wherein each of said reports displays said first hierarchical relationship on
a first dimension and said second hierarchical relationship on a second dimension, and

wherein each report displays values at the intersections of said first and second
dimensions, wherein said values represent the contents of the quantity fields of the data

records which are represented by said intersections and which are included in the
associated summary level.
The system of claim 10 further comprising:

means for specifying selection criteria; and
means for suppressing generation of reports which do not satisfy said
selection criteria.
The system of any of the preceding claims further comprising: 

means for changing the value displayed in said cell and prorating said
change among the quantity fields of all data records which are represented by said cell.
A method for managing data in a computer system (100) comprising
storing a plurality of data records (518) in a memory unit (112), 
CHARACTERISED IN
THAT
 each of said data records (518) comprises at least two key fields
(502,504,506,508,510,512,514) and a quantity field (516), wherein a first set of said key

fields (502,504,506,508,510,512,514) defines a first hierarchical relationship (200) and
a second set of said key fields (502,504,506,508,510,512,514) defines a second

hierarchical relationship (300); and 
IN THAT
 said method further includes:

representing said first hierarchical relationship (200) on a first dimension
on a display screen (102) and said second hierarchical relationship (300) on a second

dimension on said display screen (102), wherein an intersection of said first dimension
and said second dimension on said display screen (102) defines a cell including a cell

bit vector; and
displaying a value in said cell, wherein said value represents the contents
of the quantity fields (516) of the data records (518) which are represented by said cell.
The method of claim 14 further comprising the steps of:

a user specifying selection criteria; and
excluding from the display screen (102) representation data records
which do not satisfy said selection criteria.
The method of claim 14 further comprising the steps of:

specifying key fields to be excluded from representation on the display
screen (102); and
omitting said user specified key fields from said representation of said
first and second hierarchical relationships on said display screen (102).
The method of claim 14 further comprising the steps of:

adding a value to a cell which is blank, wherein said blank cell does not
represent any data records; and
creating a plurality of new data records which represent all possible
combinations of data records at the intersection of hierarchies associated with the cell;
distributing said added value among the quantity fields of said plurality
of new data records; and
storing said new data records in said memory unit (112).
The method of claim 14, wherein each unique combination of values
of said key fields defines a unique record, said method further comprising:


defining said hierarchical relationships based upon a plurality of sets of
said key fields, each of said hierarchical relationships comprising:


a plurality of levels, said number of levels being equal to the number of
key fields in the set of key fields defining the hierarchical relationship, wherein each

key field in said set of key fields is associated with one level,

   wherein each of said plurality of levels comprises a plurality of nodes,
said number of nodes being equal to the number of unique values present in the data

records in the key field associated with that level, wherein each of said nodes represents
one of said unique values:


generating at least one node list associated with each level of each of said
hierarchical relationships, each of said node lists comprising:
a bit vector associated with a node of the associated level, said bit vector
representing the data records which contain the unique value represented by the

associated node, and
a pointer associated with a node of the associated level, said pointer
pointing to the lower level node list associated with the nodes which subordinate the

associated node, if such subordinate nodes exist; and
storing said at least one node list in a memory unit (112).
The method of claim 18 wherein each of said bit vectors has the
same number of bits as the number of data records, and wherein each bit positionally

represents one data record.
The method of claim 18 further comprising the steps of:

identifying a first bit vector associated with a first node in a first
hierarchical relationship;
identifying a second bit vector associated with a second node in a second
hierarchical relationship; and
performing a boolean AND operation on said first and second bit
vectors, wherein the resulting bit vector represents all data records associated with said

first node and said second node.
The method of claim 18 further comprising the steps of:

specifying a plurality of values for a first key field; 
identifying the bit vectors associated with the nodes representative of
said values; and
performing a boolean OR operation on said bit vectors, wherein the
resulting bit vector represents all data records which contain said specified values.
The method of claim 18 further comprising the steps of:

specifying a plurality of values for a first key field;
specifying a plurality of values for a second key field;
identifying the bit vectors associated with the nodes representative of
said values specified for the first key field;
identifying the bit vectors associated with the nodes representative of
said values specified for the second key field;
performing a boolean OR operation on said bit vectors associated with
the nodes representative of said values specified for the first key field, wherein the

resulting bit vector defines a first intermediate bit vector;
performing a boolean OR operation on said bit vectors associated with
the nodes representative of said valu
es specified for the second key field, wherein the
resulting bit vector defines a second intermediate bit vector; and
performing a boolean AND operation on said first and second
intermediate bit vectors, wherein the resulting bit vector represents all data records

which contain said specified values for the first and second key fields.
The method of claim 14, further comprising:

a bit vector in each of said data records (518), and wherein a third set of
said key fields (502,504,506,508,510,512,514) defines a third hierarchical relationship

(400);
identifying all unique combinations of values in said third set of key
fields; and
generating a plurality of reports using said bit vectors, each of said
reports associated with one of said unique combinations of values, wherein each report

display said first hierarchical relationship on a first dimension and said second
hierarchical relationship on a second dimension, and wherein each report displays

values at the intersections of said first and second dimensions, wherein said values
represent the contents of the quantity fields of the data records which are represented by 

said intersections and which contain the unique combination of values associated with
the report and are obtained using said bit vectors.
The method of claim 23 further comprising the step of:

generating a plurality of summary level reports, each of said summary
level reports associated with a summary level in said third hierarchical relationship,

wherein each of said reports displays said first hierarchical relationship on a first
dimension and said second hierarchical relationship on a second dimension, and

wherein each report displays values at the intersections of said first and second
dimensions, wherein said values represent the contents of the quantity fields of the data

records which are represented by said intersections and which are included in the
associated summary level.
The method of claim 23 further comprising the steps of:

specifying selection criteria; and
suppressing generation of reports which do not satisfy said selection
criteria.
The method of any of claims 14 to 25, further comprising:

prorating a change made to a value displayed in a cell among the
quantity fields of all data records which are represented by said cell by using said cell

bit vector.
</CLAIMS>
</TEXT>
</DOC>
