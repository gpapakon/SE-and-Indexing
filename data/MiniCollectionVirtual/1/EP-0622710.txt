<DOC>
<DOCNO>EP-0622710</DOCNO> 
<TEXT>
<INVENTION-TITLE>
Digital communication network with a moderator station selection process
</INVENTION-TITLE>
<CLASSIFICATIONS>H04L1224	H04L12407	G05B1904	G05B19042	H04L12407	H04L1224	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>H04L	H04L	G05B	G05B	H04L	H04L	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>H04L12	H04L12	G05B19	G05B19	H04L12	H04L12	</CLASSIFICATIONS-FOURTH>
<ABSTRACT>
A moderator on a communication network periodically transmits a set of 
parameters for a protocol that is used to communicate over the network. Each 

node on the network compares the set of protocol parameters from the moderator 
to a set of parameters stored in that node. If the sets of parameters at a given node 

do not match, that given node ceases transmitting messages over the network 
until either the set of protocol parameters from the moderator match the stored 

set of parameters, or a matching set of parameters is stored in the node. Typically 
the active node that is assigned the lowest numerical network address functions 

as the moderator. However, an automatic process is utilized to prevent a node 
with a non-matching set of the protocol parameters from becoming the 

moderator for more than a brief period of time. An override procedure is 
provided to force all the nodes on the network to adopt a common set of protocol 

parameters in the event that the automatic process fails. 
</ABSTRACT>
<APPLICANTS>
<APPLICANT-NAME>
ALLEN BRADLEY CO
</APPLICANT-NAME>
<APPLICANT-NAME>
ALLEN-BRADLEY COMPANY
</APPLICANT-NAME>
</APPLICANTS>
<INVENTORS>
<INVENTOR-NAME>
ENGDAHL JONATHAN R
</INVENTOR-NAME>
<INVENTOR-NAME>
GEE DAVID J
</INVENTOR-NAME>
<INVENTOR-NAME>
KUCHARSKI PAUL G
</INVENTOR-NAME>
<INVENTOR-NAME>
LUCAK MARK A
</INVENTOR-NAME>
<INVENTOR-NAME>
ENGDAHL, JONATHAN R.
</INVENTOR-NAME>
<INVENTOR-NAME>
GEE, DAVID J.
</INVENTOR-NAME>
<INVENTOR-NAME>
KUCHARSKI, PAUL G.
</INVENTOR-NAME>
<INVENTOR-NAME>
LUCAK, MARK A.
</INVENTOR-NAME>
</INVENTORS>
<DESCRIPTION>
The field of the invention is communication networks, and particularly, to
industrial communication networks that are employed to exchange data among
control systems for factory machinery.Factories are automated by controllers that are programmed, or configured,
to operate specific machines or devices. Such controllers may be general purpose,
such as computers, numerical controls or programmable controllers; or they may
be special purpose controllers, such as robot controllers, weld controllers or motor
drives.Each controller connects to the various sensing devices and operating
devices on the machinery which it controls and it automates the operation of that
machinery by inputting data from the sensing devices and outputting the
appropriate data to the operating devices. This exchange of input and output
("I/O") data between the controller and the devices on the controlled machinery
is often accomplished by direct connections between ports on the controller and
each separate I/O device. However, when I/O devices are physically spread out
over a large area, the wiring costs associated with such separate connections can
become excessive.One way to reduce wiring in such applications is to multiplex I/O data
through a serial communications link. Such serial I/O links are commonly used
to connect the centrally located controller to separate remote racks, or chassis, that
are positioned adjacent to the I/O devices. Such "remote I/O systems" are
disclosed, for example, in U.S. Patent Nos. 4,404,651; 4,413,319; 4,809,217 and
4,750,150, where the controller carries out a continuous high speed scan of the I/O
data associated with each remote rack and that data is conveyed through the serial
communications link. It can be appreciated that such serial I/O links must
promptly and reliably convey the I/O data, since that data is directly controlling
operating devices on a machine that is operating in real time. While a single controller may automate a machine, or a small group of
machines, such "islands of automation" must be connected together to truly
automate an entire factory. These latter connections are provided by industrial
local area networks that enable each controller to send messages to other similar
controllers in the factory over serial data links. There are a large number of such
"peer-to-peer" communications networks known in the art, some of which are
developed by standards committees like IEEE 802.3, IEEE 802.4, IEEE 802.5 and
MAP; and others are developed by manufacturers of the controller like
</DESCRIPTION>
<CLAIMS>
A method by which a given node determines
whether to function as a moderator in a communication

network (10) having a plurality of nodes (20)connected to
a medium (11) with each node being assigned a unique

network address within a range of numerical values, and
wherein one of the plurality of nodes is designated as a

moderator which periodically transmits a set of
communication protocol parameter values over the medium


characterised by
 the steps of :

receiving messages sent by other nodes over the
medium;
determining from received messages whether another
node is assigned a network address that is closer to one

extreme of a range of numerical values than a network
address assigned to the given node; and
functioning as the moderator by periodically
transmitting communication protocol parameter values, when

the given node has a network address that is closer to the
one extreme of the range of numerical values than all

other nodes which are sending messages over the medium.
The method as recited in claim 1 
characterised
in that
 the determining step determines whether another
node is assigned a network address with a lower numerical

value than a network address assigned to the given node.
The method as recited in claim 1 further

characterised by
:

receiving the set of communication protocol parameter
values transmitted over the medium by an existing

moderator; 
comparing the set of communication protocol parameter
values transmitted by a moderator to a group of

communication protocol parameter values stored in the
given node; and
wherein the given node is permitted to transmit over
the medium only when the two sets of communication

protocol parameter values match.
The method as recited in claim 3 further

characterised by
 another node transmitting communication
protocol parameter values over the medium in a control

message containing a unique parameter that forces the
given node to accept the other node as the moderator; and

   the given node responding to the control message
containing the unique parameter
 value by storing the
communication protocol parameter values as the group of

communication protocol parameter values for use in the
communicating over the network.
The method as recited in claim 3 further

characterised by
 the given node transmitting communication
protocol parameter values over the medium in a control

message containing a unique parameter value that forces
other nodes to accept the given node as the moderator.
The method as recited in claim 3 further

characterised by
:

another node transmitting communication protocol
parameter values over the medium in a control message

containing a special network address that is reserved from
assignment to a node; and
the given node responding to the control message by
storing the communication protocol parameter values as the

group of communication protocol parameter values for use
in a communicating over the network
The method as recited in claim 6 
characterised
in that
 the special network address is address zero.
The method as recited in claim 1 
characterised
by
 the steps of:

receiving the set of communication protocol parameter
values transmitted over the medium by the moderator; and
storing the set of communication protocol parameter
values; and
utilizing the stored set of communication protocol
parameter values to transmit messages over the medium.
The method as recited in claim 8 
characterised
in that
 the utilizing step requires that identical sets of
communication protocol parameter values be received for a

predefined number of times before the communication
protocol parameter values are utilized to transmit

messages over the medium.
The method as recited in claim 8 further

characterised by
 receiving messages sent by other nodes
over the medium;

   determining from received messages whether another
node is assigned a network address with a lower numerical

value than the network address assigned to the given node;
and

   the given node functioning as the moderator by
periodically transmitting communication protocol parameter

values, when no other node that is sending messages over
the medium has a lower numerical network address than the

given node.
The method as recited in claim 8 
characterised
in that
 communication activity on the network is divided
into a series of periodic intervals and the moderator

transmits the set of communication protocol parameter 
values over the medium during a defined period within each

periodic interval.
The method as recited in claim 8 
characterised
in that
 when a user interface terminal is connected to the
network, said user interface terminal determines a network

address to use by performing steps that comprise:

(a) receiving the set of communication protocol
parameter values transmitted over the medium by the

moderator;
(b) determining from the set of communication
protocol parameter values a maximum address that is

allowed to be used on the network;
(c) selecting the maximum address as a terminal
address;
(d) listening to activity on the network to detect
whether the terminal address, that was selected, is being

used by another node; and
(e) if the terminal address is being used by
another node, decrementing the terminal address and

returning to step (d), otherwise using the terminal
address to communicate over the network medium.
The method as recited in claim 8 further

characterised in that
 terminal ceasing a search for a
network address without choosing an address to use, if the

terminal address is decremented below a predefined value.
The method as recited in claim 8 further

characterised by
 transmitting communication protocol
parameter values over the medium in a control message

containing a unique parameter value that forces other
nodes to accept the given node as the moderator.
</CLAIMS>
</TEXT>
</DOC>
