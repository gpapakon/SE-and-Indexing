<DOC>
<DOCNO>EP-0997900</DOCNO> 
<TEXT>
<INVENTION-TITLE>
Method and apparatus for recording and reproducing information on and from disk
</INVENTION-TITLE>
<CLASSIFICATIONS>G06F1114	G06F1216	G11B2010	G11B2012	G06F1114	G06F1216	G11B1904	G11B1904	G11B1902	G11B2010	G06F306	G11B2018	G11B2018	G11B1902	G06F306	G11B2012	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>G06F	G06F	G11B	G11B	G06F	G06F	G11B	G11B	G11B	G11B	G06F	G11B	G11B	G11B	G06F	G11B	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>G06F11	G06F12	G11B20	G11B20	G06F11	G06F12	G11B19	G11B19	G11B19	G11B20	G06F3	G11B20	G11B20	G11B19	G06F3	G11B20	</CLASSIFICATIONS-FOURTH>
<ABSTRACT>
Information is recorded on and reproduced from a disk ECC-block
by ECC-block. Every ECC block is composed of plural sectors.

A recording command is generated which contains information of a
recording position on the disk. The information of the recording

position is stored into a nonvolatile memory. Data is recorded on
the disk in response to the recording command. In cases where

power supply is turned on after interruption of power supply
terminates, a specified ECC block is detected from the information

stored in the nonvolatile memory. The specified ECC block is
adversely affected by the interruption of power supply during the

recording of data on the disk. One of a reproducing command and a
verify command is generated for at least one sector of the specified

ECC block. Data is reproduced from the specified ECC block on the
disk in response to the one of the reproducing command and the

verify command. A decision is made as to whether or not the
reproduction of data from the specified ECC block succeeds or fails.

In cases where it is decided that the reproduction of data from the
specified ECC block fails, data is recorded on a whole of the

specified ECC block to convert the specified ECC block into a
normal ECC block.


</ABSTRACT>
<APPLICANTS>
<APPLICANT-NAME>
MATSUSHITA ELECTRIC IND CO LTD
</APPLICANT-NAME>
<APPLICANT-NAME>
MATSUSHITA ELECTRIC INDUSTRIAL CO., LTD
</APPLICANT-NAME>
</APPLICANTS>
<INVENTORS>
<INVENTOR-NAME>
AOKI YOSHITO
</INVENTOR-NAME>
<INVENTOR-NAME>
AOKI, YOSHITO
</INVENTOR-NAME>
</INVENTORS>
<DESCRIPTION>
This invention relates to a method of recording and reproducing information on and from a disk-shaped recording medium such as an optical disk, a magnetic disk, or a magneto-optical disk. This invention also relates to an apparatus for recording and reproducing information on and from a disk-shaped recording medium such as an optical disk, a magnetic disk, or a magneto-optical disk.Japanese published unexamined patent application 6-19767 discloses a magnetic disk controller with a file restoration function. The magnetic disk controller in Japanese patent application 6-19767 includes an output control means, an output data storage means, an output control information storage means, an output state storage means, and a file restoration means. The output data storage means stores data to be outputted to the magnetic disk which is fed from a host device. The output data storage means can hold the data even when power supply is interrupted. The output control means is informed by the host device of a designated output position and an output-data length. The output control means writes the information of the designated output position and the output-data length into the output control information storage means. The output control information storage means can hold the information even when power supply is interrupted. The output control means writes a signal representative of a state of output processing into the output state storage means. The output state storage means can hold the signal even when power supply is interrupted.The magnetic disk controller in Japanese patent application 6-19767 records data on the magnetic disk as follows. The output control means accesses a region of the magnetic disk which agrees with the designated output position. The output control means transfers the data from the output data storage means to the magnetic disk, and records the data into a file on the accessed region of the magnetic disk. The amount of the data recorded into the file corresponds to the output-data length. When the data is recorded into the file, the output control means writes a signal, which represents a state where the data is being outputted, into the output state storage means. After the recording of the data into the file has been completed, the output control means writes a signal, which represents a state where the data has been outputted, into the output state storage means. In the output state storage means, the signal representing the state where the data has been outputted replaces the signal
</DESCRIPTION>
<CLAIMS>
A method of recording and reproducing information on and from a disk (2) ECC-block by ECC-block, every ECC block being composed of plural sectors, the method comprising the steps of:

generating a recording command containing information of a recording position on the disk (2);
storing the information of the recording position into a nonvolatile memory (24);
recording data on the disk (2) in response to the recording command;
in cases where power supply is turned on after interruption of power supply terminates, detecting a specified ECC block from the information stored in the nonvolatile memory (24), the specified ECC block being adversely affected by the interruption of power supply during the recording of data on the disk (2);
generating one of a reproducing command and a verify command for at least one sector of the specified ECC block;
reproducing data from the specified ECC block on the disk (2) in response to the one of the reproducing command and the verify command;
deciding whether or not the reproduction of data from the specified ECC block succeeds or fails; and
in cases where it is decided that the reproduction of data from the specified ECC block fails, overwriting predetermined data on a whole of the specified block to convert the specified block into a normal ECC block.
An apparatus for recording and reproducing information on and from a disk (2) ECC-block by ECC-block, every ECC block being composed of plural sectors, the apparatus comprising:

means (23) for generating a recording command containing information of a recording position on the disk (2);
a nonvolatile memory (24);
means (23) for storing the information of the recording position into the nonvolatile memory (24);
means (4, 5, 6, 9, 10, 21) for recording data on the disk (2) in response to the recording command;
means (23) for, in cases where power supply is turned on after interruption of power supply terminates, detecting a specified ECC block from the information stored in the nonvolatile memory, the specified ECC block being adversely affected by the interruption of power supply during the recording of data on the disk (2);
means (23) for generating one of a reproducing command and a verify command for at least one sector of the specified ECC block;
means (4, 7, 8, 9, 10, 11) for reproducing data from the specified ECC block on the disk in response to the one of the reproducing command and the verify command;
means (23) for deciding whether or not the reproduction of data from the specified ECC block succeeds or fails; and
means (4, 7, 8, 9, 10, 11) for, in cases where it is decided that the reproduction of data from the specified ECC block fails, overwriting predetermined data on a whole of the specified block to convert the specified block into a normal ECC block.
</CLAIMS>
</TEXT>
</DOC>
