<DOC>
<DOCNO>EP-0699991</DOCNO> 
<TEXT>
<INVENTION-TITLE>
Method and apparatus for switching clock signals in a fault-tolerant computer system
</INVENTION-TITLE>
<CLASSIFICATIONS>G06F110	G06F110	G06F1116	G06F1116	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>G06F	G06F	G06F	G06F	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>G06F1	G06F1	G06F11	G06F11	</CLASSIFICATIONS-FOURTH>
<ABSTRACT>
The present invention relates to a clock switching circuit (300) which switches
between clock signals (BP_4, LOC_32) generated by a local clock unit and those

generated by a system clock unit when disabling, and then subsequently enabling, the
system clock unit. The clock switching circuit (300) includes a plurality of switching

circuits (600, 700, 800) that are arranged and configured to switch between the system
and local clock units so as to provide a substantially uninterrupted stream of clock signals

(BRD_16, BRD_4) to selected components of a fault-tolerant computer system. This
arrangement ensures that information stored on the selected components is not lost during

disablement of the system clock unit.

</ABSTRACT>
<APPLICANTS>
<APPLICANT-NAME>
STRATUS COMPUTER INC
</APPLICANT-NAME>
<APPLICANT-NAME>
STRATUS COMPUTER, INC.
</APPLICANT-NAME>
</APPLICANTS>
<INVENTORS>
<INVENTOR-NAME>
BARBERA DAVID R
</INVENTOR-NAME>
<INVENTOR-NAME>
SAVICKI FRANKLIN M
</INVENTOR-NAME>
<INVENTOR-NAME>
SPLITZ DAVID E
</INVENTOR-NAME>
<INVENTOR-NAME>
BARBERA, DAVID R.
</INVENTOR-NAME>
<INVENTOR-NAME>
SAVICKI, FRANKLIN M.
</INVENTOR-NAME>
<INVENTOR-NAME>
SPLITZ, DAVID E.
</INVENTOR-NAME>
</INVENTORS>
<DESCRIPTION>
This invention relates generally to computer timing apparatus and, 
more particularly, to an apparatus and method for switching clock signals in 
a fault-tolerant synchronous computer system. A fault-tolerant computer system is generally composed of specially 
designed hardware and software components having improved tolerance to 
faults that enable their continuous operation. One of these components 
includes a system clock unit that generates and distributes clock signals to 
logic circuits located throughout the system. Preferably, the system clock 
unit generates clock pulses having fast cycle times that increase system 
performance by synchronizing high-speed operations of the logic circuits. 
However, continuous computer operation requires constant generation and 
transmission of these fast pulses by the system clock which, in turn, consumes 
significant amounts of power. Many applications of the fault-tolerant computer do not require such 
high availability during non-working hours, such as weekends. For these 
applications, it may be desirable to conserve energy and reduce costs by 
periodically disabling the system clock. Yet, there is a requirement to 
maintain operation of selected computer components so that information 
relating to the "state" of the system can be accessed despite the absence of 
system clock signals. This information may be stored in memory devices 
resident on a remote connector interface component of the fault-tolerant 
system that is sequenced by a low-power, local clock unit. The present  
 
invention is concerned with switching between the system and local clock units in a 
manner that provides a continuous stream of clock signals to circuits of the computer 
system and, thus, uninterrupted operations of these selected components. According to one aspect of the present invention, there is provided a clock 
switching circuit for switching between local clock signals and system clock signals, the 
clock switching circuit comprising: switching means for coupling one of its inputs to its 
output so as to forward a signal applied to said one of its inputs to its output; means for 
forwarding local clock signals and system clock signals to respective inputs of the 
switching means; and clock control means for controlling the switching means to switch 
from coupling said one of its inputs to its output to coupling another of said inputs to its 
output without adversely impacting the integrity of the clock signals being forwarded to 
its output. According to another aspect of
</DESCRIPTION>
<CLAIMS>
A clock switching circuit (300) for switching between local clock signals (loc_16, 
loc_14) and system clock signals (pll_16, pll_4), the clock switching circuit (300) 

comprising: 
   switching means (800) for coupling one of its inputs (310, 312; 320, 322) to its 

output (332, 334) so as to forward a signal (mpll_16, mpll_4; mloc_16, mloc_4) applied 
to said one of its inputs (310, 312; 320, 322) to its output (332, 334); means (600, 700) 

for forwarding local clock signals (loc_16, loc_4) and system clock signals (pll_16, 
pll_4) to respective inputs (320, 322; 310, 312) of the switching means (800); and 

   clock control means (500) for controlling the switching means (800) to switch 
from coupling said one of its inputs (310, 312; 320, 322) to its output (332, 334) to 

coupling another of said inputs (320, 322; 310, 312) to its output (332, 334) without 
adversely impacting the integrity of the clock signals (mpll_16, mpll_4; mloc_16, 

mloc_4) being forwarded to its output (332, 334). 
A clock switching circuit as claimed in claim 1, wherein the clock control means 
(500) is arranged such that switching of the inputs (310, 312; 320, 322) of the switching 

means (800) occurs when the signals (mpll_16, mpll_4;mloc_16, mloc_4) applied to 
them are at logic level O. 
A clock switching circuit as claimed in claim 1 or 2, wherein the switching means 
(800) and the clock signal forwarding means (600, 700) are multiplexers. 
A clock switching circuit as claimed in any preceding claim wherein the clock 
control means (500) is arranged to generate an enable select signal (enb_sel) to switch to 

one input (310, 312) and an inverted enable select signal (ienb_sel) to switch to another 
input (320, 322). 
A clock switching circuit as claimed in claim 4, arranged such that switching 
occurs after the switching means (800) has been enabled by the inverted enable select 

signal (ienb_sel) but before the clock signal forwarding means (600, 700) have been 
enabled by respective enable select and inverted enable select signals (enb_sel, ienb_sel) 
A clock switching circuit as claimed in any preceding claim, further comprising a 
clock fault circuit (400) for detecting a pulse transition in a stream of input system clock 

pulses (BP_4) and generating a clock fault signal (clk_flt) in response thereto. 
A clock switching circuit as claimed in claim 6, wherein the clock fault circuit 
(400) samples the streams of input system pulses (BP_4) at predetermined time intervals 

corresponding to local clock pulses (loc_16). 
A clock switching circuit as claimed in claim 6 or 7, wherein the clock fault 
circuit (400) comprises a shift register (402, 404, 406, 408). 
A clock switching circuit as claimed in any of claims 6 to 8, wherein the clock 
control means (500) controls the switching means (800) to output system clock signals 

(mpll_16, mpll_4) in response to a clock-fault signal (clk_flt). 
An apparatus (200) for providing clock signals (BRD_16, BRD_4) to a fault-tolerant 
computer, the apparatus (200) comprising: 

   a clock switching circuit (300) as claimed in any preceding claim for providing a 
fault-tolerant computer with clock signals (BRD_16, BRD_4); 

   a processor (202) for controlling the operation of the clock switching circuit (300) 

to output local clock signals (mloc_16, mloc_4) or system clock signals (mpll_16, 
mpll_4) in response to respective power-down and power-up commands; and

 
   bus interface logic (212) for coupling the clock switching circuit (300) and the 

processor (202). 
An apparatus as claimed in claim 10, wherein the bus interface logic (212) 
comprises a control register (218) for storing a clock selection bit (clk_sel) generated by 

the processor (202) in response to issuance of a power-down command. 
An apparatus as claimed in claim 10 or 11, when dependent upon any of claims 6 
to 9, wherein the bus interface logic (212) comprises a status register (236) for storing 

the clock fault signal (clk_flt). 
An apparatus as claimed in any of claims 10 to 12, wherein the clock switching 
circuit (300) may be controlled remotely. 
A method of switching between local clock signals (loc_16, loc_4) and system 
clock signals (pll_16, pll_4), the method comprising: 

   forwarding local clock signals (loc_16, loc_4) and system clock signals (pll_16, 
pll_4) to respective inputs (310; 312; 320, 322) of switching means (800) of a clock 

switching circuit (300); 
   generating a clock selection signal (clk_sel) indicative of which clock signal 

(loc_16, loc_4;pll_16, pll_4) is to be output from the switching means (800); and 
   if the indicated clock signal is not output from the switching means (800), 

switching coupling of the output (332, 334) of the switching means (800) to the input 
(320, 322; 310, 312) to which the indicated clock signal (loc_16, loc_4, pll_16, pll_4) is 

applied, the switching being timed such that the integrity of the clock signals (mpll_16, 
mpll_4;mloc_16, mloc_4) being forwarded to the output (332, 334) of the switching 

means (800) is not adversely impacted. 
A method as claimed in claim 14, further comprising: 
   scanning for a pulse transition in a stream of input system clock pulses (BP_4); 

and 
   generating a clock fault signal (clk_flt) in response to any such pulse transitions. 
A method as claimed in claim 14, further comprising: 
   controlling the switching means (800) to output system clock signals (mpll_16, 

mpll_4) in response to a clock fault signal (clk_flt). 
A method as claimed in claim 15 or 16, for providing clock signals (BRD_16, 
BRD_4) to a fault-tolerant computer, the method comprising: 

   controlling operation of the clock switching circuit (300) to output local clock 
signals (mloc_16, mloc_4) or system clock signals (mpll-16, mpll-4) in response to 

respective power-down and power-up commands. 
A method for disabling and subsequently enabling a system clock unit (120) of a 
fault-tolerant computer in response to respective power-down and power-up commands 

received at a remote connector unit (200) of the computer, said method comprising the 
steps of: 

   generating a first stream of local clock pulses (LOC_32) at a local clock unit 
(225) and a second stream of system clock pulses (BP_4) at a system clock unit (120); 

   receiving said first and second streams of clock pulses (LOC_32, BP_4) at a 
clock switching circuit (300); 

   selecting said first stream (LOC_32) and passing said local clock pulses to an 
output of said clock switching circuit (300) in response to an enable selection signal 

(enb_sel) generated by a clock control circuit (500); 
   scanning said stream of system clock pulses (BP_4) at a clock-fault circuit (400) 

to detect a pulse transition;
 

   deasserting a clock-fault signal (clk_flt) at said clock-fault circuit (400) in 
response to detection of said pulse transition; and 

   switching from said first stream (LOC_32) to said second stream (BP_4) and 
passing said system clock pulses (mloc_4, mloc_16) to said output of said clock 

switching circuit (300) in response to an inverted enable selection signal (ienb_sel) 
generated by said clock control circuit (500), the switching being timed such that the 

integrity of the clock signals (mpll_16, mpll_14;mloc_16, mloc_4) being forwarded to 
the output (332, 334) of the switching means (800) is not adversely impacted. 
A method as claimed in claim 17 or 18, further comprising: 
   asserting the clock selection signal (clk_sel) in response to the power-down 

command; and 
   generating an enable selection signal (enb_sel) in response to the asserted clock 

selection signal to output local clock signals (loc_16, loc_4). 
A method as claimed in any of claims 17 to 19, further comprising: 
   deasserting the clock selection signal (clk_sel) in response to the power-up 

command; and 
   generating an inverted enable selection signal (ienb_sel) in response to the 

deasserted clock selection signal to output system clock signals (pll_16, pll_4). 
</CLAIMS>
</TEXT>
</DOC>
