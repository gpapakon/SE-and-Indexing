<DOC>
<DOCNO>EP-0657831</DOCNO> 
<TEXT>
<INVENTION-TITLE>
Image retrieving method and apparatus
</INVENTION-TITLE>
<CLASSIFICATIONS>G06F1730	G06T100	G06T100	G06F1730	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>G06F	G06T	G06T	G06F	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>G06F17	G06T1	G06T1	G06F17	</CLASSIFICATIONS-FOURTH>
<ABSTRACT>
An image-retrieving system for retrieving a desired 
image from a data base. A storage device in the data base 

stores a plurality of images, additional information for 
identifying each of the plurality of images and calculated 

feature data for identifying each of the images. A first input 
means inputs additional-information data for identifying 

a desired image stored in the data base. An additional-information 
selection means selects a first set of candidates 

as the desired image by comparing the input 
additional-information with the stored additional-information 

for each of the stored plurality of images. A 
second input device inputs an illustrative image, which is 

illustrative of the desired image, and a generation device 
generates feature data from the input illustrative image. A 

selection device selects as the desired image a one of the 
candidates whose stored feature data is most similar to the 

generated feature data of the input illustrative image. 

 
</ABSTRACT>
<APPLICANTS>
</APPLICANTS>
<INVENTORS>
</INVENTORS>
<DESCRIPTION>
This invention relates to an image retrieving method
and apparatus for retrieving an image from an image data
base.In a conventional method of retrieving a desired image
from an image data base, additional information, comprising,
for example, the title and the type of image, is retrieved
using keywords.However, in retrieval using additional information, it
is extremely difficult to systematically provide keywords
for all of the stored images when the size of the image data
base is large and the shape of each image is complicated, so
that it is often impossible to retrieve a desired image by
only using keywords. The present invention has been made in consideration
of the above described problems.It is a concern of the present invention to provide
an image retrieving method and apparatus which can
perform very precise image retrieval to meet a user's
requirements.An article entitled "A Similarity Retrieval Method
for Image Database using Simple Graphics", in "IEEE
Workshop on languages for automation: Symbiotic and
intelligent robotics, 29 August 1988, Institute of
Electrical and Electronics Engineers, pages 149-154,
XP000118740 by Hamano T, another article entitled
"Querying Image Databases using Computed Texture
Features" in IBM Technical Disclosure Bulletin, vol 36,
No 6b, June 1993, NY US pages 207-208 and Japanese Patent
Abstract No JP-A-04348475 all disclose methods of
retrieving feature data in which comparisons are carried
out between stored data and input data.An article entitled "Extraction of Object Features
and Its Application to Image Retrieval" by Yamamoto Akio
and Takagi Mikio in "Transactions of the Institute of 
Electronics, Information and Communication Engineers, Vol
E72, No 6 June 1989 discloses an image retrieving system
in which non-image and structural information associated
with images in an image data base. Such information can
be used together to retrieve images from the data base.However none of the above methods provides a totally
satisfactory method of retrieving data.According to one aspect, the present invention
provides an image retrieving apparatus as set out in
claim 1.According to another aspect the present invention
relates to an image retrieving method set out in claim
9. FIG. 1 is a block diagram illustrating the configuration
of a retrieving apparatus according to an embodiment of
the present invention;FIG. 2 is a diagram illustrating the concept of
retrieval using an illustrative image;FIG. 3 is a flowchart illustrating retrieval processing
using additional
</DESCRIPTION>
<CLAIMS>
An image retrieving apparatus for retrieving a
desired image comprising:


selection means (6, 52, step 11, step 13) for
selecting image data by comparing newly input additional

information with previously input additional information
(32) of image data stored in a data base (31);
input means (41) for inputting an illustrative image
of the desired image;
feature calculating means (2, 6, step 12, step 17,
step 30) for calculating feature data of the illustrative

image;
distance calculating means (6, 52, step 12, step 17,
steps 31-33) for calculating distance values between the

values of the feature data of the illustrative image and
values of feature data of the selected image data;

   
characterised in that
:

said input means is adapted to input at least two
illustrative images of the desired image (P11L15∼);
said feature calculating means is adapted to
calculate values of features of the at least two input

illustrative images; 
said distance calculating means is adapted to
calculate distance values between the respective values

as calculated by said feature calculating means and
values of the feature data of the selected image data

(P11L16∼);

   and by
means for calculating an average of the calculated
distance values (P11L17∼); and
display control means (6, 7, step 19) for displaying
the image data of a retrieved image on the basis of the

result of the calculated average.
Apparatus according to claim 1, further comprising:

means (53) for sorting the image data to be
displayed in the order of smallest distance values based

on the output of said means (52) for calculating average
difference values; and
means (7) for displaying the image data based on the
result of sorting.
Apparatus according to claim 1 or claim 2 
comprising:


means (31, 32, 33) for storing a plurality of
images, additional-information for identifying each of

the plurality of images, and calculated feature data
identifying each of the stored images.
Apparatus according to claim 3 and including means
(6) selecting a set of candidates for the desired image

by comparing newly input additional-information with the
stored additional-information for each of the stored

plurality of images.
Apparatus according to claim 4 and including means
(52) for calculating the similarity between the stored

feature data of each of the set of candidates and the
generated feature data of the input illustrative image;

and

   means for selecting as the desired image one of the
candidates whose stored feature data is most similar to

the generated feature data of the input illustrative
image. 
Apparatus according to claim 5, wherein the means
for selecting the desired image operate on the basis of

the smallest distance between the stored feature data of
each of the set of candidates and the generated feature

data of the illustrative image.
Apparatus according to claim 6, wherein the means
for selecting the desired image includes:


means (53) for sorting the candidates based in the
order of smallest distance between the stored feature

data of the set of candidates and the generated feature
data of the illustrative image.
Apparatus according to any one of the preceding
claims and having means (S10) for selecting between three

modes of operation, namely a first mode consisting of
selection of a candidate by additional information, a

second mode of selection of a candidate by retrieval by
features, and a third mode consisting of a combination of

the first and second modes. 
An image retrieving method of retrieving a desired
image comprising the steps of:


selecting image data by comparing newly input
additional information with previously input additional

information (32) and image data stored in a data base
(31) ;
inputting an illustrative image of the desired
image;
calculating feature data of the illustrative image;
calculating distance values between the values of
the feature data of the illustrative image and values of

feature data of the selected image data;

   
characterised in that
:

said input step inputs at least two illustrative
images of the desired image (P11L15∼);
said feature calculating step calculates values of
features of the at least two input illustrative images;
said distance calculating step calculates distance
values between the respective values as calculated by

said feature calculating step and values of the feature 
data of the selected image data (P11L16∼);

   and by
calculating an average of the calculated distance
values (P11L17∼); and
generating image data of a retrieved image on the
basis of the result of the calculated average.
A method according to claim 9, further comprising:

sorting the image data in the order of smallest
distance values based on calculated feature data (Step

34); and
displaying the image data based on the result of
sorting.
A method according to claim 9 or claim 10 comprising
the steps of:


prior to selecting image data storing a plurality of
images, storing additional-information for identifying

each of the plurality of images and storing calculated
feature data for identifying each of the images.
A method according to claim 11 and including

selecting a set of candidates for the desired image by
comparing the newly input additional-information with the

stored additional-information for each of the stored
plurality of images.
A method according to claim 12 and including
calculating the similarity between the stored feature

data of each of the set of candidates and the generated
feature data of the input illustrative image; and

   selecting as the desired image one of the candidates
whose stored feature data is most similar to the

generated feature data of the input illustrative image.
A method according to claim 13, wherein selecting
the desired image is based on the smallest distance

between the stored feature data of each of the set of
candidates and the generated feature data of the

illustrative image. 
A method according to claim 14, wherein the step of
selecting the desired image includes the steps of:


sorting the candidates based in the order of
smallest distance between the stored feature data of the

set of candidates and the generated feature data of the
illustrative image; and
displaying the sorted candidates so a user may
select one of the candidates as the desired image.
A method according to any one of claims 9 to 15 and
including the step of selecting between three modes of

operation, namely a first mode of selecting a candidate
by additional information, a second mode by retrieval by

features, and a third mode consisting of a combination of
the first and second modes.
</CLAIMS>
</TEXT>
</DOC>
