<DOC>
<DOCNO>EP-0390110</DOCNO> 
<TEXT>
<INVENTION-TITLE>
Method of and apparatus for inspecting conductive pattern on printed board
</INVENTION-TITLE>
<CLASSIFICATIONS>G06T700	G06T700	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>G06T	G06T	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>G06T7	G06T7	</CLASSIFICATIONS-FOURTH>
<ABSTRACT>
A printed circuit board (11) is provided with a 
conductive pattern (P, R) and a through hole (H) thereon. 

Respective images of the conductive pattern and a through 
hole are photoelectrically read with an image reader (20). 

The conductive pattern image is magnified in size to obtain 
a magnified pattern image (PI
m
), while the hole image is 
magnified at different magnification factors to obtain 

magnified hole images (HI
n
, HI
n-i
). A ring image (RP) is 
defined by the difference of the magnified hole images. The 

overlapped region (WR) on which the ring image and the 
magnified pattern image overlap each other is then 

calculated, and a defect or an opening of the conductive 
pattern is detected by calculating the aperture angle (ϑ) of 

the overlapped image. 


</ABSTRACT>
<APPLICANTS>
<APPLICANT-NAME>
DAINIPPON SCREEN MFG
</APPLICANT-NAME>
<APPLICANT-NAME>
DAINIPPON SCREEN MFG. CO., LTD.
</APPLICANT-NAME>
</APPLICANTS>
<INVENTORS>
<INVENTOR-NAME>
HOKI TETSUO
</INVENTOR-NAME>
<INVENTOR-NAME>
KAKUMA HIROAKI
</INVENTOR-NAME>
<INVENTOR-NAME>
KANAI TAKAO
</INVENTOR-NAME>
<INVENTOR-NAME>
KITAKADO RYUJI
</INVENTOR-NAME>
<INVENTOR-NAME>
YANO HIRONOBU
</INVENTOR-NAME>
<INVENTOR-NAME>
HOKI, TETSUO
</INVENTOR-NAME>
<INVENTOR-NAME>
KAKUMA, HIROAKI
</INVENTOR-NAME>
<INVENTOR-NAME>
KANAI, TAKAO
</INVENTOR-NAME>
<INVENTOR-NAME>
KITAKADO, RYUJI
</INVENTOR-NAME>
<INVENTOR-NAME>
YANO, HIRONOBU
</INVENTOR-NAME>
</INVENTORS>
<DESCRIPTION>
The present invention relates to a method of and an
apparatus for inspecting an electrically-conductive pattern
on a printed board, and more particularly to an improvement
in inspecting a printed circuit board for positional
discrepancy between a wiring pattern and a through hole
which may be a mini-via hole.As small electronic elements having high performance
have been brought to the field of electronic engineering,
printed circuit boards on which fine electrically-conductive
patterns are formed at a high density have been utilized for
mounting and interconnecting these electronic elements. The
fine conductive patterns can be obtained by making the width
of wiring patterns narrow and by decreasing the diameter of
through holes. In particular, through holes having a
diameter of 0.1 mm to 0.5 mm are now utilized in multi-layer
boards in place of conventional through holes having
diameter of 0.8 mm, and the former are called as mini-via
holes.As the diameter of through holes becomes small, 
required are new techniques in various aspects such as
plating treatment, drilling and reliability test of the
through holes.In general, the accuracy in drilling is inferior to
that in photoetching process, and therefore, the through
holes are often formed at positions deviated form target
positions on conductive patterns. However, slight deviation
of the through holes from the target positions causes
substantially no problem in the electronic reliability of
the printed circuit board in the case where the diameter of
the through holes is about 0.8 mm, because relatively large
lands are provided around the target positions for accepting
the through holes.On the other hands, the diameter of the lands are
made small in proportion to the reduction of the diameter of
the through holes, and it becomes difficult to always form
the through holes in the lands by drilling. Accordingly,
positional deviation of the through holes from the lands
often affects the electronic reliability of the printed
circuit board, and inspection of the circuit board for the
positional deviations of the through holes becomes
important.The inspection of printed boards for positional
deviation of through holes requires two approaches, one of
which is electronic inspection and the other is visual 
inspection. A conventional apparatus for the visual
inspection is operable to detect leak lights from cracks of
a metal plate. However, the detection with the conventional
apparatus is not satisfactory when the same is applied to
the inspection of multi-layer
</DESCRIPTION>
<CLAIMS>
A method of inspecting a printed board for
pattern defects, said printed board being provided with an

electrically-conductive pattern and a through hole thereon,
said method comprising the steps of:


(a) photoelectrically reading an image of said
printed board;
(b) dividing said image of said printed board into a
pattern image representing said conductive pattern and a

hole image representing said through hole;
(c) obtaining first and second images by selectively
performing one of the steps of:


(c-1) obtaining said first image by magnifying said
pattern image and defining said second image with said hole

image itself;
(c-2) defining said first image with said pattern
image itself and obtaining said second image by magnifying

said hole image; and
(c-3) obtaining said first and second images by
magnifying said pattern image and said hole image,

respectively;
(d) detecting positional relation between said first
and second images and representing said positional relation

with a parameter value; and
(e) comparing said parameter value with a 
predetermined reference value and thereby judging whether

said conductive pattern has a non-allowable defect or not.
A method according to claim 1, wherein;

   the step (c-3) includes the steps of:

(c-3-1) magnifying said pattern image and thereby
obtaining said first image; and
(c-3-2) magnifying said hole image at two different
magnification factors and thereby obtaining first and second

magnified hole images, respectively, said second image
consisting of said first and second magnified hole images.
A method according to claim 2, wherein:

   the step (d) includes the steps of:

(d-1) calculating a difference between said first
and second magnified hole images and thereby obtaining a

ring image; and
(d-2) comparing said first image with said ring
image to detect said positional relation and determining

said parameter value in accordance with said positional
relation.
A method according to claim 3, wherein:

   the step (d-2) includes the steps of:

(d-2-1) obtaining an overlapped region image
representing an overlapped region on which said first image

and said ring image overlap each other; and
(d-2-2) comparing said overlapped region image with 
said ring image to detect said positional relation.
A method according to claim 4, wherein:

   the step (d-2-2) includes the steps of:

(d-2-3) counting a first number of pixels included
in said overlapped region image; and
(d-2-4) counting a second number of pixels included
in said ring image, said parameter value including said

first and second numbers;

   said method further including the step of:

   (d-3) comparing a ratio of said first number to said
second number with said reference value.
A method according to claim 5, wherein:

   the step (d-3) includes the steps of:

(d-3-1) multiplying said second number by said
reference value to obtain a reference pixel number, said

reference value being smaller than one; and
(d-3-2) comparing said first number with said
reference pixel number.
A method according to claim 4, wherein:

   the step (d-2-2) includes the steps of:

(d-2-3) obtaining a first position representing a
location of said ring image on an image plane;
(d-2-4) obtaining a second position representing a
location of said overlapped region image on said image

plane; and 
(d-2-5) calculating a distance between said first
and second positions and determining said parameter value as

a function of said distance.
A method according to claim 7, wherein:

   the step (d-2-3) includes the step of:

   calculating a center position of said ring image as
said first position; and

   the step (d-2-4) includes the step of:

   calculating a center-of-mass position of said
overlapped region image as said second position.
A method according to claim 7, wherein:

   the step (d-2-3) includes the step of:

   calculating a center-of-mass position of said ring
image as said first position; and

   the step (d-2-4) includes the step of:

   calculating a center-of-mass position of said
overlapped region image as said second position.
A method according to claim 4, further comprising the step
of:

   (f) detecting a center position of said hole image
to specify a location of said non-allowable defect on said

printed board.
A method according to claim 10, wherein:

   the step (f) includes the steps of:

(f-1) providing an assumed center line to said first 
magnified hole image and dividing said first magnified hole

image into first and second parts with said assumed center
line, said assumed center line crossing a contour of said

first magnified hole image at two points;
(f-2) counting respective areas of said first and
second parts within a range between said two points;
(f-3) calculating a difference between said
respective areas;
(f-4) comparing said difference between said
respective areas with a predetermined threshold value;
(f-5) repeating the steps (f-1) through (f-4) while
relatively moving said assumed center line and said first

magnified hole image until said difference between said
respective areas becomes smaller than said threshold value;

and
(f-6) determining said center position of said hole
image as a function of said assumed center line when said

difference between said respective areas becomes smaller
than said threshold value.
A method according to claim 11, wherein:

   the step (f-6) includes the step of:

   (f-6-1) calculating a center point between said two
points and thereby obtaining said center position of said

hole image.
A method according to claim 12, wherein:
 
   the step (d-2-2) includes the step of:

   (d-2-3) comparing said overlapped region image with
said ring image within said range between said two points

and generating said parameter value while relatively moving
said assumed center line and said first magnified hole

image; and

   the step (e) includes the step of:

(e-1) comparing said parameter value with said
reference value and obtaining a result of a judgement

regarding whether said conductive pattern has a non-allowable
defect or not every time it is concluded that said

difference between said respective area is smaller than said
threshold value, whereby a plurality of results of said

judgement are obtained; and
(e-2) selecting one result from said plurality of
results according to a predetermined selection rule.
A method according to claim 1 wherein:

   the step (d) includes the steps of:

(d-1) obtaining a center line of said second image;
(d-2) defining a reference point on said center
line;
(d-3) calculating a first distance from said
reference point to a contour of said first image as measured

in a reference direction which is not in parallel to said
center line; 
(d-4) calculating a second distance from said
reference point to a contour of said second image as

measured in said reference direction;
(d-5) comparing said first and second distances with
each other;
(d-6) repeating the steps (d-2) through (d-5) while
changing a position of said reference point on said center

line, whereby a plurality of comparison results are obtained
in the step (d-5);
(d-7) calculating a length of a break in said
conductive pattern as a function of said plurality of

comparison results; and
(d-8) determining said parameter value as a function
of said length of said break.
A method according to claim 14, wherein:

   the step (d-1) includes the steps of:

(d-1-1) providing an image plane on which said first
and second images are defined; and
(d-1-2) dividing said image plane into first and
second partial planes by said center line;

   the step (d-6) includes the step of:

   (d-6-1) performing the steps (d-2) through (d-5) on
each of said first and second partial planes and thereby

obtaining said plurality of comparison results for each of
said first and second partial planes;
 
   the step (d-7) includes the step of:

   (d-7-1) calculating said length of said break on
each of said first and second partial planes; and

   the step (d-8) includes the step of:

   (d-8-1) summing up respective length of said break
on said first and second partial planes and determining said

parameter value as a function of a summation thus obtained.
A method according to claim 15, wherein:

   the step (d-8-1) includes the steps of:

(d-8-2) calculating a circumference of said second
image; and
(d-8-3) calculating a ratio of said summation to
said circumference of said second image as said parameter

value.
A method according to claim 16, wherein:

   the step (d-8-2) includes the steps of:

defining a square circumscribing said second image;
and
calculating a circumference of said square as an
approximate value of said circumference of said second

image.
A method according to claim 1, wherein:

   the step (d) includes the steps of:

(d-1) obtaining an overlapped region image representing
an overlapped region on which said first

and second images overlap each other;
(d-2) defining a two-dimensional radial operator
having unit operators which extend from a

radiant center point to different directions;
(d-3) detecting end points of said overlapped region
image by applying said radial operator to said

overlapped region image while relatively moving
said radial operator and said overlapped region

image;
(d-4) detecting a center point of said second image;
and
(d-5) calculating an aperture angle of said
conductive pattern as a function of positional

relation between said end points and said
center point of said second image; and

the step (e) includes the step of:

(e-1) comparing said aperture angle with a
predetermined reference angle and thereby

judging whether said conductive pattern has a
non-allowable defect or not. 
A method according to claim 18, wherein:

each of the steps (c-2) and (c-3) includes the step of
magnifying said hole image at two different magnification

factors and thereby obtaining first and second magnified
hole images, respectively, said second image consisting

of said first and second magnified hole images; and

the step (d-1) includes the steps of:

(d-1-1) calculating a difference between said first and
second magnified hole images and thereby

obaining a ring image; and
(d-1-2) generating an image which represents a region
on which said first image and said ring image

overlap each other, whereby said overlapped
region image is obtained.
A method according to claim 18, wherein:

the step (d-3) includes the steps of:

(d-3-1) obtaining a logical pattern in which a result
of applying said radial operator to said

overlapped region image is represented by a
radial arrangement of arms each of which is a

chain of bits being at first and/or second
logical levels;
(d-3-2) within said arms, detecting a first arm only
including said first logical level and

detecting a second arm including said first
logical level at only one bit, said second arm

extending in a direction reverse to said first
arm; 
(d-3-3) identifying one of said end points by a current
position of said radiant center point at which

both of said first and second arms are
detected; and
(d-3-4) repeating the steps (d-3-2) and (d-3-3) while
relatively moving said radial operator and said

overlapped region image until all of said end
points are identified.
A method according to claim 1, wherein:

the step (c) obtains first and second images by
performing the step (c-2);

the step (d) includes the steps of:

(d-1) obtaining an overlapped region image
representing an overlapped region on which said

first and second images overlap each other;
(d-2) detecting a center point of said hole image;
(d-3) defining a two-dimensional radial operator
having unit operators which extend from a

radial center point to different directions;
(d-4) applying said radial operator to said
overlapped region image under the condition

where said radiant center point is positioned
at said center point of said hole image; and
(d-5) calculating an aperture angle of said overlapped
region image as a function of an

application result of said radial operator
obtained in the step (d-4); and
 
the step (e) includes the step of:

(e-1) comparing said aperture angle with a predetermined
reference angle and thereby judging

whether said conductive pattern has a non-allowable
defect or not.
A method according to claim 21, wherein:

said radial operator is a logical gate operator;
the step (d-5) includes the steps of:

(d-5-1) obtaining a logical pattern in which said
application result is represented by a radial

arrangement of arms each of which is a chain of
bits being at first and/or second logical

levels; and
(d-5-2) counting a number of said arms only including
said first logical level and then obtaining

said aperture angle as a function of said
number of said arms.
A method according to claim 22, further comprising the
steps of:


(f) detecting a size of said hole image;
(g) compressing said overlapped region image at a
compression ratio which is selected as a function of

said size and thereby obtaining a compressed image
which is employed in the step (d-4) as said

overlapped region image.
An apparatus for inspecting a printed board for
pattern defects, said printed board being provided with an

electrically-conductive pattern and a through hole thereon,
said apparatus comprising:


(a) image reader means for photoelectrically reading
an image of said printed board;
(b) means for dividing said image of said printed
board into a pattern image representing said conductive

pattern and a hole image representing said through hole;
(c) means for obtaining first and second images as a
function of said pattern image and said hole image,

respectively, where at least one of said first and second
images is magnified in size as compared with corresponding 

one of said pattern image and said hole image;
(d) means for detecting positional relation between
said first and second images and representing said

positional relation with a parameter value; and
(e) means for comparing said parameter value with a
predetermined reference value and thereby judging whether

said conductive pattern has a non-allowable defect or not.
An apparatus according to claim 24, wherein:

the means (d) includes the means of:

(d-1) means for obtaining an overlapped region image
representing an overlapped region on which said

first and second images overlap each other;
(d-2) logic circuit means for defining a two-dimensional
radial operator having unit

operators which extend from a radiant center
point to different directions;
(d-3) means for serially supplying respective parts
of said overlapped region image to said logic

circuit means;
(d-4) means for detecting end points of said
overlapped image as a function of output

signals of said logic circuit means;
(d-5) means for detecting a center point of said
second image; and
(d-6) means for calculating an aperture angle of said
conductive pattern as a function of positional

relation between said end points and said
center point of said second image; and

the means (e) includes the means of:

(e-1) means for comparing said aperture angle with a
predetermined reference angle and thereby

judging whether said conductive pattern has a
non-allowable defect or not. 
An apparatus according to claim 24, wherein:

the means (c) includes the means of:

(c-1) means for magnifying said hole image and
thereby obtaining a magnified hole image;

the means (d) includes the means of:

(d-1) means for obtaining an overlapped region image
representing an overlapped region on which said

pattern image and said magnified hole image
overlap each other;
(d-2) means for detecting a center point of said hole
image;
(d-3) logic circuit means for defining a two-dimensional
radial operator having unit

operators which extend from a radial center
point to different directions;
(d-4) means for supplying said overlapped image to
said logic circuit means such that said radiant

center point is positioned at said center point
of said hole image; and
(d-5) means for calculating an aperture angle of said
overlapped region image as a function of

outputs of said logic circuit means; and

the means (e) includes the means of:

(e-1) means for comparing said aperture angle with a
predetermined reference angle and thereby

judging whether said conductive pattern has a
non-allowable defect or not.
</CLAIMS>
</TEXT>
</DOC>
