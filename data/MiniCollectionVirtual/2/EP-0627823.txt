<DOC>
<DOCNO>EP-0627823</DOCNO> 
<TEXT>
<INVENTION-TITLE>
Communication protocol for communicating control data
</INVENTION-TITLE>
<CLASSIFICATIONS>H04Q900	G06F1300	H04Q900	G06F1300	H04B120	H04B120	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>H04Q	G06F	H04Q	G06F	H04B	H04B	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>H04Q9	G06F13	H04Q9	G06F13	H04B1	H04B1	</CLASSIFICATIONS-FOURTH>
<ABSTRACT>
A communication protocol can communicate data among 
apparatus by a simple procedure erriciently. In an AV center 

(1) (D2B control unit (1a)), for example, a communication mode 
thereof is set in the master transmission mode, and a packet of 

one frame is transmitted to a TV (2). In the TV 2 (D2B control 
unit (2a)), its communication mode is set in the slave reception 

mode. When a packet of one frame from the AV center (1) is 
received by the TV (2), a communication between the AV center 

(1) and the TV (2) is ended. 

</ABSTRACT>
<APPLICANTS>
<APPLICANT-NAME>
MATSUSHITA ELECTRIC IND CO LTD
</APPLICANT-NAME>
<APPLICANT-NAME>
SONY CORP
</APPLICANT-NAME>
<APPLICANT-NAME>
MATSUSHITA ELECTRIC INDUSTRIAL CO., LTD.
</APPLICANT-NAME>
<APPLICANT-NAME>
SONY CORPORATION
</APPLICANT-NAME>
</APPLICANTS>
<INVENTORS>
<INVENTOR-NAME>
IMAURA TOSHIHIRO
</INVENTOR-NAME>
<INVENTOR-NAME>
IWAMOTO KOJI
</INVENTOR-NAME>
<INVENTOR-NAME>
KOTABE NORIKO
</INVENTOR-NAME>
<INVENTOR-NAME>
MAKI SHIGERU
</INVENTOR-NAME>
<INVENTOR-NAME>
OSAKABE YOSHIO
</INVENTOR-NAME>
<INVENTOR-NAME>
SOUMA YOKO
</INVENTOR-NAME>
<INVENTOR-NAME>
TANAKA SHIGEO
</INVENTOR-NAME>
<INVENTOR-NAME>
YAMAZAKI HIROSHI
</INVENTOR-NAME>
<INVENTOR-NAME>
IMAURA, TOSHIHIRO
</INVENTOR-NAME>
<INVENTOR-NAME>
IWAMOTO, KOJI
</INVENTOR-NAME>
<INVENTOR-NAME>
KOTABE, NORIKO
</INVENTOR-NAME>
<INVENTOR-NAME>
MAKI, SHIGERU
</INVENTOR-NAME>
<INVENTOR-NAME>
OSAKABE, YOSHIO
</INVENTOR-NAME>
<INVENTOR-NAME>
SOUMA, YOKO
</INVENTOR-NAME>
<INVENTOR-NAME>
TANAKA, SHIGEO
</INVENTOR-NAME>
<INVENTOR-NAME>
YAMAZAKI, HIROSHI
</INVENTOR-NAME>
</INVENTORS>
<DESCRIPTION>
The present invention relates to a communication
protocol for use in communication among AV (audio-video)
equipment, communication among computers and communication
among AV equipment and computers, for example.It is customary that the AV system is formed of a
plurality of AV equipment, such as a TV (television receiver),
an MDP (multi-media player), a VTR (video tape recorder), an AV
center (switcher) or the like.In the AV system, a plurality of AV equipment, such
as TV, MDP, VTR and AV center, are connected together by means
of video signal lines, audio signal lines and control signal
lines (control buses). A variety of control signals and data
(e.g., packets of predetermined formats) are supplied to the AV
equipment via the control buses, whereby the respective AV
equipment are operated in a ganged fashion.Specifically, according to the AV system, when a play
button of the VTR is operated, a packet is output to the TV and
the AV center from the VTR, whereby the TV and the AV center are
powered. Further, the AV center is switched such that the VTR
and the TV are connected together, and image and sound
reproduced by the VTR are output from the VTR.The packets are communicated in the following
procedure:
(T1) Routing information transmission(T2) Command (CMD) transmission (T3) Request (REQ) transmission(T4) Get answer (GET-ANS) transmission answer (ANS)
reception(T5) End (END) transmissionInitially, an AV equipment which transmits a packet
first is set to "master apparatus" and an AV equipment which
receives such packet is set to "slave apparatus". Routing
information is transmitted from the master apparatus to the
slave apparatus (T1). At that time, the slave apparatus is
locked so that it is inhibited from receiving a packet
transmitted from other AV equipment.Then, a command (CMD) which turns on the power supply
is transmitted from the master apparatus to the slave apparatus
(T2). A request (REQ) which inquires the processing to the
command is further transmitted from the master apparatus to the
slave apparatus (T3).Then, in order to obtain an answer (ANS) for REQ, the
get answer (GET-ANS) is transmitted from the master apparatus to
the slave apparatus (T4). The GET-ANS is repeatedly transmitted
until the answer ANS can be obtained from the slave apparatus.
When the answer (ANS) can be obtained from the slave apparatus,
an end (END) representing the end of the processing is
transmitted (T5). At that time, the slave apparatus which is
set in the locked state is set in the unlock state. Therefore,
the
</DESCRIPTION>
<CLAIMS>
A method of communicating data between a master apparatus and a
slave apparatus, the format comprising:


a command (CMD) packet informing an operation command;
a status request (REQ) packet informing a status request of some apparatus;
a data request (DATAREQ) packet informing a data request to some
apparatus;
a data (DATA) packet informing data;
an answer (ANS) packet informing answer data for previous request; and
an automatic status sending packet informing a status of an apparatus;
said method comprising:

transmitting from said master apparatus at least said data (DATA) packet; and
receiving said data (DATA) packet transmitted from said master apparatus;
characterised in that

   if said data packet (DATA) comprises a plurality of frames, then a
lock mode is set in terms of communicating with said slave apparatus,

   wherein in the lock mode the slave apparatus is locked against receiving
packets from other equipment than the master apparatus;

   the format further comprises a simulcast packet informing simulcast data for a
plurality of receiving apparatuses; and

   if a simulcast packet from other equipment than the master apparatus is
transmitted to said slave apparatus during the lock mode, the simulcast packet is

received by the slave apparatus despite the lock mode and is stored in a memory.
A method according to claim 1, wherein the stored simulcast packet is
retrieved from the memory after the lock mode has been released.
A method according to claim 1 or 2, wherein the lock mode is
released when the last frame of said data packet (DATA) is processed by the slave 

apparatus.
A method according to any one of claims 1 to 3, wherein a control
signal is immediately sent to a main control unit (18) of the slave apparatus (2) when

the storing of the simulcast packet starts.
A method according to any one of claims 1 to 4, wherein if said data

packet (DATA) comprises a plurality of frames, then the number of said plurality of
frames is controlled so as not to exceed a predetermined number.
A method according to any one of claims 1 to 5, wherein if there is no
answer from a slave apparatus after a predetermined time since a master apparatus

sent some packet to said slave apparatus, then said master apparatus sends again
(S81) the same kind of packet as that sent before (Fig 12).
A method according to any one of the preceding claims, wherein if a
predetermined time passed after said slave apparatus is locked by some data from a

master apparatus, then said slave apparatus unlocks by itself.
A method according to any one of the preceding claims, wherein said
master apparatus sends said plurality of frames in the data packet (DATA) in said

lock mode and there is a predetermined waiting time between said plurality of frames
sent (Fig 18).
A method according to any one of the preceding claims, wherein said
slave apparatus sends an acknowledge signal (ACK) to said master apparatus having

received one frame of a data packet.
A method according to claim 9, wherein said master apparatus checks
the number of an acknowledge signal (ACK) sent by said slave apparatus, and

detects for an error. 
A method according to claim 10, wherein if said master apparatus
detects an error, then said master apparatus sends again the same frame of the data

packet (DATA) after a predetermined time since said master apparatus sent said
frame of the data packet (DATA) (Fig 21).
A method according to claim 11, wherein if said master apparatus
sends again the same frame of the data packet (DATA) a predetermined number of

times, then this operation is aborted.
A method according to claim 6 or any claim dependent thereon,
wherein if there is no answer from said slave apparatus after said master apparatus

sent again some packet a predetermined number of times, then said master apparatus
aborts this operation.
A method according to any preceding claim, wherein said data packet
(DATA) has a byte column which shows a number of data bytes in one frame in said

data packet (DATA).
A method according to claim 14, wherein said slave apparatus
compares a number of data bytes read out from said byte column in said data packet

(DATA) and a number of data bytes really received, and if these numbers compared
are different from each other, then it is determined that an error occurred.
A method according to any preceding claim, wherein in said data
packet (DATA) , each frame of said data packet (DATA) is sent a plurality of times.
A method according to claim 16, further comprising a data-attribute
column which shows how many times each frame is sent in each frame of said data

packet (DATA).
</CLAIMS>
</TEXT>
</DOC>
