<DOC>
<DOCNO>EP-0658842</DOCNO> 
<TEXT>
<INVENTION-TITLE>
Watch dog timer device
</INVENTION-TITLE>
<CLASSIFICATIONS>G06F1100	G06F1130	G06F1130	G06F1100	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>G06F	G06F	G06F	G06F	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>G06F11	G06F11	G06F11	G06F11	</CLASSIFICATIONS-FOURTH>
<ABSTRACT>
A watch dog timer capable of detecting a runaway state of a system 
including a CPU (1) and DMAC (3) has a watch dog timer (2) and a count clock 

controller (7). The watch dog timer (2) counts the number of clock and stores a 
count result, and transmits a watch dog time out signal to other devices in the 

system if the number of clocks is over a predetermined value. The count clock 
controller (7) receives the clock and transmits the clock to the watch dog timer, 

and halts the transmission of the clock to the watch dog timer when the CPU 
transmits a bus permission signal to the DMAC. 


</ABSTRACT>
<APPLICANTS>
</APPLICANTS>
<INVENTORS>
</INVENTORS>
<DESCRIPTION>
The present invention relates to a watch dog timer device used for a 
microprocessor system, and, in particular, to a watch dog timer device for use 
in a highly reliable microprocessor systems, wherein a program runaway must 
be detected, having a system bus master other than a Central 
Processing Unit (CPU) such as a Direct Memory Access Controller (DMAC), 
a Dynamic Random Access Memory (DMAC) refresh (RAS only), and the 
like. More specifically, the present invention relates to a watch dog timer device 
according to the preamble part of claim 1. Conventionally, a function for resetting a system is adopted to detect an 
occurrence of a program runaway in order to increase the reliability of a 
system containing a CPU. A watchdog timer is normally used for this 
purpose. The watchdog timer sets a value on a preset timer for a time period 
which is a time-out from a program runaway, and acts to implement a normal 
timer clearance within the range of the set value by a CPU instruction. In the 
case where the program is functioning normally under set conditions of this 
type, before the timing of a time-out detected by the timer, the timer is 
cleared by the CPU so that the system is considered to operate normally. As opposed to this, in the case where a timer clearance for the timer 
has not been executed by a CPU instruction but is mainly caused by an 
abnormality such as a program runaway or the like, the watch dog timer which 
has not been cleared overflows from a time-out. Specifically, an abnormality 
signal is generated by the watch dog timer corresponding to an abnormal 
operation such as a program runaway, and an overflow signal is transmitted to 
a CPU and other external devices. The system is optionally reset using this 
overflow signal from the watch dog timer device, or a non-maskable interrupt 
(NMI) process or the like is carried out, so that the system is finally returned 
to a normal operation state.  
 There is a microprocessor system including a bus master such as a 
DMAC or the like. In this type of the system the CPU in the system cannot 
clear a time period set in the watch dog timer device during the operation of 
the DMAC. For this reason, the existence of a bus master such as a DMAC or 
the like in a microprocessor system has a large influence on the use of a watch 
dog timer. Specifically, while the DMAC uses the bus for a direct memory 
access operation for internal and external memories such as, for example, a 
cache memory, external hard disk drives, and the like, it is not
</DESCRIPTION>
<CLAIMS>
A watch dog timer device for monitoring of a CPU (1) 
connected to said watch dog timer device, comprising a 

runaway detection circuit (72) for counting a count clock 
signal, outputting a reset signal to said watch dog timer 

device when a predetermined number has been counted and 
being periodically reset by said CPU (1) when a program is 

running in a normal operation,
characterized in that
said runaway detection circuit (7) receives a bus 
permission signal (55) which is output from said CPU (1) for the 

purpose of leading a bus master circuit to operate in place 
of said CPU (1); and, 
when the bus permission signal (55) is output from said 
CPU, said runaway detection circuit (72) is forced to be reset 

during the bus permission signal (55) is being output. 
A watch dog timer device as claimed in claim 1, 
characterized in that said runaway detection circuit (72) 

comprises a reset terminal (R) for forcibly resetting said 
runaway detection circuit (72) by supplying a signal to said 

reset terminal. 
A watch dog timer device as claimed in claim 1 or 2, 
characterized in that said bus permission signal (55) is a 

signal indicative of initiating a memory access (DMA) 
transfer operation.  

 
A watch dog timer device as claimed in any of the 
preceding claims, characterized in that said bus permission 

signal (55) is a signal given to a memory access controller 
(DMAC) (3). 
</CLAIMS>
</TEXT>
</DOC>
