<DOC>
<DOCNO>EP-0655553</DOCNO> 
<TEXT>
<INVENTION-TITLE>
Generation of a diagnostic signal when the current through a power transistor reaches a level close to a limit current
</INVENTION-TITLE>
<CLASSIFICATIONS>G01R3126	G01R19165	F02P302	F02P305	H03K1760	H03K1764	G01R3126	G01R19165	H03K1708	H03K1708	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>G01R	G01R	F02P	F02P	H03K	H03K	G01R	G01R	H03K	H03K	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>G01R31	G01R19	F02P3	F02P3	H03K17	H03K17	G01R31	G01R19	H03K17	H03K17	</CLASSIFICATIONS-FOURTH>
<ABSTRACT>
A diagnostic signal, indicative of the reaching of a 
predefined level, lower than a fixed maximum limit 

value, by the current flowing through a power transistor, 
is generated while employing a single comparator 

of a reference voltage with the voltage present across 
a sensing resistance, thus preventing problems arising 

from different offset characteristics of distinct comparators. 
By the use of current mirrors, the generation 

of a diagnostic signal when the current reaches a level 
that can be fixed very close to the limiting value, may 

be reliably triggered, irrespectively of the offset 
characteristic of the single comparator employed. 


</ABSTRACT>
<APPLICANTS>
<APPLICANT-NAME>
CONS RIC MICROELETTRONICA
</APPLICANT-NAME>
<APPLICANT-NAME>
ST MICROELECTRONICS SRL
</APPLICANT-NAME>
<APPLICANT-NAME>
CONSORZIO PER LA RICERCA SULLA MICROELETTRONICA NEL MEZZOGIORNO - CORIMME
</APPLICANT-NAME>
<APPLICANT-NAME>
STMICROELECTRONICS S.R.L.
</APPLICANT-NAME>
</APPLICANTS>
<INVENTORS>
<INVENTOR-NAME>
PALARA SERGIO
</INVENTOR-NAME>
<INVENTOR-NAME>
SUERI STEFANO
</INVENTOR-NAME>
<INVENTOR-NAME>
PALARA, SERGIO
</INVENTOR-NAME>
<INVENTOR-NAME>
SUERI, STEFANO
</INVENTOR-NAME>
</INVENTORS>
<DESCRIPTION>
The invention relates to a circuit of the kind stated in the preamble of claim 1. Such a circuit is for example used
for controlling the energy stored in an inductive
load, where it is important to make available a diagnostic
signal when the current in the inductor reaches a
preset level.A driving system for an inductor is depicted in
Fig. 1. The inductor L is connected between a supply
node Vs and a transistor T1 that acts as a switch,
driven by a drive circuit (DRIVE) to an input of which
a signal VIN is applied.As shown in Fig. 2, when VIN goes high, T1 turns-on
and a current Ic starts to flow through the inductor,
increasing as a linear function of time. For
any value I reached bv the current, the corresponding
energy that is stored in the inductance is given by:
E = 12 LI2The power stage normally comprises a circuit for
limiting the maximum current in order to avoid destruction
of the transistor, therefore in the diagram of
Fig. 2, the current is limited to a maximum value Imax.
Moreover, if the transistor T1 must be turned-off
always at the same level of energy stored in the
inductor, it is necessary to produce a signal when the
current I reaches a preset level ID, in order to
maximize the energy stored in the inductor at the end
of each charging phase, that is when T1 turns off. This
is often required, for example, in electronic sparkplug
driving, where it is also necessary that the level
ID at which the turning off occurs be very close to the
maximum limit current Imax.In conventional systems, this is achieved in the
manner depicted in Fig. 3. A maximum current limiting
circuit A1 (LIMITATOR) intervenes on the drive circuit 
(DRIVE) when the voltage drop on the sensing resistance
Rs, due to Ic, equals the reference voltage E1, that is
when Rs*Imax=E1.Similarly, a diagnostic signal VD of Fig. 2, is
produced when Rs*ID=E2, considering that, for the above
reported reasons, ID may have a value very close to
Imax. To this purpose, a second diagnostic comparator
(DIAGNOSTIC) A2 is employed.Given that ID must be lower than Imax, though close
thereto, E1 must also be greater than E2 but must have
a value very close thereto. The absolute values of E1
as well as of E2 should on the other hand be as low as
possible, because to them corresponds a voltage drop on
Rs due to the current Ic. Such a voltage drop is in
series with the saturation voltage of the transistor
and causes power dissipation, therefore the voltage on
Rs and therefore also E1 and E2 should not be greater
than few 10mV. This means that if a
</DESCRIPTION>
<CLAIMS>
A circuit for limiting the maximum current (I
max
)
through a power transistor (T
1
) and for generating a
diagnostic signal (V
D
), indicative of the reaching by
the current (I
c
) through said power transistor
T
1
 of a preset level (I
D
), lower than a maximum current
level (Imax), comprising a differential

amplifier (A) having an output on which is generated a
signal whose amplitude is a function of the difference

between a reference voltage (E
1
) and a voltage present
across a sensing resistance (R
s
) through which said
current (I
c
) flows functionally coupled to respective
inputs of said amplifier and at least a first

transistor (T
7
) having a control terminal coupled to
the output of said amplifier (A) and functionally

connected to subtract by sinking it to a common ground
node of the circuit a portion (I
7
) of a driving current
(I
5
) of said power transistor (T
1
) produced by a
driving circuit for limiting said current (I
c
),
characterized by comprising


at least a second transistor (T
6
) having a
control terminal coupled to the output of said

amplifier (A);
current operating means (T
4
) forcing through
said second transistor (T
6
) a current (I
4
)
lower than said current (I
7
) subtracted by said first
transistor (T7);
a threshold circuit (T
3
, R
1
), sensing the 
voltage present across said second transistor (T
6
), and
producing said diagnostic signal (V
D
).
The circuit as defined in claim 1, characterized
in that said current operating means are in the form

of a current mirror circuit (T
2
, T
4
, T
5
), a first output
branch thereof (T
4
) forcing said current (I
4
) through
said second transistor (T
6
), and a second output branch
thereof (T
5
) forcing said drive current (I
5
) to a
control node of said power transistor (T
1
).
A circuit according to claim 2, wherein the
transistor (T
4
) of said first branch of the current
mirror that forces said current (I
4
) through said
second transistor (T
6
) has a smaller emitter area than
the transistor (T
5
) of said second branch of the
current mirror that forces said drive current (I
5
).
A circuit according to claim 3, wherein said
power transistor (T
1
) is driven through a stage
composed of a fifth transistor (T
9
), driven by a
current equivalent to the drive current

(I
5
) forced by said transistor of said second branch of

the current mirror (T
2
,T
4
,T
5
) less said current portion (I
7
),
subtracted by said first transistor (T
7
).
The circuit according to claim 4, characterized
by comprising a sixth transistor (T
8
), that forms
together with said fifth transistor (T
9
), and a seventh,
diode-configured, transistor (T
10
), a second current mirror
with said sixth transistor (T
8
) absorbing current from
a driving node of said threshold circuit (T
3
, R
1
); the 
ratio among the respective emitter areas of said fifth,

sixth and seventh transistors (T
9
, T
8
, T
10
) being such
as to render the triggering condition of said threshold

circuit (T
3
, R
1
) independent from variation of the
current gain of the power transistor (T
1
).
</CLAIMS>
</TEXT>
</DOC>
