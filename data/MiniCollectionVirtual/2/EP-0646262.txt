<DOC>
<DOCNO>EP-0646262</DOCNO> 
<TEXT>
<INVENTION-TITLE>
METHOD AND APPARATUS FOR COMPARING DATA SETS.
</INVENTION-TITLE>
<CLASSIFICATIONS>G06T720	G06T720	H04N514	H04N514	H04N726	H04N726	H04N732	H04N732	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>G06T	G06T	H04N	H04N	H04N	H04N	H04N	H04N	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>G06T7	G06T7	H04N5	H04N5	H04N7	H04N7	H04N7	H04N7	</CLASSIFICATIONS-FOURTH>
<ABSTRACT>
A method and apparatus for generating a sequence of displacement vectors and associated minimal error values. The vectors and associated values represent the best match of a current block (40) of elements of a first frame (74) of a signal with one of a plurality of search blocks (61) of elements located within a corresponding search window (41) of a second frame (72, 73). A first stream of data, representing the elements of the first frame is transmitted to a linear array (70) of processing units (puO-pu255); a second stream of data, representing the elements of the second frame is transmitted to the array; a hybrid stream of data from the elements of the second stream is synthesized such that the elements of the hybrid stream are aligned in time with the elements of the first stream so as to enable each processing unit of the array to compute an error between a particular current block (40) and a different search block of the corresponding search window (41). The error is a measure of the difference between two blocks of elements. Specifically, the errors are computed between each current block and each search block of the corresponding search windows such that each processing unit of the array outputs the computed error essentially immediately after the previous unit outputs the error.
</ABSTRACT>
<APPLICANTS>
<APPLICANT-NAME>
FURTEK FREDERICK C
</APPLICANT-NAME>
<APPLICANT-NAME>
FURTEK FREDERICK C
</APPLICANT-NAME>
</APPLICANTS>
<INVENTORS>
<INVENTOR-NAME>
FURTEK FREDERICK C
</INVENTOR-NAME>
<INVENTOR-NAME>
FURTEK FREDERICK C
</INVENTOR-NAME>
</INVENTORS>
<DESCRIPTION>
 METHOD AND APPARATUS FOR COMPARING DATA SETSFIELD OF THE INVENTION This invention relates to a method and apparatus for comparing sets of data. It is especially useful for estimating inter-frame motion of video data in a video signal and will be described in that context.BACKGROUND OF THE INVENTION There are numerous instances in which it is desirable to compare sets of data. Many of these involve recognition of a data set by comparing the set whose identity is unknown with a multitude of known data sets to locate a best match. Illustrative such applications are the extraction of meaningful information from bad communication channels and the recognition of characters and other objects presented on film, video or other display.In other applications, identification per se may not be the focus but the object of the comparison is still to find the best match. Examples include the comparison of a fragment of a gene sequence with an entire gene sequence or the comparison of sequences of computer software. One specific application is in determining the relative movement of video data between the frames of a video signal. In this case, the data set of interest is a block of pixels in the video frame. The motion of such a block of pixels is quantified by a displacement vector, which indicates the best match for a block of a current frame with one of a plurality of blocks found within a search window defined in a previous frame. In general, the error between a first set of data having X elements and a second set of data also 

having X elements in a search window can be represented mathematically byX-l Error(Δx) = Σ |C(x) - P (x+Δx) | x=0 where x is a position in the set of data, Δx is the relative displacement between the position of the first set of data and the position of the second set of data, C(x) is a measure of a parameter (or parameters) of interest at position x in the first set of data and P(x+Δx) is a measure of the parameter (or parameters) of interest at position x+Δx in the second set of data. Thus, the error is calculated by determining for each element in the first set of data, the absolute value of the difference between the parameter of interest at that element and the parameter of interest at the corresponding element of the second set of data and summing these absolute values for all the elements in the first set of data.In like fashion, the error can be calculated between data sets organized in more than one dimension. For the case of motion estimation in a video display which involves
</DESCRIPTION>
<CLAIMS>
 CLAIMS 1. An apparatus for comparing a first frame of a signal with respect to a second frame comprising: a linear array of processing units, wherein each of the units determines an error, which is a measure of a difference between a current block of elements of the first frame and one of a plurality of search blocks of elements of the second frame, each of the plurality of the search blocks being located within a search window, each of the processing units comprising a plurality of inputs, a plurality of outputs, and synchronization means for synchronizing input data representing the elements of the first frame with input data representing the elements of the second frame, such that each unit of the array determines the error between the current block and a different search block of the corresponding search window. 2. The apparatus of claim 1 wherein the array receives continuous streams of data representing the elements of the first and second frames, and the array outputs a continuous sequence of error values, each of which error values corresponds to the error between the current block and one of the search blocks.
3. The apparatus of claim 1 wherein the plurality of inputs of each of the processing units comprises a first input for data representing the elements of a first portion of the search window, a second input for data representing the elements of a second portion of the search window, and a current input for data representing the elements of the current block.
4. The apparatus of claim 3 wherein the plurality of inputs of each of the processing units further comprises a synthesized input for data 


representing the elements of a search block, the synthesized input elements being aligned in time with the current block elements, so that each processing unit determines the error between the search block and the current block.
5. The apparatus of claim 4 wherein the synchronization means of each of the processing units comprises means for combining the data transmitted to the first and second inputs in order to generate a synthesized bit stream for the synthesized input to the next processing unit of the array.
6. The apparatus of claim 1 wherein the synchronization means further comprises means for delaying the data transmitted to the current input, so as to align the elements of the current block with the elements of a different search block, for input to the next processing unit.
7. The apparatus of claim 1 wherein each of the processing units further comprises means for determining the absolute value of the difference between two digital signals representing one element of the current block and one element of one of the search blocks. 8. The apparatus of claim 7 wherein each of the processing units further comprises means for adding the absolute values of the differences between the elements, such that, after all the bits representing the elements of the current block and a search block have been supplied to a particular processing unit, the accumulated difference between the elements of the current block and the appropriate search block is stored in the means for adding.
9. The apparatus of claim 1 wherein the plurality of outputs of each of the processing units 



comprises a lower output, an upper output, and a current output.
10. The apparatus of claim 9 wherein the outputs of each of the processing units, except for the last processing unit in the array, are connected to the corresponding inputs of the next unit.
11. The apparatus of claim 1 wherein the data transmitted to the upper, the lower and the current inputs represents the elements arranged by columns, and the elements of each column enter from top to bottom.
12. The apparatus of claim 1 wherein the plurality of inputs of each of the processing units further comprises a start of block input and an end of block input for providing signals that indicate respectively the first and the last elements of the current block.
13. The apparatus of claim 1 wherein the plurality of inputs of each of the processing units further comprises an end of column input for providing signals that indicate the end of each column of elements transmitted to the current input.
14. The apparatus of claim 1 wherein the plurality of inputs of each of the processing units further comprises a low order byte error input and a high order byte error input for transmitting the error value generated by the previous processing unit in the array. 15. The apparatus of claim 1 wherein the plurality of outputs further comprises a start of block output, an end of block output, a low order byte error output, and a high order byte error output.
16. The apparatus of claim 8 wherein the means for adding the absolute values of the differences between the pixels is an accumulator. 


 17. The apparatus of claim 16 wherein each of the processing units further comprises means for outputting the error value stored in the accumulator. 18. The apparatus of claim 17 wherein the outputting means transfers a first byte of the error from the accumulator to a low order byte error output in response to a signal applied to an end of block input and transfers a second byte of the error from the accumulator to a high order error output in response to the end of block input signal, which is delayed such that the accumulator transfers the second byte after transferring the first byte.
19. The apparatus of claim 1 wherein the array comprises 256 processing units and the search window comprises 256 search blocks.
20. The apparatus of claim 6 wherein the means for delaying delays the bit stream applied to the current input by the number of bits corresponding to °ne element of the frame.
21. The apparatus of claim 1 further comprises a minimum error module having start of block, end of block, high order byte error, and low order byte error inputs that are. connected to the corresponding outputs of the last processing unit of the array, the minimum error module determining the minimum value among the error values generated by each of the processing units.
22. The apparatus of claim 21 wherein the minimum error module comprises a first register means and a comparator; the comparator compares input error data transmitted to the minimum error module at the high and the low order byte error inputs to a value stored in the first register means; and, if the value of the input error is less than the value stored in the 


first register means, the input error data is stored in the first register means.
23. The apparatus of claim 22 wherein the minimum error module further comprises a second register means for data representing a position in the array of the processing unit that generated the error value stored in the first register means.
24. A method for generating a sequence of displacement vectors and associated minimal error values, each of which vectors and values represent the best match of a current block of elements of a first frame of a signal with one of a plurality of search blocks of elements located within a corresponding search window of a second frame, comprising: transmitting a first stream of data, representing the elements of the first frame, to a linear array of processing units; transmitting a second stream of data, representing the elements of the second frame, to the array; synthesizing a hybrid stream of data from the elements of the second stream, such that the elements of the hybrid stream are aligned in time with the elements of the first stream so as to enable each processing unit of the array to compute an error between a particular current block and a different search block of the corresponding search window, which error is a measure of the difference between two blocks of elements; and computing the errors between each current block and each search block of the corresponding search windows such that each processing unit of the array outputs the computed error essentially immediately after the previous unit outputs the error. 


 25. The method of claim 24 wherein each processing unit of the array begins computing the error for a new current block essentially immediately after outputting the error for the previous current block.
26. The method of claim 24 wherein the second stream of data represents the pixels of the upper and lower portions of the search windows of the second frame. 27. The method of claim 26 wherein the step of synthesizing comprises combining data representing the upper and the lower portions,of the search window into the hybrid stream of data.
28. The method of claim 27 wherein the step of combining comprises periodically inserting the data representing the lower portion of the search window into the hybrid stream of data.
29. The method of claim 24 further comprising the step of delaying the first stream of data relative to the second stream at each processing unit of the array.
30. The method of claim 24 further comprising the step of transmitting an end of block signal to the array. 31. The method of claim 30 further comprising the step of outputting the errors generated by each array element in response to the end of block signals. 

</CLAIMS>
</TEXT>
</DOC>
