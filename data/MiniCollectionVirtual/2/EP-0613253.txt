<DOC>
<DOCNO>EP-0613253</DOCNO> 
<TEXT>
<INVENTION-TITLE>
Digital phase comparators.
</INVENTION-TITLE>
<CLASSIFICATIONS>H03D1300	H03D1300	H03K522	H03K526	H03L708	H03L7085	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>H03D	H03D	H03K	H03K	H03L	H03L	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>H03D13	H03D13	H03K5	H03K5	H03L7	H03L7	</CLASSIFICATIONS-FOURTH>
<ABSTRACT>
A novel method and apparatus providing an all digital phase comparator 
of two binary signals which employs a type of cross correlation of two binary 

signals and provides a 2bit binary word uniquely representative of phase 
alignment. The method can be carried out using a pair of flip-flop (FF) circuits, 

each FF having a clocking input and a data input, and where each FF has a 
delay in series with its data input. 


</ABSTRACT>
<APPLICANTS>
<APPLICANT-NAME>
ADVANCED MICRO DEVICES INC
</APPLICANT-NAME>
<APPLICANT-NAME>
ADVANCED MICRO DEVICES, INC.
</APPLICANT-NAME>
</APPLICANTS>
<INVENTORS>
<INVENTOR-NAME>
GUO BIN
</INVENTOR-NAME>
<INVENTOR-NAME>
GUO, BIN
</INVENTOR-NAME>
</INVENTORS>
<DESCRIPTION>
This invention relates to digital phase comparators, and phase 
analyzers and particularly to an all digital method and apparatus for 
phase alignment, delay regulation and signal synchronization. Reference is made to our European patent applications being filed 
concurrently herewith which relate to aspects of high data rate digital 
data/clock recovery systems, the applications being based on the 
following US applications: 
1. "All Digital High Speed Algorithmic Data Recovery Scheme 
and Apparatus Using Locally Generated Compensated Broad Band Time Ruler 
and Edge Position Averaging", Serial Number 08/021,924; filing date 
Feb. 24, '93; inventor Bin Guo; AMD Docket Number A895. 2. "Digital Full Range Rotating Phase Shifter", Serial Number 
08/021,691; filing date Feb. 24, '93; inventor Bin Guo; AMD Docket 
Number A894.  In clock/data recovery and various phase/timing control 
operations, phase or timing adjustments are often performed after a 
phase or timing error is detected. A phase detector or comparator is 
necessary for both traditional, analog-based Phase Locked Loop (PLL) 
and for digital, delay line based systems. Even in analog based PLL 
systems, it is known for the phase detector to use digital circuits, 
such as the balanced modulator circuit using exclusive-OR gates and the 
sequential phase detector or so-called "9 gate phase detector" using a 
number of cross-coupled RS flip-flops. However, the  
 
output from those types of phase detector circuits can not be directly used by 
the subsequent circuitry which receives the output signal representative of 
phase error. This is because the magnitude of the phase error is represented 
either in the form of pulse width of the output signal, such as the case of the 
balance modulator, or in a form of the pulse width difference between two 
output signals, such as the case of the sequential phase detector. In analog 
based phase detector systems, the function of the phase detector is to provide 
an output voltage proportional to the phase difference of two periodic input 
signals at the same frequency. Conversion of pulse width to voltage is then 
necessary. The digital output signal from the phase detector is converted into 
an analog voltage by using, for example, a so called charge pump and a low 
pass filter. This analogue voltage error signal is then used to control a Voltage 
Controlled Oscillator (VCO), which changes the oscillator frequency to slowly 
achieve the phase adjustment or alignment over a number of cycles, since the 
amount
</DESCRIPTION>
<CLAIMS>
A method for comparing the phase of first and second binary 
signals comprising: 

   sampling each said binary signal by the other, and storing their 
level in a pair of latches; 

   combinatorially analyzing said stored values in said latches; and 
   providing a unique logic level indication of the phase 

relationship of said first and second binary signal. 
The method of claim 1 wherein both said first and second binary 
signals are divided in frequency by the same frequency divider before 

sampling. 
The method of claim 1 wherein each said binary signal samples a 
delayed version of the other of said binary signals. 
The method of claim 3 wherein the delay (TWSM) of said signals 
is greater than the duty cycle distortion delay (TCDD). 
A method for using a flip flop circuit including a first pair of 
D type flip flops (DFF) as a digital phase comparator for indicating the phase 

relationship between a first binary signal PH0 and a second binary signal PHK 
wherein said first DFF has a clock input, 

   a D input and an RT0K output and said second DFF has a clock 
input, a D input and an RTK0 output comprising, 

   feeding said PH0 signal to the clock input of said first DFF and 
delaying said PH0 signal by a first delay time and feeding said delayed PH0 

signal to the D input of said second DFF; 
   feeding said PHK signal to the clock input of said second DFF and 

delaying said PHK signal by a second delay time and feeding said PHK signal 
to the D input of said first DFF; 

   simultaneously sampling and latching the levels of said RT0K and 
RTK0; 

   analyzing the logic levels of said latches RT0K and RTK0 in 
comb
inatorial logic and providing a plurality of unique range indications which 
indicative of whether PHK needs to be delayed more or less or whether the 

phase angle is within the closest indicator range of said first pair of flip flops 
with a respect to a phase angle between PH0 and PHK of 360 degrees. 
The method of Claim 5 wherein said first and second delay times 
are equal. 
The method of Claim 5 further including the steps of using a 
circuit including second pair of flip flops connected to said PH0 and PHK, said 

second pair of flip flops including a third and fourth D flip flop (DFF), a third and 
 

fourth time delay, and outputs ST0K and STK0 respectively, said third and 
fourth DFF interconnected to said PH0 and said PHK and to one another in 

exactly the same manner as said first and second DFF, said third and fourth 
time delays being equal but where said third and fourth time delays do not 

equal the said first and second time delay wherein 
   feeding said PH0 signal to the clock input of said third DFF and 

delaying said PH0 signal by said third time delay and feeding said delayed PH0 
signal to the D input of said fourth DFF; 

   feeding said PHK signal to the clock input of said fourth DFF and 
delaying said PHK signal by said fourth delay time and feeding said PHK signal 

to the D input of said third DFF; 
   simultaneously sampling and latching the levels of said ST0K and 

STK0; 
   analyzing the logic levels of said ST0K and STK0 in combinatorial 

logic and providing a plurality of unique range indications indicative of whether 
PHK needs to be delayed more or less or whether the phase angle between 

PH0 and PHK is within the closest indicator range of said second pair of flip 
flops. 
The method of Claim 7 wherein said first and second delay are 
larger than said third and fourth delay whereby the delay value of the closest 

in-range indication of said first and second DFF is larger than the value of delay 
in the closest in-range indication of said third and fourth DFF. 
The method of Claim 8 wherein said closest in-range indication of 
said first and second DFF provides the course in-range control logic signal and 

said closest in-range indication of the said third and fourth pair of flip flops 
 

provides the fine in-range or in lock control logic signal. 
A digital phase comparator circuit for comparing the time delay 
between a first and second binary signal comprising, 

   a first flip flop unit (FF1), said FF1 unit having a first and second 
input terminals and one output terminal one of said FF1 inputs being a terminal 

to receive said first binary signal 
   a second flip flop unit (FF2), said FF2 having a first and second 

input terminals and one output terminal, one of said FF2 inputs being a terminal 
to receive said second binary signal; 

   said FF1 and said FF2 being the same flip flop type; and 
   said first input terminal of said FF1 being connected to said 

second input terminal of said FF2 and said second input terminal of FF1 being 
connected to said first input terminal of FF2. 
The comparator of Claim 10 wherein said FF1 and said FF2 both 
comprise: 


(i) A first and second D flip flop (DFF), said DFF having a 
clock input and a D input; and 
(ii) a first and second delay element, each said delay element 
having an input and an output; said output of said first delay element being 

connected to said D input of said first DFF and said output of said second 
delay element being connected to said D input of said second DFF.. 
The comparator of Claim 10 wherein said delay element input of 
said FF1 is said first input of said FF1 and wherein said delay element input of 

said FF2 is said first input of said FF2. 
The comparator of Claim 12 including latch means, said latch 
 

means being a third (FF3) and fourth (FF4) D type flip flop, said D input of said 
FF3 and FF4 being connected to said outputs of FF1 and FF2 respectively, said 

FF3 and FF4 being connected to detect and hold the output of said FF1 and 
FF2. 
The comparator of Claim 13 wherein the value of delay time in 
said delay elements defines the phase angle for the "00" latch condition of FF3 

and FF4 responsive to a phase comparison between said first and second 
binary signals being coupled to said first input terminal of FF1 and said second 

terminal of said FF2. 
A comparator of Claim 10 further comprising a fifth flip flop (FF5) 
and a sixth flip flop (FF6) the inputs of said FF5 and FF6 are cross connected 

together in the same configuration as the connection of inputs of FF1 and FF2. 
A comparator of Claim 15 wherein the output of a third delay 
element is connected to the D flip flop input of said FF5 and a fourth delay 

element output is connected to the D flip flop input of said FF6. 
The comparator of Claim 16 including a seventh D flip flop (FF7) 
and an eighth D flip flop (FF8), wherein the D input of said FF7 and the D input 

of said FF8 are connected to the output of FF5 and FF6 respectively. 
The comparator of Claim 17 wherein the time delay of said third 
and fourth delay elements are shorter than the time delay of said first delay 

elements 1 and 2 whereby the large delays determine the phase range of the 
in range status code and said delay time of said first and second delay 

determines the phase range of the in-lock status. 
The comparator of Claim 15 comprising 
   compensation means connected to said binary signals to correct 

 
said binary signals for duty cycle distortion and for passing divided signals to 

said first and second DFFs. 
The comparator of Claim 18 wherein said compensation means 
comprises a first and second divider circuits. 
The comparator of Claim 20 including a first divider circuit means 
connected to receive said first binary signal and to divide its frequency and to 

pass said divided first binary signal to said input terminal of said FF1 to receive 
said first binary signal; and 

   a second divider circuit means connected to receive said second 
binary signal and to divide its frequency and to pass said divided second binary 

signal to said input terminal of said FF2 to receive said second binary signal. 
</CLAIMS>
</TEXT>
</DOC>
