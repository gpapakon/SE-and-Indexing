<DOC>
<DOCNO>EP-0612032</DOCNO> 
<TEXT>
<INVENTION-TITLE>
Image processing
</INVENTION-TITLE>
<CLASSIFICATIONS>G06T1500	G06T1540	G06T1510	G06T1500	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>G06T	G06T	G06T	G06T	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>G06T15	G06T15	G06T15	G06T15	</CLASSIFICATIONS-FOURTH>
<ABSTRACT>
The generation of rendering order lists, trees or 
directed graphs is performed as a pre-process for an 

interactive three-dimensional graphics system. Notional 
viewing axes are selected and a rendering order list, 

tree or directed graph is produced for each of these 
axes. 
Allowable viewing directions are grouped into a 
finite number of sets of viewing directions. Each of said 

sets is identified by being bounded by a set of bounding 
planes. 


</ABSTRACT>
<APPLICANTS>
<APPLICANT-NAME>
CANON KK
</APPLICANT-NAME>
<APPLICANT-NAME>
CANON KABUSHIKI KAISHA
</APPLICANT-NAME>
</APPLICANTS>
<INVENTORS>
<INVENTOR-NAME>
OTTO GERHARDT PAUL
</INVENTOR-NAME>
<INVENTOR-NAME>
OTTO, GERHARDT PAUL
</INVENTOR-NAME>
</INVENTORS>
<DESCRIPTION>
The present invention relates to a method and
apparatus for image processing. In particular, the
present invention relates to a method and apparatus for
processing data representing the position of surface
primitives such as polygons in three-dimensional space to
produce ordered lists for rendering views of said
primitives in two-dimensional space.In an interactive three-dimensional graphics system,
such as a system of the type disclosed in the Applicant's
copending European Patent Publication No. EP-A-0531157
(not published at the first claimed priority date), data
representing polygons is manipulated in three-dimensional
space interactively, in response to input commands from
an operator. Two-dimensional images are presented to an
operator at a rate sufficient to maintain a closed
feedback loop between the operator and the virtual three-dimensional
environment.A two-dimensional image is generated by rendering the
three-dimensional image data onto a two-dimensional
plane. For each view, "hidden surface removal" can be
performed by ensuring that primitives which occlude other
primitives are rendered into the two-dimensional plane
either instead of the primitives which they occlude or 
at least after said occluded polygons. Often the
occlusions are partial, therefore it is preferable to
render occluded polygons prior to rendering the occluding
polygons. In addition, totally invisible primitives may
be culled and do not require further consideration during
the rendering process. Thus, it can be appreciated that
a very important aspect of the rendering process involves
ensuring that the primitives are rendered in the correct
order. However, determining the correct order for
rendering, repeatedly for each iteration, would account
for a considerable proportion of the available processing
time.A system for producing rendering order lists is
disclosed in the aforesaid copending European Patent
Publication, in which said lists are produced as a pre-process,
using a topological sort, prior to interactive
operation. If necessary, a plurality of view
orientations are selected and a rendering order list is
produced for each of these views. During interactive
operation, one of these rendering order lists is selected
by comparing the actual view orientation with the preprocessed
orientations, to determine which is the closest
fit. Thus, the computational overhead required during
interactive operation is reduced significantly.However, the topological sort technique can require
a very large number of primitive
</DESCRIPTION>
<CLAIMS>
A method of processing data defining surface
primitives in three-dimensional space to produce a

plurality of rendering order lists for use in rendering
images from selected viewing directions, each rendering

order list defining an order in which the surface
primitives may be rendered for a respective set of

viewing directions, the method comprising steps of:

grouping allowable viewing directions into a finite
number of sets of viewing directions wherein each of said

sets of viewing directions is defined by bounding planes
(45, 46, 47) each bounding plane having an orientation

but no fixed position in said three-dimensional space;
and
defining for each of the sets of viewing directions
a rendering order list defining an order in which the

surface primitives may be rendered to effect hidden
surface removal.
The method of claim 1, wherein the orientation
of each bounding plane is defined by a normal vector

extending from its front face.
The method of claim 2, wherein each set of
viewing directions is defined with respect to a notional 

viewing axis, and wherein each normal vector is
calculated by:


identifying adjacent notional axes as first and
second notional viewing axis vectors;
performing vector subtraction of the first and
second notional viewing axis vectors to give a resultant

vector; and
defining the normal vector of the bounding
plane in accordance with the resultant vector.
The method of any preceding claim, wherein
adjacent ones of said sets of viewing directions are

defined with an overlap such that, for any selected
viewing direction, there is a corresponding one of the

sets which includes not only the selected viewing
direction but also all directions within a predetermined

field-of-view centred on the selected viewing direction.
The method of any preceding claim, further
comprising the step of generating a signal conveying the

rendering order list for each of the plurality of sets of
viewing directions.
The method of claim 5, further comprising the
step of recording the signal. 
The method of any preceding claim, wherein the
step of defining the rendering order list for each set of

viewing directions includes comparing an extent of a
given primitive in a direction normal to one of the

bounding planes defining the set of viewing directions
with an extent of at least one further primitive in the

direction normal to the bounding plane to determine
whether the given primitive can be added to the rendering

order list.
The method of claim 7, wherein the comparing
step comprises determining whether a nearest point on the

given primitive in the direction normal to the bounding
plane is further in the direction than a furthest point

on the further primitive in the direction.
The method of any preceding claim, further
comprising steps of:


identifying a viewing direction as a selected
viewing direction;
selecting one of the plurality of rendering
order lists in accordance with the selected viewing

direction as a selected list; and
rendering the surface primitives according to
the selected list to produce rendered image data.
A method according to claim 9, further
comprising the step of generating a signal conveying the

rendered image data.
The method of claim 10, further comprising the
step of recording the signal.
The method of claim 10 or claim 11, further
comprising the step of processing the rendered image data

to generate a display of the image.
An apparatus (315) for processing data defining
surface primitives in three-dimensional space to produce

a plurality of rendering order lists for use in rendering
images from selected view directions, each rendering

order list defining an order in which the surface
primitives may be rendered for a respective set of

viewing directions, the apparatus comprising:

grouping means for grouping allowable viewing
directions into a finite number of sets of viewing

directions, the grouping means being arranged to define
each of the sets by bounding planes (45, 46, 47) with

each bounding plane having an orientation but no fixed
position in said three-dimensional space; and
ordering means for defining, for each of the
sets of viewing directions, a rendering order list 

defining an order in which the surface primitives may be
rendered to effect hidden surface removal.
The apparatus of claim 13, wherein the grouping
means is arranged to define each bounding plane by a

normal vector extending from its front face.
The apparatus of claim 14, wherein the grouping
means is arranged to define each set of viewing

directions with respect to a notional viewing axis, and
to calculate each normal vector by:


identifying adjacent notional viewing axes as
first and second notional viewing axis vectors;
performing vector subtraction of the first and
second notional viewing axis vectors to give a resultant

vector; and
defining the normal vector of the bounding
plane in accordance with the resultant vector.
The apparatus of any of claims 13 to 15,
wherein the grouping means is arranged to define adjacent

ones of said sets with an overlap such that, for any
selected viewing direction, there is a corresponding one

of the sets which includes not only the selected viewing
direction but also all directions within a predetermined 

field-of-view centred on the selected viewing, direction.
The apparatus of any of claims 13 to 16,
wherein the ordering means includes comparing means for

comparing an extent of a given primitive in a direction
normal to one of the bounding planes defining the set of

viewing directions with an extent of at least one further
primitive in the direction normal to the bounding plane

to determine whether the given primitive can be added to
the rendering order list.
The apparatus of claim 17, wherein the
comparing means is arranged to determine whether a

nearest point on the given primitive in the direction
normal to the bounding plane is further in the direction

than a furthest point on the further primitive in the
direction.
The apparatus of any of claims 13 to 18,
further comprising:


means for identifying a viewing direction as a
selected viewing direction;
means for selecting one of the plurality of
rendering order lists in accordance with the selected

viewing direction as a selected list; and 
means for rendering the surface primitives according
to the selected list to produce rendered image data.
A storage medium (319, 320) storing
instructions for causing a programmable processing

apparatus to become operable to carry out the method of

at least one of claims 1 to 12.
A signal conveying instructions for causing a
programmable processing apparatus to become operable to

carry out the method of at least one of claims 1 to 12.
</CLAIMS>
</TEXT>
</DOC>
