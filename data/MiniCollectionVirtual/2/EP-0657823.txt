<DOC>
<DOCNO>EP-0657823</DOCNO> 
<TEXT>
<INVENTION-TITLE>
Memory access protection circuit with encryption key
</INVENTION-TITLE>
<CLASSIFICATIONS>G06F2100	G06F1214	G06F1214	G06F2100	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>G06F	G06F	G06F	G06F	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>G06F21	G06F12	G06F12	G06F21	</CLASSIFICATIONS-FOURTH>
<ABSTRACT>
A data verification system includes an application 
specific integrated circuit (ASIC) (15) for verifying 

that unlocking data generated by a microprocessor (13) to 
be written into the (ASIC) before a memory write is 

valid. The microprocessor (13) is programmed to generate 
an ASIC address when unlocking data is to be written to 

the ASIC and to encrypt and decrypt that data. The 
verifying circuit unit (15) receives the encrypted data 

and decrypts the encrypted data and compares (in 
comparator 410) the decrypted data with the encrypted 

data. The verifying circuit generating an enable signal 
only if the comparison is true. An address decoding unit 

(28) is provided for receiving the memory address signal 
A(23-0) and causing a memory write enable signal to be 

generated for the memory unit only if the verifying 
circuit unit (15) has generated an enable signal. 

Register units (NVME, NVMD) in communication with a data 
bus (18) and the verifying circuit unit (15) are provided 

for writing decryption parameters in the register units 
(NVME, NVMD) in accordance with the programming of the 

microprocessor (13) during power-up of the 
microprocessor. 


</ABSTRACT>
<APPLICANTS>
</APPLICANTS>
<INVENTORS>
</INVENTORS>
<DESCRIPTION>
The present invention relates to a data verification
system and is concerned with preventing writing of
unintended data to the memory units. More particularly,
the invention is concerned with a data verification
system comprising a microprocessor for generating data, a
memory unit (NVM1), a verification circuit for verifying
the validity of the data generated by said
microprocessor, which data is first to be written to said
verification circuit and subsequently written to said
memory unit (NVM1) once said data is verified by said
verification circuit, and an electrical bus for providing
electrical signal communication between said
microprocessor, said verification circuit and said memory
unit (NVM1), wherein:
said microprocessor is arranged to generate said
data in an original form and the same data in an
encrypted data form, andsaid verification circuit has verifying circuit
means for receiving the two data in different forms, to
determine whether the comparison is true. Such a data
verification system is disclosed in GB-A-2 205 667.In a conventional postage metering system, it is
known to provide an accounting system for recording the
amount of funds and other transaction information
dispensed during the metering process. These records are
electronically maintained in the non-volatile memory
units which are part of the accounting system. Because
of microcontroller system anomalies, it is important to
prevent writing of spurious data into the non-volatile
memory. It is known to provide the accounting system
with a circuit for latching the non-volatile memories
inactive, thereby preventing writing, and requiring the
microprocessor to latch open a gate means following the
issuance of a write signal and a chip select signal from
the microprocessor. After the intended write cycle is
completed, the microprocessor causes the gate to be
closed.It has been determined that under certain anomalous
conditions, an unintentional write process may be issued
by the microprocessor to an address decoder unit which in
response thereto enables the gate. Under this condition
an unintended write can occur.The embodiment of the invention to be described
below is capable of meeting the following objectives:
to provide a circuit for testing the data used
to unlock a memory in the presence of a microprocessor
instruction to write to the memory to assure that the
data is a valid data type;to provide an additional measure of security
for the accounting system by providing a monitoring
circuit which detects when the nonvolatile
</DESCRIPTION>
<CLAIMS>
A data verification system comprising a
microprocessor (13) for generating data, a memory unit

(NVM1), a verification circuit (15) for verifying the
validity of the data generated by said microprocessor

(13), which data is first to be written to said
verification circuit and subsequently written to said

memory unit (NVM1) once said data is verified by said
verification circuit, and an electrical bus (17, 18) for

providing electrical signal communication between said
microprocessor (13), said verification circuit (15) and

said memory unit (NVM1), wherein:

said microprocessor (13) is arranged to generate
said data in an original form and the same data in an

encrypted data form, and
said verification circuit (15) has verifying circuit
means (402, 404, 408, 410) for receiving the two data in

different forms, to determine whether the comparison is
true;

   characterised in that said verifying circuit means
(402, 404, 408, 410) is arranged for receiving the two

data in said encrypted data form and original data form
and decrypting said encrypted data form, and for

comparing said decrypted data with said original data
form, and generating an enable signal only if said

comparison is true,

   the data verification system further comprises an
address decoder circuit means (28, 29, 62) for receiving signals

representing the data in original and encrypted data
forms from said microprocessor and causing a memory write

enable signal to be generated and directed over said bus
to said memory unit (NVM1) only if said verifying circuit

means (402, 404, 408, 410) has generated an enable
signal. 
A data verification system including a circuit as
claimed in claim 1, wherein said verification circuit

(15) further comprises:

register means (NVME, NVMD) in communication with
said bus and said verifying circuit means (402, 404, 408,

410),
means for reading decryption parameters from said
memory unit and for writing decryption parameters in said

register means during power-up of said verification
system,
said verifying circuit means (402, 404, 408, 410)
being arranged to decrypt said data in accordance with

said decryption parameters.
A data verification system including a circuit as
claimed in claim 1 or 2, further comprising means (446,

462) for generating an interrupt signal should said
comparison be untrue.
A data verification system including a circuit as
claimed in claim 1, 2 or 3 further comprising timer means

(424) enabled upon enabling of said verifying circuit
means (402, 404, 408, 410) for generating a time-out

signal should said enable signal not be generated prior
to said timer means (424) timing out.
A data verification system including a circuit as
claimed in claim 4, further comprising means

(426, 430) for generating an interrupt signal when said
timer means time-out signal is presented.
A data verification system according to any
preceding claim and operatively associated with a host

device. 
A data verification system according to claim 6,
wherein the host device is a postage meter mailing

machine.
</CLAIMS>
</TEXT>
</DOC>
