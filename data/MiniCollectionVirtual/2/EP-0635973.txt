<DOC>
<DOCNO>EP-0635973</DOCNO> 
<TEXT>
<INVENTION-TITLE>
Signal correction
</INVENTION-TITLE>
<CLASSIFICATIONS>H04N5217	H04N5217	H04N5335	H04N5335	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>H04N	H04N	H04N	H04N	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>H04N5	H04N5	H04N5	H04N5	</CLASSIFICATIONS-FOURTH>
<ABSTRACT>
A signal correction circuit for correcting deviating pixel values comprises 
a part (113, 117) for comparing a first pixel value (R
orig
) of a given pixel with a second 
value (R
filt
) obtained from pixel values of pixels surrounding the given pixel so as to 
supply a decision signal (decR) if a predetermined criterion is satisfied; and a 

multiplexer (115) coupled to said part (113, 117) for supplying the second value (R
filt
) if 
the predetermined criterion is satisfied for not more than one color (R,G,B) and for 

supplying the first pixel value (R
orig
) in the opposite case. 

</ABSTRACT>
<APPLICANTS>
<APPLICANT-NAME>
KONINKL PHILIPS ELECTRONICS NV
</APPLICANT-NAME>
<APPLICANT-NAME>
KONINKLIJKE PHILIPS ELECTRONICS N.V.
</APPLICANT-NAME>
</APPLICANTS>
<INVENTORS>
<INVENTOR-NAME>
VAN DER VALK NICOLAAS JAN LEEN
</INVENTOR-NAME>
<INVENTOR-NAME>
VAN DER VALK, NICOLAAS JAN LEENDERT
</INVENTOR-NAME>
</INVENTORS>
<DESCRIPTION>
The invention relates to a signal correction for correcting deviating pixel
values. Such a circuit is used, for example for correcting CCD sensors, some pixels of
which have a dark current which is larger than average. Particularly in sensors having
many pixels, there is a great risk of dropout of one or more pixels having a deviating
dark current.A signal correction circuit of this type is described in the article by
B. Botte, "Digital automatic pixel correction in new generation CCD broadcast
cameras", presented at the IBC 1992, pp. 474-478. In this circuit, a correction signal is
corrected for the sensor temperature. To this end, the address of the faulty pixel should
be known and, together with the magnitude of the correction, it should be stored in a
memory. This circuit has the following drawbacks. The circuit is not flexible; if, in
fact, new defects occur, the contents of the memory must be adapted. The temperature
behavior is probably not so predictable so that the corrections are not complete.
Moreover, the dark current of the pixels may vary with respect to time with a too large
dark current or even become normal. Then, there will be erroneous corrections.US-A-4,485,399 (corresponds to DE-A-3 114 275) discloses a method and an apparatus for approximately
correcting errors in a digital video signal. Picture points represented by a digital signal
that is found to be in error are set to zero (black) value. Incoming 8-bit signals are
twice delayed by one line delays, and 8-bit shift registers are provided for the
undelayed, once delayed and twice delayed signals, each shift register providing three
places for successive picture points. Averages are continuously formed horizontally,
vertically and on both diagonals about every picture point, and when one value which is
averaged is faulty, the divider at the output of the addition stage has its divisor changed
from 2 to 1. The averages themselves are averaged to eliminate averages that are
unusable because both inputs are faulty. The color television signal must be separately
coded for the color and luminance information, and essentially the same scheme may be
used for covering over errors in the color information as in the luminance information.
In the block circuit diagram of its Fig. 2b, one channel for one of the components of a
separately coded color television signal is represented. Each of the components of the
color television signal requires a channel similarly constituted in accordance with the
principles of this prior art
</DESCRIPTION>
<CLAIMS>
A signal correction circuit for correcting deviating pixel color values, the
signal correction circuit comprising:


means for receiving pixel color values (Rin, Gin, Bin) for more than one
color;
filtering means (101; 419427) for obtaining a plurality of second color
values (R
filt
, G
filt
, B
filt
; MAX-B) from respectively corresponding pixel color values of
pixels surrounding a given pixel having first pixel color values (R
orig
, G
orig
, B
orig
); and
output means (109; 435) for supplying one of the second color values
(R
filt
, G
filt
, B
filt
) if the respectively corresponding first pixel color value (R
orig
, G
orig
, B
orig
)
is larger than this second color value (R
filt
, G
filt
, B
filt
);

   characterized in that for correcting color signals of more than one color
(R, G, B), the signal correction circuit comprises means (111, 115, 117; 427, 437-441)

for determining whether the first pixel color values exceed the respectively
corresponding second color values (R
filt
, G
filt
, B
filt
, respectively) for at least one other
color (G), and for supplying said one second color value (R
filt
, G
filt
, B
filt
) only if the
respectively corresponding first pixel color values (R
orig
, G
orig
, B
orig
) does not exceed the
second color values (R
filt
, G
filt
, B
filt
, respectively) for at least one other color (G).
A signal correction circuit as claimed in Claim 1, wherein the output
means (109) comprise:


comparison means (113) for each color for comparing the first pixel color
values (R
orig
, G
orig
, B
orig
) of the given pixel with the respectively corresponding second
color values (R
filt
, G
filt
, B
filt
) obtained from pixel color values of pixels surrounding the
given pixel so as to supply a plurality of color flag signals (flagR) respectively

indicating if the first pixel color values (R
orig
, G
orig
, B
orig
) exceed the respectively
corresponding second color values (R
filt
, G
filt
, B
filt
, respectively);
color flag signal combination means (117) coupled to the comparison
means (113) for supplying one color signal correction decision signal (decR, decG,

decB) if the first color pixel value (R
orig
, G
orig
, B
orig
) for the color corresponding to said
one color signal correction decision signal, exceeds the respectively corresponding

second color value (R
filt
, G
filt
, B
filt
, respectively), while the first color pixel values (R
orig
, 
G
orig
, B
orig
) of the other colors do not exceed the respectively corresponding second color
values (R
filt
, G
filt
, B
filt
, respectively); and
switching means (115) coupled to said comparison means (113) and
combination means (117) for each color for supplying one of the second color values

(R
filt
, G
filt
, B
filt
) if for the color associated to said one second color signal value (R
filt
,
G
filt
, B
filt
), the color signal correction decision signal (decR, decG, decB) has been
supplied, for the other colors the first pixel color values being supplied, whilst all first

pixel color values (R
orig
, G
orig
, B
orig
, respectively) are supplied in the opposite case in
which no color signal correction decision signal has been supplied.
A signal correction circuit as claimed in Claim 1, further comprising
means for determining a plurality of mean color values of pairs of pixels located

diametrically with respect to the given pixel, and for determining corresponding
maximum values of said mean color values, wherein the second color values (R
filt
, G
filt
,
B
filt
) are constituted by said corresponding maximum values of said plurality of mean
color values of pairs of pixels located diametrically with respect to the given pixel.
A method of correcting deviating pixels color values, the
method comprising the steps:


receiving pixel color values (Rin, Gin, Bin) for more than one color;
detecting (101, 113) deviations of pixel values for each color separately;
supplying (117) correction control signals (decR, decG, decB) separately
for each color on the basis of a combination of detected deviations (flagR, flagG, flagB)

of the pixel values detected for at least two colors; and
correcting (115) deviating pixels on the basis of said correction control
signals (decR, decG, decB) for each color.
A television camera comprising:

a pick-up unit for providing pixel values of three colors; and
a signal correction circuit for correcting deviating pixel values, wherein
the signal correction circuit is defined in accordance with claim 1 or comprises means

for carrying out the method of claim 4.
</CLAIMS>
</TEXT>
</DOC>
