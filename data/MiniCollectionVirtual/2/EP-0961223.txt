<DOC>
<DOCNO>EP-0961223</DOCNO> 
<TEXT>
<INVENTION-TITLE>
Image synthesis system
</INVENTION-TITLE>
<CLASSIFICATIONS>G06T1500	G06T1500	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>G06T	G06T	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>G06T15	G06T15	</CLASSIFICATIONS-FOURTH>
<ABSTRACT>
An image synthesis system comprises a volume memory
(12) for accumulating entire volume data (32) after being

divided into cubic data comprising units each of which is
composed of eight pieces of volume data for constructing a

small cube to make it possible to perform memory operation
by using the units of the cubic data; an image processing

unit (14) including a memory control unit (20), an
inclination calculation unit (22), a brightness calculation

unit (24), a synthesis calculation unit (26), and a
coordinate conversion unit (28); an image display memory

(16); and a display unit (18). The volume data is read from
the volume memory (12) by using the units each of which is

composed of eight voxels for constructing the small cube.
The inclination calculation is performed by the inclination

calculation unit (22), the brightness is calculated by the
brightness calculation unit (24), and the synthesis

calculation unit (26) is used to perform the synthesis
calculation for the entire volume data (32) along voxels

through which an arbitrarily set imaginary line of sight
passes.


</ABSTRACT>
<APPLICANTS>
<APPLICANT-NAME>
JAPAN RADIO CO LTD
</APPLICANT-NAME>
<APPLICANT-NAME>
JAPAN RADIO CO., LTD
</APPLICANT-NAME>
</APPLICANTS>
<INVENTORS>
<INVENTOR-NAME>
ISHIKAWA MASASHI
</INVENTOR-NAME>
<INVENTOR-NAME>
KASHIWADE KOJI
</INVENTOR-NAME>
<INVENTOR-NAME>
MIMURA TOSHIHARU
</INVENTOR-NAME>
<INVENTOR-NAME>
TOEDA KENGO
</INVENTOR-NAME>
<INVENTOR-NAME>
YAMANE DAISAKU
</INVENTOR-NAME>
<INVENTOR-NAME>
YAMATO SACHIO
</INVENTOR-NAME>
<INVENTOR-NAME>
ISHIKAWA, MASASHI
</INVENTOR-NAME>
<INVENTOR-NAME>
KASHIWADE, KOJI
</INVENTOR-NAME>
<INVENTOR-NAME>
MIMURA, TOSHIHARU
</INVENTOR-NAME>
<INVENTOR-NAME>
TOEDA, KENGO
</INVENTOR-NAME>
<INVENTOR-NAME>
YAMANE, DAISAKU
</INVENTOR-NAME>
<INVENTOR-NAME>
YAMATO, SACHIO
</INVENTOR-NAME>
</INVENTORS>
<DESCRIPTION>
The present invention relates to a volume rendering
technique which plays an important role when numeric data
(volume data) defined in a three-dimensional space is
visualized on a display screen. In particular, the present
invention relates to a hardware-equipped image synthesis
system which makes it possible to perform high speed drawing
processing for three-dimensional volume data to be displayed
on a display screen. Further, the present invention relates
to an image synthesis system constructed by using a small
amount of hardware resources.The technique, which is used when a three-dimensional
model represented by numeric data (volume data) defined in a
three-dimensional space is visualized on a screen of a
display unit, is called "volume rendering". For example, in
the medical field, the volume rendering technique is
utilized when numeric data (volume data) concerning the
inside of human body, which is obtained by using a measuring
instrument such as CT scanner and MRI, is displayed as an
image on a display. Further, the volume rendering technique
is also utilized in a variety of fields.The volume data for representing the three-dimensional
model is expressed by using various methods. However, there 
is a method in which expression is made by using a set of
small cubes (voxels) arranged on a three-dimensional
lattice, in the same manner as in the method in which a
figure on a two-dimensional plane is expressed by using a
set of small square picture elements (pixels) arranged on
two-dimensional lattice points.The technique for expressing the three-dimensional
model by means of the voxel expression has the following
features. That is, although the amount of data is enormous,
the data structure is simple, in which the set operation can
be performed extremely easily. The technique is not limited
to the expression of a three-dimensional model which is
artificial and regular, but it is suitable when an extremely
irregular shape existing in the nature is expressed.One of known rendering techniques based on CG (Computer
Graphics) is a technique called "ray casting method" or "ray
tracing method". In the ray casting method, an objective
three-dimensional model, which is constructed by voxels, is
arranged in an imaginary three-dimensional space defined in
a memory space. Numeric data, which represents internal
information of the objective three-dimensional model, is
given as volume data to each of the voxels. According to
the ray casting method, various pieces of internal
information concerning the objective
</DESCRIPTION>
<CLAIMS>
An image synthesis system comprising:

a volume memory (12) for accumulating a plurality of
pieces of divided volume data obtained by dividing volume

data composed of a plurality of voxels defined by numeric
data in a three-dimensional space;
an image processing unit (14, 29);
a memory bus (30) for connecting said volume memory
(12) to said image processing unit (14, 29);
an image display memory (16) for storing image data
outputted from said image processing unit (14); and
a display unit (18) for displaying said volume data on
the basis of said image data stored in said image display

memory (16), wherein said image processing unit (14, 29)
includes:
a memory control unit (20) for reading said volume data
comprising units each of which is composed of eight pieces

of volume data for constructing a small cube, from said
volume memory (12);
an inclination calculation unit (22) for performing
inclination calculation on the basis of volume data of a

central voxel and volume data of voxels adjacent to said
central voxel, of said volume data read by said memory

control unit (20);
a brightness calculation unit (24) for performing
brightness calculation on the basis of a calculation result

obtained by said inclination calculation unit (22);
a synthesis calculation unit (26) for performing
synthesis calculation on the basis of a calculation result

obtained by said brightness calculation unit (24) along
voxels through which an imaginary line of sight arbitrarily

set for said volume data passes; and
a coordinate conversion unit (28) for performing
coordinate conversion for a calculation result obtained by

said synthesis calculation unit (26).
The image synthesis system according to claim 1,
wherein said volume memory (12) is operated such that said

volume data is divided into cubic data comprising units each
of which is composed of eight pieces of volume data for

constructing a small cube, and said volume data is
accumulated by using said units of cubic data to make it

possible to perform memory operation.
The image synthesis system according to claim 1,
wherein said synthesis calculation unit (26) performs said

synthesis calculation by using units of divided volume data,
and said image processing unit (29) includes a base plane

memory (27) for accumulating said calculation result of said
synthesis calculation unit (26).
The image synthesis system according to claim 1,
wherein said memory control unit (20) reads a plurality of

pieces of cubic data corresponding to one array stored
continuously in said volume memory (12), and it includes a

plurality of first registers (70a to 70c) for storing said
read pieces of cubic data corresponding to one array as they

are, and a plurality of second registers (70d, 70e) for
storing said volume data corresponding to one array for

constructing one surface of said cubic data.
The image synthesis system according to claim 4,
wherein said memory control unit (20) includes a selector

(72) for selecting volume data of a central voxel for an
inclination calculation process performed by said

inclination calculation unit (22) and voxels adjacent to
said central voxel from said volume data stored in said

plurality of first registers (70a to 70c) and said plurality
of second registers (70d, 70e) to supply said selected

volume data to said inclination calculation unit (22).
The image synthesis system according to claim 4,
wherein said memory control unit (20) includes a selector

(72) for selecting cubic data to serve as a center for said
inclination calculation performed by said inclination

calculation unit (22) as well as cubic data adjoining
upwardly, cubic data adjoining downwardly, cubic data

adjoining frontwardly, and cubic data adjoining backwardly
with respect to said cubic data to serve as said center,

from said cubic data stored said first registers (70a to
70c) and said second registers (70d, 70e) to supply said

selected cubic data to said inclination calculation unit
(22).
The image synthesis system according to claim 4,
wherein each of said first registers (70a to 70c) and said

second registers (70d, 70e) has a capacity to accumulate
volume data corresponding to one array in a depth direction,

volume data corresponding to one array in a vertical
direction, or volume data corresponding to one array in a

lateral direction accumulated continuously in said depth
direction, said vertical direction, or said lateral

direction of said volume memory (12).
The image synthesis system according to claim 7,

wherein said first registers (70a to 70c) comprise at least
three registers, and said second registers (70d, 70e)

comprise at least two registers.
The image synthesis system according to claim 7,
wherein said memory control unit (20) reads cubic data

corresponding to one lateral array necessary for the next
step from said volume memory (12) every time when said voxel

to serve said center for said inclination calculation
performed by said inclination calculation unit (22) is moved

upwardly by one in said cubic data.
The image synthesis system according to claim 1,
wherein said memory control unit (20) reads said volume data

from said volume memory (12) by using units of cubic data,
and said inclination calculation unit (22), said brightness

calculation unit (24), and said synthesis calculation unit
(26) decompose said cubic data into pieces of volume data of

single voxel to perform a calculation process.
The image synthesis system according to claim 1,
wherein said image processing unit (14, 29) comprises a

plurality of elements (ASIC 0 to ASIC 7) for making parallel
operation, each of said elements (ASIC 0 to 7) is connected

to a plurality of memory elements (13a to 13n) for
constructing said volume memory (12) via said plurality of

memory buses (30), and said volume data is stored in said
volume memory, as having skew corresponding to a number of

said memory buses (30).
The image synthesis system according to claim 1,
wherein said volume memory (12) comprises a temporary

storage memory (12b) for temporarily storing said synthesis
calculation result concerning said divided volume data, and

said synthesis calculation result stored in said temporary
storage memory (12b) is read to be used as an initial value

for said synthesis calculation when said synthesis
calculation is started for adjacent divided volume data.
The image synthesis system according to claim 12,
wherein said temporary storage memory (12b) is connected via

said memory bus (30) to said image processing unit (14).
The image synthesis system according to claim 1,
wherein said volume memory (12) successively accumulates

cubic data comprising units each of which is composed of
eight pieces of volume data, continuously in a depth

direction, a vertical direction, and a lateral direction
thereof.
The image synthesis system according to claim 1,
wherein said image processing unit (14, 29) processes

respective pieces of cubic data for constructing said entire
volume data, successively one surface by one surface

starting from cubic data concerning a forwardmost surface.
The image synthesis system according to claim 1,
wherein a voxel as a processing objective is used as a

center, and said inclination calculation unit (22)
calculates inclination of said voxel as said processing

objective on the basis of a voxel disposed in front of said
voxel as said processing objective, a voxel disposed at the

back thereof, a voxel disposed at the left thereof, a voxel
disposed at the right thereof, a voxel disposed upwardly,

and a voxel disposed downwardly.
The image synthesis system according to claim 1,
wherein said synthesis calculation unit (26) cumulatively

calculates brightness data relative to said brightness
calculation unit (24) concerning voxels through which an

imaginary line of sight generated from an arbitrarily set
point of sight passes, by reading said synthesis calculation

result concerning a previous voxel accumulated in said
volume memory (12) to cumulatively calculate said brightness

data relative to said brightness calculation unit (24) so
that said data is accumulated in said volume memory (12).
The image synthesis system according to claim 1,
wherein said volume data is measurement data obtained by

using an ultrasonic wave diagnosis apparatus.
The image synthesis system according to claim 18,
wherein said measurement data is density data of tissue in a

living body.
The image synthesis system according to claim 1,
wherein said volume memory (12) is constructed to be capable

of connection to a high speed data transfer bus (30), and it
is connected to said image processing unit (14) by using

said high speed data transfer bus (30).
The image synthesis system according to claim 1,
wherein said image processing unit (14, 29) comprises a

plurality of ASIC's, and each image processing unit (14, 29)
is constructed to perform pipeline processing for processing

of said volume data corresponding to one lateral array,
reading of subsequent volume data corresponding to one

lateral array from said volume memory, reading of said
synthesis calculation result from said synthesis calculation

result-accumulating unit (12b), and processing of storage of
said synthesis calculation result in said synthesis

calculation result-accumulating unit (12b).
The image synthesis system according to claim 21,
wherein said image processing unit (14, 29) comprises eight

ASIC's, and each of them is connected to said volume memory
(12) by using two high speed data transfer buses (30).
The image synthesis system according to claim 1,
wherein said volume data is divided into eight pieces of

divided volume data.
The image synthesis system according to claim 1,
wherein said image processing unit (14, 29) has a first

processing mode for performing calculation while using said
entire volume data as one view volume, and a second

processing mode for performing calculation while using said
divided volume data as view volumes.
The image synthesis system according to claim 24,
wherein said first processing mode and said second

processing mode are determined by a specified bit in address
information used when said synthesis calculation result

relative to said synthesis calculation unit (26) is written
into or read from said volume memory (12) for temporary

storage.
The image synthesis system according to claim 1,
wherein said image processing unit (14, 29) changes a

calculation process sequence of said divided volume data
depending on a direction of an imaginary line of sight

generated from an arbitrarily set point of sight.
The image synthesis system according to claim 1,
wherein when a central voxel for said inclination

calculation performed in said inclination calculation unit
(22) is a voxel disposed at an outermost end contacting with

a boundary of said divided volume data, said memory control
unit (20) reads, from said volume memory (12), said volume

data of a voxel adjacent to said central voxel for said
inclination calculation, at an outermost end of adjacent

divided volume data with said boundary intervening
therebetween.
</CLAIMS>
</TEXT>
</DOC>
