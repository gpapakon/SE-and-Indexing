<DOC>
<DOCNO>EP-0619552</DOCNO> 
<TEXT>
<INVENTION-TITLE>
Object motion estimation device and process in animated successive pictures subdivided in bidimensional image element blocs
</INVENTION-TITLE>
<CLASSIFICATIONS>H04N514	H04N726	H04N726	H04N7015	H04N7015	H04N514	G06T720	G06T720	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>H04N	H04N	H04N	H04N	H04N	H04N	G06T	G06T	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>H04N5	H04N7	H04N7	H04N7	H04N7	H04N5	G06T7	G06T7	</CLASSIFICATIONS-FOURTH>
<ABSTRACT>
Object motion estimation process applied to bidimensional blocks scanned successively, within an image, comprising the determination of a set of error data and a motion vector for each current block, and comprising the creation of so-called "regions" formed from a block or from several adjacent blocks, each region having a single motion vector. This process is implemented via a device which includes a coherence structure with: memory modules (M1, M4, M5) for storing respectively the error data sets of the current block, the regions already formed, and their respective index numbers; work modules (R2 and R3) formed by two fixed delays to be applied to the error data sets for the left and upper regions, candidates for attachment to the current block; computational modules (11, 12) for comparing the error data sets of the current block and those of the said candidate regions, and possibly deciding in favour of attachment as a function of predetermined criteria; multiplexers (MUX1, MUX2, MUX3) for routing the data between the various modules; and a module (10) for monitoring the routing and the computations. Application : High-definition television, coding device. 
<
IMAGE
>
</ABSTRACT>
<APPLICANTS>
<APPLICANT-NAME>
KONINKL PHILIPS ELECTRONICS NV
</APPLICANT-NAME>
<APPLICANT-NAME>
PHILIPS ELECTRONIQUE LAB
</APPLICANT-NAME>
<APPLICANT-NAME>
KONINKLIJKE PHILIPS ELECTRONICS N.V.
</APPLICANT-NAME>
<APPLICANT-NAME>
LABORATOIRES D'ELECTRONIQUE PHILIPS S.A.S.
</APPLICANT-NAME>
</APPLICANTS>
<INVENTORS>
<INVENTOR-NAME>
BAZZAZ PAUL
</INVENTOR-NAME>
<INVENTOR-NAME>
BAZZAZ, PAUL
</INVENTOR-NAME>
</INVENTORS>
<CLAIMS>
A method of estimating motion of objects in a sequence of animated
images, comprising steps of processing a current image in the sequence, including the

steps of:

subdividing said image into two-dimensional blocks arranged in rows and
columns and estimating a set of error data for each block and, based on said set,

estimating a unique motion vector attributed to the current block;
minimizing the number of motion vectors in the current image by creating
and growing regions formed by merging of adjacent blocks having coherent motion

vectors, and by attributing, to each created region or region formed by merging, a
unique motion vector which is coherent with the motion vectors of the merged blocks,

characterized in that this method comprises the sub-steps of:
scanning the blocks of the current image regularly row by row and, in
each considered row, column by column so that a current block has at most two

previously scanned adjacent blocks, called potential blocks, respectively localized in the
same column and in the same row as this current block,
estimating, on the basis of the comparison of the respective sets of errors
of the potential and current blocks, a first criterion of coherence of the motion vectors

of the potential blocks with respect to the current block, and a second criterion of
arbitration between the motion vectors of the potential blocks for selecting, in

accordance with the first and the second criterion, at most a block having a motion
vector which is coherent with the motion vector of the current block;
creating a region by merging said selected potential block and the current
block and estimating a set of error data for said region and, based on said set, a unique

motion vector for said region,
progressively growing said region, called potential region, when it is
adjacent to subsequent blocks, by merging said potential region with one subsequent

block at a time, whenever the motion vector of said potential region is coherent with the
motion vector of said subsequent block in accordance with the first and the second 

criterion.
A method as claimed in claim 1, characterized in that the creation and
growth of said regions comprises the steps of:


a) storing sets of error data relating to the current block, to the regions already
formed, and storing numbers assigned to these respective blocks and regions;
b) applying two fixed delays to the sets of error data of the regions which are
adjacent to the current block and have already been treated, which regions are referred

to as potential regions and are candidates for forming a new region by attachment to the
current block;
c) comparing sets of error data of the current block with those of said potential
regions, and deciding, as a function of predetermined criteria, on either attaching the

current block to one of said potential regions or on initializing a new region on the
basis of this current block;
d) multiplexing between the sets of error data relating to the current block and
to the already treated regions which have been stored and delayed, and the sets of error

data relating to the current block and to the potential regions which are to be compared
and stored;
e) controlling the procedure of comparing, multiplexing and storing the data;
f) negative feedbacks between the comparison and decision results relating to
the destination of the current block and the data to be delayed and relating to the new

regions including the current block and forming respective potential regions for the
block subsequent to the current block, so as to replace the preceding data to be delayed

with a view to treatment of said subsequent block.
A method as claimed in claim 2, characterized in that the estimation of
the motion vector of each current block comprises the determination of:


an "error card" which resembles the errors relating to the differences in
luminosity of the pixels of the current block and the luminosity of the pixels of the

blocks situated in the search window and being displaced with respect to the projection
of said current block in the preceding image in accordance with a motion vector,
a minimal error, referred to as BMA error, which is the minimal error among
all the errors of the error card,
a minimum vector which is the motion vector corresponding to the minimal
(BMA) error, 

and in that for each new region formed by attaching the current block to a potential
region, it comprises the determination of:
the error card of the new region which is the arithmetical sum of the error cards of
each block contained in this region,
the minimal error (referred to as BMA error) of the new region which is the sum of
the minimal errors relat
ing to each block,
the minimum vector of the new region which is the vector corresponding to the
minimal error and is chosen as a motion vector for the new region.
A method as claimed in claim 3, characterized in that:

I) the first criterion comprises a comparison of the sum of minimal errors, respectively
relating to the current block and to each of the potential regions or potential blocks

before merging, with the minimal error relating to each of the two possible regions
formed by growth, which would be formed by merging said current block with each of

said potential regions or potential blocks, respectively,

   said first criterion being written in the form of an inequality which is satisfied
when the minimal error relating to the possible region formed by growth is smaller than

or equal to the sum increased with a controllable threshold of the minimal error relating
to the current block and the minimal error relating to said potential region or potential

block, and
II) the second criterion comprises a comparison of the minimal errors relating to the
two possible regions formed by growth, which would be formed by merging the current

block and each of the two potential regions or potential blocks, respectively,

   said second criterion being written in the form of an inequality which is
satisfied when the minimal error relating to one of the possible regions formed by

growth is smaller than the minimal error relating to the other one of the two possible
regions formed by growth,

in that the second criterion is used when said first criterion is satisfied for two potential
blocks or two potential regions

and in that the merging decision is taken when the first and the second criterion are
satisfied at the same time.
A device for estimating motion of objects in a sequence of animated
images, for using a process as claimed in claim 1, having modules for processing the

current image in the sequence, these modules comprising: 

a first computation module for subdividing said current image into two-dimensional
blocks arranged in rows and columns and for estimating a set of error data for each

block and, based on said set, a unique motion vector attributed to the current block,
a second computation module for minimizing the number of motion vectors, generated

by the first computation module, in the current image by creating and growing regions
formed by merging of adjacent blocks having coherent motion vectors, and by

attributing, to each created region or region formed by growth, a unique motion vector
which is coherent with the motion vectors of the merged blocks, said second

computation module being characterized in that it comprises:

means for scanning the blocks of the current image regularly row by row and,
in each considered row, column by column so that a current block has at most two

previously scanned blocks, called potential blocks, respectively localized in the same
column and in the same row as the current block;
means for estimating, on the basis of respective sets of error data, a first
criterion of the motion vectors of the potential blocks with respect to the current block,

and a second criterion of arbitration between the motion vectors of the potential blocks
for selecting, as a function of said first and second criteria, at most one of said blocks

having a motion vector which is coherent with the motion vector of said current block;
means for creating a region by merging said current block and said selected
potential block and for estimating a set of error data for said region and, based on said

set, a unique motion vector for said region;
and means for progressively growing said region, called potential region, when
it is adjacent to subsequent current blocks, by merging said potential region with one of

the subsequent blocks at a time, whenever the motion vector of said potential region is
coherent with the motion vector of said subsequent current block in accordance with the

first and the second criterion.
A device as claimed in claim 5, characterized in that said coherence
structure comprises:


a) memories (M1, M4, M5) for storing the sets of error data of the current
block, of the regions already formed and the numbers assigned to these blocks and

regions, respectively;
b) working modules (R2 and R3) constituted by two fixed delays to be applied
to the sets of error data of the already treated regions which are adjacent to the current 

block and are referred to as potential left and upper regions which are candidates for
forming a new region by attachment to the current block;
c) computation modules (11, 12) for comparing the sets of error data of the
current block and those of the potential regions and for deciding, as a function of the

predetermined criteria, on either attaching the current block to one of said potential
regions or on initializing a new region on the basis of this current block;
d) multiplexers (MUX1, MUX2, MUX3) having four inputs and one output for
searching the error data in one of the memories or working modules (M1, M4, R2, R3)

and for directing them to the computation modules (11, 12) and to the memory (M4) for
storing the data of the regions, respectively;
e) a module for controlling the procedure of the computation modules, those of
the multiplexers, and the addressing of the memories;
f) negative feedbacks between the outputs of the computation modules (11, 12)
and the inputs of the working modules (R2, R3) relating to the sets of error data of the

new regions including the current block and forming respective potential left and upper
regions for the block subsequent to the current block, so as to replace the preceding

data in the working modules (R2, R3) with a view to treatment of said subsequent
block.
A device as claimed in claim 6, characterized in that the computations of
estimating motion of each block by the module (BMA) comprise the determination of:


an "error card" which resembles the errors relating to the differences in
luminosity of the pixels of the current block and the luminosity of the pixels of the

blocks situated in the search window and being displaced with respect to the projection
of said current block in the preceding image in accordance with a motion vector,
a BMA error, which is the minimal error among all the errors of the error
card,
a minimum vector which is the motion vector corresponding to the minimal
(BMA) error,

and in that for each new region formed by attaching the current block to a potential
region the computation modules (11, 12) determine:
the error card of the new region which is the arithmetical sum of the error cards of
each block contained in this region,
the minimal error (referred to as BMA error) of the new region which is the sum of 
the minimal errors relating to each block,
the minimum vector of the new region which is the vector corresponding to the
minimal error and is chosen as a motion vector for the new region.
A device as claimed in claim 7, characterized in that the computation
modules (11, 12) compare the error data of the current block and of the potential

regions or potential blocks in accordance with:

I) a first criterion of coherence expressing that the minimal error relating to a
possible region, which would be creat
ed or formed by merging said current block with
each of the two potential regions or potential blocks, respectively, is smaller than or

equal to the sum increased with a controllable threshold of the minimal error relating to
the current block and the minimal error relating to said potential region or potential

block,

and possibly, when the first criterion I/ is verified for the two potential regions
or potential blocks at a time, in accordance with:
II) a second arbitration criterion expressing that the minimal error relating to
one of the two possible regions created or formed by growth, which would be formed

by merging with the current block and each of the two potential regions or potential
blocks, respectively, is smaller than the minimal error relating to the second of the two

possible regions created or formed by growth,

and is characterized in that the computation modules take a positive decision of merging
the current block with one of the potential regions or potential blocks when the first

criterion is verified for at least one potential block or one potential region, and, when
the first criterion is verified for two potential regions or potential blocks at a time, the

computation modules take a positive decision of merging with only one of said potential
regions or potential blocks on the basis of the second arbitration criterion.
</CLAIMS>
</TEXT>
</DOC>
