<DOC>
<DOCNO>EP-0625753</DOCNO> 
<TEXT>
<INVENTION-TITLE>
Dynamically programmable bus arbiter with provisions for historical feedback
</INVENTION-TITLE>
<CLASSIFICATIONS>G06F1318	G06F1316	G06F13362	G06F13364	G06F1336	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>G06F	G06F	G06F	G06F	G06F	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>G06F13	G06F13	G06F13	G06F13	G06F13	</CLASSIFICATIONS-FOURTH>
<ABSTRACT>
An arbitration circuit that uses a unique history register that is combined 
with a value representing bus requests to index into a table. All possible 

combinations of history register requests are stored in the table along with a 
corresponding grant. A block of the table is selected by the history register, and then 

the request is used to index into the block to determine which request receives a 
grant. The grant is then shifted into the history register. Advantageously, more than 

one table may be stored in memory which can be selected by an arbiter controller. 

</ABSTRACT>
<APPLICANTS>
<APPLICANT-NAME>
AT 
&
 T CORP
</APPLICANT-NAME>
<APPLICANT-NAME>
AT
&
T CORP.
</APPLICANT-NAME>
</APPLICANTS>
<INVENTORS>
<INVENTOR-NAME>
LARSON MIKIEL LOYAL
</INVENTOR-NAME>
<INVENTOR-NAME>
WILCOX WAYNE RICHARD
</INVENTOR-NAME>
<INVENTOR-NAME>
LARSON, MIKIEL LOYAL
</INVENTOR-NAME>
<INVENTOR-NAME>
WILCOX, WAYNE RICHARD
</INVENTOR-NAME>
</INVENTORS>
<DESCRIPTION>
This invention relates to the field of computer bus arbitration and, more
specifically, to the field of providing bus arbitration which yes previous bus usage
into account ad provides for selectable bus arbitration algorithms.As more devices are attached to the main memory bus in a computer
system, there is more contention for use of the bus. In response to such contention,
many different arbitration circuits have been proposed in order to give either fair
access or priority access to the bus and thus, to memory resources.For example, U. S. Patent No. 5,195,185, which issued in the name of
G. B. Marenin on March 16, 1993, discloses an arbitration device which determines
bus access based on a priority scheme, and also has a system to dynamically change
the priority of any device. This system does not, however, provide flexibility in the
basic arbitration scheme; it only responds to a device's increase of its own priority.
It also cannot take into account which device previously used the bus in order to give
either parity or priority to the other users. Finally, this system is locked into the
priority scheme; it cannot be changed from a priority to a parity scheme when
appropriate.A further bus priority scheme is described in U. S. Patent No. 4,979,100,
which issued in the name of Makris, et al., on December 18, 1990. Makris discloses
an arbiter circuit which provides two different levels of priority of access to the bus
for each processing unit and keeps track of the relative percentages of time of access
for the different priority levels. This system provides for interruption of lower
priority bus usage by higher priority process units. This system requires complicated
overhead to track such bus usage, and is not responsive to previous bus usage by ay
one system. U.S. Patent No. 4,609,995, which issued in the name of Kouki Hasebe on
June 17,1983, discloses a priority controller which includes a pair of read-only
memories (ROMs) and a register. Request signals are received on a subset of the
address inputs of the ROMs, and the ROMs store data for determining the priority of the
requests. Corresponding locations of the two ROMs have identical contents, but the
ROMs cannot be simultaneously enabled, and their address inputs are connected to the
request signals differently. The register stores information identitying a single request
circuit to which priority has recently been granted, and the outputs of the register are
supplied to, inter alia, address and chip enable inputs of the ROMs. The ROMs are
altern
</DESCRIPTION>
<CLAIMS>
A system (22) for providing arbitration of allocation requests from a plurality of
requesters (16, 18, 20) based on the history of a plurality of prior grants of requests by such

requesters, said system comprising:

input means (110) for receiving requests (24, 26, 28, 30) from said plurality of
requesters;
storage means (104, 105) for defining a plurality of grants (128), said plurality of grants
comprising a grant for each possible configuration of requests and prior grants;
history means (108) for sequentially recording said plurality of previous grants; and
control means (102) connected to said history means (108), said input means (110) and
said storage means (104, 105) for applying said received requests from said input means and

said plurality of previous grants (126) from said history means to said storage means (104, 105),
selecting one of said plurality of grants responsive to said received requests and said plurality of

previous grants, and providing a grant indication (32, 34, 36, 38) representative of said selected
grant to one of said requesters.
The system of claim 1 wherein said history (108) means comprises a first in, first out
(FIFO) queue, and wherein each grant is moved through said FIFO queue.
The system of claim 2 wherein said storage means comprises a plurality of blocks
(Fig. 7), each of said plurality of blocks including a subset of said plurality of grants, wherein

said control means (102) selects one of said blocks by using said FIFO queue as an address and
selects one of said grants from said selected block by using said requests to select a location in

said selected block.
The system of claim 2 further including a writable mask register (116), and wherein
said mask register selectively alters portions of the contents of said history means. 
The system of claim 1 wherein:

said storage means includes a plurality of look-up tables (104, 105), each of said look-up
tables having a plurality of grants, each of said plurality of grants corresponding to a request

input from one of said plurality of requestors; and
said control means (102) is further connected to said look-up tables (104, 105), said
control means using said recorded previous grants (126) from said history register to select one

of said plurality of look-up tables, apply said requests to said look-up table to select one of said
plurality of grants, and provide grant authorization signals (32, 34, 36, 38) representative of said

selected grant to one of said requesters.
The system of claim 5 wherein one or more of said plurality of look-up tables may be
dynamically updated.
The system of claim 5 further including a mask register connected to said history
register, said mask register being dynamically writable and capable of over-writing said history

register.
The system of claim 5 wherein, when said grant signals are provided by said control
means, said control means also performs error checking.
The system of claim 5 wherein each entry in said table includes a parity indication,
and said error checking includes checking the parity of said grant.
The system of claim 5 wherein said table includes a cyclical redundancy check
value, and said error checking includes performing a cyclical redundancy check.
The system of claim 5 wherein said table is either contained in a random access
memory (RAM) (104), or in a read-only memory (ROM) (105), or one of said tables is

contained in ROM (105), and the remainder of said plurality of tables is in RAM (104). 
The system of claim 11, wherein said control means (102) performs error checking,
and, responsive to said control means determining that an error is encountered, said control

means selecting said lookup table contained in ROM and applying said requests thereto.
A method for providing arbitration of bus allocation requests (24, 26, 28, 30) from a
plurality of requesters (16, 18, 20) based on the history of a plurality of prior bus request grants,

said method comprising:

receiving a plurality of requests (24, 26, 28, 30) from said plurality of requesters for use of said bus;
providing storage means (104, 105) for defining a plurality of grants (128), said

plurality of grants comprising a grant for each possible configuration of requests and prior grants;
sequentially recording said plurality of previous grants in history means (108);
applying said received requests and said plurality of previous grants (126) from
said history means to said storage means, selecting one of said plurality of grants

responsive to said received requests and said plurality of previous grants, and
providing a grant indication (32, 34, 36, 38) representative of said selected grant to

one of said requesters.
The method according to claim 13 further including, before issuing said grant,
performing error checking on said grant, said error checking optionally comprising parity

checking, or cyclical redundancy checking.
The method according to claim 13, wherein said arbitration see table either
comprises a plurality of state tables wherein said result is indexed into one of said plurality of

arbitration state tables, and wherein, responsive to determining that a error was found, using a
different one of said plurality of arbitration state tables, or comprises a plurality of arbitration

state tables, said method further including determining which of said plurality of arbitration
state tables to use.
The method according to claim 13, wherein said history register (108) is
dynamically variable, and wherein applying said history register to said requests also includes

varying said history register.
</CLAIMS>
</TEXT>
</DOC>
