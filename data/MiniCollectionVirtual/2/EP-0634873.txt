<DOC>
<DOCNO>EP-0634873</DOCNO> 
<TEXT>
<INVENTION-TITLE>
Method to determine the motion vectors in small picture segments of a television picture
</INVENTION-TITLE>
<CLASSIFICATIONS>H04N730	H04N730	H04N726	H04N726	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>H04N	H04N	H04N	H04N	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>H04N7	H04N7	H04N7	H04N7	</CLASSIFICATIONS-FOURTH>
<ABSTRACT>
A picture for which motion 
vectors are already determined by e.g. block matching, is 

according to the invention first preprocessed. The object 
is to increase the contrast in the picture and to make the 

form and contours of the surfaces clearly discernible. 
Then the picture is quantified in order to decrease the 

number of gray levels including a histogram, and then the 
picture is filtered. 

The result is a picture comprising uniformly shaded 
segments of different sizes and forms. One block can 

contain several segments. Each segment gets a suitable 
motion vector of its own, taking into account the known 

motion vectors of the blocks. 

</ABSTRACT>
<APPLICANTS>
</APPLICANTS>
<INVENTORS>
</INVENTORS>
<DESCRIPTION>
The invention relates to a method which is able to determine
the motion vectors in smaller segments than blocks of a
television picture, when the motion vectors of the blocks
are known.Information of the motion contents of the picture is added
to the transmitted signal so that in a television receiver
the received video signal can be processed by some motion
compensated method, by increasing the line rate of the
television picture (LRU, Line Rate Upconversion) or by
increasing the field rate (Field Rate Upconversion). In high
definition television (HDTV) systems the picture is divided
into small blocks, e.g. 16*16 pixels, and by a suitable
motion detection method we determine for the blocks a motion
vector which defines the direction and extent of the motion.
The motion vectors are transmitted as data signal separated
from the video signal. At the transmission end the blocks
having different motion contents are processed differently,
whereby each transmitted block is accompanied by a certain
motion vector. When the receiver generates the original
picture it can in then select the correct signal processing
method in accordance with the motion contents of the block.There are several known motion detection methods to
calculate the motion vectors. Most often these methods are
based on difference signals, which are calculated between
two pictures, and on whether the picture contains motion or
not, which is concluded with the aid of these difference
signals. The motion estimation methods may be divided into
two main classes: methods which detect motion parameters,
and methods which measure pixel speed. Further it is
possible to classify the pixel measuring methods in methods
based on spatial-temporal differentials, methods based on
matching and examining block equivalence at different
moments, and methods based on Fourier techniques. The motion parameter difference methods are not particularly
well suited to estimate the motion in television, due the
limitation placed on the picture and due to the method
itself. Techniques based on spatial-temporal differentials
which belong to the methods measuring the pixel speed are
based solely on propagation models. They assume that the
intensity variation is entirely a linear function of the
movement in the television picture field. Several
differentials are calculated both in the temporal direction
(between successive fields) and in the spatial direction (in
the horizontal and vertical directions). These differential
ratios provide the spatial movement, the pixel being
</DESCRIPTION>
<CLAIMS>
A method to determine the motion vectors of a television
picture when the picture first has been divided into

blocks of equal size and form, and when for each block a
motion vector has been calculated which represents the

magnitude and direction of motion contents for all
pixels of the block, 
characterized
 in that

the television picture is preprocessed in a process
changing the gray scale values of the pixels in order

to equalize their value distribution;
the preprocessed picture is quantified in order to
reduce the number of its gray levels, whereby a

picture is obtained comprising uniformly shaded
segments of different sizes and different forms,

the largest segment in each block is defined as main
segment, main segments extending over several blocks

are assumed to belong to the same object with a
consistent motion vector being determined as follows:
the block motion vector value of the respective block
is made the motion vector candidate for the main

segment;
if the main segment extends over at least two
neighboring block areas and the part in those block areas

is also the main segment of the respective neighboring
blocks, and if the motion vector candidate is

identical with the neighboring motion vector
candidates, then the motion vector candidate is

accepted as the motion vector of the main segment;
if the motion vector candidate is different from

identical neighbor candidates, the motion vector
candidate is rejected and the main segment gets as its

motion vector the motion vector of one of the neighboring
blocks, otherwise the motion vector candidate is

accepted as the motion vector of the main segment;
other segments within the block, which border on the
main segment of a neighboring block, get as the motion

vector the motion vector value of this neighboring
main segment, and 
other segments in the block area which are not next to
any segment of a neighboring block get as the motion

vector the motion vector value of the own block, and
other segments in the block area, which are next to a
segment of a neighboring block which is not the main

segment of the neighboring block, get as the motion
vector the motion vector value of the own block.
The method according to claim 1, 
characterized
 in that
the preprocessing is a histogram equalization.
The method according to claim 1, 
characterized
 in that
the quantization is equidistant and that 8 bit pixels

are quantified into 2 bit pixels.
The method according to claim 1, 
characterized
 in that
further the quantified picture is filtered.
The method according to claim 4, 
characterized
 in that
the filtering is a median filtering.
The method according to claim 5, 
characterized
 in that
it uses a 9 point median filter.
</CLAIMS>
</TEXT>
</DOC>
