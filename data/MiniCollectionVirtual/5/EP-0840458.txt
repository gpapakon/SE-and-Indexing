<DOC>
<DOCNO>EP-0840458</DOCNO> 
<TEXT>
<INVENTION-TITLE>
PLL circuit and its automatic adjusting circuit
</INVENTION-TITLE>
<CLASSIFICATIONS>H03L7183	H03L7095	H03L7099	H03L716	H03L710	H03L708	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>H03L	H03L	H03L	H03L	H03L	H03L	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>H03L7	H03L7	H03L7	H03L7	H03L7	H03L7	</CLASSIFICATIONS-FOURTH>
<ABSTRACT>
A 1/N programmable frequency divider for dividing the
frequency of a output clock (CLK1) from a VCO is connected

between the VCO and a phase comparator in a PLL circuit. An
adjusting circuit (20B) includes a counter (22) for detecting a

half-value of the frequency and for addressing a table ROM
(22A) to make it read out a program data(N)and target value (TV),

a counter(25)for detecting a half-value of the frequency of
the output clock CLK from the 1/N programmable frequency

divider, a digital comparator(26)for comparing the count
value of the counter(25)and the target value TV and an

up/down counter for incrementing or decrementing its count
CFV in accordance with the comparison result, the count CFV

being provided to the control input of the VCO.

</ABSTRACT>
<APPLICANTS>
<APPLICANT-NAME>
FUJITSU LTD
</APPLICANT-NAME>
<APPLICANT-NAME>
FUJITSU LIMITED
</APPLICANT-NAME>
</APPLICANTS>
<INVENTORS>
<INVENTOR-NAME>
SHIOTSU SHINICHI
</INVENTOR-NAME>
<INVENTOR-NAME>
TAMAMURA MASAYA
</INVENTOR-NAME>
<INVENTOR-NAME>
SHIOTSU, SHINICHI
</INVENTOR-NAME>
<INVENTOR-NAME>
TAMAMURA, MASAYA
</INVENTOR-NAME>
</INVENTORS>
<DESCRIPTION>
The present invention relates to a PLL circuit, its
automatic adjusting circuit, and a semiconductor device
including same.A PLL circuit is used, for example, as a circuit to
extract a clock signal from a serial signal in a receiver.
The free running frequency of VCO in the PLL circuit differs
generally depending on the semiconductor chip even if on the
same wafer because there is often a slight variation in the
manufacturing process of semiconductor devices, varying the
free running frequency within about ±30 percent. Therefore,
a PLL circuit with a wide capture range is required, and the
circuit design therefore becomes complicated or difficult.With this, a digital VCO with a variable center
frequency setting is used for the PLL circuit as shown in
FIG. 9. In this circuit, a phase comparator 10, a loop
filter 11, a VCO control circuit 12, and a digital VCO 13
are connected in the loop shape.The VCO control circuit 12 is a kind of the analog to
digital converter and outputs the digital value DV
corresponding to the analog voltage AV. FIG. 10 (A) shows 
the input-output characteristics of the VCO control circuit
12.The frequency f of the output clock CLK from the
digital VCO 13 is a linear function of the digital value DV.
f/fc varies with the digital value DV as shown in FIG. 10
(B), where fc is a center frequency at the digital value DV
being a half of the maximum frequency value DVmax. The
center frequency fc is determined by the center frequency
setting value CFV from the center frequency setting circuit
14. fc/fco varies as shown in FIG. 10(C), where fco is a
center free running frequency at the center frequency
setting value CFV being a half of the maximum value CFVmax
thereof. In this example, fc/fco is 0.8 ≦ fc/fco ≦ 1.2.For example, assume that both the frequency fr of the
reference signal REF and the center free running frequency
fco of the digital VCO 13 are set to 100 MHz and the real
center free running frequency fco is 70 MHz. In this case,
if the center frequency setting value CFV is set to the
maximum value CFVmax, the center frequency fc increases by
20 percent and reaches a value of 84 MHz. Because the range
of the output frequency f with the change in the digital
value DV is 79.8 MHz ≦ f ≦ 88.2 MHz. In this PLL circuit,
the clock CLK cannot be locked into a phase synchronization
state for a reference signal REF of 100 MHz.As a result, the yield of semiconductor devices 
becomes low. To improve this yield, a digital VCO 13 with a wide range
output frequency f is required. In this case,
</DESCRIPTION>
<CLAIMS>
A PLL automatic adjusting circuit (20; 20A; 20B) for
automatically adjusting a PLL circuit including a programmable frequency

divider (15) for dividing an output frequency (f1) of a VCO (13), said
programmable frequency divider being connected between an output of

said VCO and one input of a phase comparator (10), said PLL automatic
adjusting circuit comprising:


a first counter (21) for counting an output clock (CLK1) of said VCO
(13) for a set time (T0) to provide a count value (CV1) at the end of said

set time,

   
characterized by

   a data converter (22; 22A) for setting a program data (N) in
accordance with the count value (CV1) of said first counter (21) to be

provided to a program data input (PD) of said programmable frequency
divider (15).
A PLL automatic adjusting circuit (20; 20A; 20B) according to
claim 1, wherein said data converter (22; 22A) is a memory for converting

an input address value into a stored value.
A PLL automatic adjusting circuit (20; 20A; 20B) according to
claim 1 or 2, further comprising a control circuit (24; 24A) for controlling,

in response to an adjustment start signal (RST), said output frequency
(f1) of said VCO (13) to a center free running frequency (fco) until said

program data (N) has been set.
A PLL automatic adjusting circuit (20; 20A; 20B) according to
claim 3, further comprising a register (23; 23A) for receiving output data

of said data converter (22; 22A), wherein said control circuit (24; 24A)
makes said register hold its input value after said output value of said data

converter has been determined. 
A PLL automatic adjusting circuit (20; 20A; 20B) according to
claim 1 or 2, wherein

   said VCO (13) has a control input for changing its input-output
characteristic, and

   said data converter (22; 22A) outputs a control setting value (CF;
TV) corresponding to a value (CV1) of said first counter (21) and said

program data (N) in order to determine a value (CFV) to be provided to
said control input of said VCO (13).
A PLL automatic adjusting circuit (20) according to claim 5,
further comprising:


a register (23) for receiving said control setting value (CF) and for
providing its holding value (CFV) to said control input of said VCO (13);

and
a control circuit (24) for making said register (23) hold its input
value after said control setting value (CF) having been determined.
A PLL automatic adjusting circuit (20A; 20B) according to
claim 5, further comprising:


a second counter (25) for counting an output dock (CLK) of said
programmable frequency divider (15) for a set time (T0) to provide a

count value (CV2) at the end of said set time;
a comparator (26) for comparing said count value (CV2) of said
second counter (25) with said control setting value (TV) from said data

converter (22A); and
an up/down counter (27) for incrementing or decrementing in
accordance with a comparison result of said comparator (26) a value

(CFV) based on a count value of said up/down counter to be provided to
said control input of said VCO (13).
A PLL automatic adjusting circuit (20A; 20B) according to
claim 7, further comprising:


a control circuit (24) for, in response to an adjustment start signal
(RST), fixing a value to be provided to an input of said VCO (13) to 

approximately a center value until said program data (N) is set and for
controlling a value of said control input of said VCO (13) to approximately

a center value until said value (CFV) based on said count value of said
up/down counter (27) is provided to said control input.
A PLL automatic adjusting circuit (20A; 20B) according to
claim 8, wherein said value (CFV) provided to said control input of said

VCO (13) is said count value of said up/down counter (27).
A PLL circuit including:

a programmable frequency divider (15) for dividing an output
frequency (f1) of a VCO (13), said programmable frequency divider being

connected between an output of said VCO and one input of a phase
comparator (10); and
a PLL automatic adjusting circuit (20; 20A; 20B) according to any of
claims 1 to 9.
A PLL circuit including:

a programmable frequency divider (15) for dividing an output
frequency (f1) of a VCO (13), said programmable frequency divider being

connected between an output of said VCO and one input of a phase
comparator (10):


a PLL automatic adjusting circuit (20; 20A; 20B) according to claim
3 or 4;
a lock detecting circuit (19) for detecting whether said PLL circuit
has entered into a phase synchronizing state; and
a timer (18) for reactivating said adjustment start signal (RST)
when a time, from said adjustment start signal (RST) becoming active to

said lock detecting circuit (19) detecting a phase synchronization state,
has exceeded a set time (T1).
A PLL circuit including:

a programmable frequency divider (15) for dividing an output
frequency (f1) of VCO (13), a
n input value of said VCO being digital and 
said programmable frequency divider being connected between an output

of said VCO and one input of a phase comparator (10);
a PLL automatic adjusting circuit (20; 20A; 20B) according to claim
3 or 4;
a VCO control circuit (12A) for converting an analog voltage to said
digital input value of said VCO (13), said VCO control circuit being

arranged in a pre-stage of said VCO (13) and having a control input for
switching its output range from a first range to a second range, said

second range being wider than said first range; and
a lock detecting circuit (19) for detecting whether said PLL circuit
has entered into a phase synchronizing state and providing a lock

detection signal (LD) to said control input of said VCO control circuit (12A)
in order to set said output range of said VCO control circuit to said first

range when its detects that said VCO (13) is not in said phase
synchronization state and in order to set said output range of said VCO

control circuit to said second range when it detects said phase
synchronization state.
</CLAIMS>
</TEXT>
</DOC>
