<DOC>
<DOCNO>EP-0631708</DOCNO> 
<TEXT>
<INVENTION-TITLE>
A METHOD FOR STARTING A SHORT MESSAGE TRANSMISSION IN A MOBILE TELEPHONE NETWORK
</INVENTION-TITLE>
<CLASSIFICATIONS>H04W412	H04W8818	H04W8800	H04W9224	H04W412	H04W9200	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>H04W	H04W	H04W	H04W	H04W	H04W	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>H04W4	H04W88	H04W88	H04W92	H04W4	H04W92	</CLASSIFICATIONS-FOURTH>
<ABSTRACT>
A method and a home location register for starting a short message transmission in a mobile telephone network. To ensure that a short message is delivered successfully, a time supervision (701) is started on including an identity of a short message service centre (SC) in a subscriber-specific list. When a time preset in the time supervision expires, a short message transmission starting message (702) is transmitted to each one of the short message service centres (SC) the identity of which is included in the list; the identity of the short message service centre (SC) is deleted from the list contained in the home location register (HLR); each short message service centre (SC) transmits (703), in response to a short message transmission starting message (702), the short message to a gateway mobile exchange (GMSC) for it to be forwarded to a subscriber (MS).
</ABSTRACT>
<APPLICANTS>
<APPLICANT-NAME>
NOKIA NETWORKS OY
</APPLICANT-NAME>
<APPLICANT-NAME>
NOKIA NETWORKS OY
</APPLICANT-NAME>
</APPLICANTS>
<INVENTORS>
<INVENTOR-NAME>
SALIN HANNU-PEKKA
</INVENTOR-NAME>
<INVENTOR-NAME>
SALIN, HANNU-PEKKA
</INVENTOR-NAME>
</INVENTORS>
<DESCRIPTION>
The invention relates to a method for starting a
short message transmission in a mobile telephone network
comprising at least one short message service
centre having an identity and transmitting short messages;
at least one gateway mobile exchange forwarding
short messages; at least one mobile exchange forwarding
short messages; a subscriber capable of receiving
short messages; and a home location register having a
subscriber-specific list of identities of short mess-age
service centres that have transmitted rejected
short messages, a subscriber-specific short message
transmission starting message from the home location
register activating the short message service centre
to transmit a short message to the gateway mobile
exchange in order for the short message to be forwarded
to the subscriber, wherein the rejected short
messages are stored in the short message service
centre.In cellular radio networks it is known to send
short messages via a short message service centre
separate from the cellular radio network. One system
for sending and forwarding short messages is described
in GSM 03.40, February 1992, Technical Realization of
Short Message Services Point to Point, ETSI/PT. The
specification describes the interfacing of a short
message service centre (SC) to the mobile exchange of
a cellular radio network, and the operation of the SC
when it sends and forwards short messages from outside
the cellular radio network and from one subscriber (A
subscriber) to another (B subscriber) in the cellular
radio network, or to an external message means capable
of receiving and/or sending short messages. The 
transfer of short messages over a radio path between GSM
terminal equipments, a mobile exchange and a short message
service centre is described more closely in GSM 04.11,
February 1992, MS-BSS Interface - Support of Short Message
Service (p-p), ETSI/PT 12.International patent application No. WO 93/26131
teaches a method and arrangement for processing short
messages in a cellular network. Said publication teaches
a solution where all the messages needed for transmission
of short messages are taken in a mobile switching centre.
This allows fast and inexpensive transmission of short
messages from an A-subscriber of a cellular radio network
to a B-subscriber.Figure 4 of the attached drawings shows a situation
preceding the arising of the problem associated with the
prior art. A short message service centre SC1 sends 400 a
short message to a gateway mobile exchange GMSC, which
requests 401 for routing information
</DESCRIPTION>
<CLAIMS>
Method for starting a short message transmission
in a mobile telephone network comprising at least one

short message service centre (SC, SC1, SC2) having an
identity (Sc1 Sc2) and transmitting short messages; at

least one gateway mobile exchange (GMSC) forwarding short
messages; at least one mobile exchange (MSC1, MSC2, VMSC)

forwarding short messages; a subscriber (MS) capable of
receiving short messages; and a home location register

(HLR, Figure 11) having a subscriber-specific list (1104)
of identities (Sc1, Sc2) of short message service centres

(SC, SC1, SC2) that have transmitted rejected short
messages, a subscriber-specific short message transmission

starting message (602, 604) from the home location
register activating the short message service centre (SC,

SC1, SC2) to transmit a short message to the gateway
mobile exchange (GMSC) in order for the short message to

be forwarded to the subscriber (MS), and the rejected
short messages being stored in the short message service

centre (SC, SC1, SC2), the method being
characterized in that
a time supervision period (701, 1110) is started
when the identity (Sc1, Sc2) of the short message service

centre (SC, SC1, SC2) is included in the subscriber-specific
list (1104);
a subscriber-specific short message transmission
starting message (702) is transmitted to all short message

service centres (SC, SC1, SC2) having their identities
(Sc1, Sc2) on the subscriber-specific list (1104) when the

time preset in the time supervision period (1110) expires;
the identity (Sc1, Sc2) of the short message
service centre (SC, SC1, SC2) to which the short message

transmission starting message (702) has been transmitted 
is deleted from the home location register's (HLR, Figure

11) subscriber-specific list (1104) of the identities
(Sc1, Sc2) of short message service centres (SC, SC1, SC2)

that have transmitted rejected short messages;
each one of said short message service centres (SC,
SC1, SC2) transmits (703), in response to the short

message transmission starting message (702), a short
message to the gateway mobile exchange (GMSC);
a short message transmission routing information is
received (705) at said gateway mobile exchange for routing

of said short message; and
the short message is forwarded from the gateway
mobile exchange (GMSC) to the subscriber (MS) based on the

routing information.
Method according to claim 1, 
characterized
in that
 when the subscriber (MS) is reachable
(Figure 7)

   the mobile exchange (VMSC) within the mobile
subscriber location area receives said short message (703)

from the short message service centre (SC, SC1, SC2) and
forwards (709) it to the subscriber (MS).
Method according to claim 1, 
characterized
in that
 when the subscriber (MS) is not
reachable (Figure 8)


the gateway mobile exchange (GMSC) receives said
short message (703) from the short message service centre

(SC, SC1, SC2) and requests (704) routing information from
the home location register (HLR) of the subscriber for

forwarding the short message;
on receiving the routing information, the gateway
mobile exchange (GMSC) forwards the short message to the

mobile exchange (VMSC) within the subscriber location
area;
the mobile exchange (VMSC) within the subscriber 
location area requests (707) information about the

subscriber from a visitor location register (VLR) within
the subscriber location area, being thus informed that the

subscriber is not reachable;
the identity (Sc1, Sc2, 1105) of the short message
service centre (SC, SC1, SC2) which transmitted (703) the

short message to the mobile exchange (VMSC) within the
subscriber location area for it to be forwarded to the

subscriber is included in the home location register's
(HLR, Figure 11) subscriber-specific list (1104) of the

identities (Sc1, Sc2) of short message service centres
(SC, SC1, SC2) that have transmitted rejected short

messages;
the short message service centre (SC, SC1, SC2)
that transmitted the short message is notified (812) that

the transmission of the short message to the subscriber
has failed.
Method for starting a short message transmission
in a mobile telephone network comprising at least one

short message service centre (SC, SC1, SC2) having an
identity (Sc1, Sc2) and transmitting short messages; at

least one gateway mobile exchange (GMSC) forwarding short
messages; at least one mobile exchange (MSC1, MSC2, VMSC)

forwarding short messages; a subscriber (MS) capable of
receiving short messages; and a home location register

(HLR, Figure 11) having a subscriber-specific list (1104)
of identities (Sc1, Sc2) of short message service centres

(SC, SC1, SC2) that have transmitted rejected short
messages, a subscriber-specific short message transmission

starting message (602, 604) from the home location
register activating the short message service centre (SC,

SC1, SC2) to transmit a short message to the gateway
mobile exchange (GMSC) in order for the short message to

be forwarded to the subscriber (MS), and the rejected 
short messages being stored in the short message service

centre (SC, SC1, SC2), the method being

characterized in that
a time supervision period (1110) is started when
the identity (Sc1, Sc2) of the short message service

centre (SC, SC1, SC2) is included in the subscriber-specific
list (1104);
when the time preset in the time supervision period
(1110) expires, the home location register (HLR, Figure

11) transmits, in response to a routing information

request message (902) from the mobile exchange that has
received the short message to be forwarded from the short

message services centre, routing information (904)
required to forward the short message to the subscriber to

said gateway mobile exchange (GMSC), which attempts (905)
to transmit the short message to the subscriber (MS).
Method according to claim 4, 
characterized
in that
 when the subscriber (MS) is
reachable (Figure 9),


a subscriber-specific short message transmission
starting message (911) is transmitted to all short message

service centres (SC, SC1, SC2) the identities (1105) of
which are included in the home location register's (HLR,

Figure 11) subscriber-specific lists (1104) of identities
of short message service centres that have transmitted

rejected short messages;
the identity (Sc1, Sc2) of the short message
service centre (SC, SC1, SC2) to which a short message

transmission starting message (911) has been transmitted
is deleted from the list (1104) contained in the home

location register;
each one of said short message service centres (SC,
SC1, SC2) transmits, in response to the short message

transmission starting message (910, 911), the short 
message to the gateway mobile exchange (GMSC) for it to be

forwarded to the subscriber.
Method according to claim 4, 
characterized
in that
 when the subscriber (MS) is not
reachable (Figure 10),


the home location register (HLR, Figure 11)
includes, in response to a short message waiting

indication message (1008), the identity (Sc1, Sc2, 1105)
of the short message service centre (SC, SC1, SC2) which

has transmitted the short message to the gateway mobile
exchange (GMSC) in the subscriber-specific list (1104) of

the identities (Sc1, Sc2, 1105) of the short message
service centres (SC, SC1, SC2) that have transmitted short

messages;
the gateway mobile exchange (GMSC) transmits a
negative acknowledgement message (1011) indicating a

failed short message transmission to the short message
service centre (SC, SC1, SC2), from which the short

message has been transmitted (901).
Method according to claim 5, 
characterized
in that
 when the time preset in the time
supervision period (1110) expires, the home location

register (HLR, Figure 11) starts a second time supervision
(1125) in response to a routing information request

message (902) from one of the gateway mobile exchanges
(GMSC) that have received a short message (901) to be

forwarded from the short message service centre (SC, SC1,
SC2);


when the time preset in the second time supervision
period (1125) expires, a subscriber-specific short message

transmission starting message (911) is transmitted to each
one of the short message service centres (SC, SC1, SC2)

the identities (Sc1, Sc2, 1105) of which are included in
the home location register's (HLR, Figure 11) subscriber-specific 

list (1104);
the identity (Sc1, Sc2, 1105) of the short message
service centre (SC, SC1, SC2) to which the short message

transmission starting message (911) has been transmitted
is deleted from the home location register's (HLR, Figure

11) subscriber-specific list (1104) of the identities of
short message service centres that have transmitted

rejected short messages;
each one of said short message service centres (SC,
SC1, SC2) transmits, in response to the short message

transmission starting message (911), the short message to
the gateway mobile exchange (GMSC) for it to be forwarded

to the subscriber (MS).
Method according to claim 6, 
characterized
in that
 when the time preset in the time
supervision period (1110) expires, the home location

register (HLR, Figure 11) starts a second time supervision
(1125) in response to a routing information request

message (902) from one of the gateway mobile exchanges
(GMSC) which has received a short message to be forwarded

sent (901) from the short message service centre (SC, SC1,
SC2);


before the time preset in the second time
supervision (1125) expires, the home location register

(HLR, Figure 11) receives a short message waiting
indication message (1008) from the gateway mobile exchange

and restarts the time supervision period (1110) started on
including short message service identities (Sc1, Sc2) in

the list (1105) of such identities;
the home location register (HLR) stops the second
time supervision (1125);
the home location register (HLR) transmits an
acknowledgement message (1010) for the short message

waiting indication message to the gateway mobile exchange 
(GMSC) which transmitted the short message waiting

indication message (1008);
the gateway mobile exchange (GMSC) transmits a
negative short message transmission acknowledgement

message (1011) to the short message service centre (SC,
SC1, SC2) that transmitted the short message.
Home location register (HLR, Figure 11) in a
mobile telephone system, comprising


a memory means (1103) for storing subscriber
information in a subscriber database and a subscriber-specific

list (1104) of identities (1105) of short message
service centres (SC, SC1, SC2) that have transmitted

rejected short messages;
a subscriber facility unit (1102) for forwarding
messages between the subscriber database (1103) and the

other components of the mobile telephone system;
a means (1108) for processing the identities (1105)
of the short message service centres (SC2, SC2) that have

transmitted rejected short messages;
a means (1120) for transmitting a short message
transmission starting message to the short message service

centre (SC, SC1, SC2);
a control means (1118) for controlling said means
(1120) for transmitting a short message transmission

starting message so that it will transmit a short message
transmission starting message to the short message service

centre (SC, SC1, SC2);

   
characterized in that
 the home
location register (HLR, Figure 11) further comprises:


a means (1110) for starting a first time super-vision
period associated with the identities (1105) of the

short message service centres (SC, SC1, SC2) that have
transmitted rejected short messages stored in the memory

means (1103); and 
a checking means (1110) for checking the expiry of
said first time supervision period (1110) in response to a

short message transmission routing information request
message (902) from the gateway mobile exchange (GMSC);
a means (HLR) for sending a short message
transmission routing information, including an identity of

one of the short message service centres (SC, SC1, SC2),
to the gateway mobile exchange (GMSC), and
said checking means is arranged to activate the
control means (1118) for the means (1120) for transmitting

a short message transmission starting message in response
to the expiry so that it will activate the transmission

(910) of a short message transmission starting message to
the short message service centre (SC, SC1, SC2) in

accordance with the identity in the short message
transmission routing information.
Home location register (HLR, Figure 11)
according to claim 9, 
characterized in that

the home location register further comprises:

   a means (1114) for monitoring the successful
completion of short message transmiss
ion, which means
(1114), in the case of a successful short message

transmission, starts the transmission (1120) of short
message transmission starting messages to the short

message service centres (SC, SC1, SC), and in the case of
an unsuccessful short message transmission, restarts the

first time supervision (1110).
Home location register (HLR, Figure 11)
according to claim 10, 
characterized in that

said time supervision period and checking means (1110) is
further arranged to monitor the reception of the short

message waiting indication message (1008) notifying of an
unsuccessful transmission of a short message transmitted

from the gateway mobile exchange (GMSC) to the home 
location register (HLR) and containing the identity (Sc1,

Sc2) of the short message service centre (SC1, SC2) from
which the short message was transmitted.
</CLAIMS>
</TEXT>
</DOC>
