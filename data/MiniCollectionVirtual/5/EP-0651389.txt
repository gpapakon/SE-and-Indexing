<DOC>
<DOCNO>EP-0651389</DOCNO> 
<TEXT>
<INVENTION-TITLE>
Detection of overusage of spare sectors in an optical disk.
</INVENTION-TITLE>
<CLASSIFICATIONS>G11B700	G11B700	G11B70037	G11B7004	G11B2010	G11B2010	G11B2012	G11B2012	G11B2018	G11B2018	G11B2736	G11B2736	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>G11B	G11B	G11B	G11B	G11B	G11B	G11B	G11B	G11B	G11B	G11B	G11B	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>G11B7	G11B7	G11B7	G11B7	G11B20	G11B20	G11B20	G11B20	G11B20	G11B20	G11B27	G11B27	</CLASSIFICATIONS-FOURTH>
<ABSTRACT>
An apparatus and method are provided for tracking the number of 
permanent and temporary errors, and spare sectors used as a result of the 

errors, on a per disk and per drive basis. During read/write operations, 
a determination is made as to whether the total number of spares used to 

replace defective sectors on a disk exceeds a predetermined limit. This 
limit can be different depending upon the type of disk in 
use, rewritable 
or WORM. If the limit is exceeded, diagnostics are preferably executed 

to ascertain the cause of the excess usage and appropriate corrective 
action, such as requesting that the disk and drive lens be cleaned, is 

then initiated. Moreover, an attempt can be made to recover used spare 
sectors on a rewritable disk. 


</ABSTRACT>
<APPLICANTS>
<APPLICANT-NAME>
IBM
</APPLICANT-NAME>
<APPLICANT-NAME>
INTERNATIONAL BUSINESS MACHINES CORPORATION
</APPLICANT-NAME>
</APPLICANTS>
<INVENTORS>
<INVENTOR-NAME>
GAUDET ANDREW AUGUST
</INVENTOR-NAME>
<INVENTOR-NAME>
KULAKOWSKI JOHN EDWARD
</INVENTOR-NAME>
<INVENTOR-NAME>
MEANS RODNEY JEROME
</INVENTOR-NAME>
<INVENTOR-NAME>
PATTON DAVID LELAND
</INVENTOR-NAME>
<INVENTOR-NAME>
GAUDET, ANDREW AUGUST
</INVENTOR-NAME>
<INVENTOR-NAME>
KULAKOWSKI, JOHN EDWARD
</INVENTOR-NAME>
<INVENTOR-NAME>
MEANS, RODNEY JEROME
</INVENTOR-NAME>
<INVENTOR-NAME>
PATTON, DAVID LELAND
</INVENTOR-NAME>
</INVENTORS>
<DESCRIPTION>
This invention relates to optical storage apparatus and, more 
particularly, to the detection of excessive spare sector consumption due 
to lens or disk contamination, media deterioration or hardware failure. Standard erasable and write once (WORM) optical disks may be 
formatted with several thousand spare sectors per surface. The purpose 
of the spare sectors is to provide locations for recording data when 
defects or deterioration in the media, debris on the media or lens, or 
intermittent or marginal hardware problems create the inability to 
reliably read and write data. In optical disk technology, the marks that 
are placed on a disk when data is written may be as small as one micron; 
therefore a small defect or a dust particle on the disk can introduce an 
error when reading or writing the data. Defects in optical disks are generally of two types. One type is 
within the structure of the disk itself, is caused during manufacturing 
and is referred to as a permanent defect. Erasable magneto-optical (MO) 
disks are more prone to such permanent defects than many other types of 
media since MO disks are produced with layers of reactive materials such 
as terbium, iron and cobalt. These active layers are covered with 
transparent plastic material designed to be impermeable to oxygen and 
moisture which can cause a permanent defect if they reach an active 
layer. Such defects typically occur during the manufacturing process but 
can also arise later during use of the disk if moisture or oxygen reach 
the active layers during use. Moreover, such defects tend to grow over 
time. Consequently, if a defect is initially present in an active layer 
such that only one bit of data in one sector is affected, that defect can 
grow over time to affect additional bits of data in that sector or 
adjacent sectors. A second type of defect creating problems in reading and writing 
data is contamination due to dust or debris and is referred to as a 
temporary defect. When a large enough particle of dust lights upon the 
surface of a disk or drive lens, the laser beam is diffused or blocked 
and the disk cannot be reliably written or read, if at all, at that 
particular location. Temporary defects created by a dust particle 
generally do not grow in size but can move across the surface over time  
 
as the dust particle moves. Such defects can also, in many instances, be 
removed by cleaning the disk and/or lens surface(s). Intermittent and marginal hardware problems can also cause data 
access to be unreliable. For
</DESCRIPTION>
<CLAIMS>
A system for determining overusage of spare sectors on an optical 
disk, comprising: 

   an optical disk drive (12) for receiving an optical disk (32) and 
for recording information to and reproducing information from said 

optical disk, the optical disk having a first number X of data sectors 
and a second number Y of spare sectors to replace data sectors found to 

be defective; 
   a controller (10), responsive to instructions from a main 

processing device (14), to control the optical disk drive (12), the 
controller comprising: 

   accessing means for performing a sector accessing operation on the 
optical disk; 

   detection means for detecting whether any accessed sectors are 
defective and assigning spare sectors to replace any defective sectors 

detected; 
   calculation means for calculating a limit Z indicating the maximum 

number of spare sectors which can be assigned to replace defective 
sectors on the optical disk before an indication of overusage of spare 

sectors is generated; 
   storing means for establishing a table in a memory device and for 

adding entries to the table as a result of sector accessing operations, 
each entry including an identification of the optical disk, an 

identification of the optical disk drive, the number of sectors written 
to the optical disk, the number of defective sectors encountered during 

the sector accessing operation, and the number of spare sectors assigned 
to replace defective sectors; 

   determination means for determining from the table the total number 
SS of spare sectors which have been assigned to replace defective sectors 

on the optical disk; and
 

   comparison means for comparing a value indicative of the total 
number SS with the calculated limit Z, and generating an overusage 

indication if that value exceeds the calculated limit Z. 
A system as claimed in claim 1, wherein the controller (10) further 
comprises means for determining whether the optical disk is a rewritable 

disk or a write-once disk. 
A system as claimed in claim 2, wherein if the specific disk is a 
write-once disk, said calculation means selects the limit Z to be a rate 

MSR calculated by the equation K*Y/X, where K is greater than 0 and less 
than or equal to 1, the comparison means being adapted to compare this 

limit Z with a value ASR calculated by the equation SS/SW, where SW is 
the total number of data sectors to which information has been recorded, 

and to generate the overusage indicator if ASR exceeds MSR. 
A system as claimed in claim 3, wherein instead of the value ASR, a 
value ASR' is calculated by the equation S/W, where S is the number of 

spare sectors assigned during a disk access operation and W is the number 
of data sectors written during the disk access operation, and the 

comparison means is adapted to compare ASR' with MSR, and to generate the 
overusage indicator if ASR' exceeds MSR. 
A system as claimed in claim 2, wherein, if the optical disk is a 
rewritable disk, said calculation selects the limit Z to be a rate EAL 

calculated by the equation K*Y, where K is greater than 0 and less than 
or equal to 1, the comparison means being adapted to compare this limit Z 

with the total number SS of spare sectors, and to generate the overusage 
indicator if SS exceeds EAL. 
A system as claimed in claim 5, further comprising: 
   means for cleaning the optical disk in response to the overusage 

indicator; 
   means for attempting reclamation of spare sectors previously 

assigned to replace defective data sectors; 
   means for updating the number SS after the attempted reclamation; 

and
 

   means for generating a media deterioration signal if the updated SS 
still exceeds EAL. 
A system as claimed in any preceding claim, wherein the memory 
device in which the table is established is non-volatile storage. 
An automated storage and retrieval system for optical storage 
disks, comprising: 

   one or more systems as claimed in any of claims 1 to 7 for 
determining overusage of spare sectors on optical disks; 

   an array of cells for storing a plurality of optical disks, each of 
the optical disks having a first number X of data sectors and a second 

number Y of spare sectors to replace data sectors found to be defective; 
and 

   an accessor for transporting a selected optical disk between one of 
said cells and an optical disk drive of said one or more systems. 
A method of determining overusage of spare sectors on an optical 
disk, comprising the steps of: 

   mounting an optical disk (32) into an optical disk drive (12) 
adapted to record information to and reproduce information from said 

optical disk, the optical disk having a first number X of data sectors 
and a second number Y of spare sectors to replace data sectors found to 

be defective; 
   performing a sector accessing operation on the optical disk; 

   detecting whether any accessed sectors are defective; 
   if defective sectors are detected, assigning spare sectors to 

replace the defective sectors; 
   calculating a limit Z indicating the maximum number of spare 

sectors which can be assigned to replace defective sectors on the optical 
disk before an indication of overusage of spare sectors is generated;

 
   adding entries as a result of sector accessing operations to a 

table established in a memory device, each entry including an 
identification of the optical disk, an identification of the optical disk 

drive, the number of sectors written to the optical disk, the number of 
defective sectors encountered during the sector accessing operation, and 

the number of spare sectors assigned to replace defective sectors; 
   determining from the table the total number SS of spare sectors 

which have been assigned to replace defective sectors on the optical 
disk; 

   comparing a value indicative of the total number SS with the 
calculated limit Z; and 

   generating an overusage indication if that value exceeds the 

calculated limit Z. 
A method as claimed in claim 9, further comprising the step of 
determining whether the optical disk is a rewritable disk or a write-once 

disk. 
A method as claimed in claim 10, wherein if the specific disk is a 
write-once disk, the step of calculating the limit Z comprises the step 

of selecting the limit Z to be a rate MSR calculated by the equation 
K*Y/X, where K is greater than 0 and less than or equal to 1, the 

comparing step then comparing this limit Z with a value ASR calculated by 
the equation SS/SW, where SW is the total number of data sectors to which 

information has been recorded, and the overusage indicator being 
generated if ASR exceeds MSR. 
A method as claimed in claim 10, wherein, if the optical disk is a 
rewritable disk, said step of calculating the limit Z comprises the step 

of selecting the limit Z to be a rate EAL calculated by the equation K*Y, 
where K is greater than 0 and less than or equal to 1, the comparing step 

then comparing this limit Z with the total number SS of spare sectors, 
and the overusage indicator being generated if SS exceeds EAL. 
A method as claimed in claim 12, further comprising the steps of: 
   cleaning the optical disk in response to the overusage indicator;

 
   attempting reclamation of spare sectors previously assigned to 

replace defective data sectors; 
   updating the number SS after the attempted reclamation; and 

   generating a media deterioration signal if the updated SS still 
exceeds EAL. 
A method as claimed in any of claims 9 to 13, further comprising 
the steps of: 

   executing drive diagnostics when an overusage indication is 
generated; and 

   cleaning at least a portion of an optical head in the optical disk 
drive. 
</CLAIMS>
</TEXT>
</DOC>
