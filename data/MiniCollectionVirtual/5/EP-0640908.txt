<DOC>
<DOCNO>EP-0640908</DOCNO> 
<TEXT>
<INVENTION-TITLE>
Noise reduction in image signals
</INVENTION-TITLE>
<CLASSIFICATIONS>G06T900	H04N521	G06T520	G06T520	H04N521	G06T900	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>G06T	H04N	G06T	G06T	H04N	G06T	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>G06T9	H04N5	G06T5	G06T5	H04N5	G06T9	</CLASSIFICATIONS-FOURTH>
<ABSTRACT>
Apparatus is provided for producing a noise-reduced image 
signal from an input image signal having relatively more noise. The 

input image signal is divided into a number of block signals. A class 
code is produced for each of the block signals and used to produce low 

noise image data which is either output as a pixel or block of the 
noise-reduced image signal or is 
used to produce the same. 

</ABSTRACT>
<APPLICANTS>
<APPLICANT-NAME>
SONY CORP
</APPLICANT-NAME>
<APPLICANT-NAME>
SONY CORPORATION
</APPLICANT-NAME>
</APPLICANTS>
<INVENTORS>
<INVENTOR-NAME>
FUJIMORI YASUHIRO
</INVENTOR-NAME>
<INVENTOR-NAME>
HORISHI TAKASHI
</INVENTOR-NAME>
<INVENTOR-NAME>
KONDO TETSUJIRO
</INVENTOR-NAME>
<INVENTOR-NAME>
NISHIKATA TAKEHARU
</INVENTOR-NAME>
<INVENTOR-NAME>
FUJIMORI, YASUHIRO
</INVENTOR-NAME>
<INVENTOR-NAME>
HORISHI, TAKASHI
</INVENTOR-NAME>
<INVENTOR-NAME>
KONDO, TETSUJIRO
</INVENTOR-NAME>
<INVENTOR-NAME>
NISHIKATA, TAKEHARU
</INVENTOR-NAME>
</INVENTORS>
<DESCRIPTION>
The present invention relates to apparatus for reducing
noise in an image signal.Conventional apparatus for reducing noise in image
signals employ a variety of filtering techniques, such as a
three-dimensional processing technique which may be carried out
using an apparatus such as that illustrated in Fig. 1. In the
apparatus of Fig. 1, an input signal, such as a digital image
signal, is received at an input terminal 111. The input signal
is supplied both to a still picture noise reducing filter 112 and
a moving picture noise-reducing filter 113 each of which reduces
the noise content of the input image signal and supplies a
filtered, noise-reduced output image signal to a respective fixed
terminal of a switching circuit 120.The input image signal received at the terminal 111 is
also provided to a motion detection circuit 130 which serves to
detect motion in the input image signal on a pixel-by-pixel
basis. The motion detection circuit 130 produces a motion
detection signal which it supplies as a control signal to the
switch 120 in order to control the selection of the output of the
filter 112 or the filter 113 to be supplied at an output terminal
121 of the Fig. 1 apparatus. That is, when the motion detection
circuit 130 determines that the input image signal is a still
picture, the output of the still picture filtering circuit 112 is
supplied to the output terminal 121, while when the motion 
detection circuit 130 determines that the input image signal is a
moving picture, the output of the moving picture filter circuit
113 is supplied at the output 121.Accordingly, the apparatus of Fig. 1 adaptively
responds to motion in the input image signal for reducing its
noise content.The still picture noise-reducing filter 112 is a mean
value filter which serves to smooth the input image signal along
the time axis. The filter 112 includes a frame memory 115,
multiplication circuits 116 and 117, and an adding circuit 118.
The frame memory 115 outputs the data of a frame preceding that
of the input image signal to the multiplication circuit 116
wherein the output data is multiplied by a factor k, where 0 < k
< 1. The input image signal is multiplied in the multiplication
circuit 117 by a factor (1-k). The outputs of the multiplication
circuits 116 and 117 are supplied to the adding circuit 118 which
serves to add these signals and supply the same to the output of
the filter 112 as well as to the frame memory 115 for storage
therein.The moving picture noise-reducing filter 113 is a
median-value filter or median
</DESCRIPTION>
<CLAIMS>
Apparatus for producing a noise-reduced image signal
having a plurality of pixels from an input image signal, the input

image having a plurality of pixels (22) and relatively more noise than
the noise-reduced image signal, the apparatus being characterised by:


block producing means (2) for producing a plurality of
noise-containing blocks of pixels from the input image signal, each of

the noise-containing blocks of pixels representing a portion of an
image represented by the input image signal;
class code producing means (3) for classifying the noise-containing
blocks of pixels by their pixel content and producing a

class code for each of the plurality of noise-containing blocks of
pixels; and
noise-reduced image signal producing means (4) for
producing the noise-reduced image signal in accordance with trained

data contained in a memory, the memory containing for each of a
plurality of class codes trained data generated from a reference image

signal having low noise, the memory being addressed in accordance with
the class codes to read out data for forming the noise-reduced image

signal.
Apparatus as claimed in claim 1, wherein the memory
stores for each class code a pixel as said low noise image data.
Apparatus as claimed in claim 2, wherein the memory
stores the trained values for each class in data compressed form.
Apparatus as claimed in claim 1, wherein each class
code identifies a respective low noise block signal as said low noise

image data, and the memory stores a plurality of low noise block data
at respective addresses associated with the class codes thereof and is

operative to read out selected ones of the low noise block data in
response to the class codes produced by the class code producing means.
Apparatus as claimed in claim 4, including means for
converting each of the selected low noise block data into a noise-reduced

image signal arranged as a sequence of image signal lines.
Apparatus as claimed in claim 5, wherein the memory
stores the plurality of trained values for each class code in

compressed image data form. 
Apparatus as claimed in claim 1, including:

filtering means (14) for producing a corresponding filtered
block signal from each of the plurality of noise-containing blocks of

pixels; and
difference signal producing means (15) for producing a
noise-containing difference block signal from each of the plurality of

noise-containing blocks of pixels and its corresponding filtered block
signal;
wherein the class code producing means (16) is operative to
produce each class code based on a respective noise-containing

difference block signal, the class code produced by the class code
producing means identifying low noise difference image data

representing a difference between (A) low noise image data representing
an image portion and having a noise level lower than the noise-containing

blocks of pixels corresponding to the noise-containing block
difference signal on which the class code is based and (B) a filtered

signal produced by filtering the low noise image data; and
wherein the noise-reduced image signal producing means
comprises a memory (17) storing the plurality of low noise difference

image data at respective addresses associated with the class codes
thereof, the memory being operative to read out selected low noise

difference image data in response to the class codes produced by the
class code producing means (16); and
adding means (18) for adding the selected low noise
difference image data with data of corresponding filtered block signals

to produce said noise-reduced image signal.
Apparatus as claimed in claim 1, wherein the memory
contains for each class a set of coefficients as the trained data and

the producing means further comprises a generating means responsive to
the coefficients to produce the noise-reduced image signal.
Apparatus as claimed in claim 1, wherein

the memory stores a plurality of coefficient data sets each
at a respective address associated with a corresponding class code

thereof, each coefficient data set including a plurality of factors for
each multiplying a corresponding value included in a noise-containing

blocks of pixels to produce corresponding low noise image data, the
memory being operative to read out selected ones of the plurality of 

coefficient data sets in response to class codes produced by the class
code producing means; and
means for producing a plurality of low noise image data
based on the plurality of noise-containing blocks of pixels and

corresponding coefficient data sets output by the memory to produce
said noise-reduced image signal.
Apparatus as claimed in claim 8, wherein the
generating means produces the pixel of the noise-reduced image from a

set of pixels of the input image adjacent thereto and pixels of the
noise-reduced image.
Apparatus as claimed in claim 9, wherein each class
code identifies a respective low noise block signal as said low noise

image data, and the means for producing said plurality of low noise
image data is operative to produce each of a plurality of respective

low noise block signals identified by a respective class code based on
a noise containing blocks of pixels for which the respective class code

was produced and a coefficient data set read from the memory in
response to the respective class code.
Apparatus as claimed in claim 11, including means for
converting the respective low noise block signals into a noise-reduced

image signal arranged as a sequence of image signal lines.
Apparatus as claimed in claim 1, including:

filtering means (84) for producing a corresponding filtered
block signal from each of the plurality of noise-containing blocks of

pixels;
difference signal producing means (86) for producing a
noise-containing difference block signal from each of the plurality of

noise-containing blocks of pixels and its corresponding filtered block
signal;
wherein the class code producing means (90) is operative to
produce each class code based on a respective noise-containing

difference block signal, the class code produced by the class code
producing means identifying low noise difference image data

representing a difference between (A) low noise image data representing
an image portion and having a noise level lower than the noise-containing

block signal corresponding to the noise-containing 
difference block signal on which the class code is based and (B) a

filtered signal produced by filtering the low noise image data; and
wherein the noise-reduced image signal producing means
comprises a memory (92) storing a plurality of coefficient data sets

each at a respective address associated with a corresponding class code
thereof, each coefficient data set including a plurality of factors for

each multiplying a corresponding value included in a noise-containing
difference block signal to produce a value of a corresponding low

noise difference block signal, the memory (92) being operative to read
out selected ones of the plurality of coefficient data sets in response

to class codes produced by the class code producing means (90);
means (94) for producing a plurality of low noise
difference image data based on the noise-containing difference block

signals and corresponding coefficient data sets output by the memory
(92); and
means (98) for adding the plurality of low noise difference
image data with data of corresponding filtered block signals to produce

said noise-reduced image signal.
Apparatus as claimed in claim 1, including:

filtering means for producing a corresponding filtered
block signal from each of the plurality of noise-containing blocks of

pixels;
wherein the class code producing means is operative to
produce said class code based on the corresponding filtered block

signal of each of the plurality of noise-containing blocks of pixels;
and
wherein the noise-reduced image signal producing means
comprises a memory storing the low noise image data at respective

addresses associated with the class codes thereof, the memory being
operative to read out selected low noise image data in response to

class codes produced by the class code producing means to produce said
noise-reduced image signal.
Apparatus as claimed in claim 1, including:

filtering means (108) for producing a corresponding
filtered block signal from each of the plurality of noise-containing

blocks of pixels; 
wherein the class code producing means (112) is operative
to produce said class code based on the corresponding filtered block

signal of each of the plurality of noise-containing blocks of pixels;
and
wherein the noise-reduced image signal producing means
comprises a memory (114) storing a plurality of coefficient data sets

each at a respective address associated with a corresponding class code
thereof, each coefficient data set including a plurality of factors for

each multiplying a corresponding value included in a filtered block
signal to produce corresponding low noise image data, the memory being

operative to read out selected ones of the plurality of coefficient
data sets in response to class codes produced by the class code

producing means; and
means (118) for producing a plurality of low noise image
data based on the filtered block signals and corresponding coefficient

data sets output by the memory to produce said noise-reduced image
signal.
Apparatus as claimed in claim 10, wherein the pixel
of the noise-reduced image is a linear combination of the coefficients

and the set of pixels of the input image adjacent thereto.
Apparatus as claimed in any one of the preceding
claims, wherein the class code producing means detects the pattern of

a group of pixels of the input image and produces the class code in
dependence upon the detected pattern.
A method of producing a noise-reduced image signal
having a plurality of pixels from an input image signal, the input

image having a plurality of pixels and relatively more noise than the
noise-reduced image signal, said method being characterised by the

steps of:

producing a plurality of noise-containing blocks of pixels
from the input image signal, each of the noise-containing blocks of

pixels representing a portion of an image represented by the input
image signal;
classifying the noise-containing blocks of pixels by their
pixel content and producing a class code for each of the plurality of

noise-containing blocks of pixels; and 
producing the noise-reduced image signal in accordance with
trained data contained in a memory, the memory containing for each of

a plurality of class codes trained data generated from a reference
image having low noise, the memory being addressed in accordance with

the class codes to read data for forming the noise-reduced image
signal.
</CLAIMS>
</TEXT>
</DOC>
