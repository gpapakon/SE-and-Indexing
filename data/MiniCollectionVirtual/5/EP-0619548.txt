<DOC>
<DOCNO>EP-0619548</DOCNO> 
<TEXT>
<INVENTION-TITLE>
Interface circuit between a control bus and an integrated circuit suitable for two different protocol standards
</INVENTION-TITLE>
<CLASSIFICATIONS>G06F1340	G06F1340	H04L2906	H04L2906	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>G06F	G06F	H04L	H04L	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>G06F13	G06F13	H04L29	H04L29	</CLASSIFICATIONS-FOURTH>
<ABSTRACT>
While employing the same number of dedicated pins of 
an IC, a self-configurable interface circuit between a 

control bus and the IC recognizes whether the IC is 
being used in a system employing an SPI or a I2CBUS 

protocol for the transmission to the IC of control 
signals through the bus. The interface circuit employs 

an "inner" SPI interface standard block, to a third 
input of which either a true CE (chip-enable) signal 

coming from a third wire of the bus or a virtual CE 
signal that is self-generated by the interface circuit 

in case of operation in an I2CBUS environment, is fed. 
The third (ADDR) pin of the IC may be connected to the 

CE wire of the bus in case of an SPI application or it 
may be biased at the supply or ground voltage for 

selecting one or the other of two internal addresses of 
the IC, when functioning in an I2CBUS environment. 


</ABSTRACT>
<APPLICANTS>
<APPLICANT-NAME>
ST MICROELECTRONICS SRL
</APPLICANT-NAME>
<APPLICANT-NAME>
STMICROELECTRONICS S.R.L.
</APPLICANT-NAME>
</APPLICANTS>
<INVENTORS>
<INVENTOR-NAME>
CASSIS MARCO
</INVENTOR-NAME>
<INVENTOR-NAME>
PEDRAZZINI GIORGIO
</INVENTOR-NAME>
<INVENTOR-NAME>
CASSIS, MARCO
</INVENTOR-NAME>
<INVENTOR-NAME>
PEDRAZZINI, GIORGIO
</INVENTOR-NAME>
</INVENTORS>
<DESCRIPTION>
In complex signal processing systems, commonly
comprising a plurality of integrated circuits
(ICs) containing functional signal processing
circuits, the practice of controlling the operation
of the system by a microprocessor is becoming
more and more common. The microprocessor is
capable of receiving and carrying out instructions
for enabling/disabling certain functions and/or
for adjusting certain operating parameters
and of transmitting commands to the various
integrated circuits for signal processing through a
connection bus. Audio signals processing systems
in TV receivers, car radios and similar
apparatuses, make large use of such a
microprocessor control system for selecting
modes of operation for adjusting balance, tone,
volume, etc..The document EP-A-0 225 720-A2 describes an integrated circuit capable
of interfacing with a four-line or with a two-line type bus to receive
formatted input data and outputting data formatted in a selectable format.
The decoding function in selected by means of an externally generated
chip-select signal.Transmission of different control signals
through the bus from the microprocessors to
the various integrated circuits of the system
takes place according to a certain transmission
protocol. The transmission protocols more widely
employed for these purposes are the so-called
SPI protocol, which is widely adopted as a
standard in US and the I2CBUS protocol, which
is the standard most adapted in European
countries. The SPI standard requires three
wires for transmitting to an interface circuit of
an integrated device three distinct signals
that are commonly referred to by the
acronyms: CL (clock), DA (data) and CE (chip-enable)
and does not require the selection of
an address. Viceversa the I2CBUS standard
requires two wires, for transmitting the
signals: CL and DA, respectively, plus the
selection of an internal address (i.e. an address  
present within a controlled IC).Commercial ICs are specifically produced to be used
with one or the other of said standard protocols.In either case, the devices are provided with three
dedicated pins. In case of ICs destined to be used in
an SPI environment, the IC is provided with pins CE, DA
and Cl. In case of devices destined to operate in an
I2CBUS environment, each IC is provided with three
dedicated pins, respectively, DA, CL and ADDR. The
third pin ADDR of these devices is provided for address
selection. Commonly, users of these ICs require the
availability within each IC of at least two addresses
that may be selected through
</DESCRIPTION>
<CLAIMS>
An interface circuit between a bus for the transmission of
control signals according to a certain protocol chosen between a

first standard (SPI) requiring three wires for the transmission of
a clock (CL), a data (DA) and a chip-enable (CE) signal

respectively and a second standard (I2CBUS), requiring two wires
for the transmission of a clock (CL) and a data (DA) signal

respectively and the selection of an address present within a
controlled integrated circuit, and the controlled integrated

circuit,

said interface circuit having at least a first pin connected to
a clock transmission wire (CL) of said bus, a second pin connected

to a data transmission wire (DA) of said bus and a third pin
(ADDR),
an inner interface block capable of functioning according to
said first standard (SPI) and having a first input connected to

said first pin (CL), a second input connected to said second pin
(DA) and a third input through which a virtual or real chip-enable

signal (CE) is received;
decoder means capable of sensing a signal present on said third
pin (ADDR) and of modifying accordingly the state of a selection

signal (buschoice) generated by said decoder means, for one (SPI)
or the other (I2CBUS) of said standards;

   characterized by comprising

means for decoding an address and for generating an
acknowledgement signal, enableable and disableable by said

selection signal (buschoice) and having an input connected to said
first pin (CL), a second input connected to said second pin (DA)

and a third input to which a signal whose state depends from the
potential present on said third pin (ADDR) is fed, a state of said

selection signal (buschoice), corresponding to a selection of said
second standard (I2CBUS), enabling said means to generate an

acknowledge signal;
a virtual chip-enable signal generator capable of receiving
said acknowledgement signal generated by said means and to generate

a virtual chip-enable signal;
a multiplexer (MUX) transferring to said third input of said
inner interface block a chip-enable signal fed to said third pin

(ADDR) of the circuit in case of operation according to said first
standard (SPI) or said generated virtual chip-enable signal in case

of operation according to said second standard (I2CBUS) depending
on the state of said selection signal (buschoice) fed to a control

input of said multiplexer (MUX);
said third pin (ADDR) receiving a chip-enable signal through a
respective wire of the bus in case of operation according to said

first standard (SPI) or, in case of operation according to said
second standard (I2CBUS), being kept floating or connected to

ground potential for selecting either a first or a second address.
An interface circuit as defined in claim 1,
wherein said third pin (ADDR) is connected to a

noninverting input of a comparator and through an
impedance to a supply node, the output of the

comparator being connected to an input of said decoder
means (I2CBUS/SPI decoder), to an input of said

multiplexer (MUX) and to an input of said means for
decoding an address and generating an acknowledge

signal.
</CLAIMS>
</TEXT>
</DOC>
