<DOC>
<DOCNO>EP-0641098</DOCNO> 
<TEXT>
<INVENTION-TITLE>
Communication system
</INVENTION-TITLE>
<CLASSIFICATIONS>H04L2505	H04J312	H04L2502	H04J312	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>H04L	H04J	H04L	H04J	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>H04L25	H04J3	H04L25	H04J3	</CLASSIFICATIONS-FOURTH>
<ABSTRACT>
The present invention concerns a multiplexer for use in a system for transmitting more than 
one type of data eg a system for transmitting voice and data. The invention eliminates 

transmission errors in framed data due to clock errors on the transmission side by 
appropriate choice of the length of multiplexer frames. Two embodiments are disclosed, 

one in which the frame rate of the multiplexer is greater than the frame rate of a voice 
coder and another in which the length of multiplexer frames is slightly adjustable to 

account for clock errors. 

</ABSTRACT>
<APPLICANTS>
<APPLICANT-NAME>
HEWLETT PACKARD CO
</APPLICANT-NAME>
<APPLICANT-NAME>
HEWLETT-PACKARD COMPANY
</APPLICANT-NAME>
</APPLICANTS>
<INVENTORS>
<INVENTOR-NAME>
MORLEY STEPHEN
</INVENTOR-NAME>
<INVENTOR-NAME>
MORLEY, STEPHEN
</INVENTOR-NAME>
</INVENTORS>
<DESCRIPTION>
The present invention relates to a multiplex system for transmitting and receiving a
composite signal on a single communications channel. The present invention has
application in a system handling a composite voice and data signal for allowing remote
users to speak to one another and, at the same time, to share visual data. A telephone
network can be used for this type of communication, either the Public Switched Telephone
Network or a private telephone network.In one known scheme, a low bit rate voice encoder samples an analogue speech waveform
and generates frames of encoded voice data. These frames are transmitted on a
communications channel to a remote decoder which converts the frames back to an
analogue voice signal. Other (non-voice) data may be transmitted in the same
communications channel as the voice frames, for example image data.Figure 1 illustrates the potential for timing errors in such a scheme. A first clock 1
controls the voice encoder and a second clock 2 controls the multiplexer and hence the
timing for the communications channel. A third clock 3 controls the timing of the receiving
voice decoder.Error 1 is the error between clocks 1 and 2. Error 2 is the error between the clocks 2 and
3. Error 3 is the cumulative error between the clocks 1 and 3.If clocks 1 and 2 are synchronous to each other then the voice frames can be transmitted
without error on the communications channel. If clocks 1 and 2 are not synchronous to
each other then a clocking error (Error 1) builds up over time and voice frames may be
lost. It may be difficult or impossible in many situations to lock the timing of the voice
encoder and multiplexer in which case error 1 can lead to errors in the transmission of
voice information.At the receiving end, error 3 causes a similar problem and occasionally voice frames have
to be dropped or repeated.In prior schemes different attempts have been made to overcome the problem caused by
error 1.One way is that, when one frame of timing error has built up, the transmitter either deletes
a voice frame ( if the voice encoder is generating data too quickly ) or repeats a voice 
frame (if the voice encoder is generating data too slowly). WO 92/15159 shows an
approach for clock matching between independent networks adopting this approach.
This method when applied to the problem of interest introduces errors into the
transmitted voice signal however.Another way is for the transmitter to allocate extra bandwidth on the
communications channel to allow for an overspeed voice encoder.
</DESCRIPTION>
<CLAIMS>
A system for multiplexing digital data in the form of frames of
predetermined size with other data for transmission on a single physical channel,

comprising means for:

a) receiving the frames of data at a first frame rate, wherein the source of framed
data (24) is controlled by a first clock,
b) receiving the other data;
c) generating multiplexer frames under the control of a second clock, the
multiplexer frames being of a substantially predetermined size wherein

individual multiplexer frames incorporate the framed and/or other data
according to which of these data is available for inclusion in that multiplexer

frame and a header (H) containing information about the contents of the frame,

whereby the multiplexer frames are transmitted at a second frame rate which is
greater than the first frame rate and the length of the multiplexer frames is

sufficient that transmission errors due to timing errors between the first and
second clocks are reduced or eliminated.
A system for multiplexing digital data in the form of frames of
predetermined size with other data for transmission on a single physical channel,

comprising means for:

a) receiving the frames of data at a first frame rate, wherein the source of framed
data (24) is controlled by a first clock;
b) receiving the other data;
c) generating multiplexer frames under the control of a second clock, the 
multiplexer frames being of a substantially predetermined size wherein

individual multiplexer frames incorporate the framed and/or other data according
to which of these data is available for inclusion in that multiplexer frame and a

header (H) containing information about the contents of the frame,
d) comparing the clock rates of the first clock and the second clock;
e) calculating the cumulative error (the first error) between the first and second
clocks and for adjusting the length of a multiplexer frame to be transmitted from

the multiplexer by a predetermined amount whenever said first error reaches a
predetermined threshold, whereby the length of the multiplexer frames is chosen

so as to reduce or eliminate transmission errors due to timing errors between the
first and second clocks.
A system according to claim 2 comprising means for ensuring that no two
successive multiplexer frames have the same length adjustment.
A system according to claim 2 or claim 3 wherein said predetermined amount is
one octet.
A system according to any one of claims 2 to 4 wherein the means for deriving
the length adjustments comprises means for establishing the position of the

header (H) in received multiplexer frames.
A system according to any preceding claim wherein the headers (H) in the
multiplexer frames are used as frame delimiters.
A system according to any preceding claim wherein the headers (H) in the
multiplexer frames are error protected.
A system according to claim 7 wherein the set of headers (H) selected to
represent frame content information all have a chosen hamming distance. 
A system according to any preceding claim in which the framed data is voiced
data.
</CLAIMS>
</TEXT>
</DOC>
