<DOC>
<DOCNO>EP-0631238</DOCNO> 
<TEXT>
<INVENTION-TITLE>
Method and apparatus for pseudo-aligned transfers of data to memory.
</INVENTION-TITLE>
<CLASSIFICATIONS>G06F1204	G06F1204	G06F1320	G06F1328	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>G06F	G06F	G06F	G06F	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>G06F12	G06F12	G06F13	G06F13	</CLASSIFICATIONS-FOURTH>
<ABSTRACT>
A method and apparatus for pseudo-aligned transfers to 
memory for processors, peripherals and memories. Alignment 

logic, typically coupled to a peripheral, receives a 
plurality of data bytes from a processor. The alignment 

logic uses a control header transferred with the data bytes 
to determine whether the data bytes require re-alignment. 

To effect re-alignment, the alignment logic combines, 
rotates, and masks the data bytes as indicated by the 

control header. 

</ABSTRACT>
<APPLICANTS>
<APPLICANT-NAME>
AT 
&
 T GLOBAL INF SOLUTION
</APPLICANT-NAME>
<APPLICANT-NAME>
AT
&
T GLOBAL INFORMATION SOLUTIONS INTERNATIONAL INC.
</APPLICANT-NAME>
</APPLICANTS>
<INVENTORS>
<INVENTOR-NAME>
JOHNSON STEPHEN M
</INVENTOR-NAME>
<INVENTOR-NAME>
JOHNSON, STEPHEN M.
</INVENTOR-NAME>
</INVENTORS>
<DESCRIPTION>
The present invention relates to a method and 
apparatus for pseudo-aligned transfers of data to memory. In computer systems, data is often transferred between 
processors, memories, and peripheral devices via an 
input/output (I/O) bus. Standardized buses such as the 
ISA, EISA, and Micro Channel ™ buses have long been used 
in computer systems to provide a common I/O interface to 
peripherals across different platforms and different 
processors. However, there are a number of problems 
associated with data transfers across such buses. One problem with data transfers across buses involves 
unaligned transfers of data. Unaligned transfers occur 
when a block of data bytes is not aligned to a word or 
double word boundary at the source and/or the destination. 
Such misalignment can incur significant processor or device 
overhead in shifting and/or masking the block of bytes 
during the transfer. For example, unaligned transfers in 
INTEL® 386 and 486 processors can be 50% to 250% slower 
than an equivalent aligned transfer of data. Thus, there 
is a need in the art for a method and apparatus for 
enhancing unaligned transfers of data to memory. It is an object of the present invention to overcome 
the above mentioned problem. According to a first aspect of the present invention 
there is provided a computer system, comprising a processor 
incorporating means for transferring a plurality of data 
bytes to a peripheral device via an input/output bus; and 
characterized in that the system further comprises 
alignment means, coupled to the peripheral device, for 
receiving the transferred data bytes from the processor, 
for determining whether the transferred data bytes require 
re-alignment, and for combining and rotating the 
transferred data bytes to effect the re-alignment. According to a second aspect of the present invention  
 
there is provied a method of transferring data in a 
computer system, comprising the step of transferring a 
plurality of data bytes from a processor to a peripheral 
device via an input/output bus; and characterized by the 
step of aligning the transferred data bytes, comprising the 
steps of receiving the transferred data bytes from the 
processor, determining whether the transferred data bytes 
require re-alignment, and combining and rotating the 
transferred data bytes to effect the re-alignment. An embodiment of the present invention will now be 
described, by way of example, with reference to the 
accompanying drawings, in which: 
Figure 1 illustrates an aligned memory
</DESCRIPTION>
<CLAIMS>
A computer system, comprising a processor (10) 
incorporating means (14) for transferring a plurality of 

data bytes to a peripheral device (16) via an input/output 
bus; and characterized in that the system further comprises 

alignment means (12), coupled to the peripheral device 
(16), for receiving the transferred data bytes from the 

processor (10), for determining whether the transferred 
data bytes require re-alignment, and for combining and 

rotating the transferred data bytes to effect the re-alignment. 
A computer system according to claim 1, in which 
the processor (10) further comprises means for formatting 

and transmitting a control header for the transferred data 
bytes, wherein the control header comprises rotation and 

direction information for the transferred data; and the 
alignment means (12) further comprises means (20,22,24,26) 

for interpreting the control header for the transferred 
data bytes, wherein the rotation and direction information 

directs the operation of the means for combining and 
rotating. 
A computer system according to claim 2 wherein 
the control header further comprises masking information, 

and the alignment means further comprises means for masking 
the transferred data bytes according to the masking 

information, so that only desired ones of the transferred 
data bytes are received by the peripheral device. 
A computer according to any one of the preceding 
claims, wherein the alignment means comprises: a first 

circuit (28a,30a,32a,36a) for storing the transferred data 
bytes received from the processor; a second circuit 

(28b,30b,32b,36b) for creating an aligned group of data 
bytes by selectively combining the data bytes currently 

being transferred by the processor and the data bytes 
previously transferred by the processor and stored in the 

 
first circuit; and a third circuit (28c,30c,32c,36c) for 

selectively rotating the aligned group of data bytes, so 
that the data bytes are correctly positioned within the 

aligned group. 
A method of transferring data in a computer 
system, comprising the step of transferring a plurality of 

data bytes from a processor to a peripheral device via an 
input/output bus; and characterized by the step of aligning 

the transferred data bytes, comprising the steps of 
receiving the transferred data bytes from the processor, 

determining whether the transferred data bytes require re-alignment, 
and combining and rotating the transferred data 

bytes to effect the re-alignment. 
A method according to claim 5, further comprising 
the steps of: (1) formatting and transmitting a control 

header for the transferred data bytes, wherein the control 
header comprises rotation and direction information for the 

transferred data; and (2) interpreting the control header 
for the transferred data bytes, wherein the rotation and 

direction information directs the operation of the 
combining and rotating step. 
A method according to claim 6, wherein the 
control header further comprises masking information, and 

the aligning step further comprises the step of masking the 
transferred data bytes according to the masking 

information, so that only desired ones of the transferred 
data bytes are received by the peripheral device. 
A method according to claim 5, further comprising 

the steps of: 

(a) transferring a first group of data bytes from the 
processor to the peripheral device; 
(b) transferring a second group of data bytes from 
the processor to the peripheral device; 
(c) selectively combining data bytes from the first 
 

group with data bytes from the second group to create a 
third group of data bytes aligned to a specified boundary; 

and 
(d) selectively rotating the data bytes within the 
third group of data so that the data bytes are correctly 

positioned within the specified boundary. 
A method according to claim 8 wherein: 

(1) the transferring steps (a) and (b) each further 
comprise the step of formatting and transmitting rotation 

and direction information for the first and second groups 
of data bytes; 
(2) the selectively combining step (c) further 
comprises the step of interpreting the rotation and 

direction information for the first and second groups to 
determine how to combine the data bytes from the first and 

second groups to create a third group of data bytes; and 
(3) the selectively rotating step (d) further 
comprises the step of interpreting the rotation and 

direction information for the first and second groups to 
determine how to rotate the data bytes within the third 

group of data bytes, so that the data bytes are correctly 
positioned therein. 
A method according to claim 8, wherein: 

(1) the transferring steps (a) and (b) each 
further comprise the step of formatting and transmitting 

masking information for the first and second groups of data 
bytes; and 
(2) the method further comprises the step of 
masking the third group of data bytes according to the 

masking information, so that only desired ones of the data 
bytes within the third group are received by the peripheral 

device. 
</CLAIMS>
</TEXT>
</DOC>
