<DOC>
<DOCNO>EP-0655868</DOCNO> 
<TEXT>
<INVENTION-TITLE>
Device for encoding a video signal
</INVENTION-TITLE>
<CLASSIFICATIONS>G06T900	H03M736	H04N750	H04N732	H03M736	G06T900	H04B1404	H04N750	H04B1404	H04N732	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>G06T	H03M	H04N	H04N	H03M	G06T	H04B	H04N	H04B	H04N	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>G06T9	H03M7	H04N7	H04N7	H03M7	G06T9	H04B14	H04N7	H04B14	H04N7	</CLASSIFICATIONS-FOURTH>
<ABSTRACT>
A device comprising an MPEG encoder (2) is provided with a preanalyser 
(8) which encodes each picture with a fixed step size (Q₂). The preanalyser is coupled 

to a computing circuit (9) which computes, for each type of (I, P, B) picture, a target 
value (T) for the number of bits for encoding said picture, as well as a suitable 

distribution of the target value among the macroblocks of the picture. A proportionally 
integrating control circuit (7) controls the quantization step size (Q₁). Since the PI 

control circuit does not introduce any residual errors, the desired number of bits per 

picture or per group of pictures is achieved within narrow limits. The output signal is 
eminently suitable for recording and subsequent editing. 


</ABSTRACT>
<APPLICANTS>
<APPLICANT-NAME>
PHILIPS ELECTRONICS NV
</APPLICANT-NAME>
<APPLICANT-NAME>
PHILIPS ELECTRONICS N.V.
</APPLICANT-NAME>
</APPLICANTS>
<INVENTORS>
<INVENTOR-NAME>
KEESMAN GERRIT JOHAN
</INVENTOR-NAME>
<INVENTOR-NAME>
KLEIN GUNNEWIEK REINIER BERNAR
</INVENTOR-NAME>
<INVENTOR-NAME>
SHAH IMRAN ALI
</INVENTOR-NAME>
<INVENTOR-NAME>
KEESMAN, GERRIT JOHAN
</INVENTOR-NAME>
<INVENTOR-NAME>
KLEIN GUNNEWIEK, REINIER BERNARDUS MARIA
</INVENTOR-NAME>
<INVENTOR-NAME>
SHAH, IMRAN ALI
</INVENTOR-NAME>
</INVENTORS>
<DESCRIPTION>
The invention relates to a device for encoding a video signal. More
particularly, the invention relates to a device for encoding groups of pictures, some
pictures of which are subjected to independent encoding and other pictures are subjected
to motion-compensated predictive encoding.A device of the type described in the opening paragraph is known by the
name of MPEG encoder and is described, inter alia in "Coding of moving pictures and
associated audio for digital storage media up to about 1.5 Mbit/s", ISO/IEC IS 11172
and, more particularly, in "MPEG 2 Test Model 5", ISO/IEC
JTC1/SC29/WG11/N0400, April 1993.The known device for encoding video signals comprises means for
dividing each picture into a plurality of sub-pictures, and an encoder comprising a
picture transformer for transforming each sub-picture into coefficients, and a quantizer
for quantizing the coefficients with an applied step size. Either individual pictures or
motion-compensated differential pictures are applied to the encoder. At least one picture
of a group of pictures (GOP) is intraframe (i.e. independently) encoded. Such a picture
is referred to as I picture. Other pictures are subjected to motion-compensated
interframe (i.e. predictive) encoding. In forward prediction the term P pictures is
sometimes used, in bidirectional prediction the term B pictures is sometimes used. A
frequently occurring division of a GOP is, for example the series "IBBPBBPBBPBB".Moreover, the device comprises control means for controlling the step
size in conformity with a target value for the number of bits for encoding the applied
picture. The control means have for their object to obtain a constant bitrate, in spite of
the enormous spread in the number of bits produced for the separate pictures. In order
to generate, on average, a constant number of bits per GOP, the document MPEG 2
Test Model 5 states that the known device computes a target value for the number of 
bits for each picture in dependence upon the complexity of this picture. Said complexity
is fixed with reference to the encoding results of the previous picture of the same type
(I, P, B). This previous picture may, however, be relatively old. For example, the
previous I picture in the GOP "IBBPBBPBBPBB" is always situated 12 pictures back in
time. The known device comprises slowly controlling control means for maintaining the
average bitrate constant, in spite of the temporal changes to which the complexity of
pictures is subject. This causes large fluctuations in the number of bits per
</DESCRIPTION>
<CLAIMS>
A device for encoding a video signal, comprising:

means (1) for dividing each picture into a plurality of sub-pictures;
an encoder (2) for selectively encoding pictures as independent pictures, ie. I pictures, and motion-compensated
differential pictures, ie. P or B pictures, the encoder comprising a picture transformer

(22) for transforming each sub-picture into coefficients, and a quantizer (23) for
quantizing the coefficients with an applied step size (Q
1
);
control means (7) for controlling the step size in conformity with a target value
(T) for the number of bits for encoding the applied picture,

characterized in that the device comprises an additional encoder (8), of substantially the same type as said former encoder, for encoding the
applied picture in response to a fixed step size (Q
2
), and computing means (9) for
computing the target value from the picture thus encoded in dependence upon the type

of picture being one of I, P, or B.
A device as claimed in Claim 1, characterized in that the fixed step size
(Q
2
) is constituted by the average step size with which a previous P picture has been
encoded.
A device as claimed in Claim 1, characterized in that the fixed step size
(Q
2
) is constituted by the average step size with which a previous picture of the same
type (I, P, B) has been encoded.
A device as claimed in Claim 3, characterized in that the fixed step size
(Q
2
) for the first I picture following a change of scenes is constituted by the average
step size with which a previous P picture has been encoded.
A device as claimed in any one of Claims 1-4, characterized in that the
computing means (9) comprise a distribution circuit (96) for distributing the target value

(T) among the sub-pictures of a picture in proportion to the number of bits generated
for said sub-pictures by the additional encoder, the control means (7) being adapted to

control the step size in response to a local target value (T
n
) for each sub-picture.
A device as claimed in Claim 5, in which a series of quantization-dependent 
and a series of quantization-independent bits are formed for each sub-picture,

characterized in that the distribution circuit (961-963) is adapted to distribute the target
value (T) among the sub-pictures in proportion to the number of quantization-dependent

bits generated for said sub-pictures by the additional encoder.
A device as claimed in Claim 5 or 6, characterized in that the control
means (7) are constituted by means (71-73) for forming a control signal which is

representative of the difference between the cumulative local target values (T
n
) for each sub-picture
and the number of bits produced by the encoder, and a proportionally integrating

control circuit (74-77) to which said control signal is applied.
</CLAIMS>
</TEXT>
</DOC>
