<DOC>
<DOCNO>EP-0636978</DOCNO> 
<TEXT>
<INVENTION-TITLE>
Desktop computer system having system suspend
</INVENTION-TITLE>
<CLASSIFICATIONS>G06F100	G06F132	G06F1216	G06F948	G06F9445	G06F946	G06F132	G06F9445	G06F1114	G06F1216	G06F100	G06F1114	G06F946	G06F116	G06F116	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>G06F	G06F	G06F	G06F	G06F	G06F	G06F	G06F	G06F	G06F	G06F	G06F	G06F	G06F	G06F	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>G06F1	G06F1	G06F12	G06F9	G06F9	G06F9	G06F1	G06F9	G06F11	G06F12	G06F1	G06F11	G06F9	G06F1	G06F1	</CLASSIFICATIONS-FOURTH>
<ABSTRACT>
A desktop computer system having the capability to suspend and 
resume the state of the computer system. The suspended system state is 

saved to the system hard file such that system power may be removed, 
effectively allowing a system suspend requiring no power from the power 

supply. 
</ABSTRACT>
<APPLICANTS>
<APPLICANT-NAME>
IBM
</APPLICANT-NAME>
<APPLICANT-NAME>
INTERNATIONAL BUSINESS MACHINES
</APPLICANT-NAME>
</APPLICANTS>
<INVENTORS>
<INVENTOR-NAME>
COMBS JAMES L
</INVENTOR-NAME>
<INVENTOR-NAME>
CRUMP DWAYNE T
</INVENTOR-NAME>
<INVENTOR-NAME>
PANCOAST STEVEN T
</INVENTOR-NAME>
<INVENTOR-NAME>
COMBS, JAMES L.
</INVENTOR-NAME>
<INVENTOR-NAME>
CRUMP, DWAYNE T.
</INVENTOR-NAME>
<INVENTOR-NAME>
PANCOAST, STEVEN T.
</INVENTOR-NAME>
</INVENTORS>
<DESCRIPTION>
The present invention relates to a desktop computer system having
the capability to suspend and resume operation.Personal computer systems are well known in the art. Personal
computer systems in general, and IBM Personal Computers in particular,
have attained wide- spread use for providing computer power to many
segments of today's modern society. Personal computers can typically be
defined as a desktop, floor standing, or portable microcomputer that is
comprised of a system unit having a single central processing unit (CPU)
and associated volatile and non-volatile memory, including all RAM and
BIOS ROM, a system monitor, a keyboard, one or more flexible diskette
drives, a fixed disk storage drive (also known as a "hard drive"), a so-called
"mouse" pointing device, and an optional printer. One of the
distinguishing characteristics of these systems is the use of a
motherboard or system planar to electrically connect these components
together. These systems are designed primarily to give independent
computing power to a single user and are inexpensively priced for
purchase by individuals or small businesses. Examples of such personal
computer systems are IBM's PERSONAL COMPUTER AT and IBM's PERSONAL
SYSTEM/1 (IBM PS/1).Personal computer systems are typically used to run software to
perform such diverse activities as word processing, manipulation of data
via spread-sheets, collection and relation of data in databases, displays
of graphics, design of electrical or mechanical systems using system-design
software, etc.IBM PS/1s and PS/2s are desktop computers designed to be used at a
single location. For example, in today's society many individuals have
desktop computers at their desks or in rooms dedicated to computer-aided
tasks. Desktop computers are typically set up at a location and used by
one or many users without ever moving the computer.Desktop systems may be classified into networked and non-networked
computer systems. Networked computer systems are part of a larger
computer system and are connected to other computers or servers via local
area networks (LANs) or wide area networks (WANs). Such networks, using
special interfaces and protocols, allow computers to share data and 
programs in an efficient way. Desktop computer systems used in
businesses are typically networked computer systems. Non-networked
computers, on the other hand, are not connected to any other computers.
Data transfer from one computer to another is accomplished by writing
data to flexible diskettes with a computer in one
</DESCRIPTION>
<CLAIMS>
A computer system including a BIOS, capable of running an operating
system and an application program;


a CPU (40);
a power supply (17) for selectively providing system power from an
external source to the computer system, the power supply (17) having a

first power supply state and a second power supply state;
a non-volatile storage device (31);
a volatile system memory (53) for storing memory data;
volatile system registers for storing register data; and
a control unit (106) for selectively changing, responsive to a
preselected suspend event, the state of the computer system between a

normal operating state in which the power supply (17) is in the first
power supply state and the computer system is operable to execute the

application program in response to user commands or to the operating
system or the BIOS and a suspend state in which the power supply (17) is

in the second power supply state and the register data and the memory
data are stored on the non-volatile storage device (31);
the change between the normal operating state and the suspend state
including, in response to a preselected suspend event, the control unit

(106) causing the power supply (17) to change from the first power supply
state to the second power supply state and the control unit (106) copying

the memory data and the register data from the system memory and the
system registers to the non-volatile storage device (31);

characterised in that the system comprises:
an interrupt controller (92) for processing a plurality of
interrupt events (808) in coordination with the CPU (40), the interrupt

controller (92) having a first set of interrupt vectors associated
therewith and located in the volatile system memory (53), a first set of

interrupt service routines associated therewith and located in the
volatile system memory (53), and at least one internally-located

write-only register for storing at least one base address corresponding

to the first set of interrupt vectors and the first set of interrupt
service routines; and
the control unit (106) comprising means for ascertaining 
the state of the at least one base address of the interrupt controller

(92), the ascertaining means comprising: means (810) for
writing a second set of interrupt vectors to the volatile system memory

(53); means (812) for writing a second set of interrupt service routines
to the volatile system memory (53), each of the second set of interrupt

service routines corresponding to at least one of the interrupt vectors
from the second set of interrupt vectors; means (818) for then generating

an interrupt event to be serviced by one of the second set of interrupt
service routines corresponding to at least one of the interrupt vectors

from the second set of interrupt vectors; processing the interrupt event
in coordination with the interrupt controller (92) ; means (824) for then

servicing the interrupt with one of the interrupt service routines
corresponding to at least one of the interrupt vectors from the second

set of interrupt vectors; and thereafter determining the state of the at
least one address of the interrupt controller (92) from the state of the

volatile system memory (53).
A computer system as claimed in claim 1, wherein the power supply
(17) includes circuitry for providing auxiliary power to the computer

system, wherein, in the first power supply state, the power supply (17)
provides system power and auxiliary power to the computer system from the

external source, and wherein, in the second power supply state, the power
supply (17) does not provide system power to the computer system from the

external source and the power supply (17) does provide auxiliary power to
the computer system from the external source.
A computer system as claimed in claim 1 or claim 2 wherein the
non-volatile storage device (31) is a fixed disk storage device.
A computer system as claimed in claim 1 or claim 2 wherein the
non-volatile storage device (31) is a battery-backed read only memory.
A computer system as claimed in any preceding claim, including an
inactivity suspend timer set to expire after a preselected period of

time, wherein the preselected suspend event comprises the expiration of
the inactivity suspend timer.
A computer system as claimed in any claim preceding claim 4,
including a momentary push-button switch in circuit communication with

the CPU (40), which switch generates a closure event in response to the
switch being pressed, wherein the preselected suspend event comprises

closure event of the switch.
A computer system as claimed in any claim preceding claim 4,
including: a momentary push-button switch in circuit communication with

the CPU (40), which switch generates a closure event in response to the 
switch being pressed; and, a manipulable flag, which comprises a first

flag state and a second flag state and whose state is manipulable by code
executing on the CPU (40); wherein one or more of the preselected suspend

events comprise a closure event of the switch while the flag is in the
first flag state.
A method for saving the state of a computer system, the computer
system having: a BIOS, capable of running an operating system and an

application program;

a CPU (40);
a power supply (17) for selectively providing system power from an
external source to the computer system, the power supply (17) having a

first power supply state and a second power supply state;
a non-volatile storage device (31);
a volatile system memory (53) for storing memory data;
an interrupt controller (92) for processing a plurality of
interrupt events (808) in coordination with the CPU (40), the interrupt

controller (92) having a first set of interrupt vectors associated
therewith and located in the volatile system memory (53), a first set of

interrupt service routines associated therewith and located in the
volatile system memory (53), and at least one internally-located

write-only register for storing at least one base address corresponding
to the first set of interrupt vectors and the first set of interrupt

service routines;
volatile system registers for storing register data; and
a control unit (106) for selectively changing, responsive to a
preselected suspend event, the state of the computer system between a

normal operating state in which the power supply (17) is in the first
power supply state and the computer system is operable to execute the

application program in response to user commands or to the operating
system or the BIOS and a suspend state in which the power supply (17) is

in the second power supply state and the register data and the memory
data are stored on the non-volatile storage device (31);
the change between the normal operating state and the suspend state
including, in response to a preselected suspend event, the control unit

(106) causing the power supply (17) to change from the first power supply
state to the second power supply state; 
the method comprising the steps of:
copying, by the control unit (106), in response to the preselected
suspend event, the memory data and the register data from the system

memory and the system registers to the non-volatile storage device (31);
ascertaining, by the control unit (106), the state of the
at least one base address of the interrupt controller (92); the

ascertaining step comprising:
writing (810) a second set of interrupt vectors to the volatile
system memory (53);
writing (812) a second set of interrupt service routines to the
volatile system memory (53), each of the second set of interrupt service

routines corresponding to at least one of the interrupt vectors from the
second set of interrupt vectors; then
generating (818) an interrupt event to be serviced by one of the
second set of interrupt service routines corresponding to at least one of

the interrupt vectors from the second set of interrupt vectors;
processing the interrupt event in coordination with the interrupt
controller (92);
then servicing (824) the interrupt with one of the interrupt
service routines corresponding to at least one of the interrupt vectors

from the second set of interrupt vectors; and thereafter
determining the state of the at least one the address of the
interrupt controller (92) from the state of the volatile system memory

(53).
</CLAIMS>
</TEXT>
</DOC>
