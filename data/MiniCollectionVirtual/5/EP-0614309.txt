<DOC>
<DOCNO>EP-0614309</DOCNO> 
<TEXT>
<INVENTION-TITLE>
Image processing apparatus
</INVENTION-TITLE>
<CLASSIFICATIONS>G06T100	H04N1407	H04N146	H04N146	H04N152	H04N1407	G06T500	H04N152	H04N160	H04N160	G06T100	G06T500	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>G06T	H04N	H04N	H04N	H04N	H04N	G06T	H04N	H04N	H04N	G06T	G06T	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>G06T1	H04N1	H04N1	H04N1	H04N1	H04N1	G06T5	H04N1	H04N1	H04N1	G06T1	G06T5	</CLASSIFICATIONS-FOURTH>
<ABSTRACT>
An image processing apparatus (30) is described in which the 
number of operations necessary for color correction 

processing is made smaller than the number of operations 
necessary for gradation number conversion processing in a 

later process without causing deterioration of image quality, 
so that color correction processing and gradation number 

conversion processing can be conducted at high speed. The 
number of gradations capable of being converted in the 

pre-gradation number conversion section (40) is larger than 
that in the post-gradation number conversion section (46). 

The pre-gradation number conversion section (40) conducts 
pre-gradation number conversion for converting the gradation 

number of color components of R, G, B of the original color 
image data into the gradation coordinate value of the most 

appropriate grid point in the color space. The color 
compensating section (42) reads out the gradation 

compensating data corresponding to the color image data 
subjected to the pregradation number conversion from the 

color compensating table memory (34), so that the gradation 
number of each color component of Rk, Gk, Bk is compensated 

and outputted. The post-gradation number conversion section 
(46) conducts post-gradation number conversion on the data 

obtained from the color compensating section so that a 
finally desired gradation number can be obtained. 


</ABSTRACT>
<APPLICANTS>
<APPLICANT-NAME>
SEIKO EPSON CORP
</APPLICANT-NAME>
<APPLICANT-NAME>
SEIKO EPSON CORPORATION
</APPLICANT-NAME>
</APPLICANTS>
<INVENTORS>
<INVENTOR-NAME>
KAKUTANI TOSHIAKI
</INVENTOR-NAME>
<INVENTOR-NAME>
KAKUTANI, TOSHIAKI
</INVENTOR-NAME>
</INVENTORS>
<DESCRIPTION>
The present invention relates to an image processing
apparatus.Conventionally, an image processing apparatus is well
known in which color documents and the like are read out by an
image input section such as a scanner, and the image data read
out by the scanner is reproduced, for example, by a display or
a color printer.However, an image output apparatus such as a display or
color printer has its own specific color reproduction
properties. Therefore, it is difficult to reproduce the colors
of an inputted color image precisely using an input device such
as a scanner.For this reason, conventionally a method has been proposed
in which color correction processing is conducted in accordance
with the color reproducing properties of the image output
apparatus. One such color correction method is described
in Japanese Unexamined Patent Publication No.
63-2669. According to this method, a three-dimensional color
correction table of RGB is prepared corresponding to all
combinations of three-color components of red (R), green (G) 
and blue (B). Contents of color correction are stored at all
three-dimensional coordinate positions, and color correction is
conducted referring to this table.However, according to this color correction method, the
capacity of the memory for the color correction table is large.
Therefore, the above color correction method is not suitable
for practical use. For example, when the gradation of an
inputted original color image data is expressed with eight bits
(256 gradations) for each color of R, G and B, the number of
colors is 16,780,000 (= 2563). Thus, it is necessary to
provide a memory capacity of 48 megabytes for the color
correction table to store the R, G and B data.In order to reduce the memory capacity of the color
correction table, proposals have been made in Japanese
Unexamined Patent Publication Nos. 4-144481 and 4-185075. In
one such apparatus, a color correction table is not provided
for all combinations of R, G and B. When only the results of
color correction are stored with respect to the grid points
formed by dividing the three-dimensional color space of R, G
and B at appropriate intervals, the capacity of the table
memory is reduced. In the case of color data which is not
precisely coincident with the grid points, reference is made to
the color correction data of a plurality of adjacent grid
points so that color interpolation processing can be performed. For example, in Japanese Unexamined Patent Publication No.
4-185075 an example is described in which color correction
pr
</DESCRIPTION>
<CLAIMS>
An image processing apparatus (30) which conducts a color-compensation
on inputted color image data in accordance

with the color reproduction properties of an image output
apparatus (20) and outputs the color-compensated image

data, said image processing apparatus (30) comprising:

a color correction table memory (34) for storing
gradation compensating data of each color component in

accordance with the color reproduction properties of
said image output apparatus (20) at each grid point in

a color space divided into a grid, said color space
having coordinate axes corresponding to each color

component of the color image data;
pre-gradation number conversion means (40) for
conducting a pre-gradation number conversion on the

values of the coordinates in said color space of the
inputted color image data using a pre-determined

gradation number conversion method so as to convert
said values of the coordinates into values of the most

appropriate grid points in said color space; and
color correction means (42) for compensating the
gradation number of each color component of the color

image data when the gradation compensating data of a
grid point corresponding to the values of the

coordinates that has been subjected to a pre-gradation
number conversion is read out from said color

compensating table memory (34); 
whereby said apparatus (30) does not comprise means for
interpolating gradation compensating data.
The image processing apparatus (30) according to claim 1,
further comprising post-gradation number conversion means

(46) for conducting post-gradation number conversion on 
the gradation number of each color component of the color

image data compensated by said color correction means
(42) so as to convert said gradation number into a final

gradation number in accordance with said image output
apparatus (20), wherein the converted gradation number of

said pre-gradation number conversion means (40) is larger
than the converted gradation number of said

post-gradation number conversion means (42).
The image processing apparatus (30) according to claim 1

or 2, wherein said pre-gradation number conversion means
(40) operates in accordance with an error diffusion

method.
The image processing apparatus (30) according to claim 1
or 2, wherein said pre-gradation number conversion means

(40) operates in accordance with a minimum average error
method.
The image processing apparatus (30) according to claim 1
or 2, wherein said pre-gradation number conversion means

operates in accordance with an ordered dither method for
color components for which the resolving power of the eye

is low, and in accordance with an error diffusion method
for other color components.
The image processing apparatus (30) according to claim 1
or 2, wherein said pre-gradation number conversion means

(40) operates in accordance with an ordered dither method
for color components for which the resolving power of the

eye is low, and a minimum average error method for other
color components.
The image processing apparatus (30) according to one of
claims 1 to 6, wherein said post-gradation number 

conversion means (46) operates in accordance with an
error diffusion method.
The image processing apparatus (30) according to one of
claims 1 to 6, wherein said post-gradation number

conversion means (46) operates in accordance with a
minimum average error method.
The image processing apparatus (30) according to claim 2,
wherein said pre-gradation number conversion means (40)

operates in accordance with an error diffusion method,
and said post-gradation number conversion means (46)

operates in accordance with an error diffusion method,
and wherein a matrix size used for error diffusion in

said pre-gradation number conversion means (40) is
smaller than a matrix size used for error diffusion in

said post-gradation number conversion means (46).
The image processing apparatus (30) according to claim 2,
wherein said pre-gradation number conversion means (40)

operates in accordance with a minimum average error
method, and said post-gradation number conversion means

(46) operates in accordance with an error diffusion
method, and wherein a matrix size used for mean error in

said pre-gradation number conversion means (40) is
smaller than a matrix size used for error diffusion in

said post-gradation number conversion means (46).
The image processing apparatus (30) according to claim 2,
wherein said pre-gradation number conversion means (40)

operates in accordance with an error diffusion method,
and said postgradation number conversion means (46)

operates in accordance with a minimum average error
method, and wherein a matrix size used for error

diffusion in said pre-gradation number conversion means 
(40) is smaller than a matrix size used for mean error in

said post-gradation number conversion means (46).
The image processing apparatus (30) according to claim 2,
wherein said pre-gradation number conversion means (40)

operates in accordance with a minimum average error
method, and said postgradation number conversion means

(46) operates in accordance with a minimum average error
method, and wherein a matrix size used for mean error in

said pre-gradation number conversion means (40) is
smaller than a matrix size used for mean error in said

post-gradation number conversion means (46).
The image processing apparatus (30) according to claim 1
or 2, wherein said pre-gradation conversion means (40)

operates in accordance with an ordered dither method for
one portion of color components of the color image data

and in accordance with an error diffusion method for
other portions of said color components.
The image processing apparatus (30) according to claim 1
or 2, wherein said pre-gradation conversion means (40)

operates in accordance with an ordered dither method for
one portion of color components of the color image data

and in accordance with a minimum average error method for
other portions of said color components.
</CLAIMS>
</TEXT>
</DOC>
