<DOC>
<DOCNO>EP-0648059</DOCNO> 
<TEXT>
<INVENTION-TITLE>
Picture data compression device having color-sensitive quantization
</INVENTION-TITLE>
<CLASSIFICATIONS>H04N726	H04N730	H04N9804	H04N726	H04N9804	H04N9808	G06T900	H04N730	H04N1104	G06T900	H04N1104	H04N592	H04N592	H04N9808	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>H04N	H04N	H04N	H04N	H04N	H04N	G06T	H04N	H04N	G06T	H04N	H04N	H04N	H04N	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>H04N7	H04N7	H04N9	H04N7	H04N9	H04N9	G06T9	H04N7	H04N11	G06T9	H04N11	H04N5	H04N5	H04N9	</CLASSIFICATIONS-FOURTH>
<ABSTRACT>
In a picture data compressing device, picture data is divided by a blocking 
circuit (1) into plural blocks each consisting of a pre-set number of pixels and 

shuffled by a shuffling circuit (2). The blocked and shuffled data is transformed by 
a DCT circuit (3) into data in the frequency domain and re-quantized by a 

quantization circuit (4) for compressing the picture data. A red detector (6) decides 
whether or not a block from the shuffling circuit (2) is a red-based block. If the red 

detector (6) finds the block to be a red-based block, a controller (7) controls the 
quantization circuit (4) so that the quantization step of the quantization circuit (4) will 

become finer. The picture data of the red-based block susceptible to block distortion 
may be quantized with a finer quantization step for improving reproducibility and 

alleviating block distortion. 

</ABSTRACT>
<APPLICANTS>
<APPLICANT-NAME>
SONY CORP
</APPLICANT-NAME>
<APPLICANT-NAME>
SONY CORPORATION
</APPLICANT-NAME>
</APPLICANTS>
<INVENTORS>
<INVENTOR-NAME>
FISCHL JASON
</INVENTOR-NAME>
<INVENTOR-NAME>
IZUMI NOBUAKI
</INVENTOR-NAME>
<INVENTOR-NAME>
KIYAMA YUKA
</INVENTOR-NAME>
<INVENTOR-NAME>
SUGISAKI KIMINORI
</INVENTOR-NAME>
<INVENTOR-NAME>
YANAGIHARA NAOFUMI
</INVENTOR-NAME>
<INVENTOR-NAME>
FISCHL, JASON
</INVENTOR-NAME>
<INVENTOR-NAME>
IZUMI, NOBUAKI
</INVENTOR-NAME>
<INVENTOR-NAME>
KIYAMA, YUKA
</INVENTOR-NAME>
<INVENTOR-NAME>
SUGISAKI, KIMINORI
</INVENTOR-NAME>
<INVENTOR-NAME>
YANAGIHARA, NAOFUMI
</INVENTOR-NAME>
</INVENTORS>
<DESCRIPTION>
This invention relates to picture data compressing devices which may
advantageously be employed, for example, in equipment handling compressed picture
data, such as digital video tape recorders (VTRs), television telephone systems,
teleconference systems or transmitters for telecasting stations, and to red data detection
devices which may, for example, be employed in such picture data compressing
apparatus.It has been proposed to use a so-called digital VTR for digital
recording/reproduction of picture information data. The recording system of the
digital VTR is arranged as shown for example in Fig.13 of the accompanying drawing,
in which audio signals are fed via an input terminal 50 to an analog to digital (A/D)
converter 51 and picture signals are fed via an input terminal 53 to an A/D converter 54.The A/D converter 51 digitizes the audio signals to generate audio data which
is supplied to an audio recording processing circuit 52 which then processes the audio
data into a form suitable for recording and transmits the processed audio data to an
error correction encoding circuit 61.The A/D converter 54 digitizes the picture signals by, for example,
frame-based sampling, to generate component data, that is luminance data (Y data)
and two color difference data (R-Y data and B-Y data), and transmits the component
data to a blocking circuit 56 within a compression encoding circuit 55.The blocking circuit 56 divides each of the Y-data, R-Y data and the B-Y
data into blocks each consisting of a matrix of 8 vertically arrayed pixels and
8 horizontally arrayed pixels (DCT 
blocks), these blocks being routed to a shuffling circuit 57.The shuffling circuit 57 generates a single macro-block from
8 DCT blocks, namely 6 Y data blocks, 1 R-Y data block and 1 B-Y
data block. These 8 blocks are data located at the same location
on a picture. The shuffling circuit 57 effects pre-set
shuffling on the macro-block basis and generates a single unit
from five macro-blocks and outputs data on the unit basis. The
unit picture data is supplied to a discrete cosine transform
(DCT) circuit 58.The DCT circuit 58 transforms the picture data of each
macro-block making up the unit from data on the time scale into
that on the frequency scale, and routes the transform
coefficients to a quantization circuit 59.The quantization circuit 59 selects such quantization
coefficients which will give a fixed data length of the unit
picture data outputted from a variable length encoding circuit
60 as later explained, and re-quantizes the
</DESCRIPTION>
<CLAIMS>
A picture compression device comprising:

a blocking circuit (1) for dividing picture data into a plurality of blocks, each
block having a predetermined number of pixels, and for outputting the block-based

picture data;
a transform coding circuit (3) for coding the block-based picture data on a
block-by-block basis and for generating transform coefficients defining the picture

data as a result of the coding;
a red hue detector (6) for determining from 8 bit R-Y colour difference data
of said block-based data whether a block received from said blocking circuit (1) is a

red-hued block;
a quantization circuit (4) for quantizing the transform coefficients; and
a controller (7) for controlling a quantization step of said quantization circuit
(4) if said block is determined to be a red-hued block;

   characterised in that said red hue detector (6) comprises a red data extraction
circuit (11) for extracting the upper three bits from said 8 bit R-Y colour difference

data, a threshold data outputting circuit (15) for supplying the upper three bits of an
8-bit threshold value, and a comparator (13) for comparing said upper three bits

extracted from said 8 bit R-Y colour difference data to said upper three bits of said
8-bit threshold value and responsive to said upper three bits extracted from said 8 bit

R-Y colour difference data being greater than said upper three bits of said 8-bit
threshold value to provide an indication that said block is red-hued, said 8-bit

threshold value being the closest value, divisible by 2
n
, where n is an integer, to a
reference value, falling within a range of values that can be indicated by said 8 bit

R-Y colour difference data, that is used in detecting red data.
A device according to claim 1, wherein said range of values that can be
indicated by said 8 bit R-Y colour difference data is 0 to 255, said reference value

is 170 and said 8-bit threshold value is 160.
A device according to claim 1 or claim 2, wherein said red hue detector (6) 
comprises a blue data extraction circuit (12) for extracting the uppermost bit from 8

bit B-Y colour difference data of said block-based data, inverting means (16) for
inverting said uppermost bit so as to provide a second indication, if said uppermost

bit is of low value, of a red-hued block, and logic means (14) operative to provide
an output only if both said first-mentioned and second indications of a red-hued block

are provided.
A device according to claim 1, claim 2 or claim 3, wherein said controller (7)
is operative to perform activity-based classing for a pre-set number of macro-blocks

as a processing unit, said controller (7) being operative adaptively to control the
quantization steps of said quantization circuit (4) according to classes such that a class

is selected in which the quantization step of said quantization circuit (4) quantizing
red-hued data is smaller if said block from said blocking circuit is determined to be

a red-hued block.
A device according to claim 1, claim 2 or claim 3, wherein said controller (7)
is operative to decrease said quantization step, thereby producing finer quantization,

if said block is determined to be a red-hued block.
A device according to any one of the preceding claims, comprising a shuffling
circuit (2), connected at one end to said blocking circuit (1) and at another end to said

transform coding circuit (3) and red hue detector (6), for shuffling the block-based
picture data received from said blocking circuit (1).
</CLAIMS>
</TEXT>
</DOC>
