<DOC>
<DOCNO>EP-0610189</DOCNO> 
<TEXT>
<INVENTION-TITLE>
AN IMPROVED SELF-TUNING CONTROLLER
</INVENTION-TITLE>
<CLASSIFICATIONS>G05B1302	G05B1302	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>G05B	G05B	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>G05B13	G05B13	</CLASSIFICATIONS-FOURTH>
<ABSTRACT>
An apparatus and method for automatically adjusting the control parameters of a self-tuning controller used to regulate a process having a measured process variable signal. Using the measured process variable signal, an error signal representing a closed-loop response of the process to an upset condition is generated. Local extrema of the error signal is measured and three successive amplitude values are selected to produce measured decay and overshoot characteristics of the error signal. The three successive amplitude values are selected such that the measured decay characteristic is greater than the overshoot characteristic. Based on the measured decay and overshoot characteristics at least one of the control parameters of the controller is automatically adjusted to improve the difference between one of the measured characteristics and a target characteristic.
</ABSTRACT>
<APPLICANTS>
<APPLICANT-NAME>
FOXBORO CO
</APPLICANT-NAME>
<APPLICANT-NAME>
THE FOXBORO COMPANY
</APPLICANT-NAME>
</APPLICANTS>
<INVENTORS>
<INVENTOR-NAME>
BRISTOL EDGAR H
</INVENTOR-NAME>
<INVENTOR-NAME>
HANSEN PETER D
</INVENTOR-NAME>
<INVENTOR-NAME>
BRISTOL, EDGAR, H.
</INVENTOR-NAME>
<INVENTOR-NAME>
HANSEN, PETER, D.
</INVENTOR-NAME>
</INVENTORS>
<DESCRIPTION>
This invention relates to self-tuning adaptive
controllers for controlling a process and more
particularly to pattern-recognition, self-tuning
controllers.The pattern recognition approach to self-tuning
is unique. It uses direct-performance feedback of a
monitored process variable to determine the required
action for optimizing the process. More
specifically, a pattern-recognition, self-tuning
controller continuously monitors and automatically
evaluates a closed-loop response pattern of a
measured process variable to naturally occurring,
unmeasured upsets caused by a change in set point or
load. After each upset, closed-loop error response
characteristics such as overshoot and decay are
identified and compared with desired
characteristics. Differences between the desired
characteristics and the measured characteristics are
then used to automatically generate new tuning
values for adjusting the controller according to the
requirements of the process in order to achieve an
error response target shape. The target shape is
chosen to approximately minimize integrated absolute
error.The first successful adaptive process control
system to automatically identify and evaluate
process response characteristics of the closed-loop
response pattern was invented by Edgar H. Bristol,
II and is disclosed in U.S. Patent No. 3,798,426. 
According to Bristol's method, the adaptation system
is triggered by detecting the closed-loop response
pattern resulting from an upset having a magnitude
which exceeds a preselected noise band. Once
triggered, dead and rise times are identified by
measuring the time required for the response pattern
to reach predetermined percentages of the extremum
value of the upset during its first half cycle. The
dead time is assumed to bear a significant
relationship to any process dead time which is most
apparent early in the measured variable response,
and rise time is assumed to bear a significant
relationship to process closed-loop natural period.The measured rise time is scaled to establish
evaluation intervals for the adaptation process.
Scaling constants, used to determine these
intervals, are selected so that the first half cycle
in a resonant response is developed during one
evaluation interval and the first full cycle is
fully developed during another. The response
pattern is evaluated by calculating the integrated
difference between the measured process control
error, normalized by the magnitude of the first
error response peak, and a target value for each of
the evaluation intervals. The
</DESCRIPTION>
<CLAIMS>
A method for automatically adjusting the control parameters of a self-tuning
controller (12) used to regulate a process (14) having a measured process variable signal

(16), comprising the steps of

generating an error response signal (29) representing a closed-loop response of
the process to an upset condition,
locating and measuring amplitude values of said error response signal (29) and
generating as a function of the measured amplitude values a decay signal representing the

decay of the error response signal and an overshoot signal representing the overshoot of
the error response signal to characterize pattern features of the error response signal,
selecting. as a function of the decay signal and the overshoot signal of the error
response signal. a set of three successive amplitude values of the error response signal, to

produce measured decay and overshoot characteristics such that said measured decay
characteristic is greater than said measured overshoot charcteristic, to select amplitude

values of a select process response, and
automatically adjusting at least one of the control parameters of the controller
as a function of the process response to improve the difference between one of said

measured characteristics and a target characteristics.
The method of claim 1, wherein the step of measuring amplitude values
includes measuring amplitude values representative of local extrema of the error response

signal.
The method of claim 1, wherein the step of measuring values of said error
response signal includes measuring an error signal that represents the difference between

the process variable signal and a set-point signal. 
The method of claim 1, wherein the step of automatically adjusting the
control parameters includes the further step of generating as a function of said decay signal

and said overshoot signal a process type signal representative of the type of process being
regulated and adjusting the control parameters as a function of the process type. 
The method of claim 4, wherein the step of automatically
adjusting the control parameters further includes the step of comparing

measured data with interpolated data from at least two types of processes to
determine the process type signal.
The method of claim 5, wherein the step of comparing includes
comparing measured data with interpolated data that includes control

parameters.
The method of claim 6, wherein the step of comparing includes
comparing measured data with interpolated data that includes the controller

parameters include proportional and integral time data.
The method of claim 4, wherein the step of automatically
adjusting the control parameters includes the step of comparing measured data

with interpolated data from at least two types of processes to determine as a
function of said interpolated data and said process type signal, appropriate

changes in the control parameters. 
The method of claim 4, wherein the step of automatically
adjusting the control parameters includes the step of comparing measured data

with extrapolated data from at least two types of processes to determine as a
function of said extrapolated data and said process type signal, appropriate

changes in the control parameters.
The method of claim 1, wherein the step of locating and
measuring amplitude values includes the step of locating and measuring at

least four successive amplitude values of local extrema of said response signal.
The method of claim 1, wherein the step of locating and
measuring the amplitude values includes the step of locating a knee of said

response signal representing an amplitude of the response signal occurring
later in time to a first local extremum, and determining the period between the

first local extremum and said knee to determine a time scale of the response
signal response.
The method of claim 11, wherein the first local extremum is
selected as the first of three successive amplitude values and said time scale is

used to determine a maximum wait period for locating a second amplitude.
The method of claim 12, wherein the step of selecting the
amplitudes values includes the step of using said knee as one of said

amplitudes values when said maximum wait period expires before locating a
second local extremum. 
The method of claim 11, wherein said time scale is used to
calculate a maximum wait period for locating a third amplitude value.
The method of claim 10, wherein the step of locating and
measuring the amplitude values includes the step of locating said knee later in

time to a second local extremum.
The method of claim 1, further including the step of sampling a
user-selected process variable before the step of locating and measuring

amplitude values and selecting previously adapted control parameters, based
on a sampled value of the user-selected process variable, from a previously

stored set of control parameters to provide an improved tuning for the present
process condition.
The method of claim 16, wherein the process variable range is
subdivided into subranges in which each subrange corresponds to a set of

previously adapted control parameters.
The method of claim 1, wherein the step of selecting three
successive amplitude value includes the step of indicating the sign of the first

amplitude value to determine whether it is positive or negative, and inverting
the values of said three amplitude values if the sign of the first amplitude is

negative. 
The method of claim 1, further including the step of filtering
said set-point signal with a lead-lag filter to prevent an excessive error

overshoot in response to a set-point change when the controller is well tuned
for a load upset.
The method of claim 19, further including the step of
adaptively tuning a ratio of lead-to-lag of said lead-lag filter to achieve a target

overshoot value.
The method of claim 1, further including the steps of
generating an error noise signal as a function of the response signal

representing the closed-loop response of the process and updating a noise band
during a quiet state of the response signal as a function of the error noise

signal.
The method of claim 1, further including the step of validating
the measured amplitude values of local extrema.
The method of claim 1 wherein the step of selecting successive
amplitude values includes the step of selecting three successive amplitude

values of said local extrema (E1, E2, and E3) such that the square of the
second extremum (E2) is less than or equal to the first extremum (E1) times

the third extremum (E3).
A method for automatically adjusting the control parameters of a controller
(12) used to regulate a process (14) having a measured process variable signal (16) to

attain a response having selected target characteristics, comprising the steps of

generating an error response signal (29) representing a closed-loop response of
the process to an upset condition,
generating as a function of the error response signal (29). characteristics of the
error response signal including a decay signal representing the decay of the error response

signal, an overshoot signal representing the overshoot of the error response signal and a
period signal representing the period or the error response signal to characterize the

response of the process,
selecting, as a function of the decay and the overshoot signal of the error
response signal, at least three successive amplitude values, such that said decay is greater

than said overshoot to select amplitude values representative of a select process response,
generating a process type signal representative of the type of process being
regulated, as a function of the decay signal, the overshoot signal and interpolated data

from at least two types of processes, and
automatically calculating at least one of the control parameters of the controller
in response to said process type signal to adjust the controller to improve the difference

between said determined characteristics and the target characteristics.
A method according to claim 24 wherein the step of calculating
control parameters includes identifying an unstable process response and

generating at least one control parameter as a function of the process type
signal.
A method according to claim 24 wherein the step of calculating
control parameters includes identifying an overdamped response and 

generating at least one control parameter as a function of the period signal.
A method according to claim 24 wherein the step of calculating
control parameters includes identifying a response signal representative of a

damped quadratic response and generating at least one control parameter as a
function of the process-type signal.
A self-tuning control system (10) comprising

a controller (12) having control parameters for regulating a process (14) having
a measured process variable signal (16),
means (23) for generating an error response signal (29) representing a closed-loop
response of the process to an upset condition,
an adaptor (20) for automatically adjusting control parameters of the controller,
said adaptor (20) including
means (50) for measuring amplitude characterizing pattern features of said
error response signal,
means (50) for selecting three successive amplitude values of said error
response signal to produce measured decay and overshoot characteristics of said error

response signal, wherein said measured decay characteristic is greater than said overshoot
characteristic, and
means (50) for automatically adjusting at least one of the control parameters of
the controller to improve the difference between one of said measured characteristics and

a target characteristic.
A self-tuning control system according to claim 28 wherein
said means for adjusting control parameters includes


means for generating, as a function of the measured characteristics, a
process type signal representative of the type of process to be regulated, and
means for calculating at least one of the control parameters of
the controller as a function of the process-type signal .
The self-tuning control system of claim 28 wherein the means
for determining pattern characteristics includes means for determining an

overshoot and decay ratio of said response signal.
The self-tuning control system of claim 28 wherein the error
signal represents the difference between the process variable signal and a set-point

signal. 
The controller of claim 28, wherein said decay signal is a dimensionless
quantity characterized by the equation


Decay = 
E
(3 + N)
 - E
(2 + N)
E
(1 + N)
 - E
(2 + N)

where E is the amplitude of the error associated with the selected peak and N is the
number of peaks skipped before selecting the three successive amplitudes.
The controller of claim 28, wherein said overshoot signal is a dimensionless
quantity characterized by the equation


Overshoot = - E
(2 + N)
 / E
(1 + N)
  
where E is the amplitude of the error associated with the selected peak and N is the

number of peaks skipped before selecting the three successive amplitudes.
The method of claim 1, wherein a period signal is generated as a function
of said error response signal, the period signal representing the period of the error response

signal to characterize the response of the process.
The method of claim 1, wherein said decay signal is a dimensionless
quantity characterized by the equation


Decay = 
E
(3 + N)
 - E
(2 + N)
E
(1 + N)
 - E
(2 + N)

where E is the amplitude of the error associated with the selected peak and N is the
number of peaks skipped before selecting the three successive amplitudes.
The method of claim 1, wherein said overshoot signal is a dimensionless
quantity characterized by the equation


Overshoot = - E
(2 + N)
 / E
(1 + N)

where E is the amplitude of the error associated with the selected peak and N is the
number of peaks skipped before selecting the three successive amplitudes.
The method of claim 34, wherein said period signal is a time quantity
characterized by the equation


T = T
(2 + N)
 - T
(1 + N)

where N is the number of peaks skipped before selecting the three successive amplitudes.
</CLAIMS>
</TEXT>
</DOC>
