<DOC>
<DOCNO>EP-0656729</DOCNO> 
<TEXT>
<INVENTION-TITLE>
Method and apparatus for editing or mixing compressed pictures
</INVENTION-TITLE>
<CLASSIFICATIONS>H04N5265	H04N724	G06T900	G11B27031	G11B27036	H04N746	H04N726	H04N746	G06T900	H04N736	H04N726	H04N750	H04N750	H04N5265	H04N736	H04N724	</CLASSIFICATIONS>
<CLASSIFICATIONS-THIRD>H04N	H04N	G06T	G11B	G11B	H04N	H04N	H04N	G06T	H04N	H04N	H04N	H04N	H04N	H04N	H04N	</CLASSIFICATIONS-THIRD>
<CLASSIFICATIONS-FOURTH>H04N5	H04N7	G06T9	G11B27	G11B27	H04N7	H04N7	H04N7	G06T9	H04N7	H04N7	H04N7	H04N7	H04N5	H04N7	H04N7	</CLASSIFICATIONS-FOURTH>
<ABSTRACT>
In editing first and second compressed picture data 
each having been obtained by prediction-coding, the second 

compressed picture data is modified by decoding a frame of 
the second compressed picture data at an editing point and 

re-coding the decoded data so that every frame around the 
editing point can be decoded after editing. The first 

compressed picture data and the modified second compressed 
picture data are liked to complete the editing. In mixing a 

compressed picture data with a non-compressed picture data, 
the compressed picture data is decoded and added to the non-compressed 

picture data to obtain a mixed picture data. The 
mixed picture data is re-coded to be a compressed picture 

data. In each of the editing and mixing, the re-coding may 
be performed by using at least one of the motion compensation 

information, motion vector information and orthogonal 
transform mode information which can be derived from the 

compressed picture data in the decoding process. 

</ABSTRACT>
<APPLICANTS>
<APPLICANT-NAME>
MATSUSHITA ELECTRIC IND CO LTD
</APPLICANT-NAME>
<APPLICANT-NAME>
MATSUSHITA ELECTRIC INDUSTRIAL CO., LTD.
</APPLICANT-NAME>
</APPLICANTS>
<INVENTORS>
<INVENTOR-NAME>
TAKAHASHI TOSHIYA
</INVENTOR-NAME>
<INVENTOR-NAME>
TAKAHASHI, TOSHIYA
</INVENTOR-NAME>
</INVENTORS>
<DESCRIPTION>
The present invention relates to a compressed picture
editing method for editing compressed picture data, and a
picture coding apparatus for mixing a part or whole of compressed
picture data with other compressed picture data or
real time picture data.A digital video signal possesses an enormous amount of
information, and picture coding is indispensable for transmission
and recording. Various picture coding techniques
have been developed recently, and some of them are produced
as encoders and decoders.As an example, a conventional picture coding apparatus
using the MPEG (moving picture coding experts group) method 
is described below while referring to accompanying drawings.Fig. 15 is a block diagram of the conventional picture
coding apparatus. The apparatus comprises a motion detector
81, a DCT (discrete cosine transform) mode judging circuit
82, a DCT circuit 83, a quantizing circuit 84, a variable
length coding circuit 85, an inverse quantizing circuit 86,
an inverse DCT circuit 87, a frame memory 88, and a motion
compensation circuit 89. Fig. 16 is an explanatory diagram
of motion compensation predicting method, and Fig. 17 is an
explanatory diagram of the frame memory 88 and the motion
compensation circuit 89.In thus constituted conventional picture coding apparatus,
a video signal is scanned by interlacing, and is entered
as being divided into frame units. A picture in a
first frame to be coded, that is, frame t in Fig. 16 is
processed by intraframe coding using the data within the
frame. First, the DCT mode judging circuit 82 detects the
motion of the input picture data in each two-dimensional
block of pixels by, for example, calculating inter-line
differences, determines from the detection result whether to 
perform DCT in frame unit or in field unit, and outputs the
determination result as DCT mode information. The DCT
circuit 83 receives the DCT mode information, and performs
the DCT in either frame unit or field unit to transform the
picture data into transform coefficients. The transform
coefficients are quantized in the quantizing circuit 84, and
variable-length coded in the variable length coding circuit
85 to obtain a coded bit stream which is sent out to a
transmission line. The quantized transform coefficients are
simultaneously fed into the inverse quantizing circuit 86
and the inverse DCT circuit 87 to be returned to real time
data, and stored in the frame memory 88.Generally, pictures are high in degree of correlation,
and DCT causes to concentrate the energy on the transform
coeffic
</DESCRIPTION>
<CLAIMS>
A compressed picture editing method for linking at an editing point
first and second compressed picture data each containing prediction-coded

frames
which have been obtained by prediction-coding employing at least one of a

forward prediction for predicting a picture data in a frame from a preceding frame,
a backward prediction for predicting a picture data in a frame from a succeeding

frame and a bidirectional prediction for predicting a picture data in a frame using
both the forward prediction and backward prediction, said method comprising the

steps of:

receiving the first and second compressed picture data;
decoding a frame of the second compressed picture data at a position
corresponding to the editing point to generate a decoded frame;
intraframe coding the decoded frame to generate a modified second
compressed picture data having an intraframe coded frame at the position

corresponding to the editing point; and
linking the first compressed picture data and the modified second
compressed picture data at the editing point.
A method according to claim 1, wherein said method further
comprises the steps of decoding at least a part of the remaining frames of the

second compressed picture data to obtain decoded frames and at least one of
motion compensation information of said part and motion vector information of

said part, and prediction-coding the decoded frames by using at least one of the
motion compensation information and motion vector information.
A method according to claim 1, wherein said method further
comprises the steps of decoding at least a part of the remaining frames of the

second compressed picture data to obtain decoded frames, and prediction-coding
the decoded frames so as to change a bidirectional prediction frame in the second 

compressed picture data to either a forward prediction frame or a backward
prediction frame or an intraframe coded frame which corresponds to an intracoded

frame which has been used for predicting the bidirectional frame.
A method according to claim 1, wherein said method further
comprises the steps of decoding at least a part of the remaining frames of the

second compressed picture data to obtain decoded frames, and prediction-coding
the decoded frames except for a part or all of intraframe coded frames in the

second compressed picture data.
A method according to claim 1, wherein said method further
comprises the steps of decoding at least a part of the remaining frames of the

second compressed picture data to obtain decoded frames, and prediction-coding
the decoded frames so as to change a part or all of a forward prediction frame, a

backward prediction frame and a bidirectional prediction frame in the second
compressed picture data to an intraframe coded frame.
A method according to claim 1, wherein said method further
comprises the steps of decoding at least a part of the remaining frames of the

second compressed picture data to obtain decoded frames, and prediction-coding
the decoded frames so as to control the amount of coded data to prevent overflow

and underflow of a buffer in a decoding apparatus.
A method according to claim 1, wherein said method further
comprises the steps of decoding at least a part of the remaining frames of the

second compressed picture data to obtain decoded frames, and prediction-coding
the decoded frames to obtain re-coded frames, and adding a dummy data to the re-coded

frames.
A compressed picture editing method for linking at an editing point 
first and second compressed picture data each containing prediction-coded

frames
which have been obtained by dividing picture data in each frame into a plurality

of two-dimensional blocks, transforming each of the two-dimensional
blocks by

selectively using one of a frame-based orthogonal transform and a field-based
orthogonal transform, and prediction-coding each transformed two-dimensional

block by employing at least one of a forward prediction for predicting a picture
data in a frame from a preceding frame, a backward prediction for predicting a

picture data in a frame from a succeeding frame and a bidirectional prediction for
predicting a picture data in a frame using both the forward prediction and

backward prediction, said method comprising the steps of:

receiving the first and second compressed picture data;
decoding a frame of the second compressed picture data at a position
corresponding to the editing point to generate a decoded frame and to obtain at

least one of motion compensation information of the decoded frame, motion vector
information of the decoded frame and orthogonal transform mode information

indicating whether each two-dimensional block in the decoded frame has been
subjected to the frame-based orthogonal transform or the field-based

orthogonal
transform;
coding the decoded frame by using at least one of the motion
compensation information, motion vector information and orthogonal transform

mode information to obtain a re-coded frame and to generate a modified second
compressed picture data containing the re-coded frame; and
linking the first compressed picture data and the modified second
compressed picture data at the editing point.
A compressed picture editing apparatus for linking at an editing
point first and second compressed picture data each containing prediction-coded

frames which have been obtained by prediction-coding employing at least one of
a forward prediction for predicting a picture data in a frame from a preceding

frame, a backward prediction for predicting a picture data in a frame from a 
succeeding frame and a bidirectional prediction for predicting a picture data in a

frame using both the forward prediction and backward prediction, said apparatus
comprising:


means for receiving the first and second compressed picture data;
means for decoding a frame of the second compressed picture data
at a position corresponding to the editing point to generate a decoded frame;
means for intraframe coding the decoded frame to generate a
modified second compressed picture data having an intraframe coded frame at the

position corresponding to the editing point; and
means for linking the first compressed picture data and the modified
second compressed picture data at the editing point.
A compressed picture editing apparatus for linking at an editing
point first and second compressed picture data each containing prediction-coded

frames which have been obtained by dividing picture data in each frame into a
plurality of two-dimensional blocks, transforming each of the two-dimensional

blocks by selectively using one of a frame-based orthogonal transform and a field-based
orthogonal transform, and prediction-coding each transformed two-dimensional

block by employing at least one of a forward prediction for predicting
a picture data in a frame from a preceding frame, a backward prediction for

predicting a picture data in a frame from a succeeding frame and a bidirectional
prediction for predicting a picture data in a frame using both the forward

prediction and backward prediction, said apparatus comprising:

means for receiving the first and second compressed picture data;
means for decoding a frame of the second compressed picture data at a position

corresponding to the editing point to generate a decoded frame and to obtain at
least one of motion compensation information of the decoded frame, motion vector

information of the decoded frame and orthogonal transform mode information
indicating whether each two-dimensional block in the decoded frame has been

subjected to the frame-based orthogonal transform or the field-based
orthogonal 

transform;
means for coding the decoded frame by using at least one of the
motion compensation information, motion vector information and orthogonal

transform mode information to obtain a re-coded frame and to generate a modified
second compressed picture data containing the re-coded frame; and
means for linking the first compressed picture data and the modified
second compressed picture data at the editing point.
A compressed picture mixing method for mixing a first picture data
and a second picture data, the first picture data being a compressed picture data

containing prediction-coded frames which have been obtained by dividing picture
data in each frame into a plurality of two-dimensional blocks, transforming each

of the two-dimensional blocks by selectively using one of a frame-based
orthogonal transform and a field-based orthogonal transform, and prediction-coding

each transformed two-dimensional block by employing at least one of a
forward prediction for predicting a picture data in a frame from a preceding frame,

a backward prediction for predicting a picture dare in a frame from a succeeding
frame and a bidirectional prediction for predicting a picture data in a frame using

both the forward prediction and backward prediction, said method comprising the
steps of:


receiving the first and second compressed picture data;
decoding the first picture data to obtain a decoded first picture data
and to obtain at least one of motion compensation information of the first picture

data, motion vector information of the first picture data and orthogonal transform
mode information indicating whether each two-dimensional block in each frame

of the first picture data has been subjected to the frame-based orthogonal
transform or the field-based orthogonal transform;
adding the decoded first picture data and the second picture data to
obtain a mixed picture data;
coding the mixed picture data by using at least one of the motion 
compensation information, motion vector information and orthogonal transform

mode information.
A compressed picture mixing method mixing a first picture data and
a second picture data, the first picture data being a compressed picture data

containing prediction-coded frames which have been obtained by dividing picture
data in each frame into a plurality of two-dimensional blocks, transforming each

of the two-dimensional blocks by selectively using one of a frame-based
orthogonal transform and a field-based orthogonal transform, and prediction-coding

each transformed two-dimensional block by employing at least one of a
forward prediction for predicting a picture data in a frame from a preceding frame,

a backward prediction for predicting a picture data in a frame from a succeeding
frame and a bidirectional prediction for predicting a picture data in a frame using

both the forward prediction and backward prediction, said method comprising the
steps of:


receiving the first and second picture data;
decoding the first picture data to obtain first orthogonal transform
coefficients of the first picture data and to obtain at least one of motion

compensation information of the first picture data, motion vector information of
the first picture data and orthogonal transform mode information i
ndicating
whether each two-dimensional block in each frame of the first picture data has

been subjected to the frame-based orthogonal transform or the field-based
orthogonal transform;
orthogonal transform coding the second picture data to obtain second
orthogonal transform coefficients;
adding the first orthogonal transform coefficients and the second
orthogonal transform coefficients to obtain mixed orthogonal transform

coefficients; and
coding the mixed orthogonal transform coefficients by using at least
one of the motion compensation information, motion vector information and 

orthogonal transform mode information.
A compressed picture mixing method for mixing a first picture data
and a second picture data, the first picture data being a compressed picture data

containing prediction-coded frames which have been obtained by prediction-coding
employing at least one of a forward prediction for predicting a picture dare

in a frame from a preceding frame, a backward prediction for predicting a picture
data in a frame from a succeeding frame and a bidirectional prediction for

predicting a picture data in a frame using both the forward prediction and
backward prediction, said method comprising the steps of:


receiving the first and second picture data;
decoding the first picture data to obtain a decoded first picture data;
adding at least a part of the decoded first picture data and the second
picture data to obtain a mixed picture data which includes a first part containing

only the decoded first picture data, a second part containing only the second
picture data, and a third part containing both the decoded first picture data and the

second picture data; and
coding the mixed picture data, said coding step coding said first part
by prediction using only a picture data contained in the first picture data, coding

said second part by prediction using only a picture data contained in the second
picture data, and coding said third part by prediction using motion compensation

information derived from one of the first picture data and the second picture data.
A compressed picture mixing apparatus for mixing a first picture
data and a second picture data, the first picture data being a compressed picture

data containing prediction-coded frames which have been obtained by dividing
picture data in each frame into a plurality of two-dimensional blocks, transforming

each of the two-dimensional blocks by selectively using one of a frame-based
orthogonal transform and a field-based orthogonal transform, and prediction-coding

each transformed two-dimensional block by employing at least one of a 
forward prediction for predicting a picture data in a frame from a preceding frame,

a backward prediction for predicting a picture data in a frame from a succeeding
frame and a bidirectional prediction for predicting a picture data in a frame using

both the forward prediction and backward prediction, said apparatus comprising:

means for receiving the first and second picture data;
decoding means for decoding the first picture data to obtain a
decoded first picture data and to obtain at least one of motion compensation

information of the first picture data, motion vector information of the first picture
data and orthogonal transform mode information indicating whether each two-dimensional

block in each frame of the first picture data has been subjected to the
frame-based orthogonal transform or the field-based orthogonal transform;
adding means for adding the decoded first picture data and the
second picture data to obtain a mixed picture data;
encoding means for coding the mixed picture data by using at least
one of the motion compensation information, motion vector information and

orthogonal transform mode information; and
control means receiving the motion compensation information,
motion vector information and orthogonal transform mode information for

controlling the encoding means.
A compressed picture mixing apparatus mixing a first picture data
and a second picture data, the first picture data being a compressed picture data

containing prediction-coded frames which have been obtained by dividing picture
data in each frame into a plurality of two-dimensional blocks, transforming each

of the two-dimensional blocks by selectively using one of a frame-based
orthogonal transform and a field-based orthogonal transform, and prediction-coding

each transformed two-dimensional block by employing at least one of a
forward prediction for predicting a picture data in a frame from a preceding frame,

a backward prediction for predicting a picture data in a frame from a succeeding
frame and a bidirectional prediction for predicting a picture data in a frame using 

both the forward prediction and backward prediction, said apparatus comprising:

means for receiving the first and second picture data; decoding
means for decoding the first picture data to obtain first orthogonal transform

coefficients and to obtain at least one of motion compensation information of the
first picture data, motion vector information of the first picture data and orthogonal

transform mode information indicating whether each two-dimensional
block in

each frame of the first picture data has been subjected to the frame-based
orthogonal transform or the field-based orthogonal transform;
transform means for orthogonal transforming the second picture data
to obtain second orthogonal transform coefficients;
adding means for adding the first orthogonal transform coefficients
and the second orthogonal transform coefficients to obtain mixed orthogonal

transform coefficients;
encoding means for coding the mixed orthogonal transform
coefficients by using at least one of the motion compensation information, motion

vector information and orthogonal transform mode information; and
control means receiving the motion compensation information,
motion vector information and orthogonal transform mode information for

controlling the encoding means.
</CLAIMS>
</TEXT>
</DOC>
